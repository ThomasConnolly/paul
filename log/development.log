Started GET "/" for 127.0.0.1 at 2020-08-28 07:24:14 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.6ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 15.7ms | Allocations: 8222)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1525)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 67.2ms | Allocations: 31811)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | Allocations: 527)
Completed 200 OK in 156ms (Views: 107.6ms | ActiveRecord: 14.1ms | Allocations: 83146)


Started GET "/" for 127.0.0.1 at 2020-08-28 08:00:38 -0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.5ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 15.2ms | Allocations: 8222)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1525)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 66.5ms | Allocations: 31813)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | Allocations: 527)
Completed 200 OK in 155ms (Views: 105.6ms | ActiveRecord: 14.4ms | Allocations: 83134)


Started GET "/" for 127.0.0.1 at 2020-08-28 08:10:24 -0400
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.5ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 15.3ms | Allocations: 8222)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1525)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 67.8ms | Allocations: 31813)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | Allocations: 527)
Completed 200 OK in 157ms (Views: 107.4ms | ActiveRecord: 15.2ms | Allocations: 83134)


Started GET "/leadership/index" for 127.0.0.1 at 2020-08-28 08:11:05 -0400
Processing by LeadershipController#index as HTML
  Rendering leadership/index.html.erb within layouts/application
  Rendered leadership/index.html.erb within layouts/application (Duration: 2.6ms | Allocations: 1354)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1273)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.7ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 9.8ms | Allocations: 4770)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 346)
Completed 200 OK in 30ms (Views: 26.7ms | ActiveRecord: 1.1ms | Allocations: 15912)


Started GET "/sermons" for 127.0.0.1 at 2020-08-28 08:11:10 -0400
Processing by SermonsController#index as HTML
  Rendering sermons/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:3
  [1m[36mRole Load (45.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:3
  [1m[36mSermon Load (161.4ms)[0m  [1m[34mSELECT "sermons".* FROM "sermons" ORDER BY delivered_on DESC[0m
  â†³ app/views/sermons/index.html.erb:9
  [1m[36mHomilist Load (29.1ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.4ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.3ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.3ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.3ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.4ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.3ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.1ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  â†³ app/views/sermons/index.html.erb:13
  Rendered sermons/index.html.erb within layouts/application (Duration: 1143.5ms | Allocations: 643369)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1264)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.6ms | Allocations: 2599)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 358)
Completed 200 OK in 1160ms (Views: 893.5ms | ActiveRecord: 262.9ms | Allocations: 656793)


Started GET "/" for 127.0.0.1 at 2020-08-28 08:24:28 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (1.5ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 6.1ms | Allocations: 3127)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1264)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.7ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.7ms | Allocations: 4839)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 352)
Completed 200 OK in 53ms (Views: 29.7ms | ActiveRecord: 5.2ms | Allocations: 28466)


Started GET "/donations/new" for 127.0.0.1 at 2020-08-28 09:31:56 -0400
  [1m[35m (51.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (74.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 502.9ms | Allocations: 10646)
  Rendered donations/new.html.erb within layouts/application (Duration: 695.9ms | Allocations: 28087)
  Rendered layouts/_header.html.erb (Duration: 15.1ms | Allocations: 1532)
  [1m[36mProfile Load (85.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 226.5ms | Allocations: 16085)
  Rendered layouts/_footer.html.erb (Duration: 78.8ms | Allocations: 531)
Completed 200 OK in 3274ms (Views: 2400.9ms | ActiveRecord: 696.5ms | Allocations: 75883)


DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
Started GET "/" for 127.0.0.1 at 2020-08-28 09:49:00 -0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (19.6ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (23.7ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 23.5ms | Allocations: 8223)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1525)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 50.4ms | Allocations: 31793)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | Allocations: 524)
Completed 200 OK in 312ms (Views: 96.3ms | ActiveRecord: 139.3ms | Allocations: 83110)


Started GET "/" for 127.0.0.1 at 2020-08-28 09:50:11 -0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.5ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 15.5ms | Allocations: 8223)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1525)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 51.4ms | Allocations: 31793)
  Rendered layouts/_footer.html.erb (Duration: 1.6ms | Allocations: 524)
Completed 200 OK in 140ms (Views: 89.2ms | ActiveRecord: 13.8ms | Allocations: 83110)


  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HUaQrKIwB1PX94"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."last_name" = $1 LIMIT $2[0m  [["last_name", "Nye"], ["LIMIT", 1]]
  [1m[35m (29.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users"[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (16.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 319], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 318], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
Started DELETE "/logout" for 127.0.0.1 at 2020-08-28 10:00:18 -0400
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"eSzrINwYmWhO1cXY4iOECczuPPXw8BWdJNoA1kQqhYXhtKmYqQQJmC9GNaU/8kRfqd6Jg20D4AEfny+g8gg/yA=="}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
Redirected to http://localhost:5000/
Completed 302 Found in 38ms (ActiveRecord: 1.3ms | Allocations: 9080)


Started GET "/" for 127.0.0.1 at 2020-08-28 10:00:18 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.5ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 2.7ms | Allocations: 3121)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1264)
  Rendered layouts/_navbar.html.erb (Duration: 2.0ms | Allocations: 631)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 344)
Completed 200 OK in 29ms (Views: 14.0ms | ActiveRecord: 1.9ms | Allocations: 23801)


Started GET "/sign_in" for 127.0.0.1 at 2020-08-28 10:00:21 -0400
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 14.8ms | Allocations: 599)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 174.3ms | Allocations: 10376)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1266)
  Rendered layouts/_navbar.html.erb (Duration: 1.9ms | Allocations: 597)
  Rendered layouts/_footer.html.erb (Duration: 1.3ms | Allocations: 341)
Completed 200 OK in 220ms (Views: 215.0ms | ActiveRecord: 0.0ms | Allocations: 21979)


Started POST "/sign_in" for 127.0.0.1 at 2020-08-28 10:00:34 -0400
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"XjA0Y2Wpdq5Po4pp8OsO9Cd3WPGz84CfYLybWqypxC6sBviYw7Lg1oBkEkZzlHUS6Drce/IprHj3PSjh6piJLQ==", "user"=>{"login"=>"sha craft", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (lower(username) = 'sha craft' OR lower(email) = 'sha craft') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/user.rb:122:in `find_for_database_authentication'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (34.3ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2020-08-28 14:00:34.611755"], ["last_sign_in_at", "2020-06-27 12:20:35.757474"], ["sign_in_count", 3], ["updated_at", "2020-08-28 14:00:34.612077"], ["id", 318]]
  [1m[35m (22.3ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:5000/
Completed 302 Found in 255ms (ActiveRecord: 57.5ms | Allocations: 14259)


Started GET "/" for 127.0.0.1 at 2020-08-28 10:00:34 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.3ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 3.0ms | Allocations: 3127)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1264)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 5.7ms | Allocations: 4765)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 343)
Completed 200 OK in 35ms (Views: 16.6ms | ActiveRecord: 2.4ms | Allocations: 27903)


Started GET "/donations/new" for 127.0.0.1 at 2020-08-28 10:00:38 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 1.9ms | Allocations: 1073)
  Rendered donations/new.html.erb within layouts/application (Duration: 6.8ms | Allocations: 3935)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1263)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 4.3ms | Allocations: 2594)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 346)
Completed 200 OK in 41ms (Views: 20.1ms | ActiveRecord: 6.9ms | Allocations: 22685)


Started POST "/donations" for 127.0.0.1 at 2020-08-28 10:00:50 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"JOwcNAlxjGOK/iBmJ/dMAnUJkV1l426vxeObLoGUvkF++FsugimPiGpHww6uG4sPlK8sN6GqUYkzV45oz3s8sA==", "donation"=>{"dollars"=>"53"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (72.2ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 318], ["created_at", "2020-08-28 14:00:50.541639"], ["updated_at", "2020-08-28 14:00:50.541639"], ["amount", 5300], ["dollars", 53]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (21.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/256
Completed 200 OK in 121ms (ActiveRecord: 94.3ms | Allocations: 13858)


Started GET "/donations/256" for 127.0.0.1 at 2020-08-28 10:00:50 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"256"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  [1m[36mDonation Load (0.7ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 256], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 87.4ms | Allocations: 3537)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1264)
  [1m[36mProfile Load (0.9ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 7.9ms | Allocations: 2592)
  Rendered layouts/_footer.html.erb (Duration: 1.0ms | Allocations: 349)
Completed 200 OK in 131ms (Views: 118.6ms | ActiveRecord: 2.8ms | Allocations: 19258)


Started POST "/checkout/create" for 127.0.0.1 at 2020-08-28 10:00:56 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"LNvUt1BZTHyj4D/UQbOvpitT47oATUu5NMO2bATq30ZUe4EBnctPnO2F9XMB0FWjplVuQcr14uDGgcAuN4S7ZA==", "id"=>"256"}
  [1m[36mDonation Load (0.5ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 256], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 30.0ms | Allocations: 182)
Completed 200 OK in 939ms (Views: 39.8ms | ActiveRecord: 0.8ms | Allocations: 11491)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 10:00:57 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HL88THiibShxDkj3wkIhsUf", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598623257, "data"=>{"object"=>{"id"=>"pi_1HL88THiibShxDkjwQc9akGp", "object"=>"payment_intent", "amount"=>5300, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HL88THiibShxDkjwQc9akGp"}, "client_secret"=>"pi_1HL88THiibShxDkjwQc9akGp_secret_RxqOINKd4xOGHIkpVzSJya6yN", "confirmation_method"=>"automatic", "created"=>1598623257, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_tk9xmungO4PZDQ", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HL88THiibShxDkj3wkIhsUf", "data"=>{"object"=>{"id"=>"pi_1HL88THiibShxDkjwQc9akGp", "object"=>"payment_intent", "amount"=>5300, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HL88THiibShxDkjwQc9akGp"}, "client_secret"=>"pi_1HL88THiibShxDkjwQc9akGp_secret_RxqOINKd4xOGHIkpVzSJya6yN", "confirmation_method"=>"automatic", "created"=>1598623257, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (45.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HL88THiibShxDkj3wkIhsUf"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (58.0ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HL88THiibShxDkj3wkIhsUf"], ["data", "{\"id\":\"evt_1HL88THiibShxDkj3wkIhsUf\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598623257,\"data\":{\"object\":{\"id\":\"pi_1HL88THiibShxDkjwQc9akGp\",\"object\":\"payment_intent\",\"amount\":5300,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HL88THiibShxDkjwQc9akGp\"},\"client_secret\":\"pi_1HL88THiibShxDkjwQc9akGp_secret_RxqOINKd4xOGHIkpVzSJya6yN\",\"confirmation_method\":\"automatic\",\"created\":1598623257,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_tk9xmungO4PZDQ\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HL88THiibShxDkj3wkIhsUf\",\"data\":{\"object\":{\"id\":\"pi_1HL88THiibShxDkjwQc9akGp\",\"object\":\"payment_intent\",\"amount\":5300,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HL88THiibShxDkjwQc9akGp\"},\"client_secret\":\"pi_1HL88THiibShxDkjwQc9akGp_secret_RxqOINKd4xOGHIkpVzSJya6yN\",\"confirmation_method\":\"automatic\",\"created\":1598623257,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-08-28 14:00:57.679358"], ["updated_at", "2020-08-28 14:00:57.679358"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 3267de2d-4df2-4fe6-aab2-377655162504) to Async(default) with arguments: 285
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504] Performing ProcessEventsJob (Job ID: 3267de2d-4df2-4fe6-aab2-377655162504) from Async(default) enqueued at 2020-08-28T14:00:57Z with arguments: 285
Completed 200 OK in 210ms (Views: 3.9ms | ActiveRecord: 134.5ms | Allocations: 26167)


[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   [1m[36mWebhookEvent Load (0.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 285], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-28 14:00:57.861155"], ["id", 285]]
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `customer' for nil:NilClass"], ["updated_at", "2020-08-28 14:00:57.878364"], ["id", 285]]
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [3267de2d-4df2-4fe6-aab2-377655162504] Performed ProcessEventsJob (Job ID: 3267de2d-4df2-4fe6-aab2-377655162504) from Async(default) in 97.53ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 10:01:39 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HL898HiibShxDkjw6cTmtq1", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598623297, "data"=>{"object"=>{"id"=>"pm_1HL896HiibShxDkjjOFLkXnt", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Craft", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1598623296, "customer"=>"cus_HXiST3X80AjQq4", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_yoRJXEGhBJQly2", "idempotency_key"=>nil}, "type"=>"payment_method.attached", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HL898HiibShxDkjw6cTmtq1", "data"=>{"object"=>{"id"=>"pm_1HL896HiibShxDkjjOFLkXnt", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Craft", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1598623296, "customer"=>"cus_HXiST3X80AjQq4", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}}}
  [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HL898HiibShxDkjw6cTmtq1"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (12.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HL898HiibShxDkjw6cTmtq1"], ["data", "{\"id\":\"evt_1HL898HiibShxDkjw6cTmtq1\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598623297,\"data\":{\"object\":{\"id\":\"pm_1HL896HiibShxDkjjOFLkXnt\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Craft\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1598623296,\"customer\":\"cus_HXiST3X80AjQq4\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_yoRJXEGhBJQly2\",\"idempotency_key\":null},\"type\":\"payment_method.attached\",\"webhook_event\":{\"id\":\"evt_1HL898HiibShxDkjw6cTmtq1\",\"data\":{\"object\":{\"id\":\"pm_1HL896HiibShxDkjjOFLkXnt\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Craft\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1598623296,\"customer\":\"cus_HXiST3X80AjQq4\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}}}}"], ["created_at", "2020-08-28 14:01:39.095258"], ["updated_at", "2020-08-28 14:01:39.095258"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (11.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: f9fc7b97-a02d-4e33-adfa-82fca663c9fb) to Async(default) with arguments: 286
Completed 200 OK in 54ms (Views: 0.6ms | ActiveRecord: 24.8ms | Allocations: 20944)


[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb] Performing ProcessEventsJob (Job ID: f9fc7b97-a02d-4e33-adfa-82fca663c9fb) from Async(default) enqueued at 2020-08-28T14:01:39Z with arguments: 286
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 286], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-28 14:01:39.155493"], ["id", 286]]
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `customer' for nil:NilClass"], ["updated_at", "2020-08-28 14:01:39.169187"], ["id", 286]]
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 10:01:39 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HL898HiibShxDkjS3WKNA9n", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598623298, "data"=>{"object"=>{"id"=>"pi_1HL88THiibShxDkjwQc9akGp", "object"=>"payment_intent", "amount"=>5300, "amount_capturable"=>0, "amount_received"=>5300, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HL897HiibShxDkj53rCg3YM", "object"=>"charge", "amount"=>5300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HL898HiibShxDkjC0NnmC5h", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Craft", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598623297, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>28, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HL88THiibShxDkjwQc9akGp", "payment_method"=>"pm_1HL896HiibShxDkjjOFLkXnt", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"cha@cha.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HL897HiibShxDkj53rCg3YM/rcpt_Huy5xu57gK26fcUYfBPq7P008eNLlnQ", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HL897HiibShxDkj53rCg3YM/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HL88THiibShxDkjwQc9akGp"}, "client_secret"=>"pi_1HL88THiibShxDkjwQc9akGp_secret_RxqOINKd4xOGHIkpVzSJya6yN", "confirmation_method"=>"automatic", "created"=>1598623257, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HL896HiibShxDkjjOFLkXnt", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"cha@cha.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_yoRJXEGhBJQly2", "idempotency_key"=>nil}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HL898HiibShxDkjS3WKNA9n", "data"=>{"object"=>{"id"=>"pi_1HL88THiibShxDkjwQc9akGp", "object"=>"payment_intent", "amount"=>5300, "amount_capturable"=>0, "amount_received"=>5300, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HL897HiibShxDkj53rCg3YM", "object"=>"charge", "amount"=>5300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HL898HiibShxDkjC0NnmC5h", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Craft", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598623297, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>28, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HL88THiibShxDkjwQc9akGp", "payment_method"=>"pm_1HL896HiibShxDkjjOFLkXnt", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"cha@cha.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HL897HiibShxDkj53rCg3YM/rcpt_Huy5xu57gK26fcUYfBPq7P008eNLlnQ", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HL897HiibShxDkj53rCg3YM/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HL88THiibShxDkjwQc9akGp"}, "client_secret"=>"pi_1HL88THiibShxDkjwQc9akGp_secret_RxqOINKd4xOGHIkpVzSJya6yN", "confirmation_method"=>"automatic", "created"=>1598623257, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HL896HiibShxDkjjOFLkXnt", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"cha@cha.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [f9fc7b97-a02d-4e33-adfa-82fca663c9fb] Performed ProcessEventsJob (Job ID: f9fc7b97-a02d-4e33-adfa-82fca663c9fb) from Async(default) in 30.97ms
  [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HL898HiibShxDkjS3WKNA9n"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.5ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HL898HiibShxDkjS3WKNA9n"], ["data", "{\"id\":\"evt_1HL898HiibShxDkjS3WKNA9n\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598623298,\"data\":{\"object\":{\"id\":\"pi_1HL88THiibShxDkjwQc9akGp\",\"object\":\"payment_intent\",\"amount\":5300,\"amount_capturable\":0,\"amount_received\":5300,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HL897HiibShxDkj53rCg3YM\",\"object\":\"charge\",\"amount\":5300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HL898HiibShxDkjC0NnmC5h\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Craft\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598623297,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":28,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HL88THiibShxDkjwQc9akGp\",\"payment_method\":\"pm_1HL896HiibShxDkjjOFLkXnt\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"cha@cha.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HL897HiibShxDkj53rCg3YM/rcpt_Huy5xu57gK26fcUYfBPq7P008eNLlnQ\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HL897HiibShxDkj53rCg3YM/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HL88THiibShxDkjwQc9akGp\"},\"client_secret\":\"pi_1HL88THiibShxDkjwQc9akGp_secret_RxqOINKd4xOGHIkpVzSJya6yN\",\"confirmation_method\":\"automatic\",\"created\":1598623257,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HL896HiibShxDkjjOFLkXnt\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"cha@cha.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_yoRJXEGhBJQly2\",\"idempotency_key\":null},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HL898HiibShxDkjS3WKNA9n\",\"data\":{\"object\":{\"id\":\"pi_1HL88THiibShxDkjwQc9akGp\",\"object\":\"payment_intent\",\"amount\":5300,\"amount_capturable\":0,\"amount_received\":5300,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HL897HiibShxDkj53rCg3YM\",\"object\":\"charge\",\"amount\":5300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HL898HiibShxDkjC0NnmC5h\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Craft\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598623297,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":28,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HL88THiibShxDkjwQc9akGp\",\"payment_method\":\"pm_1HL896HiibShxDkjjOFLkXnt\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"cha@cha.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HL897HiibShxDkj53rCg3YM/rcpt_Huy5xu57gK26fcUYfBPq7P008eNLlnQ\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HL897HiibShxDkj53rCg3YM/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HL88THiibShxDkjwQc9akGp\"},\"client_secret\":\"pi_1HL88THiibShxDkjwQc9akGp_secret_RxqOINKd4xOGHIkpVzSJya6yN\",\"confirmation_method\":\"automatic\",\"created\":1598623257,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HL896HiibShxDkjjOFLkXnt\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"cha@cha.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-08-28 14:01:39.187181"], ["updated_at", "2020-08-28 14:01:39.187181"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (12.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 5ab647a7-36c7-4484-8890-c16ea013df2f) to Async(default) with arguments: 287
Completed 200 OK in 44ms (Views: 2.1ms | ActiveRecord: 13.7ms | Allocations: 42358)


[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f] Performing ProcessEventsJob (Job ID: 5ab647a7-36c7-4484-8890-c16ea013df2f) from Async(default) enqueued at 2020-08-28T14:01:39Z with arguments: 287
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 287], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-28 14:01:39.230037"], ["id", 287]]
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   [1m[35m (18.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `customer' for nil:NilClass"], ["updated_at", "2020-08-28 14:01:39.260458"], ["id", 287]]
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   [1m[35m (9.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [5ab647a7-36c7-4484-8890-c16ea013df2f] Performed ProcessEventsJob (Job ID: 5ab647a7-36c7-4484-8890-c16ea013df2f) from Async(default) in 51.69ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 10:01:39 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HL899HiibShxDkjGxOp6Sit", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598623299, "data"=>{"object"=>{"id"=>"cs_test_ALZrFPIZWgidzJsEu3bBJWtTHViVJcmFoEs4GVrCMnOA2MAEXQe2G6VJ", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>5300, "amount_total"=>5300, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"256", "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "customer_email"=>nil, "display_items"=>[{"amount"=>5300, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HL88THiibShxDkjwQc9akGp", "payment_method_types"=>["card"], "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"checkout.session.completed", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HL899HiibShxDkjGxOp6Sit", "data"=>{"object"=>{"id"=>"cs_test_ALZrFPIZWgidzJsEu3bBJWtTHViVJcmFoEs4GVrCMnOA2MAEXQe2G6VJ", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>5300, "amount_total"=>5300, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"256", "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "customer_email"=>nil, "display_items"=>[{"amount"=>5300, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HL88THiibShxDkjwQc9akGp", "payment_method_types"=>["card"], "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}}}
  [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HL899HiibShxDkjGxOp6Sit"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HL899HiibShxDkjGxOp6Sit"], ["data", "{\"id\":\"evt_1HL899HiibShxDkjGxOp6Sit\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598623299,\"data\":{\"object\":{\"id\":\"cs_test_ALZrFPIZWgidzJsEu3bBJWtTHViVJcmFoEs4GVrCMnOA2MAEXQe2G6VJ\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":5300,\"amount_total\":5300,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"256\",\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"customer_email\":null,\"display_items\":[{\"amount\":5300,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HL88THiibShxDkjwQc9akGp\",\"payment_method_types\":[\"card\"],\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"checkout.session.completed\",\"webhook_event\":{\"id\":\"evt_1HL899HiibShxDkjGxOp6Sit\",\"data\":{\"object\":{\"id\":\"cs_test_ALZrFPIZWgidzJsEu3bBJWtTHViVJcmFoEs4GVrCMnOA2MAEXQe2G6VJ\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":5300,\"amount_total\":5300,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"256\",\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"customer_email\":null,\"display_items\":[{\"amount\":5300,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HL88THiibShxDkjwQc9akGp\",\"payment_method_types\":[\"card\"],\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}}}}"], ["created_at", "2020-08-28 14:01:39.641068"], ["updated_at", "2020-08-28 14:01:39.641068"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 62f5dc54-9246-44b3-bfc8-2cb94c3b4365) to Async(default) with arguments: 288
Completed 200 OK in 41ms (Views: 0.8ms | ActiveRecord: 14.7ms | Allocations: 19113)


[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365] Performing ProcessEventsJob (Job ID: 62f5dc54-9246-44b3-bfc8-2cb94c3b4365) from Async(default) enqueued at 2020-08-28T14:01:39Z with arguments: 288
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-28 14:01:39.682557"], ["id", 288]]
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HXiST3X80AjQq4"], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   â†³ app/services/events/stripe_handler.rb:13:in `process'
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE (256) LIMIT $1[0m  [["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "PG::DatatypeMismatch: ERROR:  argument of WHERE must be type boolean, not type integer\nLINE 1: SELECT \"donations\".* FROM \"donations\" WHERE (256) LIMIT $1\n                                                     ^\n"], ["updated_at", "2020-08-28 14:01:39.707685"], ["id", 288]]
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [62f5dc54-9246-44b3-bfc8-2cb94c3b4365] Performed ProcessEventsJob (Job ID: 62f5dc54-9246-44b3-bfc8-2cb94c3b4365) from Async(default) in 44.2ms
Started GET "/checkout/success?session_idcs_test_ALZrFPIZWgidzJsEu3bBJWtTHViVJcmFoEs4GVrCMnOA2MAEXQe2G6VJ" for 127.0.0.1 at 2020-08-28 10:01:41 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_ALZrFPIZWgidzJsEu3bBJWtTHViVJcmFoEs4GVrCMnOA2MAEXQe2G6VJ"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 14.0ms | Allocations: 80)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1273)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 6.9ms | Allocations: 4735)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 362)
Completed 200 OK in 33ms (Views: 30.6ms | ActiveRecord: 0.6ms | Allocations: 14506)


  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 288], ["LIMIT", 1]]
  [1m[36mDonation Load (0.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 256], ["LIMIT", 1]]
Started GET "/donations/new" for 127.0.0.1 at 2020-08-28 14:48:12 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 1.2ms | Allocations: 780)
  Rendered donations/new.html.erb within layouts/application (Duration: 27.0ms | Allocations: 15342)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1264)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 13.5ms | Allocations: 11859)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 351)
Completed 200 OK in 59ms (Views: 48.2ms | ActiveRecord: 1.2ms | Allocations: 42446)


Started POST "/donations" for 127.0.0.1 at 2020-08-28 14:48:19 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"/fGp7MetOw5F1dEAopjTCZqlKLdcTmq/UtpyvjJy7l2n5e72TPU45aVsMmgrdBQEewOV3ZgHVZmkbmf4fJ1srA==", "donation"=>{"dollars"=>"35"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (0.7ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 318], ["created_at", "2020-08-28 18:48:19.356674"], ["updated_at", "2020-08-28 18:48:19.356674"], ["amount", 3500], ["dollars", 35]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/257
Completed 200 OK in 37ms (ActiveRecord: 13.6ms | Allocations: 13783)


Started GET "/donations/257" for 127.0.0.1 at 2020-08-28 14:48:19 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"257"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  [1m[36mDonation Load (0.3ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 257], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 5.6ms | Allocations: 2291)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1263)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.5ms | Allocations: 2574)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 346)
Completed 200 OK in 29ms (Views: 19.9ms | ActiveRecord: 1.5ms | Allocations: 17834)


Started POST "/checkout/create" for 127.0.0.1 at 2020-08-28 14:48:21 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"0TVF5EgVLuMrgjW6OmVGcc4RInrH3e5/GSNQyRTdjvaplRBShYctA2Xn/x16Brx0QxevgQ1lRybrYSaLJ7Pq1A==", "id"=>"257"}
  [1m[36mDonation Load (0.6ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 257], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 0.2ms | Allocations: 12)
Completed 200 OK in 962ms (Views: 3.7ms | ActiveRecord: 1.1ms | Allocations: 9480)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 14:48:22 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLCccHiibShxDkjlkrx05pa", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598640502, "data"=>{"object"=>{"id"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "object"=>"payment_intent", "amount"=>3500, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HLCccHiibShxDkjfQAIl2LV"}, "client_secret"=>"pi_1HLCccHiibShxDkjfQAIl2LV_secret_oXVLH89yK1DTvXXV0LVqrLEqJ", "confirmation_method"=>"automatic", "created"=>1598640502, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_dTY1B5mSQGUIIH", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLCccHiibShxDkjlkrx05pa", "data"=>{"object"=>{"id"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "object"=>"payment_intent", "amount"=>3500, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HLCccHiibShxDkjfQAIl2LV"}, "client_secret"=>"pi_1HLCccHiibShxDkjfQAIl2LV_secret_oXVLH89yK1DTvXXV0LVqrLEqJ", "confirmation_method"=>"automatic", "created"=>1598640502, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLCccHiibShxDkjlkrx05pa"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (16.3ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLCccHiibShxDkjlkrx05pa"], ["data", "{\"id\":\"evt_1HLCccHiibShxDkjlkrx05pa\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598640502,\"data\":{\"object\":{\"id\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"object\":\"payment_intent\",\"amount\":3500,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HLCccHiibShxDkjfQAIl2LV\"},\"client_secret\":\"pi_1HLCccHiibShxDkjfQAIl2LV_secret_oXVLH89yK1DTvXXV0LVqrLEqJ\",\"confirmation_method\":\"automatic\",\"created\":1598640502,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_dTY1B5mSQGUIIH\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HLCccHiibShxDkjlkrx05pa\",\"data\":{\"object\":{\"id\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"object\":\"payment_intent\",\"amount\":3500,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HLCccHiibShxDkjfQAIl2LV\"},\"client_secret\":\"pi_1HLCccHiibShxDkjfQAIl2LV_secret_oXVLH89yK1DTvXXV0LVqrLEqJ\",\"confirmation_method\":\"automatic\",\"created\":1598640502,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-08-28 18:48:23.076382"], ["updated_at", "2020-08-28 18:48:23.076382"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (56.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d) to Async(default) with arguments: 289
Completed 200 OK in 146ms (Views: 2.9ms | ActiveRecord: 74.5ms | Allocations: 24927)


[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d] Performing ProcessEventsJob (Job ID: 75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d) from Async(default) enqueued at 2020-08-28T18:48:23Z with arguments: 289
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   [1m[36mWebhookEvent Load (6.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 289], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   [1m[36mWebhookEvent Update (0.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-28 18:48:23.273719"], ["id", 289]]
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   [1m[35m (101.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   [1m[36mWebhookEvent Update (1.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `customer' for nil:NilClass"], ["updated_at", "2020-08-28 18:48:23.434930"], ["id", 289]]
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   [1m[35m (15.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d] Performed ProcessEventsJob (Job ID: 75bf9a75-5b8f-4aff-85a2-1fb46fb15a5d) from Async(default) in 281.49ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 14:49:08 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLCdLHiibShxDkjSbiSj3jt", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598640547, "data"=>{"object"=>{"id"=>"ch_1HLCdKHiibShxDkjRSo2MqrW", "object"=>"charge", "amount"=>3500, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HLCdLHiibShxDkjMIwaYW96", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33444", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Cha", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598640546, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>53, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "payment_method"=>"pm_1HLCdJHiibShxDkjgPbUlnuW", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"cha@cha.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLCdKHiibShxDkjRSo2MqrW/rcpt_Hv2ijVLnWmuMV8qiaumpyCg3mpxOJYX", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HLCdKHiibShxDkjRSo2MqrW/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_WhBSD4ioUD3FJK", "idempotency_key"=>nil}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLCdLHiibShxDkjSbiSj3jt", "data"=>{"object"=>{"id"=>"ch_1HLCdKHiibShxDkjRSo2MqrW", "object"=>"charge", "amount"=>3500, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HLCdLHiibShxDkjMIwaYW96", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33444", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Cha", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598640546, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>53, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "payment_method"=>"pm_1HLCdJHiibShxDkjgPbUlnuW", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"cha@cha.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLCdKHiibShxDkjRSo2MqrW/rcpt_Hv2ijVLnWmuMV8qiaumpyCg3mpxOJYX", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HLCdKHiibShxDkjRSo2MqrW/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLCdLHiibShxDkjSbiSj3jt"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 14:49:08 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLCdLHiibShxDkjAIlI783p", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598640546, "data"=>{"object"=>{"id"=>"pm_1HLCdJHiibShxDkjgPbUlnuW", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33444", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Cha", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1598640545, "customer"=>"cus_HXiST3X80AjQq4", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_WhBSD4ioUD3FJK", "idempotency_key"=>nil}, "type"=>"payment_method.attached", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLCdLHiibShxDkjAIlI783p", "data"=>{"object"=>{"id"=>"pm_1HLCdJHiibShxDkjgPbUlnuW", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33444", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Cha", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1598640545, "customer"=>"cus_HXiST3X80AjQq4", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}}}
  [1m[36mWebhookEvent Create (13.6ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLCdLHiibShxDkjSbiSj3jt"], ["data", "{\"id\":\"evt_1HLCdLHiibShxDkjSbiSj3jt\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598640547,\"data\":{\"object\":{\"id\":\"ch_1HLCdKHiibShxDkjRSo2MqrW\",\"object\":\"charge\",\"amount\":3500,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HLCdLHiibShxDkjMIwaYW96\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33444\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Cha\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598640546,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":53,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"payment_method\":\"pm_1HLCdJHiibShxDkjgPbUlnuW\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"cha@cha.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLCdKHiibShxDkjRSo2MqrW/rcpt_Hv2ijVLnWmuMV8qiaumpyCg3mpxOJYX\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HLCdKHiibShxDkjRSo2MqrW/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_WhBSD4ioUD3FJK\",\"idempotency_key\":null},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HLCdLHiibShxDkjSbiSj3jt\",\"data\":{\"object\":{\"id\":\"ch_1HLCdKHiibShxDkjRSo2MqrW\",\"object\":\"charge\",\"amount\":3500,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HLCdLHiibShxDkjMIwaYW96\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33444\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Cha\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598640546,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":53,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"payment_method\":\"pm_1HLCdJHiibShxDkjgPbUlnuW\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"cha@cha.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLCdKHiibShxDkjRSo2MqrW/rcpt_Hv2ijVLnWmuMV8qiaumpyCg3mpxOJYX\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HLCdKHiibShxDkjRSo2MqrW/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-08-28 18:49:08.052513"], ["updated_at", "2020-08-28 18:49:08.052513"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Load (11.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLCdLHiibShxDkjAIlI783p"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 14:49:08 -0400
  [1m[35m (19.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: b8ed59bb-35ad-456b-887c-b31ab2f92142) to Async(default) with arguments: 290
Completed 200 OK in 111ms (Views: 2.5ms | ActiveRecord: 34.7ms | Allocations: 42345)


  [1m[36mWebhookEvent Create (33.0ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLCdLHiibShxDkjAIlI783p"], ["data", "{\"id\":\"evt_1HLCdLHiibShxDkjAIlI783p\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598640546,\"data\":{\"object\":{\"id\":\"pm_1HLCdJHiibShxDkjgPbUlnuW\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33444\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Cha\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1598640545,\"customer\":\"cus_HXiST3X80AjQq4\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_WhBSD4ioUD3FJK\",\"idempotency_key\":null},\"type\":\"payment_method.attached\",\"webhook_event\":{\"id\":\"evt_1HLCdLHiibShxDkjAIlI783p\",\"data\":{\"object\":{\"id\":\"pm_1HLCdJHiibShxDkjgPbUlnuW\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33444\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Cha\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1598640545,\"customer\":\"cus_HXiST3X80AjQq4\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}}}}"], ["created_at", "2020-08-28 18:49:08.106688"], ["updated_at", "2020-08-28 18:49:08.106688"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142] Performing ProcessEventsJob (Job ID: b8ed59bb-35ad-456b-887c-b31ab2f92142) from Async(default) enqueued at 2020-08-28T18:49:08Z with arguments: 290
  [1m[35m (11.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 194fe2db-b619-496a-99d9-92db8968c6b7) to Async(default) with arguments: 291
Completed 200 OK in 87ms (Views: 1.0ms | ActiveRecord: 55.9ms | Allocations: 55544)


Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLCdLHiibShxDkjtwhSROmN", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598640547, "data"=>{"object"=>{"id"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "object"=>"payment_intent", "amount"=>3500, "amount_capturable"=>0, "amount_received"=>3500, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HLCdKHiibShxDkjRSo2MqrW", "object"=>"charge", "amount"=>3500, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HLCdLHiibShxDkjMIwaYW96", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33444", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Cha", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598640546, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>53, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "payment_method"=>"pm_1HLCdJHiibShxDkjgPbUlnuW", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"cha@cha.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLCdKHiibShxDkjRSo2MqrW/rcpt_Hv2ijVLnWmuMV8qiaumpyCg3mpxOJYX", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HLCdKHiibShxDkjRSo2MqrW/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HLCccHiibShxDkjfQAIl2LV"}, "client_secret"=>"pi_1HLCccHiibShxDkjfQAIl2LV_secret_oXVLH89yK1DTvXXV0LVqrLEqJ", "confirmation_method"=>"automatic", "created"=>1598640502, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HLCdJHiibShxDkjgPbUlnuW", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"cha@cha.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_WhBSD4ioUD3FJK", "idempotency_key"=>nil}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLCdLHiibShxDkjtwhSROmN", "data"=>{"object"=>{"id"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "object"=>"payment_intent", "amount"=>3500, "amount_capturable"=>0, "amount_received"=>3500, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HLCdKHiibShxDkjRSo2MqrW", "object"=>"charge", "amount"=>3500, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HLCdLHiibShxDkjMIwaYW96", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33444", "state"=>nil}, "email"=>"cha@cha.com", "name"=>"Sha Cha", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598640546, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>53, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "payment_method"=>"pm_1HLCdJHiibShxDkjgPbUlnuW", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"cha@cha.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLCdKHiibShxDkjRSo2MqrW/rcpt_Hv2ijVLnWmuMV8qiaumpyCg3mpxOJYX", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HLCdKHiibShxDkjRSo2MqrW/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HLCccHiibShxDkjfQAIl2LV"}, "client_secret"=>"pi_1HLCccHiibShxDkjfQAIl2LV_secret_oXVLH89yK1DTvXXV0LVqrLEqJ", "confirmation_method"=>"automatic", "created"=>1598640502, "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HLCdJHiibShxDkjgPbUlnuW", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"cha@cha.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7] Performing ProcessEventsJob (Job ID: 194fe2db-b619-496a-99d9-92db8968c6b7) from Async(default) enqueued at 2020-08-28T18:49:08Z with arguments: 291
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 291], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   â†³ app/jobs/process_events_job.rb:5:in `perform'
  [1m[36mWebhookEvent Load (0.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLCdLHiibShxDkjtwhSROmN"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   [1m[35m (5.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   [1m[36mWebhookEvent Update (3.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-28 18:49:08.189190"], ["id", 291]]
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   [1m[36mWebhookEvent Load (2.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 290], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   â†³ app/jobs/process_events_job.rb:5:in `perform'
  [1m[36mWebhookEvent Create (5.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLCdLHiibShxDkjtwhSROmN"], ["data", "{\"id\":\"evt_1HLCdLHiibShxDkjtwhSROmN\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598640547,\"data\":{\"object\":{\"id\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"object\":\"payment_intent\",\"amount\":3500,\"amount_capturable\":0,\"amount_received\":3500,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HLCdKHiibShxDkjRSo2MqrW\",\"object\":\"charge\",\"amount\":3500,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HLCdLHiibShxDkjMIwaYW96\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33444\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Cha\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598640546,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":53,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"payment_method\":\"pm_1HLCdJHiibShxDkjgPbUlnuW\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"cha@cha.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLCdKHiibShxDkjRSo2MqrW/rcpt_Hv2ijVLnWmuMV8qiaumpyCg3mpxOJYX\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HLCdKHiibShxDkjRSo2MqrW/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HLCccHiibShxDkjfQAIl2LV\"},\"client_secret\":\"pi_1HLCccHiibShxDkjfQAIl2LV_secret_oXVLH89yK1DTvXXV0LVqrLEqJ\",\"confirmation_method\":\"automatic\",\"created\":1598640502,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HLCdJHiibShxDkjgPbUlnuW\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"cha@cha.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_WhBSD4ioUD3FJK\",\"idempotency_key\":null},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HLCdLHiibShxDkjtwhSROmN\",\"data\":{\"object\":{\"id\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"object\":\"payment_intent\",\"amount\":3500,\"amount_capturable\":0,\"amount_received\":3500,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HLCdKHiibShxDkjRSo2MqrW\",\"object\":\"charge\",\"amount\":3500,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HLCdLHiibShxDkjMIwaYW96\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33444\",\"state\":null},\"email\":\"cha@cha.com\",\"name\":\"Sha Cha\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598640546,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":53,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"payment_method\":\"pm_1HLCdJHiibShxDkjgPbUlnuW\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"cha@cha.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLCdKHiibShxDkjRSo2MqrW/rcpt_Hv2ijVLnWmuMV8qiaumpyCg3mpxOJYX\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HLCdKHiibShxDkjRSo2MqrW/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HLCccHiibShxDkjfQAIl2LV\"},\"client_secret\":\"pi_1HLCccHiibShxDkjfQAIl2LV_secret_oXVLH89yK1DTvXXV0LVqrLEqJ\",\"confirmation_method\":\"automatic\",\"created\":1598640502,\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HLCdJHiibShxDkjgPbUlnuW\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"cha@cha.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-08-28 18:49:08.192593"], ["updated_at", "2020-08-28 18:49:08.192593"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   [1m[36mWebhookEvent Update (4.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-28 18:49:08.204128"], ["id", 290]]
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 59734748-202d-45bf-b518-45c3c35e1cd4) to Async(default) with arguments: 292
Completed 200 OK in 51ms (Views: 1.6ms | ActiveRecord: 14.7ms | Allocations: 60540)


[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4] Performing ProcessEventsJob (Job ID: 59734748-202d-45bf-b518-45c3c35e1cd4) from Async(default) enqueued at 2020-08-28T18:49:08Z with arguments: 292
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   [1m[35m (15.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   [1m[36mWebhookEvent Update (2.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `customer' for nil:NilClass"], ["updated_at", "2020-08-28 18:49:08.214973"], ["id", 291]]
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   [1m[36mWebhookEvent Load (1.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 292], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   [1m[36mWebhookEvent Update (1.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `customer' for nil:NilClass"], ["updated_at", "2020-08-28 18:49:08.242114"], ["id", 290]]
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [194fe2db-b619-496a-99d9-92db8968c6b7] Performed ProcessEventsJob (Job ID: 194fe2db-b619-496a-99d9-92db8968c6b7) from Async(default) in 74.88ms
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   [1m[36mWebhookEvent Update (1.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-28 18:49:08.248378"], ["id", 292]]
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [b8ed59bb-35ad-456b-887c-b31ab2f92142] Performed ProcessEventsJob (Job ID: b8ed59bb-35ad-456b-887c-b31ab2f92142) from Async(default) in 110.91ms
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   [1m[35m (14.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `customer' for nil:NilClass"], ["updated_at", "2020-08-28 18:49:08.278672"], ["id", 292]]
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 14:49:08 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLCdMHiibShxDkjXoNqzT9q", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598640548, "data"=>{"object"=>{"id"=>"cs_test_WYXPFf4w9uWu8JSSgjvAUOAP0VkiVQsSvvggwEIbN205xmJuGU396tgh", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>3500, "amount_total"=>3500, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"257", "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "customer_email"=>nil, "display_items"=>[{"amount"=>3500, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "payment_method_types"=>["card"], "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"checkout.session.completed", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLCdMHiibShxDkjXoNqzT9q", "data"=>{"object"=>{"id"=>"cs_test_WYXPFf4w9uWu8JSSgjvAUOAP0VkiVQsSvvggwEIbN205xmJuGU396tgh", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>3500, "amount_total"=>3500, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"257", "currency"=>"usd", "customer"=>"cus_HXiST3X80AjQq4", "customer_email"=>nil, "display_items"=>[{"amount"=>3500, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HLCccHiibShxDkjfQAIl2LV", "payment_method_types"=>["card"], "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}}}
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   [1m[35m (11.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [59734748-202d-45bf-b518-45c3c35e1cd4] Performed ProcessEventsJob (Job ID: 59734748-202d-45bf-b518-45c3c35e1cd4) from Async(default) in 59.44ms
  [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLCdMHiibShxDkjXoNqzT9q"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLCdMHiibShxDkjXoNqzT9q"], ["data", "{\"id\":\"evt_1HLCdMHiibShxDkjXoNqzT9q\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598640548,\"data\":{\"object\":{\"id\":\"cs_test_WYXPFf4w9uWu8JSSgjvAUOAP0VkiVQsSvvggwEIbN205xmJuGU396tgh\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":3500,\"amount_total\":3500,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"257\",\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"customer_email\":null,\"display_items\":[{\"amount\":3500,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"payment_method_types\":[\"card\"],\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"checkout.session.completed\",\"webhook_event\":{\"id\":\"evt_1HLCdMHiibShxDkjXoNqzT9q\",\"data\":{\"object\":{\"id\":\"cs_test_WYXPFf4w9uWu8JSSgjvAUOAP0VkiVQsSvvggwEIbN205xmJuGU396tgh\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":3500,\"amount_total\":3500,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"257\",\"currency\":\"usd\",\"customer\":\"cus_HXiST3X80AjQq4\",\"customer_email\":null,\"display_items\":[{\"amount\":3500,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HLCccHiibShxDkjfQAIl2LV\",\"payment_method_types\":[\"card\"],\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}}}}"], ["created_at", "2020-08-28 18:49:08.300454"], ["updated_at", "2020-08-28 18:49:08.300454"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 15666581-25b4-40b3-9259-b47f07ce7373) to Async(default) with arguments: 293
Completed 200 OK in 53ms (Views: 3.8ms | ActiveRecord: 11.3ms | Allocations: 19934)


[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373] Performing ProcessEventsJob (Job ID: 15666581-25b4-40b3-9259-b47f07ce7373) from Async(default) enqueued at 2020-08-28T18:49:08Z with arguments: 293
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[36mWebhookEvent Load (7.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 293], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-28 18:49:08.408663"], ["id", 293]]
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HXiST3X80AjQq4"], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/services/events/stripe_handler.rb:13:in `process'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[36mDonation Load (0.3ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 257], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/services/events/stripe_handler.rb:20:in `process'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/services/events/stripe_handler.rb:20:in `process'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[36mDonation Update (0.4ms)[0m  [1m[33mUPDATE "donations" SET "stripe_id" = $1, "status" = $2, "updated_at" = $3 WHERE "donations"."id" = $4[0m  [["stripe_id", "pi_1HLCccHiibShxDkjfQAIl2LV"], ["status", "1"], ["updated_at", "2020-08-28 18:49:08.430607"], ["id", 257]]
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/services/events/stripe_handler.rb:20:in `process'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/services/events/stripe_handler.rb:20:in `process'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-08-28 18:49:08.441341"], ["id", 293]]
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [15666581-25b4-40b3-9259-b47f07ce7373] Performed ProcessEventsJob (Job ID: 15666581-25b4-40b3-9259-b47f07ce7373) from Async(default) in 56.03ms
Started GET "/checkout/success?session_idcs_test_WYXPFf4w9uWu8JSSgjvAUOAP0VkiVQsSvvggwEIbN205xmJuGU396tgh" for 127.0.0.1 at 2020-08-28 14:49:09 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_WYXPFf4w9uWu8JSSgjvAUOAP0VkiVQsSvvggwEIbN205xmJuGU396tgh"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.2ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 5.0ms | Allocations: 1273)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 11.1ms | Allocations: 4730)
  Rendered layouts/_footer.html.erb (Duration: 1.4ms | Allocations: 364)
Completed 200 OK in 49ms (Views: 44.0ms | ActiveRecord: 1.0ms | Allocations: 13860)


  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (0.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 257], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-28 20:23:48 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLHrEHiibShxDkjsZR5IO3f", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598660628, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>40000, "amount_paid"=>0, "amount_remaining"=>40000, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599265338, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HP7iwcfOLMrpAp", "customer_address"=>nil, "customer_email"=>"bb@bb.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_550f3c94a90ed9", "object"=>"line_item", "amount"=>40000, "currency"=>"usd", "description"=>"400 Ã— Stewardship (at $1.00 / every 3 months)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1607127738, "start"=>1599265338}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>400, "subscription"=>"sub_HPHtlqw8dJAF3y", "subscription_item"=>"si_HPHt5wO2dJ3VjH", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HP7iwcfOLMrpAp&subscription=sub_HPHtlqw8dJAF3y"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599268938, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599265338, "period_start"=>1591316538, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HPHtlqw8dJAF3y", "subtotal"=>40000, "tax"=>nil, "tax_percent"=>nil, "total"=>40000, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLHrEHiibShxDkjsZR5IO3f", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>40000, "amount_paid"=>0, "amount_remaining"=>40000, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599265338, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HP7iwcfOLMrpAp", "customer_address"=>nil, "customer_email"=>"bb@bb.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_550f3c94a90ed9", "object"=>"line_item", "amount"=>40000, "currency"=>"usd", "description"=>"400 Ã— Stewardship (at $1.00 / every 3 months)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1607127738, "start"=>1599265338}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>400, "subscription"=>"sub_HPHtlqw8dJAF3y", "subscription_item"=>"si_HPHt5wO2dJ3VjH", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HP7iwcfOLMrpAp&subscription=sub_HPHtlqw8dJAF3y"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599268938, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599265338, "period_start"=>1591316538, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HPHtlqw8dJAF3y", "subtotal"=>40000, "tax"=>nil, "tax_percent"=>nil, "total"=>40000, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLHrEHiibShxDkjsZR5IO3f"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLHrEHiibShxDkjsZR5IO3f"], ["data", "{\"id\":\"evt_1HLHrEHiibShxDkjsZR5IO3f\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598660628,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":40000,\"amount_paid\":0,\"amount_remaining\":40000,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599265338,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HP7iwcfOLMrpAp\",\"customer_address\":null,\"customer_email\":\"bb@bb.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_550f3c94a90ed9\",\"object\":\"line_item\",\"amount\":40000,\"currency\":\"usd\",\"description\":\"400 Ã— Stewardship (at $1.00 / every 3 months)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1607127738,\"start\":1599265338},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":400,\"subscription\":\"sub_HPHtlqw8dJAF3y\",\"subscription_item\":\"si_HPHt5wO2dJ3VjH\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HP7iwcfOLMrpAp\\u0026subscription=sub_HPHtlqw8dJAF3y\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599268938,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599265338,\"period_start\":1591316538,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HPHtlqw8dJAF3y\",\"subtotal\":40000,\"tax\":null,\"tax_percent\":null,\"total\":40000,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HLHrEHiibShxDkjsZR5IO3f\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":40000,\"amount_paid\":0,\"amount_remaining\":40000,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599265338,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HP7iwcfOLMrpAp\",\"customer_address\":null,\"customer_email\":\"bb@bb.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_550f3c94a90ed9\",\"object\":\"line_item\",\"amount\":40000,\"currency\":\"usd\",\"description\":\"400 Ã— Stewardship (at $1.00 / every 3 months)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1607127738,\"start\":1599265338},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":400,\"subscription\":\"sub_HPHtlqw8dJAF3y\",\"subscription_item\":\"si_HPHt5wO2dJ3VjH\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HP7iwcfOLMrpAp\\u0026subscription=sub_HPHtlqw8dJAF3y\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599268938,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599265338,\"period_start\":1591316538,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HPHtlqw8dJAF3y\",\"subtotal\":40000,\"tax\":null,\"tax_percent\":null,\"total\":40000,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-08-29 00:23:48.644870"], ["updated_at", "2020-08-29 00:23:48.644870"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (18.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: ac2f18fe-042c-4d32-9936-11e780107846) to Async(default) with arguments: 294
Completed 200 OK in 70ms (Views: 4.4ms | ActiveRecord: 19.5ms | Allocations: 41754)


[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846] Performing ProcessEventsJob (Job ID: ac2f18fe-042c-4d32-9936-11e780107846) from Async(default) enqueued at 2020-08-29T00:23:48Z with arguments: 294
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 294], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-29 00:23:48.734571"], ["id", 294]]
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   [1m[35m (14.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `customer' for nil:NilClass"], ["updated_at", "2020-08-29 00:23:48.773132"], ["id", 294]]
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [ac2f18fe-042c-4d32-9936-11e780107846] Performed ProcessEventsJob (Job ID: ac2f18fe-042c-4d32-9936-11e780107846) from Async(default) in 68.35ms
  [1m[36mWebhookEvent Load (101.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 294], ["LIMIT", 1]]
  [1m[36mUser Load (55.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HP7iwcfOLMrpAp"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bb@bb.net"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (19.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 313], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bb@bb.net"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bb@bb.net"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bb@bb.net"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 313], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPledge Load (16.8ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 291], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (30.9ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 16], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (29.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mStripeReport Create (104.2ms)[0m  [1m[32mINSERT INTO "stripe_reports" ("amount", "pledge_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 3200], ["pledge_id", 291], ["user_id", 16], ["created_at", "2020-08-29 20:41:08.690010"], ["updated_at", "2020-08-29 20:41:08.690010"]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mPledge Load (0.3ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" ORDER BY "pledges"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mStripeReport Create (0.7ms)[0m  [1m[32mINSERT INTO "stripe_reports" ("amount", "pledge_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 2300], ["pledge_id", 85], ["user_id", 312], ["created_at", "2020-08-29 20:43:27.101170"], ["updated_at", "2020-08-29 20:43:27.101170"]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStripeReport Create (0.5ms)[0m  [1m[32mINSERT INTO "stripe_reports" ("amount", "pledge_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 2300], ["pledge_id", 85], ["user_id", 312], ["created_at", "2020-08-29 20:43:27.101170"], ["updated_at", "2020-08-29 20:43:27.101170"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-29 16:45:15 -0400
  [1m[35m (21.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLavGHiibShxDkjaI3fTHNZ", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598733914, "data"=>{"object"=>{"id"=>"pi_1HLavFHiibShxDkjoZHhZW11", "object"=>"payment_intent", "amount"=>2300, "amount_capturable"=>0, "amount_received"=>2300, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "object"=>"charge", "amount"=>2300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HLavGHiibShxDkjXtanuIFv", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"25252", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"Franky B", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598733914, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>17, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLavGHiibShxDkj0Bcot6OH/rcpt_HvRoaE89DUD5ZuuTt6q5T2keMW6ld2x", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HLavGHiibShxDkj0Bcot6OH/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HLavFHiibShxDkjoZHhZW11"}, "client_secret"=>"pi_1HLavFHiibShxDkjoZHhZW11_secret_3d7cQEzVBrjOrUSQSFBxkfgt2", "confirmation_method"=>"automatic", "created"=>1598733913, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HLZylHiibShxDkjm6Y3Wc3G-initial_attempt-f81f4a9906fbb39b8"}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLavGHiibShxDkjaI3fTHNZ", "data"=>{"object"=>{"id"=>"pi_1HLavFHiibShxDkjoZHhZW11", "object"=>"payment_intent", "amount"=>2300, "amount_capturable"=>0, "amount_received"=>2300, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "object"=>"charge", "amount"=>2300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HLavGHiibShxDkjXtanuIFv", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"25252", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"Franky B", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598733914, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>17, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLavGHiibShxDkj0Bcot6OH/rcpt_HvRoaE89DUD5ZuuTt6q5T2keMW6ld2x", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HLavGHiibShxDkj0Bcot6OH/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HLavFHiibShxDkjoZHhZW11"}, "client_secret"=>"pi_1HLavFHiibShxDkjoZHhZW11_secret_3d7cQEzVBrjOrUSQSFBxkfgt2", "confirmation_method"=>"automatic", "created"=>1598733913, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLavGHiibShxDkjaI3fTHNZ"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (48.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLavGHiibShxDkjaI3fTHNZ"], ["data", "{\"id\":\"evt_1HLavGHiibShxDkjaI3fTHNZ\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598733914,\"data\":{\"object\":{\"id\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"object\":\"payment_intent\",\"amount\":2300,\"amount_capturable\":0,\"amount_received\":2300,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"object\":\"charge\",\"amount\":2300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HLavGHiibShxDkjXtanuIFv\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"25252\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"Franky B\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598733914,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":17,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLavGHiibShxDkj0Bcot6OH/rcpt_HvRoaE89DUD5ZuuTt6q5T2keMW6ld2x\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HLavGHiibShxDkj0Bcot6OH/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HLavFHiibShxDkjoZHhZW11\"},\"client_secret\":\"pi_1HLavFHiibShxDkjoZHhZW11_secret_3d7cQEzVBrjOrUSQSFBxkfgt2\",\"confirmation_method\":\"automatic\",\"created\":1598733913,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HLZylHiibShxDkjm6Y3Wc3G-initial_attempt-f81f4a9906fbb39b8\"},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HLavGHiibShxDkjaI3fTHNZ\",\"data\":{\"object\":{\"id\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"object\":\"payment_intent\",\"amount\":2300,\"amount_capturable\":0,\"amount_received\":2300,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"object\":\"charge\",\"amount\":2300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HLavGHiibShxDkjXtanuIFv\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"25252\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"Franky B\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598733914,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":17,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLavGHiibShxDkj0Bcot6OH/rcpt_HvRoaE89DUD5ZuuTt6q5T2keMW6ld2x\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HLavGHiibShxDkj0Bcot6OH/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HLavFHiibShxDkjoZHhZW11\"},\"client_secret\":\"pi_1HLavFHiibShxDkjoZHhZW11_secret_3d7cQEzVBrjOrUSQSFBxkfgt2\",\"confirmation_method\":\"automatic\",\"created\":1598733913,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-08-29 20:45:15.531305"], ["updated_at", "2020-08-29 20:45:15.531305"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 3b8f51e7-4265-403c-8ad8-a51e508c0f82) to Async(default) with arguments: 295
Completed 200 OK in 158ms (Views: 4.2ms | ActiveRecord: 66.1ms | Allocations: 49066)


[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82] Performing ProcessEventsJob (Job ID: 3b8f51e7-4265-403c-8ad8-a51e508c0f82) from Async(default) enqueued at 2020-08-29T20:45:15Z with arguments: 295
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-29 16:45:15 -0400
[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82]   [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 295], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-29 20:45:15.815248"], ["id", 295]]
[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82]   [1m[35m (31.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3b8f51e7-4265-403c-8ad8-a51e508c0f82] Error performing ProcessEventsJob (Job ID: 3b8f51e7-4265-403c-8ad8-a51e508c0f82) from Async(default) in 61.77ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:22: syntax error, unexpected local variable or method, expecting ')'
          user_id: user.id
          ^~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:23: syntax error, unexpected ')', expecting `end'
        )
        ^
/home/tom/paul/app/services/events/stripe_handler.rb:30: syntax error, unexpected constant, expecting ')'
          StripeReport.create(
          ^~~~~~~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:35: syntax error, unexpected ')', expecting `end'
        )
        ^
):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLavGHiibShxDkjgq5aiRIc", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598733914, "data"=>{"object"=>{"id"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "object"=>"charge", "amount"=>2300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HLavGHiibShxDkjXtanuIFv", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"25252", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"Franky B", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598733914, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>17, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLavGHiibShxDkj0Bcot6OH/rcpt_HvRoaE89DUD5ZuuTt6q5T2keMW6ld2x", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HLavGHiibShxDkj0Bcot6OH/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HLZylHiibShxDkjm6Y3Wc3G-initial_attempt-f81f4a9906fbb39b8"}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLavGHiibShxDkjgq5aiRIc", "data"=>{"object"=>{"id"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "object"=>"charge", "amount"=>2300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HLavGHiibShxDkjXtanuIFv", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"25252", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"Franky B", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1598733914, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>17, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLavGHiibShxDkj0Bcot6OH/rcpt_HvRoaE89DUD5ZuuTt6q5T2keMW6ld2x", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HLavGHiibShxDkj0Bcot6OH/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLavGHiibShxDkjgq5aiRIc"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (14.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLavGHiibShxDkjgq5aiRIc"], ["data", "{\"id\":\"evt_1HLavGHiibShxDkjgq5aiRIc\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598733914,\"data\":{\"object\":{\"id\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"object\":\"charge\",\"amount\":2300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HLavGHiibShxDkjXtanuIFv\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"25252\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"Franky B\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598733914,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":17,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLavGHiibShxDkj0Bcot6OH/rcpt_HvRoaE89DUD5ZuuTt6q5T2keMW6ld2x\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HLavGHiibShxDkj0Bcot6OH/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HLZylHiibShxDkjm6Y3Wc3G-initial_attempt-f81f4a9906fbb39b8\"},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HLavGHiibShxDkjgq5aiRIc\",\"data\":{\"object\":{\"id\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"object\":\"charge\",\"amount\":2300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HLavGHiibShxDkjXtanuIFv\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"25252\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"Franky B\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1598733914,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":17,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HLavGHiibShxDkj0Bcot6OH/rcpt_HvRoaE89DUD5ZuuTt6q5T2keMW6ld2x\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HLavGHiibShxDkj0Bcot6OH/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-08-29 20:45:15.867098"], ["updated_at", "2020-08-29 20:45:15.867098"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (15.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 2ed1389a-6cf6-43e5-8099-7af110643574) to Async(default) with arguments: 296
Completed 200 OK in 54ms (Views: 0.9ms | ActiveRecord: 30.6ms | Allocations: 32166)


[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574] Performing ProcessEventsJob (Job ID: 2ed1389a-6cf6-43e5-8099-7af110643574) from Async(default) enqueued at 2020-08-29T20:45:15Z with arguments: 296
[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574]   [1m[36mWebhookEvent Load (0.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 296], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574]   [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-29 20:45:15.923198"], ["id", 296]]
[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574]   [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2ed1389a-6cf6-43e5-8099-7af110643574] Error performing ProcessEventsJob (Job ID: 2ed1389a-6cf6-43e5-8099-7af110643574) from Async(default) in 10.23ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:22: syntax error, unexpected local variable or method, expecting ')'
          user_id: user.id
          ^~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:23: syntax error, unexpected ')', expecting `end'
        )
        ^
/home/tom/paul/app/services/events/stripe_handler.rb:30: syntax error, unexpected constant, expecting ')'
          StripeReport.create(
          ^~~~~~~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:35: syntax error, unexpected ')', expecting `end'
        )
        ^
):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-29 16:45:17 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLavHHiibShxDkjP4umavep", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598733915, "data"=>{"object"=>{"id"=>"cus_HTfrdHaUJIXzTt", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1592328244, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"frankyB@gmail.com", "invoice_prefix"=>"86A87608", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>46, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HXpc286cBy6bD7", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1593287060, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1593287060, "current_period_end"=>1599335060, "current_period_start"=>1598730260, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HXpcOIEVnxhBGF", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1593287061, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7"}, "latest_invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>23, "schedule"=>nil, "start_date"=>1593287060, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTmSCB4f6ppubB", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592352779, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592352779, "current_period_end"=>1600301579, "current_period_start"=>1592352779, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuotiHiibShxDkjohKEdTRG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTmSchi1I6bckD", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592352780, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>2500, "subscription"=>"sub_HTmSCB4f6ppubB", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB"}, "latest_invoice"=>"in_1GuotjHiibShxDkjmvUEzmzP", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>2500, "schedule"=>nil, "start_date"=>1592352779, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTm9P21Nj9JhLU", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592351628, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592351628, "current_period_end"=>1599004428, "current_period_start"=>1598399628, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTm9LhZZrXIU4u", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592351629, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU"}, "latest_invoice"=>"in_1HKBxuHiibShxDkjSQvT07Va", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1592351628, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTiAInwER448NQ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592336800, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592336800, "current_period_end"=>1598989600, "current_period_start"=>1598384800, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukjzHiibShxDkjhmgK5cHQ", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTiAFJ65OaXbLb", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592336801, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>11, "subscription"=>"sub_HTiAInwER448NQ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTiAInwER448NQ"}, "latest_invoice"=>"in_1HK86dHiibShxDkjZOb57Syd", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>11, "schedule"=>nil, "start_date"=>1592336800, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HThol5LxxWW2T8", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592335489, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592335489, "current_period_end"=>1598988289, "current_period_start"=>1598383489, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukOqHiibShxDkjkZit1pEu", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HThosUD0Aw71cE", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592335490, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>77, "subscription"=>"sub_HThol5LxxWW2T8", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8"}, "latest_invoice"=>"in_1HK7ldHiibShxDkjyan1vbQg", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>77, "schedule"=>nil, "start_date"=>1592335489, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTgCNofRQ2SxCZ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592329479, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592329479, "current_period_end"=>1600278279, "current_period_start"=>1592329479, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuiptHiibShxDkjduc2lzn6", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTgCco1ui7JKVe", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592329479, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>6000, "subscription"=>"sub_HTgCNofRQ2SxCZ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ"}, "latest_invoice"=>"in_1GuipvHiibShxDkjRNwJ0mnb", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>6000, "schedule"=>nil, "start_date"=>1592329479, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>6, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>45}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLavHHiibShxDkjP4umavep", "data"=>{"object"=>{"id"=>"cus_HTfrdHaUJIXzTt", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1592328244, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"frankyB@gmail.com", "invoice_prefix"=>"86A87608", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>46, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HXpc286cBy6bD7", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1593287060, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1593287060, "current_period_end"=>1599335060, "current_period_start"=>1598730260, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HXpcOIEVnxhBGF", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1593287061, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7"}, "latest_invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>23, "schedule"=>nil, "start_date"=>1593287060, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTmSCB4f6ppubB", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592352779, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592352779, "current_period_end"=>1600301579, "current_period_start"=>1592352779, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuotiHiibShxDkjohKEdTRG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTmSchi1I6bckD", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592352780, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>2500, "subscription"=>"sub_HTmSCB4f6ppubB", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB"}, "latest_invoice"=>"in_1GuotjHiibShxDkjmvUEzmzP", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>2500, "schedule"=>nil, "start_date"=>1592352779, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTm9P21Nj9JhLU", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592351628, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592351628, "current_period_end"=>1599004428, "current_period_start"=>1598399628, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTm9LhZZrXIU4u", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592351629, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU"}, "latest_invoice"=>"in_1HKBxuHiibShxDkjSQvT07Va", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1592351628, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTiAInwER448NQ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592336800, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592336800, "current_period_end"=>1598989600, "current_period_start"=>1598384800, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukjzHiibShxDkjhmgK5cHQ", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTiAFJ65OaXbLb", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592336801, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>11, "subscription"=>"sub_HTiAInwER448NQ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTiAInwER448NQ"}, "latest_invoice"=>"in_1HK86dHiibShxDkjZOb57Syd", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>11, "schedule"=>nil, "start_date"=>1592336800, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HThol5LxxWW2T8", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592335489, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592335489, "current_period_end"=>1598988289, "current_period_start"=>1598383489, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukOqHiibShxDkjkZit1pEu", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HThosUD0Aw71cE", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592335490, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>77, "subscription"=>"sub_HThol5LxxWW2T8", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8"}, "latest_invoice"=>"in_1HK7ldHiibShxDkjyan1vbQg", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>77, "schedule"=>nil, "start_date"=>1592335489, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTgCNofRQ2SxCZ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592329479, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592329479, "current_period_end"=>1600278279, "current_period_start"=>1592329479, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuiptHiibShxDkjduc2lzn6", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTgCco1ui7JKVe", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592329479, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>6000, "subscription"=>"sub_HTgCNofRQ2SxCZ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ"}, "latest_invoice"=>"in_1GuipvHiibShxDkjRNwJ0mnb", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>6000, "schedule"=>nil, "start_date"=>1592329479, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>6, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>45}}}}
  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjP4umavep"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-29 16:45:18 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLavHHiibShxDkjcFckttO3", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598733915, "data"=>{"object"=>{"id"=>"pi_1HLavFHiibShxDkjoZHhZW11", "object"=>"payment_intent", "amount"=>2300, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HLavFHiibShxDkjoZHhZW11"}, "client_secret"=>"pi_1HLavFHiibShxDkjoZHhZW11_secret_3d7cQEzVBrjOrUSQSFBxkfgt2", "confirmation_method"=>"automatic", "created"=>1598733913, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLavHHiibShxDkjcFckttO3", "data"=>{"object"=>{"id"=>"pi_1HLavFHiibShxDkjoZHhZW11", "object"=>"payment_intent", "amount"=>2300, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HLavFHiibShxDkjoZHhZW11"}, "client_secret"=>"pi_1HLavFHiibShxDkjoZHhZW11_secret_3d7cQEzVBrjOrUSQSFBxkfgt2", "confirmation_method"=>"automatic", "created"=>1598733913, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "invoice"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Create (51.3ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjP4umavep"], ["data", "{\"id\":\"evt_1HLavHHiibShxDkjP4umavep\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598733915,\"data\":{\"object\":{\"id\":\"cus_HTfrdHaUJIXzTt\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1592328244,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"frankyB@gmail.com\",\"invoice_prefix\":\"86A87608\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":46,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HXpc286cBy6bD7\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1593287060,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1593287060,\"current_period_end\":1599335060,\"current_period_start\":1598730260,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HXpcOIEVnxhBGF\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1593287061,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7\"},\"latest_invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":23,\"schedule\":null,\"start_date\":1593287060,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTmSCB4f6ppubB\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592352779,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592352779,\"current_period_end\":1600301579,\"current_period_start\":1592352779,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuotiHiibShxDkjohKEdTRG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTmSchi1I6bckD\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592352780,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":2500,\"subscription\":\"sub_HTmSCB4f6ppubB\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB\"},\"latest_invoice\":\"in_1GuotjHiibShxDkjmvUEzmzP\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":2500,\"schedule\":null,\"start_date\":1592352779,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTm9P21Nj9JhLU\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592351628,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592351628,\"current_period_end\":1599004428,\"current_period_start\":1598399628,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTm9LhZZrXIU4u\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592351629,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU\"},\"latest_invoice\":\"in_1HKBxuHiibShxDkjSQvT07Va\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1592351628,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTiAInwER448NQ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592336800,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592336800,\"current_period_end\":1598989600,\"current_period_start\":1598384800,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukjzHiibShxDkjhmgK5cHQ\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTiAFJ65OaXbLb\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592336801,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":11,\"subscription\":\"sub_HTiAInwER448NQ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTiAInwER448NQ\"},\"latest_invoice\":\"in_1HK86dHiibShxDkjZOb57Syd\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":11,\"schedule\":null,\"start_date\":1592336800,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HThol5LxxWW2T8\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592335489,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592335489,\"current_period_end\":1598988289,\"current_period_start\":1598383489,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukOqHiibShxDkjkZit1pEu\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HThosUD0Aw71cE\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592335490,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":77,\"subscription\":\"sub_HThol5LxxWW2T8\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8\"},\"latest_invoice\":\"in_1HK7ldHiibShxDkjyan1vbQg\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":77,\"schedule\":null,\"start_date\":1592335489,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTgCNofRQ2SxCZ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592329479,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592329479,\"current_period_end\":1600278279,\"current_period_start\":1592329479,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuiptHiibShxDkjduc2lzn6\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTgCco1ui7JKVe\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592329479,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":6000,\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ\"},\"latest_invoice\":\"in_1GuipvHiibShxDkjRNwJ0mnb\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":6000,\"schedule\":null,\"start_date\":1592329479,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":6,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":45}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.updated\",\"webhook_event\":{\"id\":\"evt_1HLavHHiibShxDkjP4umavep\",\"data\":{\"object\":{\"id\":\"cus_HTfrdHaUJIXzTt\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1592328244,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"frankyB@gmail.com\",\"invoice_prefix\":\"86A87608\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":46,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HXpc286cBy6bD7\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1593287060,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1593287060,\"current_period_end\":1599335060,\"current_period_start\":1598730260,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HXpcOIEVnxhBGF\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1593287061,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7\"},\"latest_invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":23,\"schedule\":null,\"start_date\":1593287060,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTmSCB4f6ppubB\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592352779,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592352779,\"current_period_end\":1600301579,\"current_period_start\":1592352779,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuotiHiibShxDkjohKEdTRG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTmSchi1I6bckD\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592352780,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":2500,\"subscription\":\"sub_HTmSCB4f6ppubB\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB\"},\"latest_invoice\":\"in_1GuotjHiibShxDkjmvUEzmzP\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":2500,\"schedule\":null,\"start_date\":1592352779,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTm9P21Nj9JhLU\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592351628,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592351628,\"current_period_end\":1599004428,\"current_period_start\":1598399628,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTm9LhZZrXIU4u\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592351629,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU\"},\"latest_invoice\":\"in_1HKBxuHiibShxDkjSQvT07Va\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1592351628,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTiAInwER448NQ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592336800,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592336800,\"current_period_end\":1598989600,\"current_period_start\":1598384800,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukjzHiibShxDkjhmgK5cHQ\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTiAFJ65OaXbLb\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592336801,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":11,\"subscription\":\"sub_HTiAInwER448NQ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTiAInwER448NQ\"},\"latest_invoice\":\"in_1HK86dHiibShxDkjZOb57Syd\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":11,\"schedule\":null,\"start_date\":1592336800,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HThol5LxxWW2T8\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592335489,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592335489,\"current_period_end\":1598988289,\"current_period_start\":1598383489,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukOqHiibShxDkjkZit1pEu\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HThosUD0Aw71cE\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592335490,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":77,\"subscription\":\"sub_HThol5LxxWW2T8\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8\"},\"latest_invoice\":\"in_1HK7ldHiibShxDkjyan1vbQg\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":77,\"schedule\":null,\"start_date\":1592335489,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTgCNofRQ2SxCZ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592329479,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592329479,\"current_period_end\":1600278279,\"current_period_start\":1592329479,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuiptHiibShxDkjduc2lzn6\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTgCco1ui7JKVe\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592329479,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":6000,\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ\"},\"latest_invoice\":\"in_1GuipvHiibShxDkjRNwJ0mnb\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":6000,\"schedule\":null,\"start_date\":1592329479,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":6,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":45}}}}"], ["created_at", "2020-08-29 20:45:18.004673"], ["updated_at", "2020-08-29 20:45:18.004673"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-29 16:45:18 -0400
  [1m[36mWebhookEvent Load (3.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjcFckttO3"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-29 16:45:18 -0400
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: e6925f62-a99d-4803-b56a-6f8a3007575e) to Async(default) with arguments: 297
Completed 200 OK in 176ms (Views: 6.4ms | ActiveRecord: 64.7ms | Allocations: 202862)


  [1m[36mWebhookEvent Create (5.6ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjcFckttO3"], ["data", "{\"id\":\"evt_1HLavHHiibShxDkjcFckttO3\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598733915,\"data\":{\"object\":{\"id\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"object\":\"payment_intent\",\"amount\":2300,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HLavFHiibShxDkjoZHhZW11\"},\"client_secret\":\"pi_1HLavFHiibShxDkjoZHhZW11_secret_3d7cQEzVBrjOrUSQSFBxkfgt2\",\"confirmation_method\":\"automatic\",\"created\":1598733913,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HLavHHiibShxDkjcFckttO3\",\"data\":{\"object\":{\"id\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"object\":\"payment_intent\",\"amount\":2300,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HLavFHiibShxDkjoZHhZW11\"},\"client_secret\":\"pi_1HLavFHiibShxDkjoZHhZW11_secret_3d7cQEzVBrjOrUSQSFBxkfgt2\",\"confirmation_method\":\"automatic\",\"created\":1598733913,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"invoice\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-08-29 20:45:18.097991"], ["updated_at", "2020-08-29 20:45:18.097991"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-29 16:45:18 -0400
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e] Performing ProcessEventsJob (Job ID: e6925f62-a99d-4803-b56a-6f8a3007575e) from Async(default) enqueued at 2020-08-29T20:45:18Z with arguments: 297
Processing by WebhookEventsController#create as XML
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLavHHiibShxDkjdIaq0rNG", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598733915, "data"=>{"object"=>{"id"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>2300, "amount_paid"=>2300, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "collection_method"=>"charge_automatically", "created"=>1598730287, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HLZylHiibShxDkj1TLE6YvB", "object"=>"line_item", "amount"=>2300, "currency"=>"usd", "description"=>"23 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599335060, "start"=>1598730260}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "subscription_item"=>"si_HXpcOIEVnxhBGF", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0045", "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "period_end"=>1598730260, "period_start"=>1598125460, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1598733913, "marked_uncollectible_at"=>nil, "paid_at"=>1598733913, "voided_at"=>nil}, "subscription"=>"sub_HXpc286cBy6bD7", "subtotal"=>2300, "tax"=>nil, "tax_percent"=>nil, "total"=>2300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1598730290}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.paid", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLavHHiibShxDkjdIaq0rNG", "data"=>{"object"=>{"id"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>2300, "amount_paid"=>2300, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "collection_method"=>"charge_automatically", "created"=>1598730287, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HLZylHiibShxDkj1TLE6YvB", "object"=>"line_item", "amount"=>2300, "currency"=>"usd", "description"=>"23 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599335060, "start"=>1598730260}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "subscription_item"=>"si_HXpcOIEVnxhBGF", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0045", "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "period_end"=>1598730260, "period_start"=>1598125460, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1598733913, "marked_uncollectible_at"=>nil, "paid_at"=>1598733913, "voided_at"=>nil}, "subscription"=>"sub_HXpc286cBy6bD7", "subtotal"=>2300, "tax"=>nil, "tax_percent"=>nil, "total"=>2300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1598730290}}}}
  [1m[35m (11.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: dba180ad-4c60-4d8a-bb77-097b018e42a0) to Async(default) with arguments: 298
Completed 200 OK in 133ms (Views: 0.9ms | ActiveRecord: 21.1ms | Allocations: 197927)


  Parameters: {"id"=>"evt_1HLavHHiibShxDkjvhXJdz7H", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598733915, "data"=>{"object"=>{"id"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>2300, "amount_paid"=>2300, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "collection_method"=>"charge_automatically", "created"=>1598730287, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HLZylHiibShxDkj1TLE6YvB", "object"=>"line_item", "amount"=>2300, "currency"=>"usd", "description"=>"23 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599335060, "start"=>1598730260}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "subscription_item"=>"si_HXpcOIEVnxhBGF", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0045", "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "period_end"=>1598730260, "period_start"=>1598125460, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1598733913, "marked_uncollectible_at"=>nil, "paid_at"=>1598733913, "voided_at"=>nil}, "subscription"=>"sub_HXpc286cBy6bD7", "subtotal"=>2300, "tax"=>nil, "tax_percent"=>nil, "total"=>2300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1598730290}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.finalized", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLavHHiibShxDkjvhXJdz7H", "data"=>{"object"=>{"id"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>2300, "amount_paid"=>2300, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "collection_method"=>"charge_automatically", "created"=>1598730287, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HLZylHiibShxDkj1TLE6YvB", "object"=>"line_item", "amount"=>2300, "currency"=>"usd", "description"=>"23 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599335060, "start"=>1598730260}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "subscription_item"=>"si_HXpcOIEVnxhBGF", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0045", "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "period_end"=>1598730260, "period_start"=>1598125460, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1598733913, "marked_uncollectible_at"=>nil, "paid_at"=>1598733913, "voided_at"=>nil}, "subscription"=>"sub_HXpc286cBy6bD7", "subtotal"=>2300, "tax"=>nil, "tax_percent"=>nil, "total"=>2300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1598730290}}}}
  [1m[36mWebhookEvent Load (2.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjvhXJdz7H"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0] Performing ProcessEventsJob (Job ID: dba180ad-4c60-4d8a-bb77-097b018e42a0) from Async(default) enqueued at 2020-08-29T20:45:18Z with arguments: 298
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Load (6.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjdIaq0rNG"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLavHHiibShxDkjoFpxLwIg", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598733915, "data"=>{"object"=>{"id"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>2300, "amount_paid"=>2300, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "collection_method"=>"charge_automatically", "created"=>1598730287, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HLZylHiibShxDkj1TLE6YvB", "object"=>"line_item", "amount"=>2300, "currency"=>"usd", "description"=>"23 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599335060, "start"=>1598730260}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "subscription_item"=>"si_HXpcOIEVnxhBGF", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0045", "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "period_end"=>1598730260, "period_start"=>1598125460, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1598733913, "marked_uncollectible_at"=>nil, "paid_at"=>1598733913, "voided_at"=>nil}, "subscription"=>"sub_HXpc286cBy6bD7", "subtotal"=>2300, "tax"=>nil, "tax_percent"=>nil, "total"=>2300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1598730290}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.payment_succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLavHHiibShxDkjoFpxLwIg", "data"=>{"object"=>{"id"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>2300, "amount_paid"=>2300, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "collection_method"=>"charge_automatically", "created"=>1598730287, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HLZylHiibShxDkj1TLE6YvB", "object"=>"line_item", "amount"=>2300, "currency"=>"usd", "description"=>"23 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599335060, "start"=>1598730260}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "subscription_item"=>"si_HXpcOIEVnxhBGF", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0045", "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "period_end"=>1598730260, "period_start"=>1598125460, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1598733913, "marked_uncollectible_at"=>nil, "paid_at"=>1598733913, "voided_at"=>nil}, "subscription"=>"sub_HXpc286cBy6bD7", "subtotal"=>2300, "tax"=>nil, "tax_percent"=>nil, "total"=>2300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1598730290}}}}
  [1m[36mWebhookEvent Create (5.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjvhXJdz7H"], ["data", "{\"id\":\"evt_1HLavHHiibShxDkjvhXJdz7H\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598733915,\"data\":{\"object\":{\"id\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":2300,\"amount_paid\":2300,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"collection_method\":\"charge_automatically\",\"created\":1598730287,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HLZylHiibShxDkj1TLE6YvB\",\"object\":\"line_item\",\"amount\":2300,\"currency\":\"usd\",\"description\":\"23 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599335060,\"start\":1598730260},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"subscription_item\":\"si_HXpcOIEVnxhBGF\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0045\",\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"period_end\":1598730260,\"period_start\":1598125460,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1598733913,\"marked_uncollectible_at\":null,\"paid_at\":1598733913,\"voided_at\":null},\"subscription\":\"sub_HXpc286cBy6bD7\",\"subtotal\":2300,\"tax\":null,\"tax_percent\":null,\"total\":2300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1598730290}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.finalized\",\"webhook_event\":{\"id\":\"evt_1HLavHHiibShxDkjvhXJdz7H\",\"data\":{\"object\":{\"id\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":2300,\"amount_paid\":2300,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"collection_method\":\"charge_automatically\",\"created\":1598730287,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HLZylHiibShxDkj1TLE6YvB\",\"object\":\"line_item\",\"amount\":2300,\"currency\":\"usd\",\"description\":\"23 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599335060,\"start\":1598730260},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"subscription_item\":\"si_HXpcOIEVnxhBGF\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0045\",\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"period_end\":1598730260,\"period_start\":1598125460,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1598733913,\"marked_uncollectible_at\":null,\"paid_at\":1598733913,\"voided_at\":null},\"subscription\":\"sub_HXpc286cBy6bD7\",\"subtotal\":2300,\"tax\":null,\"tax_percent\":null,\"total\":2300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1598730290}}}}"], ["created_at", "2020-08-29 20:45:18.214569"], ["updated_at", "2020-08-29 20:45:18.214569"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Load (2.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjoFpxLwIg"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Create (5.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjdIaq0rNG"], ["data", "{\"id\":\"evt_1HLavHHiibShxDkjdIaq0rNG\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598733915,\"data\":{\"object\":{\"id\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":2300,\"amount_paid\":2300,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"collection_method\":\"charge_automatically\",\"created\":1598730287,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HLZylHiibShxDkj1TLE6YvB\",\"object\":\"line_item\",\"amount\":2300,\"currency\":\"usd\",\"description\":\"23 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599335060,\"start\":1598730260},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"subscription_item\":\"si_HXpcOIEVnxhBGF\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0045\",\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"period_end\":1598730260,\"period_start\":1598125460,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1598733913,\"marked_uncollectible_at\":null,\"paid_at\":1598733913,\"voided_at\":null},\"subscription\":\"sub_HXpc286cBy6bD7\",\"subtotal\":2300,\"tax\":null,\"tax_percent\":null,\"total\":2300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1598730290}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.paid\",\"webhook_event\":{\"id\":\"evt_1HLavHHiibShxDkjdIaq0rNG\",\"data\":{\"object\":{\"id\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":2300,\"amount_paid\":2300,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"collection_method\":\"charge_automatically\",\"created\":1598730287,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HLZylHiibShxDkj1TLE6YvB\",\"object\":\"line_item\",\"amount\":2300,\"currency\":\"usd\",\"description\":\"23 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599335060,\"start\":1598730260},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"subscription_item\":\"si_HXpcOIEVnxhBGF\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0045\",\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"period_end\":1598730260,\"period_start\":1598125460,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1598733913,\"marked_uncollectible_at\":null,\"paid_at\":1598733913,\"voided_at\":null},\"subscription\":\"sub_HXpc286cBy6bD7\",\"subtotal\":2300,\"tax\":null,\"tax_percent\":null,\"total\":2300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1598730290}}}}"], ["created_at", "2020-08-29 20:45:18.225409"], ["updated_at", "2020-08-29 20:45:18.225409"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (7.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (18.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: f741de3b-9333-4145-9d0a-4682377a0667) to Async(default) with arguments: 299
  [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: ec019394-1ca3-45ee-a3e7-9dfb5ea325e3) to Async(default) with arguments: 300
Completed 200 OK in 92ms (Views: 1.2ms | ActiveRecord: 26.3ms | Allocations: 126726)


  [1m[36mWebhookEvent Create (10.5ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjoFpxLwIg"], ["data", "{\"id\":\"evt_1HLavHHiibShxDkjoFpxLwIg\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598733915,\"data\":{\"object\":{\"id\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":2300,\"amount_paid\":2300,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"collection_method\":\"charge_automatically\",\"created\":1598730287,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HLZylHiibShxDkj1TLE6YvB\",\"object\":\"line_item\",\"amount\":2300,\"currency\":\"usd\",\"description\":\"23 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599335060,\"start\":1598730260},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"subscription_item\":\"si_HXpcOIEVnxhBGF\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0045\",\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"period_end\":1598730260,\"period_start\":1598125460,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1598733913,\"marked_uncollectible_at\":null,\"paid_at\":1598733913,\"voided_at\":null},\"subscription\":\"sub_HXpc286cBy6bD7\",\"subtotal\":2300,\"tax\":null,\"tax_percent\":null,\"total\":2300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1598730290}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.payment_succeeded\",\"webhook_event\":{\"id\":\"evt_1HLavHHiibShxDkjoFpxLwIg\",\"data\":{\"object\":{\"id\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":2300,\"amount_paid\":2300,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"collection_method\":\"charge_automatically\",\"created\":1598730287,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HLZylHiibShxDkj1TLE6YvB\",\"object\":\"line_item\",\"amount\":2300,\"currency\":\"usd\",\"description\":\"23 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599335060,\"start\":1598730260},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"subscription_item\":\"si_HXpcOIEVnxhBGF\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0045\",\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"period_end\":1598730260,\"period_start\":1598125460,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1598733913,\"marked_uncollectible_at\":null,\"paid_at\":1598733913,\"voided_at\":null},\"subscription\":\"sub_HXpc286cBy6bD7\",\"subtotal\":2300,\"tax\":null,\"tax_percent\":null,\"total\":2300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1598730290}}}}"], ["created_at", "2020-08-29 20:45:18.248068"], ["updated_at", "2020-08-29 20:45:18.248068"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e]   [1m[36mWebhookEvent Load (15.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 297], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e]   â†³ app/jobs/process_events_job.rb:5:in `perform'
Completed 200 OK in 67ms (Views: 1.3ms | ActiveRecord: 27.4ms | Allocations: 89976)


[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0]   [1m[36mWebhookEvent Load (6.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 298], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0]   â†³ app/jobs/process_events_job.rb:5:in `perform'
  [1m[35m (15.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 4f4d3671-aeec-40c1-b462-16f3f9a2a51c) to Async(default) with arguments: 301
Completed 200 OK in 90ms (Views: 1.2ms | ActiveRecord: 36.6ms | Allocations: 126759)


[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0]   [1m[35m (14.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3] Performing ProcessEventsJob (Job ID: ec019394-1ca3-45ee-a3e7-9dfb5ea325e3) from Async(default) enqueued at 2020-08-29T20:45:18Z with arguments: 300
[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0]   [1m[36mWebhookEvent Update (1.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-29 20:45:18.310765"], ["id", 298]]
[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e]   [1m[35m (12.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667] Performing ProcessEventsJob (Job ID: f741de3b-9333-4145-9d0a-4682377a0667) from Async(default) enqueued at 2020-08-29T20:45:18Z with arguments: 299
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-08-29 16:45:18 -0400
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3]   [1m[36mWebhookEvent Load (2.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 300], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e]   [1m[36mWebhookEvent Update (1.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-29 20:45:18.297269"], ["id", 297]]
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0]   [1m[35m (15.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3]   [1m[35m (9.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [dba180ad-4c60-4d8a-bb77-097b018e42a0] Error performing ProcessEventsJob (Job ID: dba180ad-4c60-4d8a-bb77-097b018e42a0) from Async(default) in 131.37ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:22: syntax error, unexpected local variable or method, expecting ')'
          user_id: user.id
          ^~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:23: syntax error, unexpected ')', expecting `end'
        )
        ^
/home/tom/paul/app/services/events/stripe_handler.rb:30: syntax error, unexpected constant, expecting ')'
          StripeReport.create(
          ^~~~~~~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:35: syntax error, unexpected ')', expecting `end'
        )
        ^
):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 299], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3]   [1m[36mWebhookEvent Update (1.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-29 20:45:18.336090"], ["id", 300]]
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e]   [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HLavHHiibShxDkjczgmKV9H", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1598733915, "data"=>{"object"=>{"id"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>2300, "amount_paid"=>2300, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "collection_method"=>"charge_automatically", "created"=>1598730287, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HLZylHiibShxDkj1TLE6YvB", "object"=>"line_item", "amount"=>2300, "currency"=>"usd", "description"=>"23 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599335060, "start"=>1598730260}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "subscription_item"=>"si_HXpcOIEVnxhBGF", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0045", "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "period_end"=>1598730260, "period_start"=>1598125460, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1598733913, "marked_uncollectible_at"=>nil, "paid_at"=>1598733913, "voided_at"=>nil}, "subscription"=>"sub_HXpc286cBy6bD7", "subtotal"=>2300, "tax"=>nil, "tax_percent"=>nil, "total"=>2300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1598730290}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>2300, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1598733887, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HLavHHiibShxDkjczgmKV9H", "data"=>{"object"=>{"id"=>"in_1HLZylHiibShxDkjm6Y3Wc3G", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>2300, "amount_paid"=>2300, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HLavGHiibShxDkj0Bcot6OH", "collection_method"=>"charge_automatically", "created"=>1598730287, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HLZylHiibShxDkj1TLE6YvB", "object"=>"line_item", "amount"=>2300, "currency"=>"usd", "description"=>"23 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599335060, "start"=>1598730260}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "subscription_item"=>"si_HXpcOIEVnxhBGF", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0045", "paid"=>true, "payment_intent"=>"pi_1HLavFHiibShxDkjoZHhZW11", "period_end"=>1598730260, "period_start"=>1598125460, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1598733913, "marked_uncollectible_at"=>nil, "paid_at"=>1598733913, "voided_at"=>nil}, "subscription"=>"sub_HXpc286cBy6bD7", "subtotal"=>2300, "tax"=>nil, "tax_percent"=>nil, "total"=>2300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1598730290}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>2300, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1598733887, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}}}
[ActiveJob] [ProcessEventsJob] [e6925f62-a99d-4803-b56a-6f8a3007575e] Error performing ProcessEventsJob (Job ID: e6925f62-a99d-4803-b56a-6f8a3007575e) from Async(default) in 179.34ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:22: syntax error, unexpected local variable or method, expecting ')'
          user_id: user.id
          ^~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:23: syntax error, unexpected ')', expecting `end'
        )
        ^
/home/tom/paul/app/services/events/stripe_handler.rb:30: syntax error, unexpected constant, expecting ')'
          StripeReport.create(
          ^~~~~~~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:35: syntax error, unexpected ')', expecting `end'
        )
        ^
):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667]   [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3]   [1m[35m (14.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (2.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjczgmKV9H"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [ec019394-1ca3-45ee-a3e7-9dfb5ea325e3] Error performing ProcessEventsJob (Job ID: ec019394-1ca3-45ee-a3e7-9dfb5ea325e3) from Async(default) in 49.19ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:22: syntax error, unexpected local variable or method, expecting ')'
          user_id: user.id
          ^~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:23: syntax error, unexpected ')', expecting `end'
        )
        ^
/home/tom/paul/app/services/events/stripe_handler.rb:30: syntax error, unexpected constant, expecting ')'
          StripeReport.create(
          ^~~~~~~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:35: syntax error, unexpected ')', expecting `end'
        )
        ^
):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c] Performing ProcessEventsJob (Job ID: 4f4d3671-aeec-40c1-b462-16f3f9a2a51c) from Async(default) enqueued at 2020-08-29T20:45:18Z with arguments: 301
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667]   [1m[36mWebhookEvent Update (2.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-29 20:45:18.356169"], ["id", 299]]
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c]   [1m[36mWebhookEvent Load (2.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 301], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c]   â†³ app/jobs/process_events_job.rb:5:in `perform'
  [1m[36mWebhookEvent Create (2.6ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HLavHHiibShxDkjczgmKV9H"], ["data", "{\"id\":\"evt_1HLavHHiibShxDkjczgmKV9H\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1598733915,\"data\":{\"object\":{\"id\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":2300,\"amount_paid\":2300,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"collection_method\":\"charge_automatically\",\"created\":1598730287,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HLZylHiibShxDkj1TLE6YvB\",\"object\":\"line_item\",\"amount\":2300,\"currency\":\"usd\",\"description\":\"23 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599335060,\"start\":1598730260},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"subscription_item\":\"si_HXpcOIEVnxhBGF\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0045\",\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"period_end\":1598730260,\"period_start\":1598125460,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1598733913,\"marked_uncollectible_at\":null,\"paid_at\":1598733913,\"voided_at\":null},\"subscription\":\"sub_HXpc286cBy6bD7\",\"subtotal\":2300,\"tax\":null,\"tax_percent\":null,\"total\":2300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1598730290},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":2300,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1598733887,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.updated\",\"webhook_event\":{\"id\":\"evt_1HLavHHiibShxDkjczgmKV9H\",\"data\":{\"object\":{\"id\":\"in_1HLZylHiibShxDkjm6Y3Wc3G\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":2300,\"amount_paid\":2300,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HLavGHiibShxDkj0Bcot6OH\",\"collection_method\":\"charge_automatically\",\"created\":1598730287,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HvQqovNVhuuym4eDjTdxQfR7L4aoB40/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HLZylHiibShxDkj1TLE6YvB\",\"object\":\"line_item\",\"amount\":2300,\"currency\":\"usd\",\"description\":\"23 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599335060,\"start\":1598730260},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"subscription_item\":\"si_HXpcOIEVnxhBGF\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HLZylHiibShxDkjm6Y3Wc3G/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0045\",\"paid\":true,\"payment_intent\":\"pi_1HLavFHiibShxDkjoZHhZW11\",\"period_end\":1598730260,\"period_start\":1598125460,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1598733913,\"marked_uncollectible_at\":null,\"paid_at\":1598733913,\"voided_at\":null},\"subscription\":\"sub_HXpc286cBy6bD7\",\"subtotal\":2300,\"tax\":null,\"tax_percent\":null,\"total\":2300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1598730290},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":2300,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1598733887,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}}}}"], ["created_at", "2020-08-29 20:45:18.374083"], ["updated_at", "2020-08-29 20:45:18.374083"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667]   [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c]   [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f741de3b-9333-4145-9d0a-4682377a0667] Error performing ProcessEventsJob (Job ID: f741de3b-9333-4145-9d0a-4682377a0667) from Async(default) in 65.07ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:22: syntax error, unexpected local variable or method, expecting ')'
          user_id: user.id
          ^~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:23: syntax error, unexpected ')', expecting `end'
        )
        ^
/home/tom/paul/app/services/events/stripe_handler.rb:30: syntax error, unexpected constant, expecting ')'
          StripeReport.create(
          ^~~~~~~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:35: syntax error, unexpected ')', expecting `end'
        )
        ^
):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-29 20:45:18.385216"], ["id", 301]]
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (12.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 21ea8b3d-2492-445f-8322-0387dfb745f8) to Async(default) with arguments: 302
Completed 200 OK in 54ms (Views: 1.2ms | ActiveRecord: 17.8ms | Allocations: 61361)


[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8] Performing ProcessEventsJob (Job ID: 21ea8b3d-2492-445f-8322-0387dfb745f8) from Async(default) enqueued at 2020-08-29T20:45:18Z with arguments: 302
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c]   [1m[35m (25.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [4f4d3671-aeec-40c1-b462-16f3f9a2a51c] Error performing ProcessEventsJob (Job ID: 4f4d3671-aeec-40c1-b462-16f3f9a2a51c) from Async(default) in 50.82ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:22: syntax error, unexpected local variable or method, expecting ')'
          user_id: user.id
          ^~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:23: syntax error, unexpected ')', expecting `end'
        )
        ^
/home/tom/paul/app/services/events/stripe_handler.rb:30: syntax error, unexpected constant, expecting ')'
          StripeReport.create(
          ^~~~~~~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:35: syntax error, unexpected ')', expecting `end'
        )
        ^
):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8]   [1m[36mWebhookEvent Load (2.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 302], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-08-29 20:45:18.430982"], ["id", 302]]
[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8]   [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [21ea8b3d-2492-445f-8322-0387dfb745f8] Error performing ProcessEventsJob (Job ID: 21ea8b3d-2492-445f-8322-0387dfb745f8) from Async(default) in 15.57ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:22: syntax error, unexpected local variable or method, expecting ')'
          user_id: user.id
          ^~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:23: syntax error, unexpected ')', expecting `end'
        )
        ^
/home/tom/paul/app/services/events/stripe_handler.rb:30: syntax error, unexpected constant, expecting ')'
          StripeReport.create(
          ^~~~~~~~~~~~
/home/tom/paul/app/services/events/stripe_handler.rb:35: syntax error, unexpected ')', expecting `end'
        )
        ^
):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 16], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mPledge Load (0.9ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  [1m[36mDonation Load (34.2ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."user_id" = $1[0m  [["user_id", 16]]
  [1m[36mWebhookEvent Load (1.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_9dOXlXDXKsJOD2"], ["LIMIT", 1]]
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
Started GET "/" for 127.0.0.1 at 2020-09-04 17:49:39 -0400
  [1m[35m (20.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (37.5ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.8ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.7ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (22.6ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 123.6ms | Allocations: 8224)
  Rendered layouts/_header.html.erb (Duration: 12.4ms | Allocations: 1525)
  Rendered layouts/_navbar.html.erb (Duration: 19.6ms | Allocations: 1444)
  Rendered layouts/_footer.html.erb (Duration: 3.9ms | Allocations: 524)
Completed 200 OK in 1253ms (Views: 628.8ms | ActiveRecord: 373.8ms | Allocations: 52452)


Started GET "/webhook_events" for 127.0.0.1 at 2020-09-04 17:50:14 -0400
  
ActionController::RoutingError (No route matches [GET] "/webhook_events"):
  
actionpack (6.0.3.2) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
rack-contrib (2.2.0) lib/rack/contrib/response_headers.rb:17:in `call'
meta_request (0.7.2) lib/meta_request/middlewares/headers.rb:16:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.2) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.2) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.2) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.2) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.2) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (c269f5e01fdf) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (5.2.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.2) lib/rails/engine.rb:527:in `call'
puma (4.3.5) lib/puma/configuration.rb:228:in `call'
puma (4.3.5) lib/puma/server.rb:713:in `handle_request'
puma (4.3.5) lib/puma/server.rb:472:in `process_client'
puma (4.3.5) lib/puma/server.rb:328:in `block in run'
puma (4.3.5) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/webhook_events/stripe" for 127.0.0.1 at 2020-09-04 17:50:21 -0400
  
ActionController::RoutingError (No route matches [GET] "/webhook_events/stripe"):
  
actionpack (6.0.3.2) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
rack-contrib (2.2.0) lib/rack/contrib/response_headers.rb:17:in `call'
meta_request (0.7.2) lib/meta_request/middlewares/headers.rb:16:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.2) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.2) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.2) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.2) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.2) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (c269f5e01fdf) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (5.2.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.2) lib/rails/engine.rb:527:in `call'
puma (4.3.5) lib/puma/configuration.rb:228:in `call'
puma (4.3.5) lib/puma/server.rb:713:in `handle_request'
puma (4.3.5) lib/puma/server.rb:472:in `process_client'
puma (4.3.5) lib/puma/server.rb:328:in `block in run'
puma (4.3.5) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2020-09-04 17:52:19 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (1.8ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (4.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (2.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.8ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (1.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (1.1ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 14.9ms | Allocations: 3121)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1264)
  Rendered layouts/_navbar.html.erb (Duration: 1.6ms | Allocations: 615)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | Allocations: 350)
Completed 200 OK in 120ms (Views: 45.1ms | ActiveRecord: 12.6ms | Allocations: 23613)


DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
Started GET "/" for 127.0.0.1 at 2020-09-05 13:03:33 -0400
  [1m[35m (19.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (46.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.8ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.8ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (25.0ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 141.8ms | Allocations: 8224)
  Rendered layouts/_header.html.erb (Duration: 12.9ms | Allocations: 1525)
  Rendered layouts/_navbar.html.erb (Duration: 19.6ms | Allocations: 1444)
  Rendered layouts/_footer.html.erb (Duration: 9.2ms | Allocations: 524)
Completed 200 OK in 1205ms (Views: 678.2ms | ActiveRecord: 320.1ms | Allocations: 52570)


Started GET "/donations/new" for 127.0.0.1 at 2020-09-05 13:03:42 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  Rendered donations/new.html.erb within layouts/application (Duration: 11.5ms | Allocations: 372)
  Rendered layouts/_header.html.erb (Duration: 4.5ms | Allocations: 1264)
  Rendered layouts/_navbar.html.erb (Duration: 2.3ms | Allocations: 576)
  Rendered layouts/_footer.html.erb (Duration: 2.9ms | Allocations: 357)
Completed 200 OK in 194ms (Views: 50.1ms | ActiveRecord: 100.4ms | Allocations: 16797)


Started GET "/sign_in" for 127.0.0.1 at 2020-09-05 13:03:57 -0400
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 13.4ms | Allocations: 592)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 368.3ms | Allocations: 13376)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1266)
  Rendered layouts/_navbar.html.erb (Duration: 2.0ms | Allocations: 596)
  Rendered layouts/_footer.html.erb (Duration: 1.7ms | Allocations: 338)
Completed 200 OK in 500ms (Views: 405.1ms | ActiveRecord: 8.9ms | Allocations: 38429)


Started POST "/sign_in" for 127.0.0.1 at 2020-09-05 13:04:10 -0400
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"Opwu1LIShN0B0urGI66eapBxr3F9fCJx3EtxqrL6Sj0Fn1gIZcLmD4kS2arYKlOCV1vorlYhhSuDx81WZK91QQ==", "user"=>{"login"=>"thomas connolly", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (72.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (lower(username) = 'thomas connolly' OR lower(email) = 'thomas connolly') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/user.rb:122:in `find_for_database_authentication'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (74.0ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2020-09-05 17:04:11.283514"], ["last_sign_in_at", "2020-08-24 16:04:59.064822"], ["sign_in_count", 580], ["updated_at", "2020-09-05 17:04:11.284202"], ["id", 16]]
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:5000/donations/new
Completed 302 Found in 515ms (ActiveRecord: 154.6ms | Allocations: 14845)


Started GET "/sign_in" for 127.0.0.1 at 2020-09-05 13:05:32 -0400
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
Redirected to http://localhost:5000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 23ms (ActiveRecord: 1.3ms | Allocations: 3641)


Started GET "/" for 127.0.0.1 at 2020-09-05 13:05:32 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (1.0ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.7ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.7ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.7ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (2.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (1.0ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 7.7ms | Allocations: 3127)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1264)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (90.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 219.4ms | Allocations: 17325)
  Rendered layouts/_footer.html.erb (Duration: 1.9ms | Allocations: 342)
Completed 200 OK in 317ms (Views: 147.3ms | ActiveRecord: 106.6ms | Allocations: 40283)


Started GET "/donations/new" for 127.0.0.1 at 2020-09-05 13:05:40 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 44.6ms | Allocations: 1072)
  Rendered donations/new.html.erb within layouts/application (Duration: 61.3ms | Allocations: 3710)
  Rendered layouts/_header.html.erb (Duration: 7.3ms | Allocations: 1263)
  [1m[36mProfile Load (1.0ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 18.3ms | Allocations: 2601)
  Rendered layouts/_footer.html.erb (Duration: 2.8ms | Allocations: 347)
Completed 200 OK in 127ms (Views: 118.2ms | ActiveRecord: 2.4ms | Allocations: 15162)


Started POST "/donations" for 127.0.0.1 at 2020-09-05 13:05:50 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"REpL4dsEnUZoBUiCBtpfubCSZDLx/zvP4D8wES9mNqaklueoUODaEUZhcnxI3kMTY8xysR2d+H819/Fe3wKSAQ==", "donation"=>{"dollars"=>"55"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (92.4ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 16], ["created_at", "2020-09-05 17:05:50.830003"], ["updated_at", "2020-09-05 17:05:50.830003"], ["amount", 5500], ["dollars", 55]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (18.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/258
Completed 200 OK in 170ms (ActiveRecord: 112.8ms | Allocations: 13711)


Started GET "/donations/258" for 127.0.0.1 at 2020-09-05 13:05:50 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"258"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mDonation Load (1.3ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 83.1ms | Allocations: 3537)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1264)
  [1m[36mProfile Load (0.9ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 12.6ms | Allocations: 2599)
  Rendered layouts/_footer.html.erb (Duration: 1.8ms | Allocations: 349)
Completed 200 OK in 153ms (Views: 125.1ms | ActiveRecord: 4.2ms | Allocations: 19024)


Started POST "/checkout/create" for 127.0.0.1 at 2020-09-05 13:06:00 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"QPIk52D9IcPb2eEcSo26foH0ylGSaR5FlteksIsQLphaKO7B0+KzTI2FJWFN2VN3HGuf8QX9E47mSukl2L72hQ==", "id"=>"258"}
  [1m[36mDonation Load (1.1ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 25.9ms | Allocations: 182)
Completed 200 OK in 1208ms (Views: 34.0ms | ActiveRecord: 2.0ms | Allocations: 14484)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 13:06:01 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO4pxHiibShxDkjfjpU0mwb", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599325561, "data"=>{"object"=>{"id"=>"pi_1HO4pxHiibShxDkjObWc72Bf", "object"=>"payment_intent", "amount"=>5500, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HO4pxHiibShxDkjObWc72Bf"}, "client_secret"=>"pi_1HO4pxHiibShxDkjObWc72Bf_secret_FBEacVfAj9D6wI61aqFOT6UpB", "confirmation_method"=>"automatic", "created"=>1599325561, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_pzXs62YUXkH3Bv", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO4pxHiibShxDkjfjpU0mwb", "data"=>{"object"=>{"id"=>"pi_1HO4pxHiibShxDkjObWc72Bf", "object"=>"payment_intent", "amount"=>5500, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HO4pxHiibShxDkjObWc72Bf"}, "client_secret"=>"pi_1HO4pxHiibShxDkjObWc72Bf_secret_FBEacVfAj9D6wI61aqFOT6UpB", "confirmation_method"=>"automatic", "created"=>1599325561, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (62.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO4pxHiibShxDkjfjpU0mwb"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (68.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO4pxHiibShxDkjfjpU0mwb"], ["data", "{\"id\":\"evt_1HO4pxHiibShxDkjfjpU0mwb\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599325561,\"data\":{\"object\":{\"id\":\"pi_1HO4pxHiibShxDkjObWc72Bf\",\"object\":\"payment_intent\",\"amount\":5500,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HO4pxHiibShxDkjObWc72Bf\"},\"client_secret\":\"pi_1HO4pxHiibShxDkjObWc72Bf_secret_FBEacVfAj9D6wI61aqFOT6UpB\",\"confirmation_method\":\"automatic\",\"created\":1599325561,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_pzXs62YUXkH3Bv\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HO4pxHiibShxDkjfjpU0mwb\",\"data\":{\"object\":{\"id\":\"pi_1HO4pxHiibShxDkjObWc72Bf\",\"object\":\"payment_intent\",\"amount\":5500,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HO4pxHiibShxDkjObWc72Bf\"},\"client_secret\":\"pi_1HO4pxHiibShxDkjObWc72Bf_secret_FBEacVfAj9D6wI61aqFOT6UpB\",\"confirmation_method\":\"automatic\",\"created\":1599325561,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 17:06:01.944066"], ["updated_at", "2020-09-05 17:06:01.944066"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (15.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 1ed54a0e-5c89-4374-b40c-a55530f46c55) to Async(default) with arguments: 303
Completed 200 OK in 265ms (Views: 2.1ms | ActiveRecord: 193.5ms | Allocations: 25807)


[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55] Performing ProcessEventsJob (Job ID: 1ed54a0e-5c89-4374-b40c-a55530f46c55) from Async(default) enqueued at 2020-09-05T17:06:02Z with arguments: 303
[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55]   [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 303], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55]   [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 17:06:02.138577"], ["id", 303]]
[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55]   [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [1ed54a0e-5c89-4374-b40c-a55530f46c55] Error performing ProcessEventsJob (Job ID: 1ed54a0e-5c89-4374-b40c-a55530f46c55) from Async(default) in 48.21ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:36: syntax error, unexpected end-of-input, expecting `end'):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
Started POST "/checkout/create" for 127.0.0.1 at 2020-09-05 13:08:41 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"gntqKrXtijEvYfDxgCjyC+HqJd2Pbi1Gw7E83CcqFEgYKTcJJgIRwTN+25ms0dgiS14EyssKaRrZoSd6VT9Qdw==", "id"=>"258"}
  [1m[36mDonation Load (0.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 3.7ms | Allocations: 348)
Completed 200 OK in 1015ms (Views: 16.9ms | ActiveRecord: 8.5ms | Allocations: 38007)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 13:08:43 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO4sYHiibShxDkjjdTn69Bk", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599325722, "data"=>{"object"=>{"id"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "object"=>"payment_intent", "amount"=>5500, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HO4sYHiibShxDkjfkkXvBsd"}, "client_secret"=>"pi_1HO4sYHiibShxDkjfkkXvBsd_secret_PcCK4uZaK8MK7Ge9MwW6aL1NR", "confirmation_method"=>"automatic", "created"=>1599325722, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_P60pnTN7vlJwL7", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO4sYHiibShxDkjjdTn69Bk", "data"=>{"object"=>{"id"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "object"=>"payment_intent", "amount"=>5500, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HO4sYHiibShxDkjfkkXvBsd"}, "client_secret"=>"pi_1HO4sYHiibShxDkjfkkXvBsd_secret_PcCK4uZaK8MK7Ge9MwW6aL1NR", "confirmation_method"=>"automatic", "created"=>1599325722, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO4sYHiibShxDkjjdTn69Bk"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (24.6ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO4sYHiibShxDkjjdTn69Bk"], ["data", "{\"id\":\"evt_1HO4sYHiibShxDkjjdTn69Bk\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599325722,\"data\":{\"object\":{\"id\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"object\":\"payment_intent\",\"amount\":5500,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HO4sYHiibShxDkjfkkXvBsd\"},\"client_secret\":\"pi_1HO4sYHiibShxDkjfkkXvBsd_secret_PcCK4uZaK8MK7Ge9MwW6aL1NR\",\"confirmation_method\":\"automatic\",\"created\":1599325722,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_P60pnTN7vlJwL7\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HO4sYHiibShxDkjjdTn69Bk\",\"data\":{\"object\":{\"id\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"object\":\"payment_intent\",\"amount\":5500,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HO4sYHiibShxDkjfkkXvBsd\"},\"client_secret\":\"pi_1HO4sYHiibShxDkjfkkXvBsd_secret_PcCK4uZaK8MK7Ge9MwW6aL1NR\",\"confirmation_method\":\"automatic\",\"created\":1599325722,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 17:08:43.478087"], ["updated_at", "2020-09-05 17:08:43.478087"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (22.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 53a35571-d899-4a4f-8c35-f8144c635142) to Async(default) with arguments: 304
Completed 200 OK in 92ms (Views: 1.4ms | ActiveRecord: 51.2ms | Allocations: 26044)


[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142] Performing ProcessEventsJob (Job ID: 53a35571-d899-4a4f-8c35-f8144c635142) from Async(default) enqueued at 2020-09-05T17:08:43Z with arguments: 304
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 304], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 17:08:43.619118"], ["id", 304]]
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   [1m[35m (11.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 17:08:43.645170"], ["id", 304]]
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [53a35571-d899-4a4f-8c35-f8144c635142] Performed ProcessEventsJob (Job ID: 53a35571-d899-4a4f-8c35-f8144c635142) from Async(default) in 113.48ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 13:09:23 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO4tDHiibShxDkjhmVChXXZ", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599325763, "data"=>{"object"=>{"id"=>"ch_1HO4tCHiibShxDkjaog6HRGU", "object"=>"charge", "amount"=>5500, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO4tCHiibShxDkjgLPf1BW1", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34111", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tommy Con", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599325762, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>22, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "payment_method"=>"pm_1HO4tBHiibShxDkjF5cQWS2d", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO4tCHiibShxDkjaog6HRGU/rcpt_Hy0vSuD84O2F8UQSZS3rrn0ai65NTvc", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO4tCHiibShxDkjaog6HRGU/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_1i4j7Z9962fFkY", "idempotency_key"=>nil}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO4tDHiibShxDkjhmVChXXZ", "data"=>{"object"=>{"id"=>"ch_1HO4tCHiibShxDkjaog6HRGU", "object"=>"charge", "amount"=>5500, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO4tCHiibShxDkjgLPf1BW1", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34111", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tommy Con", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599325762, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>22, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "payment_method"=>"pm_1HO4tBHiibShxDkjF5cQWS2d", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO4tCHiibShxDkjaog6HRGU/rcpt_Hy0vSuD84O2F8UQSZS3rrn0ai65NTvc", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO4tCHiibShxDkjaog6HRGU/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO4tDHiibShxDkjhmVChXXZ"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (27.5ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO4tDHiibShxDkjhmVChXXZ"], ["data", "{\"id\":\"evt_1HO4tDHiibShxDkjhmVChXXZ\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599325763,\"data\":{\"object\":{\"id\":\"ch_1HO4tCHiibShxDkjaog6HRGU\",\"object\":\"charge\",\"amount\":5500,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO4tCHiibShxDkjgLPf1BW1\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34111\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tommy Con\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599325762,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":22,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"payment_method\":\"pm_1HO4tBHiibShxDkjF5cQWS2d\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO4tCHiibShxDkjaog6HRGU/rcpt_Hy0vSuD84O2F8UQSZS3rrn0ai65NTvc\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO4tCHiibShxDkjaog6HRGU/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_1i4j7Z9962fFkY\",\"idempotency_key\":null},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HO4tDHiibShxDkjhmVChXXZ\",\"data\":{\"object\":{\"id\":\"ch_1HO4tCHiibShxDkjaog6HRGU\",\"object\":\"charge\",\"amount\":5500,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO4tCHiibShxDkjgLPf1BW1\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34111\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tommy Con\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599325762,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":22,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"payment_method\":\"pm_1HO4tBHiibShxDkjF5cQWS2d\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO4tCHiibShxDkjaog6HRGU/rcpt_Hy0vSuD84O2F8UQSZS3rrn0ai65NTvc\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO4tCHiibShxDkjaog6HRGU/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 17:09:24.037004"], ["updated_at", "2020-09-05 17:09:24.037004"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (17.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: ee7ef932-0700-4574-bf82-13aa326aa9d0) to Async(default) with arguments: 305
Completed 200 OK in 166ms (Views: 4.3ms | ActiveRecord: 47.5ms | Allocations: 30895)


[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0] Performing ProcessEventsJob (Job ID: ee7ef932-0700-4574-bf82-13aa326aa9d0) from Async(default) enqueued at 2020-09-05T17:09:24Z with arguments: 305
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 305], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   [1m[36mWebhookEvent Update (1.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 17:09:24.217373"], ["id", 305]]
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   [1m[36mWebhookEvent Update (1.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 17:09:24.271973"], ["id", 305]]
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ee7ef932-0700-4574-bf82-13aa326aa9d0] Performed ProcessEventsJob (Job ID: ee7ef932-0700-4574-bf82-13aa326aa9d0) from Async(default) in 110.67ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 13:09:24 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO4tDHiibShxDkjG6qAsX2o", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599325762, "data"=>{"object"=>{"id"=>"pm_1HO4tBHiibShxDkjF5cQWS2d", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34111", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tommy Con", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599325761, "customer"=>"cus_HPwCcFFXCI7BQE", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_1i4j7Z9962fFkY", "idempotency_key"=>nil}, "type"=>"payment_method.attached", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO4tDHiibShxDkjG6qAsX2o", "data"=>{"object"=>{"id"=>"pm_1HO4tBHiibShxDkjF5cQWS2d", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34111", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tommy Con", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599325761, "customer"=>"cus_HPwCcFFXCI7BQE", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}}}
  [1m[36mWebhookEvent Load (1.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO4tDHiibShxDkjG6qAsX2o"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO4tDHiibShxDkjG6qAsX2o"], ["data", "{\"id\":\"evt_1HO4tDHiibShxDkjG6qAsX2o\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599325762,\"data\":{\"object\":{\"id\":\"pm_1HO4tBHiibShxDkjF5cQWS2d\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34111\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tommy Con\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599325761,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_1i4j7Z9962fFkY\",\"idempotency_key\":null},\"type\":\"payment_method.attached\",\"webhook_event\":{\"id\":\"evt_1HO4tDHiibShxDkjG6qAsX2o\",\"data\":{\"object\":{\"id\":\"pm_1HO4tBHiibShxDkjF5cQWS2d\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34111\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tommy Con\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599325761,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}}}}"], ["created_at", "2020-09-05 17:09:24.402708"], ["updated_at", "2020-09-05 17:09:24.402708"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (29.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: ea9f8fda-b982-43f9-b619-7faf26202014) to Async(default) with arguments: 306
Completed 200 OK in 155ms (Views: 8.2ms | ActiveRecord: 37.3ms | Allocations: 20827)


[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014] Performing ProcessEventsJob (Job ID: ea9f8fda-b982-43f9-b619-7faf26202014) from Async(default) enqueued at 2020-09-05T17:09:24Z with arguments: 306
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   [1m[36mWebhookEvent Load (2.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 306], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   [1m[36mWebhookEvent Update (1.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 17:09:24.569600"], ["id", 306]]
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   [1m[36mWebhookEvent Update (1.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 17:09:24.613120"], ["id", 306]]
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   [1m[35m (7.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ea9f8fda-b982-43f9-b619-7faf26202014] Performed ProcessEventsJob (Job ID: ea9f8fda-b982-43f9-b619-7faf26202014) from Async(default) in 85.29ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 13:09:24 -0400
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 13:09:24 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO4tDHiibShxDkjljFai0iI", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599325763, "data"=>{"object"=>{"id"=>"cs_test_rDKXzdsZBxZSwtWCKsKSl07RSMZkdxGGMG0P7BXWzvFm7nkqDNoNQx5o", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>5500, "amount_total"=>5500, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"258", "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "customer_email"=>nil, "display_items"=>[{"amount"=>5500, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"checkout.session.completed", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO4tDHiibShxDkjljFai0iI", "data"=>{"object"=>{"id"=>"cs_test_rDKXzdsZBxZSwtWCKsKSl07RSMZkdxGGMG0P7BXWzvFm7nkqDNoNQx5o", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>5500, "amount_total"=>5500, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"258", "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "customer_email"=>nil, "display_items"=>[{"amount"=>5500, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}}}
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO4tDHiibShxDkjCCcZgKMI", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599325763, "data"=>{"object"=>{"id"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "object"=>"payment_intent", "amount"=>5500, "amount_capturable"=>0, "amount_received"=>5500, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HO4tCHiibShxDkjaog6HRGU", "object"=>"charge", "amount"=>5500, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO4tCHiibShxDkjgLPf1BW1", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34111", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tommy Con", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599325762, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>22, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "payment_method"=>"pm_1HO4tBHiibShxDkjF5cQWS2d", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO4tCHiibShxDkjaog6HRGU/rcpt_Hy0vSuD84O2F8UQSZS3rrn0ai65NTvc", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO4tCHiibShxDkjaog6HRGU/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HO4sYHiibShxDkjfkkXvBsd"}, "client_secret"=>"pi_1HO4sYHiibShxDkjfkkXvBsd_secret_PcCK4uZaK8MK7Ge9MwW6aL1NR", "confirmation_method"=>"automatic", "created"=>1599325722, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HO4tBHiibShxDkjF5cQWS2d", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"tom.connolly@comcast.net", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_1i4j7Z9962fFkY", "idempotency_key"=>nil}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO4tDHiibShxDkjCCcZgKMI", "data"=>{"object"=>{"id"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "object"=>"payment_intent", "amount"=>5500, "amount_capturable"=>0, "amount_received"=>5500, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HO4tCHiibShxDkjaog6HRGU", "object"=>"charge", "amount"=>5500, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO4tCHiibShxDkjgLPf1BW1", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34111", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tommy Con", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599325762, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>22, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO4sYHiibShxDkjfkkXvBsd", "payment_method"=>"pm_1HO4tBHiibShxDkjF5cQWS2d", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO4tCHiibShxDkjaog6HRGU/rcpt_Hy0vSuD84O2F8UQSZS3rrn0ai65NTvc", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO4tCHiibShxDkjaog6HRGU/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HO4sYHiibShxDkjfkkXvBsd"}, "client_secret"=>"pi_1HO4sYHiibShxDkjfkkXvBsd_secret_PcCK4uZaK8MK7Ge9MwW6aL1NR", "confirmation_method"=>"automatic", "created"=>1599325722, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HO4tBHiibShxDkjF5cQWS2d", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"tom.connolly@comcast.net", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (7.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO4tDHiibShxDkjljFai0iI"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Load (23.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO4tDHiibShxDkjCCcZgKMI"], ["LIMIT", 1]]
  [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Create (26.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO4tDHiibShxDkjljFai0iI"], ["data", "{\"id\":\"evt_1HO4tDHiibShxDkjljFai0iI\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599325763,\"data\":{\"object\":{\"id\":\"cs_test_rDKXzdsZBxZSwtWCKsKSl07RSMZkdxGGMG0P7BXWzvFm7nkqDNoNQx5o\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":5500,\"amount_total\":5500,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"258\",\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_email\":null,\"display_items\":[{\"amount\":5500,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"checkout.session.completed\",\"webhook_event\":{\"id\":\"evt_1HO4tDHiibShxDkjljFai0iI\",\"data\":{\"object\":{\"id\":\"cs_test_rDKXzdsZBxZSwtWCKsKSl07RSMZkdxGGMG0P7BXWzvFm7nkqDNoNQx5o\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":5500,\"amount_total\":5500,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"258\",\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_email\":null,\"display_items\":[{\"amount\":5500,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}}}}"], ["created_at", "2020-09-05 17:09:24.996609"], ["updated_at", "2020-09-05 17:09:24.996609"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (4.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (3.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO4tDHiibShxDkjCCcZgKMI"], ["data", "{\"id\":\"evt_1HO4tDHiibShxDkjCCcZgKMI\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599325763,\"data\":{\"object\":{\"id\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"object\":\"payment_intent\",\"amount\":5500,\"amount_capturable\":0,\"amount_received\":5500,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HO4tCHiibShxDkjaog6HRGU\",\"object\":\"charge\",\"amount\":5500,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO4tCHiibShxDkjgLPf1BW1\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34111\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tommy Con\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599325762,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":22,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"payment_method\":\"pm_1HO4tBHiibShxDkjF5cQWS2d\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO4tCHiibShxDkjaog6HRGU/rcpt_Hy0vSuD84O2F8UQSZS3rrn0ai65NTvc\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO4tCHiibShxDkjaog6HRGU/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HO4sYHiibShxDkjfkkXvBsd\"},\"client_secret\":\"pi_1HO4sYHiibShxDkjfkkXvBsd_secret_PcCK4uZaK8MK7Ge9MwW6aL1NR\",\"confirmation_method\":\"automatic\",\"created\":1599325722,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HO4tBHiibShxDkjF5cQWS2d\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"tom.connolly@comcast.net\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_1i4j7Z9962fFkY\",\"idempotency_key\":null},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HO4tDHiibShxDkjCCcZgKMI\",\"data\":{\"object\":{\"id\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"object\":\"payment_intent\",\"amount\":5500,\"amount_capturable\":0,\"amount_received\":5500,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HO4tCHiibShxDkjaog6HRGU\",\"object\":\"charge\",\"amount\":5500,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO4tCHiibShxDkjgLPf1BW1\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34111\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tommy Con\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599325762,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":22,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO4sYHiibShxDkjfkkXvBsd\",\"payment_method\":\"pm_1HO4tBHiibShxDkjF5cQWS2d\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO4tCHiibShxDkjaog6HRGU/rcpt_Hy0vSuD84O2F8UQSZS3rrn0ai65NTvc\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO4tCHiibShxDkjaog6HRGU/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HO4sYHiibShxDkjfkkXvBsd\"},\"client_secret\":\"pi_1HO4sYHiibShxDkjfkkXvBsd_secret_PcCK4uZaK8MK7Ge9MwW6aL1NR\",\"confirmation_method\":\"automatic\",\"created\":1599325722,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HO4tBHiibShxDkjF5cQWS2d\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"tom.connolly@comcast.net\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 17:09:25.042103"], ["updated_at", "2020-09-05 17:09:25.042103"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (49.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 02094a78-f2b1-4ced-9f97-9259fa50e017) to Async(default) with arguments: 307
Completed 200 OK in 218ms (Views: 3.3ms | ActiveRecord: 88.1ms | Allocations: 47723)


[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017] Performing ProcessEventsJob (Job ID: 02094a78-f2b1-4ced-9f97-9259fa50e017) from Async(default) enqueued at 2020-09-05T17:09:25Z with arguments: 307
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 39266afc-8139-4042-9ca3-a902f176e595) to Async(default) with arguments: 308
Completed 200 OK in 307ms (Views: 12.7ms | ActiveRecord: 38.8ms | Allocations: 67119)


[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595] Performing ProcessEventsJob (Job ID: 39266afc-8139-4042-9ca3-a902f176e595) from Async(default) enqueued at 2020-09-05T17:09:25Z with arguments: 308
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   [1m[36mWebhookEvent Load (1.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 308], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 17:09:25.309915"], ["id", 308]]
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 307], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[35m (2.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 17:09:25.332849"], ["id", 307]]
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   [1m[35m (26.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 17:09:25.359256"], ["id", 308]]
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[35m (21.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [39266afc-8139-4042-9ca3-a902f176e595] Performed ProcessEventsJob (Job ID: 39266afc-8139-4042-9ca3-a902f176e595) from Async(default) in 70.44ms
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HPwCcFFXCI7BQE"], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/services/events/stripe_handler.rb:12:in `process'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[36mDonation Load (0.5ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 258], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/services/events/stripe_handler.rb:23:in `process'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/services/events/stripe_handler.rb:24:in `process'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/services/events/stripe_handler.rb:24:in `process'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[36mDonation Update (0.5ms)[0m  [1m[33mUPDATE "donations" SET "stripe_id" = $1, "status" = $2, "updated_at" = $3 WHERE "donations"."id" = $4[0m  [["stripe_id", "pi_1HO4sYHiibShxDkjfkkXvBsd"], ["status", "1"], ["updated_at", "2020-09-05 17:09:25.395624"], ["id", 258]]
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/services/events/stripe_handler.rb:24:in `process'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/services/events/stripe_handler.rb:24:in `process'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `amount' for #<Stripe::Checkout::Session:0x00005641ddc08800>"], ["updated_at", "2020-09-05 17:09:25.409297"], ["id", 307]]
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [02094a78-f2b1-4ced-9f97-9259fa50e017] Performed ProcessEventsJob (Job ID: 02094a78-f2b1-4ced-9f97-9259fa50e017) from Async(default) in 249.06ms
Started GET "/checkout/success?session_idcs_test_rDKXzdsZBxZSwtWCKsKSl07RSMZkdxGGMG0P7BXWzvFm7nkqDNoNQx5o" for 127.0.0.1 at 2020-09-05 13:09:26 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_rDKXzdsZBxZSwtWCKsKSl07RSMZkdxGGMG0P7BXWzvFm7nkqDNoNQx5o"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 32.1ms | Allocations: 82)
  Rendered layouts/_header.html.erb (Duration: 11.1ms | Allocations: 1541)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (2.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 162.8ms | Allocations: 16883)
  Rendered layouts/_footer.html.erb (Duration: 4.1ms | Allocations: 541)
Completed 200 OK in 386ms (Views: 351.8ms | ActiveRecord: 25.5ms | Allocations: 39234)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 15:31:14 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO76SHiibShxDkjdvPz7keH", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599334272, "data"=>{"object"=>{"id"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>8800, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO76SHiibShxDkjRiIvm24u", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23344", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tom", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599334271, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>43, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "payment_method"=>"pm_1GyinZHiibShxDkjnTgl3YSw", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO76RHiibShxDkjyBjVTNhf/rcpt_Hy3CQGXfX3A02eVqbuHyc4NGoiJNoAb", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO76RHiibShxDkjyBjVTNhf/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HO76RHiibShxDkjJuqiY2NP"}, "client_secret"=>"pi_1HO76RHiibShxDkjJuqiY2NP_secret_jRG8ZOllrhrDwLltoAYfple2W", "confirmation_method"=>"automatic", "created"=>1599334271, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>"Subscription update", "invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1GyinZHiibShxDkjnTgl3YSw", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HO6AFHiibShxDkjkgAZBblc-initial_attempt-be10baa3c83c00252"}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO76SHiibShxDkjdvPz7keH", "data"=>{"object"=>{"id"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>8800, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO76SHiibShxDkjRiIvm24u", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23344", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tom", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599334271, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>43, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "payment_method"=>"pm_1GyinZHiibShxDkjnTgl3YSw", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO76RHiibShxDkjyBjVTNhf/rcpt_Hy3CQGXfX3A02eVqbuHyc4NGoiJNoAb", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO76RHiibShxDkjyBjVTNhf/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HO76RHiibShxDkjJuqiY2NP"}, "client_secret"=>"pi_1HO76RHiibShxDkjJuqiY2NP_secret_jRG8ZOllrhrDwLltoAYfple2W", "confirmation_method"=>"automatic", "created"=>1599334271, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>"Subscription update", "invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1GyinZHiibShxDkjnTgl3YSw", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO76SHiibShxDkjdvPz7keH"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO76SHiibShxDkjdvPz7keH"], ["data", "{\"id\":\"evt_1HO76SHiibShxDkjdvPz7keH\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599334272,\"data\":{\"object\":{\"id\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":8800,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO76SHiibShxDkjRiIvm24u\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23344\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tom\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599334271,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":43,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"payment_method\":\"pm_1GyinZHiibShxDkjnTgl3YSw\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO76RHiibShxDkjyBjVTNhf/rcpt_Hy3CQGXfX3A02eVqbuHyc4NGoiJNoAb\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO76RHiibShxDkjyBjVTNhf/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HO76RHiibShxDkjJuqiY2NP\"},\"client_secret\":\"pi_1HO76RHiibShxDkjJuqiY2NP_secret_jRG8ZOllrhrDwLltoAYfple2W\",\"confirmation_method\":\"automatic\",\"created\":1599334271,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":\"Subscription update\",\"invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1GyinZHiibShxDkjnTgl3YSw\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HO6AFHiibShxDkjkgAZBblc-initial_attempt-be10baa3c83c00252\"},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HO76SHiibShxDkjdvPz7keH\",\"data\":{\"object\":{\"id\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":8800,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO76SHiibShxDkjRiIvm24u\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23344\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tom\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599334271,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":43,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"payment_method\":\"pm_1GyinZHiibShxDkjnTgl3YSw\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO76RHiibShxDkjyBjVTNhf/rcpt_Hy3CQGXfX3A02eVqbuHyc4NGoiJNoAb\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO76RHiibShxDkjyBjVTNhf/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HO76RHiibShxDkjJuqiY2NP\"},\"client_secret\":\"pi_1HO76RHiibShxDkjJuqiY2NP_secret_jRG8ZOllrhrDwLltoAYfple2W\",\"confirmation_method\":\"automatic\",\"created\":1599334271,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":\"Subscription update\",\"invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1GyinZHiibShxDkjnTgl3YSw\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 19:31:14.107443"], ["updated_at", "2020-09-05 19:31:14.107443"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (11.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: bb41f055-3bf7-456b-8bc8-c2f1049337cc) to Async(default) with arguments: 309
Completed 200 OK in 41ms (Views: 1.4ms | ActiveRecord: 12.8ms | Allocations: 42022)


[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc] Performing ProcessEventsJob (Job ID: bb41f055-3bf7-456b-8bc8-c2f1049337cc) from Async(default) enqueued at 2020-09-05T19:31:14Z with arguments: 309
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 309], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 19:31:14.162859"], ["id", 309]]
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   [1m[35m (29.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   [1m[36mWebhookEvent Update (0.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 19:31:14.212854"], ["id", 309]]
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [bb41f055-3bf7-456b-8bc8-c2f1049337cc] Performed ProcessEventsJob (Job ID: bb41f055-3bf7-456b-8bc8-c2f1049337cc) from Async(default) in 84.79ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 15:31:14 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO76SHiibShxDkjtc8zh5gE", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599334272, "data"=>{"object"=>{"id"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO76SHiibShxDkjRiIvm24u", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23344", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tom", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599334271, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>43, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "payment_method"=>"pm_1GyinZHiibShxDkjnTgl3YSw", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO76RHiibShxDkjyBjVTNhf/rcpt_Hy3CQGXfX3A02eVqbuHyc4NGoiJNoAb", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO76RHiibShxDkjyBjVTNhf/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HO6AFHiibShxDkjkgAZBblc-initial_attempt-be10baa3c83c00252"}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO76SHiibShxDkjtc8zh5gE", "data"=>{"object"=>{"id"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO76SHiibShxDkjRiIvm24u", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23344", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Tom", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599334271, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>43, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "payment_method"=>"pm_1GyinZHiibShxDkjnTgl3YSw", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO76RHiibShxDkjyBjVTNhf/rcpt_Hy3CQGXfX3A02eVqbuHyc4NGoiJNoAb", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO76RHiibShxDkjyBjVTNhf/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO76SHiibShxDkjtc8zh5gE"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO76SHiibShxDkjtc8zh5gE"], ["data", "{\"id\":\"evt_1HO76SHiibShxDkjtc8zh5gE\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599334272,\"data\":{\"object\":{\"id\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO76SHiibShxDkjRiIvm24u\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23344\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tom\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599334271,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":43,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"payment_method\":\"pm_1GyinZHiibShxDkjnTgl3YSw\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO76RHiibShxDkjyBjVTNhf/rcpt_Hy3CQGXfX3A02eVqbuHyc4NGoiJNoAb\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO76RHiibShxDkjyBjVTNhf/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HO6AFHiibShxDkjkgAZBblc-initial_attempt-be10baa3c83c00252\"},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HO76SHiibShxDkjtc8zh5gE\",\"data\":{\"object\":{\"id\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO76SHiibShxDkjRiIvm24u\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23344\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Tom\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599334271,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":43,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"payment_method\":\"pm_1GyinZHiibShxDkjnTgl3YSw\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO76RHiibShxDkjyBjVTNhf/rcpt_Hy3CQGXfX3A02eVqbuHyc4NGoiJNoAb\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO76RHiibShxDkjyBjVTNhf/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 19:31:14.889429"], ["updated_at", "2020-09-05 19:31:14.889429"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 5ce26eec-9067-4c17-b7c2-3bb33ebde652) to Async(default) with arguments: 310
Completed 200 OK in 65ms (Views: 1.1ms | ActiveRecord: 23.8ms | Allocations: 30670)


[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652] Performing ProcessEventsJob (Job ID: 5ce26eec-9067-4c17-b7c2-3bb33ebde652) from Async(default) enqueued at 2020-09-05T19:31:14Z with arguments: 310
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 310], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 19:31:14.949242"], ["id", 310]]
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   [1m[35m (10.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 19:31:14.967012"], ["id", 310]]
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5ce26eec-9067-4c17-b7c2-3bb33ebde652] Performed ProcessEventsJob (Job ID: 5ce26eec-9067-4c17-b7c2-3bb33ebde652) from Async(default) in 31.94ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 15:31:15 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO76THiibShxDkjg68gnULb", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599334273, "data"=>{"object"=>{"id"=>"cus_HPwCcFFXCI7BQE", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1591466421, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"tom.connolly@comcast.net", "invoice_prefix"=>"DB7B36F4", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>12, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HPwCcFFXCI7BQE/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HXoQAYhAJaw2Or", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1593282645, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1593282645, "current_period_end"=>1599935445, "current_period_start"=>1599330645, "customer"=>"cus_HPwCcFFXCI7BQE", "days_until_due"=>nil, "default_payment_method"=>"pm_1GyinZHiibShxDkjnTgl3YSw", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HXoQRRTxJXfdyC", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1593282646, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HXoQAYhAJaw2Or"}, "latest_invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1593282645, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_HPwCcFFXCI7BQE/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HPwCcFFXCI7BQE/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>11}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO76THiibShxDkjg68gnULb", "data"=>{"object"=>{"id"=>"cus_HPwCcFFXCI7BQE", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1591466421, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"tom.connolly@comcast.net", "invoice_prefix"=>"DB7B36F4", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>12, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HPwCcFFXCI7BQE/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HXoQAYhAJaw2Or", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1593282645, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1593282645, "current_period_end"=>1599935445, "current_period_start"=>1599330645, "customer"=>"cus_HPwCcFFXCI7BQE", "days_until_due"=>nil, "default_payment_method"=>"pm_1GyinZHiibShxDkjnTgl3YSw", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HXoQRRTxJXfdyC", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1593282646, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HXoQAYhAJaw2Or"}, "latest_invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1593282645, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_HPwCcFFXCI7BQE/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HPwCcFFXCI7BQE/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>11}}}}
  [1m[36mWebhookEvent Load (0.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjg68gnULb"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjg68gnULb"], ["data", "{\"id\":\"evt_1HO76THiibShxDkjg68gnULb\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599334273,\"data\":{\"object\":{\"id\":\"cus_HPwCcFFXCI7BQE\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1591466421,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"tom.connolly@comcast.net\",\"invoice_prefix\":\"DB7B36F4\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":12,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HPwCcFFXCI7BQE/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HXoQAYhAJaw2Or\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1593282645,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1593282645,\"current_period_end\":1599935445,\"current_period_start\":1599330645,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GyinZHiibShxDkjnTgl3YSw\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HXoQRRTxJXfdyC\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1593282646,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HXoQAYhAJaw2Or\"},\"latest_invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1593282645,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_HPwCcFFXCI7BQE/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HPwCcFFXCI7BQE/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":11}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.updated\",\"webhook_event\":{\"id\":\"evt_1HO76THiibShxDkjg68gnULb\",\"data\":{\"object\":{\"id\":\"cus_HPwCcFFXCI7BQE\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1591466421,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"tom.connolly@comcast.net\",\"invoice_prefix\":\"DB7B36F4\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":12,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HPwCcFFXCI7BQE/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HXoQAYhAJaw2Or\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1593282645,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1593282645,\"current_period_end\":1599935445,\"current_period_start\":1599330645,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GyinZHiibShxDkjnTgl3YSw\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HXoQRRTxJXfdyC\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1593282646,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HXoQAYhAJaw2Or\"},\"latest_invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1593282645,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_HPwCcFFXCI7BQE/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HPwCcFFXCI7BQE/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":11}}}}"], ["created_at", "2020-09-05 19:31:15.254128"], ["updated_at", "2020-09-05 19:31:15.254128"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (36.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 18c639c9-43ab-4f2c-848f-7e17556395f1) to Async(default) with arguments: 311
Completed 200 OK in 86ms (Views: 1.7ms | ActiveRecord: 37.9ms | Allocations: 49170)


[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1] Performing ProcessEventsJob (Job ID: 18c639c9-43ab-4f2c-848f-7e17556395f1) from Async(default) enqueued at 2020-09-05T19:31:15Z with arguments: 311
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   [1m[36mWebhookEvent Load (0.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 311], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 19:31:15.329766"], ["id", 311]]
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 19:31:15.347690"], ["id", 311]]
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [18c639c9-43ab-4f2c-848f-7e17556395f1] Performed ProcessEventsJob (Job ID: 18c639c9-43ab-4f2c-848f-7e17556395f1) from Async(default) in 38.05ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 15:31:15 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO76THiibShxDkjnHcYaF0G", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599334273, "data"=>{"object"=>{"id"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HO76RHiibShxDkjJuqiY2NP"}, "client_secret"=>"pi_1HO76RHiibShxDkjJuqiY2NP_secret_jRG8ZOllrhrDwLltoAYfple2W", "confirmation_method"=>"automatic", "created"=>1599334271, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>"Subscription update", "invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO76THiibShxDkjnHcYaF0G", "data"=>{"object"=>{"id"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HO76RHiibShxDkjJuqiY2NP"}, "client_secret"=>"pi_1HO76RHiibShxDkjJuqiY2NP_secret_jRG8ZOllrhrDwLltoAYfple2W", "confirmation_method"=>"automatic", "created"=>1599334271, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>"Subscription update", "invoice"=>"in_1HO6AFHiibShxDkjkgAZBblc", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjnHcYaF0G"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjnHcYaF0G"], ["data", "{\"id\":\"evt_1HO76THiibShxDkjnHcYaF0G\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599334273,\"data\":{\"object\":{\"id\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HO76RHiibShxDkjJuqiY2NP\"},\"client_secret\":\"pi_1HO76RHiibShxDkjJuqiY2NP_secret_jRG8ZOllrhrDwLltoAYfple2W\",\"confirmation_method\":\"automatic\",\"created\":1599334271,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":\"Subscription update\",\"invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HO76THiibShxDkjnHcYaF0G\",\"data\":{\"object\":{\"id\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HO76RHiibShxDkjJuqiY2NP\"},\"client_secret\":\"pi_1HO76RHiibShxDkjJuqiY2NP_secret_jRG8ZOllrhrDwLltoAYfple2W\",\"confirmation_method\":\"automatic\",\"created\":1599334271,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":\"Subscription update\",\"invoice\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 19:31:15.434971"], ["updated_at", "2020-09-05 19:31:15.434971"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (12.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: cd9a5c2d-cec0-423a-a64f-2149f1d2ae55) to Async(default) with arguments: 312
Completed 200 OK in 50ms (Views: 0.8ms | ActiveRecord: 14.7ms | Allocations: 20974)


[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55] Performing ProcessEventsJob (Job ID: cd9a5c2d-cec0-423a-a64f-2149f1d2ae55) from Async(default) enqueued at 2020-09-05T19:31:15Z with arguments: 312
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 15:31:15 -0400
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   [1m[36mWebhookEvent Load (1.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO76THiibShxDkju3E4hzL1", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599334273, "data"=>{"object"=>{"id"=>"in_1HO6AFHiibShxDkjkgAZBblc", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "collection_method"=>"charge_automatically", "created"=>1599330663, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPwCcFFXCI7BQE", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HO6AFHiibShxDkji2SNtdGo", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599935445, "start"=>1599330645}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "subscription_item"=>"si_HXoQRRTxJXfdyC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"DB7B36F4-0011", "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "period_end"=>1599330645, "period_start"=>1598725845, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599334270, "marked_uncollectible_at"=>nil, "paid_at"=>1599334270, "voided_at"=>nil}, "subscription"=>"sub_HXoQAYhAJaw2Or", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599330666}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.paid", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO76THiibShxDkju3E4hzL1", "data"=>{"object"=>{"id"=>"in_1HO6AFHiibShxDkjkgAZBblc", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "collection_method"=>"charge_automatically", "created"=>1599330663, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPwCcFFXCI7BQE", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HO6AFHiibShxDkji2SNtdGo", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599935445, "start"=>1599330645}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "subscription_item"=>"si_HXoQRRTxJXfdyC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"DB7B36F4-0011", "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "period_end"=>1599330645, "period_start"=>1598725845, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599334270, "marked_uncollectible_at"=>nil, "paid_at"=>1599334270, "voided_at"=>nil}, "subscription"=>"sub_HXoQAYhAJaw2Or", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599330666}}}}
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   [1m[36mWebhookEvent Update (2.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 19:31:15.485158"], ["id", 312]]
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (2.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkju3E4hzL1"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[36mWebhookEvent Create (1.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkju3E4hzL1"], ["data", "{\"id\":\"evt_1HO76THiibShxDkju3E4hzL1\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599334273,\"data\":{\"object\":{\"id\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"collection_method\":\"charge_automatically\",\"created\":1599330663,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HO6AFHiibShxDkji2SNtdGo\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599935445,\"start\":1599330645},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subscription_item\":\"si_HXoQRRTxJXfdyC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"DB7B36F4-0011\",\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"period_end\":1599330645,\"period_start\":1598725845,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599334270,\"marked_uncollectible_at\":null,\"paid_at\":1599334270,\"voided_at\":null},\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599330666}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.paid\",\"webhook_event\":{\"id\":\"evt_1HO76THiibShxDkju3E4hzL1\",\"data\":{\"object\":{\"id\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"collection_method\":\"charge_automatically\",\"created\":1599330663,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HO6AFHiibShxDkji2SNtdGo\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599935445,\"start\":1599330645},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subscription_item\":\"si_HXoQRRTxJXfdyC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"DB7B36F4-0011\",\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"period_end\":1599330645,\"period_start\":1598725845,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599334270,\"marked_uncollectible_at\":null,\"paid_at\":1599334270,\"voided_at\":null},\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599330666}}}}"], ["created_at", "2020-09-05 19:31:15.497306"], ["updated_at", "2020-09-05 19:31:15.497306"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   [1m[36mWebhookEvent Update (1.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 19:31:15.503076"], ["id", 312]]
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 0774bb6e-c919-43a7-ad8a-793a8fd34747) to Async(default) with arguments: 313
Completed 200 OK in 48ms (Views: 2.3ms | ActiveRecord: 9.9ms | Allocations: 52724)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 15:31:15 -0400
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 15:31:15 -0400
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   [1m[35m (31.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [cd9a5c2d-cec0-423a-a64f-2149f1d2ae55] Performed ProcessEventsJob (Job ID: cd9a5c2d-cec0-423a-a64f-2149f1d2ae55) from Async(default) in 68.52ms
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747] Performing ProcessEventsJob (Job ID: 0774bb6e-c919-43a7-ad8a-793a8fd34747) from Async(default) enqueued at 2020-09-05T19:31:15Z with arguments: 313
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 313], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   [1m[36mWebhookEvent Update (1.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 19:31:15.552378"], ["id", 313]]
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO76THiibShxDkjRxK6cHSJ", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599334273, "data"=>{"object"=>{"id"=>"in_1HO6AFHiibShxDkjkgAZBblc", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "collection_method"=>"charge_automatically", "created"=>1599330663, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPwCcFFXCI7BQE", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HO6AFHiibShxDkji2SNtdGo", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599935445, "start"=>1599330645}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "subscription_item"=>"si_HXoQRRTxJXfdyC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"DB7B36F4-0011", "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "period_end"=>1599330645, "period_start"=>1598725845, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599334270, "marked_uncollectible_at"=>nil, "paid_at"=>1599334270, "voided_at"=>nil}, "subscription"=>"sub_HXoQAYhAJaw2Or", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599330666}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.payment_succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO76THiibShxDkjRxK6cHSJ", "data"=>{"object"=>{"id"=>"in_1HO6AFHiibShxDkjkgAZBblc", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "collection_method"=>"charge_automatically", "created"=>1599330663, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPwCcFFXCI7BQE", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HO6AFHiibShxDkji2SNtdGo", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599935445, "start"=>1599330645}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "subscription_item"=>"si_HXoQRRTxJXfdyC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"DB7B36F4-0011", "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "period_end"=>1599330645, "period_start"=>1598725845, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599334270, "marked_uncollectible_at"=>nil, "paid_at"=>1599334270, "voided_at"=>nil}, "subscription"=>"sub_HXoQAYhAJaw2Or", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599330666}}}}
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   â†³ app/jobs/process_events_job.rb:13:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO76THiibShxDkjSb20UjGc", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599334273, "data"=>{"object"=>{"id"=>"in_1HO6AFHiibShxDkjkgAZBblc", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "collection_method"=>"charge_automatically", "created"=>1599330663, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPwCcFFXCI7BQE", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HO6AFHiibShxDkji2SNtdGo", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599935445, "start"=>1599330645}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "subscription_item"=>"si_HXoQRRTxJXfdyC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"DB7B36F4-0011", "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "period_end"=>1599330645, "period_start"=>1598725845, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599334270, "marked_uncollectible_at"=>nil, "paid_at"=>1599334270, "voided_at"=>nil}, "subscription"=>"sub_HXoQAYhAJaw2Or", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599330666}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.finalized", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO76THiibShxDkjSb20UjGc", "data"=>{"object"=>{"id"=>"in_1HO6AFHiibShxDkjkgAZBblc", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "collection_method"=>"charge_automatically", "created"=>1599330663, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPwCcFFXCI7BQE", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HO6AFHiibShxDkji2SNtdGo", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599935445, "start"=>1599330645}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "subscription_item"=>"si_HXoQRRTxJXfdyC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"DB7B36F4-0011", "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "period_end"=>1599330645, "period_start"=>1598725845, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599334270, "marked_uncollectible_at"=>nil, "paid_at"=>1599334270, "voided_at"=>nil}, "subscription"=>"sub_HXoQAYhAJaw2Or", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599330666}}}}
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   [1m[36mWebhookEvent Update (2.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 19:31:15.574458"], ["id", 313]]
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[36mWebhookEvent Load (3.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjRxK6cHSJ"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjSb20UjGc"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Create (4.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjRxK6cHSJ"], ["data", "{\"id\":\"evt_1HO76THiibShxDkjRxK6cHSJ\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599334273,\"data\":{\"object\":{\"id\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"collection_method\":\"charge_automatically\",\"created\":1599330663,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HO6AFHiibShxDkji2SNtdGo\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599935445,\"start\":1599330645},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subscription_item\":\"si_HXoQRRTxJXfdyC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"DB7B36F4-0011\",\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"period_end\":1599330645,\"period_start\":1598725845,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599334270,\"marked_uncollectible_at\":null,\"paid_at\":1599334270,\"voided_at\":null},\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599330666}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.payment_succeeded\",\"webhook_event\":{\"id\":\"evt_1HO76THiibShxDkjRxK6cHSJ\",\"data\":{\"object\":{\"id\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"collection_method\":\"charge_automatically\",\"created\":1599330663,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HO6AFHiibShxDkji2SNtdGo\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599935445,\"start\":1599330645},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subscription_item\":\"si_HXoQRRTxJXfdyC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"DB7B36F4-0011\",\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"period_end\":1599330645,\"period_start\":1598725845,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599334270,\"marked_uncollectible_at\":null,\"paid_at\":1599334270,\"voided_at\":null},\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599330666}}}}"], ["created_at", "2020-09-05 19:31:15.588687"], ["updated_at", "2020-09-05 19:31:15.588687"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [0774bb6e-c919-43a7-ad8a-793a8fd34747] Performed ProcessEventsJob (Job ID: 0774bb6e-c919-43a7-ad8a-793a8fd34747) from Async(default) in 54.84ms
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 15:31:15 -0400
  [1m[36mWebhookEvent Create (1.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjSb20UjGc"], ["data", "{\"id\":\"evt_1HO76THiibShxDkjSb20UjGc\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599334273,\"data\":{\"object\":{\"id\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"collection_method\":\"charge_automatically\",\"created\":1599330663,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HO6AFHiibShxDkji2SNtdGo\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599935445,\"start\":1599330645},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subscription_item\":\"si_HXoQRRTxJXfdyC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"DB7B36F4-0011\",\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"period_end\":1599330645,\"period_start\":1598725845,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599334270,\"marked_uncollectible_at\":null,\"paid_at\":1599334270,\"voided_at\":null},\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599330666}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.finalized\",\"webhook_event\":{\"id\":\"evt_1HO76THiibShxDkjSb20UjGc\",\"data\":{\"object\":{\"id\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"collection_method\":\"charge_automatically\",\"created\":1599330663,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HO6AFHiibShxDkji2SNtdGo\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599935445,\"start\":1599330645},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subscription_item\":\"si_HXoQRRTxJXfdyC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"DB7B36F4-0011\",\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"period_end\":1599330645,\"period_start\":1598725845,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599334270,\"marked_uncollectible_at\":null,\"paid_at\":1599334270,\"voided_at\":null},\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599330666}}}}"], ["created_at", "2020-09-05 19:31:15.596242"], ["updated_at", "2020-09-05 19:31:15.596242"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 6744e480-75c4-4ee5-852d-f767ab55bcd5) to Async(default) with arguments: 314
Completed 200 OK in 57ms (Views: 1.3ms | ActiveRecord: 20.0ms | Allocations: 89009)


  [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 7d9c2f30-90c0-4a79-aeb8-05a2ad676008) to Async(default) with arguments: 315
Completed 200 OK in 57ms (Views: 1.2ms | ActiveRecord: 15.4ms | Allocations: 98208)


[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5] Performing ProcessEventsJob (Job ID: 6744e480-75c4-4ee5-852d-f767ab55bcd5) from Async(default) enqueued at 2020-09-05T19:31:15Z with arguments: 314
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO76THiibShxDkjHXoJPs2r", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599334273, "data"=>{"object"=>{"id"=>"in_1HO6AFHiibShxDkjkgAZBblc", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "collection_method"=>"charge_automatically", "created"=>1599330663, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPwCcFFXCI7BQE", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HO6AFHiibShxDkji2SNtdGo", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599935445, "start"=>1599330645}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "subscription_item"=>"si_HXoQRRTxJXfdyC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"DB7B36F4-0011", "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "period_end"=>1599330645, "period_start"=>1598725845, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599334270, "marked_uncollectible_at"=>nil, "paid_at"=>1599334270, "voided_at"=>nil}, "subscription"=>"sub_HXoQAYhAJaw2Or", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599330666}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>8800, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599334263, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO76THiibShxDkjHXoJPs2r", "data"=>{"object"=>{"id"=>"in_1HO6AFHiibShxDkjkgAZBblc", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HO76RHiibShxDkjyBjVTNhf", "collection_method"=>"charge_automatically", "created"=>1599330663, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPwCcFFXCI7BQE", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HO6AFHiibShxDkji2SNtdGo", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1599935445, "start"=>1599330645}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HXoQAYhAJaw2Or", "subscription_item"=>"si_HXoQRRTxJXfdyC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"DB7B36F4-0011", "paid"=>true, "payment_intent"=>"pi_1HO76RHiibShxDkjJuqiY2NP", "period_end"=>1599330645, "period_start"=>1598725845, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599334270, "marked_uncollectible_at"=>nil, "paid_at"=>1599334270, "voided_at"=>nil}, "subscription"=>"sub_HXoQAYhAJaw2Or", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599330666}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>8800, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599334263, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}}}
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008] Performing ProcessEventsJob (Job ID: 7d9c2f30-90c0-4a79-aeb8-05a2ad676008) from Async(default) enqueued at 2020-09-05T19:31:15Z with arguments: 315
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   [1m[36mWebhookEvent Load (3.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 314], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   â†³ app/jobs/process_events_job.rb:5:in `perform'
  [1m[36mWebhookEvent Load (3.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjHXoJPs2r"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   [1m[36mWebhookEvent Update (2.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 19:31:15.652669"], ["id", 314]]
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Create (3.6ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO76THiibShxDkjHXoJPs2r"], ["data", "{\"id\":\"evt_1HO76THiibShxDkjHXoJPs2r\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599334273,\"data\":{\"object\":{\"id\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"collection_method\":\"charge_automatically\",\"created\":1599330663,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HO6AFHiibShxDkji2SNtdGo\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599935445,\"start\":1599330645},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subscription_item\":\"si_HXoQRRTxJXfdyC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"DB7B36F4-0011\",\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"period_end\":1599330645,\"period_start\":1598725845,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599334270,\"marked_uncollectible_at\":null,\"paid_at\":1599334270,\"voided_at\":null},\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599330666},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":8800,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599334263,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.updated\",\"webhook_event\":{\"id\":\"evt_1HO76THiibShxDkjHXoJPs2r\",\"data\":{\"object\":{\"id\":\"in_1HO6AFHiibShxDkjkgAZBblc\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HO76RHiibShxDkjyBjVTNhf\",\"collection_method\":\"charge_automatically\",\"created\":1599330663,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_Hy2Ee74gls9UWC2nOFhOl4qQSAzIfxq/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HO6AFHiibShxDkji2SNtdGo\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1599935445,\"start\":1599330645},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subscription_item\":\"si_HXoQRRTxJXfdyC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HO6AFHiibShxDkjkgAZBblc/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"DB7B36F4-0011\",\"paid\":true,\"payment_intent\":\"pi_1HO76RHiibShxDkjJuqiY2NP\",\"period_end\":1599330645,\"period_start\":1598725845,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599334270,\"marked_uncollectible_at\":null,\"paid_at\":1599334270,\"voided_at\":null},\"subscription\":\"sub_HXoQAYhAJaw2Or\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599330666},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":8800,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599334263,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}}}}"], ["created_at", "2020-09-05 19:31:15.658148"], ["updated_at", "2020-09-05 19:31:15.658148"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea) to Async(default) with arguments: 316
Completed 200 OK in 53ms (Views: 1.3ms | ActiveRecord: 18.8ms | Allocations: 68999)


[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   [1m[36mWebhookEvent Update (2.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 19:31:15.683151"], ["id", 314]]
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea] Performing ProcessEventsJob (Job ID: 6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea) from Async(default) enqueued at 2020-09-05T19:31:15Z with arguments: 316
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   [1m[36mWebhookEvent Load (1.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 315], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   [1m[36mWebhookEvent Load (1.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 316], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   [1m[36mWebhookEvent Update (1.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 19:31:15.713104"], ["id", 315]]
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6744e480-75c4-4ee5-852d-f767ab55bcd5] Performed ProcessEventsJob (Job ID: 6744e480-75c4-4ee5-852d-f767ab55bcd5) from Async(default) in 77.89ms
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   [1m[36mWebhookEvent Update (1.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 19:31:15.716691"], ["id", 316]]
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   [1m[35m (19.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   [1m[35m (9.9ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   [1m[36mWebhookEvent Update (1.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 19:31:15.743603"], ["id", 315]]
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   [1m[36mWebhookEvent Update (3.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 19:31:15.753632"], ["id", 316]]
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [7d9c2f30-90c0-4a79-aeb8-05a2ad676008] Performed ProcessEventsJob (Job ID: 7d9c2f30-90c0-4a79-aeb8-05a2ad676008) from Async(default) in 114.67ms
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea] Performed ProcessEventsJob (Job ID: 6ca36b0e-9ea3-4894-b24a-cc5c3a24c9ea) from Async(default) in 66.56ms
  [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/checkout/success?session_idcs_test_rDKXzdsZBxZSwtWCKsKSl07RSMZkdxGGMG0P7BXWzvFm7nkqDNoNQx5o" for 127.0.0.1 at 2020-09-05 16:28:12 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_rDKXzdsZBxZSwtWCKsKSl07RSMZkdxGGMG0P7BXWzvFm7nkqDNoNQx5o"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.2ms | Allocations: 6)
  Rendered layouts/_header.html.erb (Duration: 5.9ms | Allocations: 1269)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (1.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 32.0ms | Allocations: 5278)
  Rendered layouts/_footer.html.erb (Duration: 2.7ms | Allocations: 362)
Completed 200 OK in 77ms (Views: 67.9ms | ActiveRecord: 4.0ms | Allocations: 14300)


Started GET "/" for 127.0.0.1 at 2020-09-05 16:28:40 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (1.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (1.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (1.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.8ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (2.0ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 16.2ms | Allocations: 4370)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1264)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.3ms | Allocations: 4751)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 342)
Completed 200 OK in 205ms (Views: 47.8ms | ActiveRecord: 36.7ms | Allocations: 39487)


Started GET "/donations/new" for 127.0.0.1 at 2020-09-05 16:28:44 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 73.7ms | Allocations: 7640)
  Rendered donations/new.html.erb within layouts/application (Duration: 94.3ms | Allocations: 10505)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1263)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 4.5ms | Allocations: 2601)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 346)
Completed 200 OK in 126ms (Views: 117.2ms | ActiveRecord: 1.8ms | Allocations: 22840)


Started POST "/donations" for 127.0.0.1 at 2020-09-05 16:28:50 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"oHaZF+J/W43EYRiZbargvzAPlftxId9Yh7iggWy0KRZAqjVeaZsc2uoFImcjrvwV41GDeJ1DHOhScGHOnNCNsQ==", "donation"=>{"dollars"=>"111"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (2.1ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 16], ["created_at", "2020-09-05 20:28:50.796108"], ["updated_at", "2020-09-05 20:28:50.796108"], ["amount", 11100], ["dollars", 111]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (41.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/259
Completed 200 OK in 97ms (ActiveRecord: 45.6ms | Allocations: 11921)


Started GET "/donations/259" for 127.0.0.1 at 2020-09-05 16:28:50 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"259"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mDonation Load (1.6ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 37.7ms | Allocations: 3537)
  Rendered layouts/_header.html.erb (Duration: 4.0ms | Allocations: 1264)
  [1m[36mProfile Load (0.9ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 8.8ms | Allocations: 2599)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | Allocations: 348)
Completed 200 OK in 102ms (Views: 72.9ms | ActiveRecord: 4.8ms | Allocations: 18884)


Started POST "/checkout/create" for 127.0.0.1 at 2020-09-05 16:28:53 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"VdSPxap71ceFuEKPrblgRevLz0fvTeYFomnDolWbjXhPDkXjGWRHSNPkhvKq7YlMdlSa53jZ687S9I43BjVVZQ==", "id"=>"259"}
  [1m[36mDonation Load (1.1ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 0.2ms | Allocations: 13)
Completed 200 OK in 1146ms (Views: 23.2ms | ActiveRecord: 2.1ms | Allocations: 11927)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 16:28:55 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO80IHiibShxDkjlSsg86FM", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599337734, "data"=>{"object"=>{"id"=>"pi_1HO80IHiibShxDkjnz48yRHr", "object"=>"payment_intent", "amount"=>11100, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HO80IHiibShxDkjnz48yRHr"}, "client_secret"=>"pi_1HO80IHiibShxDkjnz48yRHr_secret_CwKKohtOAN22ugI723bJeesqg", "confirmation_method"=>"automatic", "created"=>1599337734, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_Wv1XvKqbzXaQ7M", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO80IHiibShxDkjlSsg86FM", "data"=>{"object"=>{"id"=>"pi_1HO80IHiibShxDkjnz48yRHr", "object"=>"payment_intent", "amount"=>11100, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HO80IHiibShxDkjnz48yRHr"}, "client_secret"=>"pi_1HO80IHiibShxDkjnz48yRHr_secret_CwKKohtOAN22ugI723bJeesqg", "confirmation_method"=>"automatic", "created"=>1599337734, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (2.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO80IHiibShxDkjlSsg86FM"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO80IHiibShxDkjlSsg86FM"], ["data", "{\"id\":\"evt_1HO80IHiibShxDkjlSsg86FM\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599337734,\"data\":{\"object\":{\"id\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"object\":\"payment_intent\",\"amount\":11100,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HO80IHiibShxDkjnz48yRHr\"},\"client_secret\":\"pi_1HO80IHiibShxDkjnz48yRHr_secret_CwKKohtOAN22ugI723bJeesqg\",\"confirmation_method\":\"automatic\",\"created\":1599337734,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_Wv1XvKqbzXaQ7M\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HO80IHiibShxDkjlSsg86FM\",\"data\":{\"object\":{\"id\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"object\":\"payment_intent\",\"amount\":11100,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HO80IHiibShxDkjnz48yRHr\"},\"client_secret\":\"pi_1HO80IHiibShxDkjnz48yRHr_secret_CwKKohtOAN22ugI723bJeesqg\",\"confirmation_method\":\"automatic\",\"created\":1599337734,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 20:28:55.993664"], ["updated_at", "2020-09-05 20:28:55.993664"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (36.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: becd238b-cbee-4407-8d81-8735e9b41bd4) to Async(default) with arguments: 317
Completed 200 OK in 152ms (Views: 4.9ms | ActiveRecord: 41.0ms | Allocations: 20947)


[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4] Performing ProcessEventsJob (Job ID: becd238b-cbee-4407-8d81-8735e9b41bd4) from Async(default) enqueued at 2020-09-05T20:28:56Z with arguments: 317
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 317], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 20:28:56.222823"], ["id", 317]]
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 20:28:56.243738"], ["id", 317]]
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   [1m[35m (11.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [becd238b-cbee-4407-8d81-8735e9b41bd4] Performed ProcessEventsJob (Job ID: becd238b-cbee-4407-8d81-8735e9b41bd4) from Async(default) in 122.93ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 16:30:35 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO81uHiibShxDkjQxJnO7bc", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599337834, "data"=>{"object"=>{"id"=>"ch_1HO81tHiibShxDkjzWu1lzsc", "object"=>"charge", "amount"=>11100, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO81uHiibShxDkj6Oi0xoDc", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33555", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Grpthr", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599337833, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>15, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO80IHiibShxDkjnz48yRHr", "payment_method"=>"pm_1HO81sHiibShxDkjWAQ4pP4v", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO81tHiibShxDkjzWu1lzsc/rcpt_Hy4Aj4cNXMUEadNaUwvSwWe4f5CVtf3", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO81tHiibShxDkjzWu1lzsc/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_qoQBdETJW2mjhK", "idempotency_key"=>nil}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO81uHiibShxDkjQxJnO7bc", "data"=>{"object"=>{"id"=>"ch_1HO81tHiibShxDkjzWu1lzsc", "object"=>"charge", "amount"=>11100, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO81uHiibShxDkj6Oi0xoDc", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33555", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Grpthr", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599337833, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>15, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO80IHiibShxDkjnz48yRHr", "payment_method"=>"pm_1HO81sHiibShxDkjWAQ4pP4v", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO81tHiibShxDkjzWu1lzsc/rcpt_Hy4Aj4cNXMUEadNaUwvSwWe4f5CVtf3", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO81tHiibShxDkjzWu1lzsc/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO81uHiibShxDkjQxJnO7bc"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 16:30:35 -0400
  [1m[35m (4.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO81uHiibShxDkjbu62eD3G", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599337833, "data"=>{"object"=>{"id"=>"pm_1HO81sHiibShxDkjWAQ4pP4v", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33555", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Grpthr", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599337833, "customer"=>"cus_HPwCcFFXCI7BQE", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_qoQBdETJW2mjhK", "idempotency_key"=>nil}, "type"=>"payment_method.attached", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO81uHiibShxDkjbu62eD3G", "data"=>{"object"=>{"id"=>"pm_1HO81sHiibShxDkjWAQ4pP4v", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33555", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Grpthr", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599337833, "customer"=>"cus_HPwCcFFXCI7BQE", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}}}
  [1m[36mWebhookEvent Create (5.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO81uHiibShxDkjQxJnO7bc"], ["data", "{\"id\":\"evt_1HO81uHiibShxDkjQxJnO7bc\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599337834,\"data\":{\"object\":{\"id\":\"ch_1HO81tHiibShxDkjzWu1lzsc\",\"object\":\"charge\",\"amount\":11100,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO81uHiibShxDkj6Oi0xoDc\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33555\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Grpthr\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599337833,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":15,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"payment_method\":\"pm_1HO81sHiibShxDkjWAQ4pP4v\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO81tHiibShxDkjzWu1lzsc/rcpt_Hy4Aj4cNXMUEadNaUwvSwWe4f5CVtf3\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO81tHiibShxDkjzWu1lzsc/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_qoQBdETJW2mjhK\",\"idempotency_key\":null},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HO81uHiibShxDkjQxJnO7bc\",\"data\":{\"object\":{\"id\":\"ch_1HO81tHiibShxDkjzWu1lzsc\",\"object\":\"charge\",\"amount\":11100,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO81uHiibShxDkj6Oi0xoDc\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33555\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Grpthr\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599337833,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":15,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"payment_method\":\"pm_1HO81sHiibShxDkjWAQ4pP4v\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO81tHiibShxDkjzWu1lzsc/rcpt_Hy4Aj4cNXMUEadNaUwvSwWe4f5CVtf3\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO81tHiibShxDkjzWu1lzsc/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 20:30:35.096744"], ["updated_at", "2020-09-05 20:30:35.096744"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Load (23.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO81uHiibShxDkjbu62eD3G"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (6.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (30.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 4589268f-e1e8-4103-89fc-7aef945703b2) to Async(default) with arguments: 318
Completed 200 OK in 200ms (Views: 6.1ms | ActiveRecord: 41.3ms | Allocations: 41795)


  [1m[36mWebhookEvent Create (8.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO81uHiibShxDkjbu62eD3G"], ["data", "{\"id\":\"evt_1HO81uHiibShxDkjbu62eD3G\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599337833,\"data\":{\"object\":{\"id\":\"pm_1HO81sHiibShxDkjWAQ4pP4v\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33555\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Grpthr\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599337833,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_qoQBdETJW2mjhK\",\"idempotency_key\":null},\"type\":\"payment_method.attached\",\"webhook_event\":{\"id\":\"evt_1HO81uHiibShxDkjbu62eD3G\",\"data\":{\"object\":{\"id\":\"pm_1HO81sHiibShxDkjWAQ4pP4v\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33555\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Grpthr\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599337833,\"customer\":\"cus_HPwCcFFXCI7BQE\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}}}}"], ["created_at", "2020-09-05 20:30:35.184433"], ["updated_at", "2020-09-05 20:30:35.184433"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 16:30:35 -0400
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2] Performing ProcessEventsJob (Job ID: 4589268f-e1e8-4103-89fc-7aef945703b2) from Async(default) enqueued at 2020-09-05T20:30:35Z with arguments: 318
  [1m[35m (16.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: b9523c98-3acb-4f6f-87b0-ae49e7a7ba23) to Async(default) with arguments: 319
Completed 200 OK in 238ms (Views: 5.1ms | ActiveRecord: 55.5ms | Allocations: 51561)


[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23] Performing ProcessEventsJob (Job ID: b9523c98-3acb-4f6f-87b0-ae49e7a7ba23) from Async(default) enqueued at 2020-09-05T20:30:35Z with arguments: 319
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   [1m[36mWebhookEvent Load (3.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 319], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   [1m[36mWebhookEvent Update (5.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 20:30:35.398475"], ["id", 319]]
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO81uHiibShxDkj1nKxWGMF", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599337834, "data"=>{"object"=>{"id"=>"pi_1HO80IHiibShxDkjnz48yRHr", "object"=>"payment_intent", "amount"=>11100, "amount_capturable"=>0, "amount_received"=>11100, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HO81tHiibShxDkjzWu1lzsc", "object"=>"charge", "amount"=>11100, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO81uHiibShxDkj6Oi0xoDc", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33555", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Grpthr", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599337833, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>15, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO80IHiibShxDkjnz48yRHr", "payment_method"=>"pm_1HO81sHiibShxDkjWAQ4pP4v", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO81tHiibShxDkjzWu1lzsc/rcpt_Hy4Aj4cNXMUEadNaUwvSwWe4f5CVtf3", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO81tHiibShxDkjzWu1lzsc/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HO80IHiibShxDkjnz48yRHr"}, "client_secret"=>"pi_1HO80IHiibShxDkjnz48yRHr_secret_CwKKohtOAN22ugI723bJeesqg", "confirmation_method"=>"automatic", "created"=>1599337734, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HO81sHiibShxDkjWAQ4pP4v", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"tom.connolly@comcast.net", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_qoQBdETJW2mjhK", "idempotency_key"=>nil}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO81uHiibShxDkj1nKxWGMF", "data"=>{"object"=>{"id"=>"pi_1HO80IHiibShxDkjnz48yRHr", "object"=>"payment_intent", "amount"=>11100, "amount_capturable"=>0, "amount_received"=>11100, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HO81tHiibShxDkjzWu1lzsc", "object"=>"charge", "amount"=>11100, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HO81uHiibShxDkj6Oi0xoDc", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33555", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"Grpthr", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599337833, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>15, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HO80IHiibShxDkjnz48yRHr", "payment_method"=>"pm_1HO81sHiibShxDkjWAQ4pP4v", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO81tHiibShxDkjzWu1lzsc/rcpt_Hy4Aj4cNXMUEadNaUwvSwWe4f5CVtf3", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HO81tHiibShxDkjzWu1lzsc/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HO80IHiibShxDkjnz48yRHr"}, "client_secret"=>"pi_1HO80IHiibShxDkjnz48yRHr_secret_CwKKohtOAN22ugI723bJeesqg", "confirmation_method"=>"automatic", "created"=>1599337734, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HO81sHiibShxDkjWAQ4pP4v", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"tom.connolly@comcast.net", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (6.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO81uHiibShxDkj1nKxWGMF"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   [1m[36mWebhookEvent Load (10.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   [1m[35m (12.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   â†³ app/jobs/process_events_job.rb:5:in `perform'
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   [1m[35m (6.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   [1m[36mWebhookEvent Update (8.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 20:30:35.432885"], ["id", 319]]
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   [1m[36mWebhookEvent Update (5.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 20:30:35.450622"], ["id", 318]]
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Create (2.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO81uHiibShxDkj1nKxWGMF"], ["data", "{\"id\":\"evt_1HO81uHiibShxDkj1nKxWGMF\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599337834,\"data\":{\"object\":{\"id\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"object\":\"payment_intent\",\"amount\":11100,\"amount_capturable\":0,\"amount_received\":11100,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HO81tHiibShxDkjzWu1lzsc\",\"object\":\"charge\",\"amount\":11100,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO81uHiibShxDkj6Oi0xoDc\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33555\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Grpthr\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599337833,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":15,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"payment_method\":\"pm_1HO81sHiibShxDkjWAQ4pP4v\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO81tHiibShxDkjzWu1lzsc/rcpt_Hy4Aj4cNXMUEadNaUwvSwWe4f5CVtf3\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO81tHiibShxDkjzWu1lzsc/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HO80IHiibShxDkjnz48yRHr\"},\"client_secret\":\"pi_1HO80IHiibShxDkjnz48yRHr_secret_CwKKohtOAN22ugI723bJeesqg\",\"confirmation_method\":\"automatic\",\"created\":1599337734,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HO81sHiibShxDkjWAQ4pP4v\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"tom.connolly@comcast.net\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_qoQBdETJW2mjhK\",\"idempotency_key\":null},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HO81uHiibShxDkj1nKxWGMF\",\"data\":{\"object\":{\"id\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"object\":\"payment_intent\",\"amount\":11100,\"amount_capturable\":0,\"amount_received\":11100,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HO81tHiibShxDkjzWu1lzsc\",\"object\":\"charge\",\"amount\":11100,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HO81uHiibShxDkj6Oi0xoDc\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33555\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"Grpthr\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599337833,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":15,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"payment_method\":\"pm_1HO81sHiibShxDkjWAQ4pP4v\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HO81tHiibShxDkjzWu1lzsc/rcpt_Hy4Aj4cNXMUEadNaUwvSwWe4f5CVtf3\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HO81tHiibShxDkjzWu1lzsc/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HO80IHiibShxDkjnz48yRHr\"},\"client_secret\":\"pi_1HO80IHiibShxDkjnz48yRHr_secret_CwKKohtOAN22ugI723bJeesqg\",\"confirmation_method\":\"automatic\",\"created\":1599337734,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HO81sHiibShxDkjWAQ4pP4v\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"tom.connolly@comcast.net\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-05 20:30:35.442042"], ["updated_at", "2020-09-05 20:30:35.442042"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   [1m[35m (14.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b9523c98-3acb-4f6f-87b0-ae49e7a7ba23] Performed ProcessEventsJob (Job ID: b9523c98-3acb-4f6f-87b0-ae49e7a7ba23) from Async(default) in 92.65ms
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   [1m[35m (15.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 20:30:35.492477"], ["id", 318]]
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[35m (19.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 36532c8d-3162-4f5a-a99a-593b6611b5ae) to Async(default) with arguments: 320
Completed 200 OK in 96ms (Views: 2.8ms | ActiveRecord: 31.6ms | Allocations: 66767)


[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   [1m[35m (30.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [4589268f-e1e8-4103-89fc-7aef945703b2] Performed ProcessEventsJob (Job ID: 4589268f-e1e8-4103-89fc-7aef945703b2) from Async(default) in 224.6ms
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae] Performing ProcessEventsJob (Job ID: 36532c8d-3162-4f5a-a99a-593b6611b5ae) from Async(default) enqueued at 2020-09-05T20:30:35Z with arguments: 320
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 320], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 20:30:35.540697"], ["id", 320]]
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-05 20:30:35.562489"], ["id", 320]]
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   â†³ app/jobs/process_events_job.rb:13:in `perform'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-05 16:30:35 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HO81vHiibShxDkjRshwOea6", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599337835, "data"=>{"object"=>{"id"=>"cs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>11100, "amount_total"=>11100, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"259", "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "customer_email"=>nil, "display_items"=>[{"amount"=>11100, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HO80IHiibShxDkjnz48yRHr", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"checkout.session.completed", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HO81vHiibShxDkjRshwOea6", "data"=>{"object"=>{"id"=>"cs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>11100, "amount_total"=>11100, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"259", "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "customer_email"=>nil, "display_items"=>[{"amount"=>11100, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HO80IHiibShxDkjnz48yRHr", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}}}
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [36532c8d-3162-4f5a-a99a-593b6611b5ae] Performed ProcessEventsJob (Job ID: 36532c8d-3162-4f5a-a99a-593b6611b5ae) from Async(default) in 47.7ms
  [1m[36mWebhookEvent Load (1.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HO81vHiibShxDkjRshwOea6"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HO81vHiibShxDkjRshwOea6"], ["data", "{\"id\":\"evt_1HO81vHiibShxDkjRshwOea6\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599337835,\"data\":{\"object\":{\"id\":\"cs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":11100,\"amount_total\":11100,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"259\",\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_email\":null,\"display_items\":[{\"amount\":11100,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"checkout.session.completed\",\"webhook_event\":{\"id\":\"evt_1HO81vHiibShxDkjRshwOea6\",\"data\":{\"object\":{\"id\":\"cs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":11100,\"amount_total\":11100,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"259\",\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"customer_email\":null,\"display_items\":[{\"amount\":11100,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HO80IHiibShxDkjnz48yRHr\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}}}}"], ["created_at", "2020-09-05 20:30:35.585472"], ["updated_at", "2020-09-05 20:30:35.585472"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: f456df7a-9982-4864-add6-be6e79de01ac) to Async(default) with arguments: 321
Completed 200 OK in 41ms (Views: 1.0ms | ActiveRecord: 11.7ms | Allocations: 20160)


[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac] Performing ProcessEventsJob (Job ID: f456df7a-9982-4864-add6-be6e79de01ac) from Async(default) enqueued at 2020-09-05T20:30:35Z with arguments: 321
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[36mWebhookEvent Load (1.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 321], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-05 20:30:35.642369"], ["id", 321]]
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[35m (10.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HPwCcFFXCI7BQE"], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/services/events/stripe_handler.rb:12:in `process'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[36mDonation Load (0.7ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 259], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/services/events/stripe_handler.rb:23:in `process'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/services/events/stripe_handler.rb:24:in `process'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/services/events/stripe_handler.rb:24:in `process'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[36mDonation Update (1.0ms)[0m  [1m[33mUPDATE "donations" SET "stripe_id" = $1, "status" = $2, "updated_at" = $3 WHERE "donations"."id" = $4[0m  [["stripe_id", "pi_1HO80IHiibShxDkjnz48yRHr"], ["status", "1"], ["updated_at", "2020-09-05 20:30:35.693295"], ["id", 259]]
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/services/events/stripe_handler.rb:24:in `process'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[35m (7.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/services/events/stripe_handler.rb:24:in `process'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[36mWebhookEvent Update (1.1ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `amount' for #<Stripe::Checkout::Session:0x00005641dd8c7740>"], ["updated_at", "2020-09-05 20:30:35.712450"], ["id", 321]]
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [f456df7a-9982-4864-add6-be6e79de01ac] Performed ProcessEventsJob (Job ID: f456df7a-9982-4864-add6-be6e79de01ac) from Async(default) in 111.31ms
Started GET "/checkout/success?session_idcs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu" for 127.0.0.1 at 2020-09-05 16:30:37 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.1ms | Allocations: 5)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1273)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (1.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 24.6ms | Allocations: 4745)
  Rendered layouts/_footer.html.erb (Duration: 1.7ms | Allocations: 362)
Completed 200 OK in 70ms (Views: 63.3ms | ActiveRecord: 2.2ms | Allocations: 13703)


  [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (0.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mStripeReport Load (54.9ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" ORDER BY "stripe_reports"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
Started GET "/checkout/success?session_idcs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu" for 127.0.0.1 at 2020-09-05 19:51:25 -0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.9ms | Allocations: 243)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1546)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 71.6ms | Allocations: 33789)
  Rendered layouts/_footer.html.erb (Duration: 1.4ms | Allocations: 538)
Completed 200 OK in 131ms (Views: 114.8ms | ActiveRecord: 8.5ms | Allocations: 58358)


  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mStripeReport Create (34.3ms)[0m  [1m[32mINSERT INTO "stripe_reports" ("amount", "donation_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 11100], ["donation_id", 259], ["user_id", 16], ["created_at", "2020-09-06 00:08:03.539644"], ["updated_at", "2020-09-06 00:08:03.539644"]]
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/checkout/success?session_idcs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu" for 127.0.0.1 at 2020-09-05 20:09:27 -0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.8ms | Allocations: 243)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1546)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 68.0ms | Allocations: 33789)
  Rendered layouts/_footer.html.erb (Duration: 2.0ms | Allocations: 538)
Completed 200 OK in 124ms (Views: 106.7ms | ActiveRecord: 8.5ms | Allocations: 58362)


Started GET "/checkout/success?session_idcs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu" for 127.0.0.1 at 2020-09-05 20:10:16 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_HDCkfDD5m4oz8x1M8YsXPKBqoiCOso7LepOpkdJwVLQdltkdmlZzAdiu"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.8ms | Allocations: 243)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1546)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 65.3ms | Allocations: 33789)
  Rendered layouts/_footer.html.erb (Duration: 1.8ms | Allocations: 538)
Completed 200 OK in 123ms (Views: 107.1ms | ActiveRecord: 8.6ms | Allocations: 58350)


  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mStripeReport Create (1.4ms)[0m  [1m[32mINSERT INTO "stripe_reports" ("amount", "donation_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 11100], ["donation_id", 259], ["user_id", 16], ["created_at", "2020-09-06 00:16:25.064793"], ["updated_at", "2020-09-06 00:16:25.064793"]]
  [1m[35m (14.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStripeReport Destroy (1.1ms)[0m  [1m[31mDELETE FROM "stripe_reports" WHERE "stripe_reports"."id" = $1[0m  [["id", 5]]
  [1m[35m (40.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (37.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "stripe_reports"[0m
  [1m[36mStripeReport Load (1.0ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" ORDER BY "stripe_reports"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mStripeReport Load (0.8ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" WHERE "stripe_reports"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mStripeReport Create (1.9ms)[0m  [1m[32mINSERT INTO "stripe_reports" ("amount", "donation_id", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 11100], ["donation_id", 259], ["user_id", 16], ["created_at", "2020-09-06 00:25:55.219040"], ["updated_at", "2020-09-06 00:25:55.219040"]]
  [1m[35m (12.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7411833289957498605)[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateStripeReports (20200825012508)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (232.5ms)[0m  [1m[35mDROP TABLE "stripe_reports"[0m
  [1m[36mprimary::SchemaMigration Destroy (1.8ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200825012508"]]
  [1m[35m (17.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(7411833289957498605)[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
  [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2020-09-06 20:08:14 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.6ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 18.8ms | Allocations: 8224)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1528)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 318], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 57.6ms | Allocations: 31801)
  Rendered layouts/_footer.html.erb (Duration: 1.7ms | Allocations: 524)
Completed 200 OK in 175ms (Views: 117.8ms | ActiveRecord: 15.7ms | Allocations: 83122)


  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_ETwkMeJiywtHBP"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_ETxJq7EIqlFOeS"], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HXpnkNjXwKkkmm"], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" IS NOT NULL[0m
  [1m[36mActiveStorage::Attachment Load (16.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 311], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 312], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 16], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (38.4ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 314], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 315], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 316], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 317], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 313], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 319], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 318], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
Started DELETE "/logout" for 127.0.0.1 at 2020-09-07 05:27:39 -0400
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"WiMYNK7e/WlFnxLdgM25J6GvHWblLcZOCM/H7ykFO5lkQ/5BKSKRtnI5hYtznCA9IBiv9TIggvomUhHO3QkgEA=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 318], ["LIMIT", 1]]
Redirected to http://localhost:5000/
Completed 302 Found in 41ms (ActiveRecord: 0.6ms | Allocations: 9059)


Started GET "/" for 127.0.0.1 at 2020-09-07 05:27:39 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.5ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 2.8ms | Allocations: 3121)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1264)
  Rendered layouts/_navbar.html.erb (Duration: 2.1ms | Allocations: 629)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 342)
Completed 200 OK in 27ms (Views: 13.4ms | ActiveRecord: 2.0ms | Allocations: 23808)


Started GET "/sign_in" for 127.0.0.1 at 2020-09-07 05:27:41 -0400
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.7ms | Allocations: 593)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 28.9ms | Allocations: 10371)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1266)
  Rendered layouts/_navbar.html.erb (Duration: 0.6ms | Allocations: 596)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 339)
Completed 200 OK in 45ms (Views: 42.5ms | ActiveRecord: 0.0ms | Allocations: 21886)


Started POST "/sign_in" for 127.0.0.1 at 2020-09-07 05:27:54 -0400
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"l4KyEad8hPCK0/Px6PS0V4k+/bQBXeevzE82B6LubLGCAzhBGX8D8UXr4QV5nMXtSGVPoSxWLQYBY0hxSdkIhQ==", "user"=>{"login"=>"Francis Bacon", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (lower(username) = 'francis bacon' OR lower(email) = 'francis bacon') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/models/user.rb:122:in `find_for_database_authentication'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2020-09-07 09:27:54.270651"], ["last_sign_in_at", "2020-06-27 19:41:53.005022"], ["sign_in_count", 5], ["updated_at", "2020-09-07 09:27:54.270965"], ["id", 312]]
  [1m[35m (11.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:5000/
Completed 302 Found in 137ms (ActiveRecord: 12.7ms | Allocations: 14272)


Started GET "/" for 127.0.0.1 at 2020-09-07 05:27:54 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.3ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 3.0ms | Allocations: 3128)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1264)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 5.9ms | Allocations: 4765)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 343)
Completed 200 OK in 30ms (Views: 16.3ms | ActiveRecord: 2.1ms | Allocations: 27888)


Started GET "/donations/new" for 127.0.0.1 at 2020-09-07 05:28:02 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 1.9ms | Allocations: 1073)
  Rendered donations/new.html.erb within layouts/application (Duration: 6.1ms | Allocations: 3935)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1263)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.2ms | Allocations: 2594)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 346)
Completed 200 OK in 46ms (Views: 20.1ms | ActiveRecord: 6.8ms | Allocations: 22657)


Started POST "/donations" for 127.0.0.1 at 2020-09-07 05:28:10 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"/KBdUxorrC8V8/NQRQDgcKIdSdXAEn0UhVuVUIG+3a6qkbvXlJ+847XhK778uIOMelmeC+mWRBtwUxpzywJ2Dw==", "donation"=>{"dollars"=>"300"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (0.6ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 312], ["created_at", "2020-09-07 09:28:10.457983"], ["updated_at", "2020-09-07 09:28:10.457983"], ["amount", 30000], ["dollars", 300]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (15.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/260
Completed 200 OK in 38ms (ActiveRecord: 16.5ms | Allocations: 13860)


Started GET "/donations/260" for 127.0.0.1 at 2020-09-07 05:28:10 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"260"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mDonation Load (0.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 15.4ms | Allocations: 3535)
  Rendered layouts/_header.html.erb (Duration: 10.2ms | Allocations: 1264)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.4ms | Allocations: 2593)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 353)
Completed 200 OK in 49ms (Views: 37.0ms | ActiveRecord: 1.6ms | Allocations: 19151)


Started POST "/checkout/create" for 127.0.0.1 at 2020-09-07 05:29:07 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"jgBtSiwBk/XRhNreuyDxXb2YSTI7pAnjYo6s3mbapzEYH9Sica7msHLsOBr4rwhAFYHDkshfmocGM8MKaIzynw==", "id"=>"260"}
  [1m[36mDonation Load (0.5ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 0.9ms | Allocations: 185)
Completed 200 OK in 982ms (Views: 4.4ms | ActiveRecord: 0.9ms | Allocations: 28731)


Started GET "/checkout/success?session_idcs_test_hhSZFMMaIzRkcEjjXDB4q4mEIH0cV3aVZCDy6sTkZ4Kz6F9wjMpE7w2D" for 127.0.0.1 at 2020-09-07 05:29:51 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_hhSZFMMaIzRkcEjjXDB4q4mEIH0cV3aVZCDy6sTkZ4Kz6F9wjMpE7w2D"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 1.1ms | Allocations: 77)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1273)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.3ms | Allocations: 4729)
  Rendered layouts/_footer.html.erb (Duration: 1.0ms | Allocations: 354)
Completed 200 OK in 44ms (Views: 37.9ms | ActiveRecord: 0.8ms | Allocations: 14418)


  [1m[36mDonation Load (0.3ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 312], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mWebhookEvent Load (1.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2020-09-07 15:22:49 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.6ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.6ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 5.2ms | Allocations: 3127)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1264)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.1ms | Allocations: 4829)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | Allocations: 342)
Completed 200 OK in 50ms (Views: 27.7ms | ActiveRecord: 4.0ms | Allocations: 28351)


Started GET "/sermons" for 127.0.0.1 at 2020-09-07 15:36:37 -0400
Processing by SermonsController#index as HTML
  Rendering sermons/index.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:3
  [1m[36mRole Load (42.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:3
  [1m[36mSermon Load (144.4ms)[0m  [1m[34mSELECT "sermons".* FROM "sermons" ORDER BY delivered_on DESC[0m
  â†³ app/views/sermons/index.html.erb:9
  [1m[36mHomilist Load (25.8ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.4ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.3ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.3ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.3ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.3ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.1ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  [1m[36mCACHE Homilist Load (0.0ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/sermons/index.html.erb:12
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/index.html.erb:13
  Rendered sermons/index.html.erb within layouts/application (Duration: 1113.9ms | Allocations: 631083)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1264)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 4.4ms | Allocations: 2595)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 354)
Completed 200 OK in 1146ms (Views: 894.1ms | ActiveRecord: 236.2ms | Allocations: 644487)


Started GET "/sermons/199" for 127.0.0.1 at 2020-09-07 16:17:10 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by SermonsController#show as HTML
  Parameters: {"id"=>"199"}
  [1m[36mSermon Load (0.3ms)[0m  [1m[34mSELECT "sermons".* FROM "sermons" WHERE "sermons"."id" = $1 LIMIT $2[0m  [["id", 199], ["LIMIT", 1]]
  â†³ app/controllers/sermons_controller.rb:59:in `set_sermon'
  Rendering sermons/show.html.erb within layouts/application
  [1m[36mHomilist Load (0.2ms)[0m  [1m[34mSELECT "homilists".* FROM "homilists" WHERE "homilists"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/views/sermons/_serbox.html.erb:5
  Rendered sermons/_serbox.html.erb (Duration: 29.5ms | Allocations: 14094)
  [1m[36mActionText::RichText Load (79.5ms)[0m  [1m[34mSELECT "action_text_rich_texts".* FROM "action_text_rich_texts" WHERE "action_text_rich_texts"."record_id" = $1 AND "action_text_rich_texts"."record_type" = $2 AND "action_text_rich_texts"."name" = $3 LIMIT $4[0m  [["record_id", 199], ["record_type", "Sermon"], ["name", "content"], ["LIMIT", 1]]
  â†³ app/views/sermons/show.html.erb:13
  Rendered /home/tom/.rvm/gems/ruby-2.7.1/gems/actiontext-6.0.3.2/app/views/action_text/content/_layout.html.erb (Duration: 18.1ms | Allocations: 1937)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/sermons/show.html.erb:25
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  â†³ app/views/sermons/show.html.erb:25
  Rendered sermons/show.html.erb within layouts/application (Duration: 281.4ms | Allocations: 57730)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1541)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 17.9ms | Allocations: 13881)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | Allocations: 530)
Completed 200 OK in 370ms (Views: 247.1ms | ActiveRecord: 101.8ms | Allocations: 102602)


Started GET "/donations/new" for 127.0.0.1 at 2020-09-07 16:19:58 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 21.0ms | Allocations: 10630)
  Rendered donations/new.html.erb within layouts/application (Duration: 24.9ms | Allocations: 13500)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1263)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.4ms | Allocations: 2594)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 348)
Completed 200 OK in 58ms (Views: 40.3ms | ActiveRecord: 4.3ms | Allocations: 31886)


Started POST "/donations" for 127.0.0.1 at 2020-09-07 16:20:04 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"NWyKhOpLzzc8pqqWMHuKcTvetwHFZecxrbE+8dCSGkhjXWwAZP/f+5y0cniJw+mN45pg3+zh3j5YubHSmi6x6Q==", "donation"=>{"dollars"=>"12"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (0.8ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 312], ["created_at", "2020-09-07 20:20:04.484753"], ["updated_at", "2020-09-07 20:20:04.484753"], ["amount", 1200], ["dollars", 12]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (15.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/261
Completed 200 OK in 35ms (ActiveRecord: 17.6ms | Allocations: 13985)


Started GET "/donations/261" for 127.0.0.1 at 2020-09-07 16:20:04 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"261"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mDonation Load (1.0ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 10.0ms | Allocations: 3535)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1264)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.0ms | Allocations: 2592)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 349)
Completed 200 OK in 37ms (Views: 22.6ms | ActiveRecord: 4.0ms | Allocations: 19137)


Started POST "/checkout/create" for 127.0.0.1 at 2020-09-07 16:20:08 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"6+Pl5J6BLmRJc5S6JlM+ME7PgQ0ltpfghwA1fAH0wX19/FwMwy5bIeobdn5l3Mct5tYLrdZNBITjvVqoD6KU0w==", "id"=>"261"}
  [1m[36mDonation Load (1.0ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
Started POST "/checkout/create" for 127.0.0.1 at 2020-09-07 16:20:08 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"6+Pl5J6BLmRJc5S6JlM+ME7PgQ0ltpfghwA1fAH0wX19/FwMwy5bIeobdn5l3Mct5tYLrdZNBITjvVqoD6KU0w==", "id"=>"261"}
  [1m[36mDonation Load (1.1ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 261], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (2.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 3.1ms | Allocations: 183)
Completed 200 OK in 1313ms (Views: 14.7ms | ActiveRecord: 2.0ms | Allocations: 57915)


  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 0.1ms | Allocations: 12)
Completed 200 OK in 938ms (Views: 2.4ms | ActiveRecord: 3.8ms | Allocations: 54612)


Started GET "/checkout/success?session_idcs_test_ogTX4Gc6WJIYjnqBTUPaXKjWmVPdp8Mu3XrJSaLUV4igogL3JrSek9X1" for 127.0.0.1 at 2020-09-07 16:20:56 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_ogTX4Gc6WJIYjnqBTUPaXKjWmVPdp8Mu3XrJSaLUV4igogL3JrSek9X1"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.3ms | Allocations: 76)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1273)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 7.8ms | Allocations: 4767)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 356)
Completed 200 OK in 22ms (Views: 19.1ms | ActiveRecord: 1.0ms | Allocations: 14413)


Started GET "/donations/new" for 127.0.0.1 at 2020-09-07 16:30:18 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 5.7ms | Allocations: 727)
  Rendered donations/new.html.erb within layouts/application (Duration: 27.6ms | Allocations: 3730)
  Rendered layouts/_header.html.erb (Duration: 5.8ms | Allocations: 1263)
  [1m[36mProfile Load (1.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 14.9ms | Allocations: 2617)
  Rendered layouts/_footer.html.erb (Duration: 1.9ms | Allocations: 346)
Completed 200 OK in 88ms (Views: 77.8ms | ActiveRecord: 4.6ms | Allocations: 15352)


Started POST "/donations" for 127.0.0.1 at 2020-09-07 16:30:26 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"wR5WK8dR5p/TOw6n3bGb+uERoynqxA1q44M5+ZmA/dCXL7CvSeX2U3Mp1klkCfgGOVV098NANGUWi7ba0zxWcQ==", "donation"=>{"dollars"=>"16"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (2.2ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 312], ["created_at", "2020-09-07 20:30:26.284393"], ["updated_at", "2020-09-07 20:30:26.284393"], ["amount", 1600], ["dollars", 16]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (47.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/262
Completed 200 OK in 101ms (ActiveRecord: 52.3ms | Allocations: 12066)


Started GET "/donations/262" for 127.0.0.1 at 2020-09-07 16:30:26 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"262"}
  [1m[36mUser Load (5.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mDonation Load (1.5ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 20.5ms | Allocations: 2289)
  Rendered layouts/_header.html.erb (Duration: 5.0ms | Allocations: 1263)
  [1m[36mProfile Load (0.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.2ms | Allocations: 2574)
  Rendered layouts/_footer.html.erb (Duration: 1.8ms | Allocations: 346)
Completed 200 OK in 112ms (Views: 77.0ms | ActiveRecord: 9.3ms | Allocations: 17606)


Started POST "/checkout/create" for 127.0.0.1 at 2020-09-07 16:30:28 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"KIXQ7cQwBnANJXJxGbBzDyS4ov2ze9fKVy6U8M0t28q+mmkFmZ9zNa5NkLVaP4oSjKEoXUCARK4zk/skw3uOZA==", "id"=>"262"}
  [1m[36mDonation Load (1.0ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 0.2ms | Allocations: 12)
Completed 200 OK in 1217ms (Views: 4.6ms | ActiveRecord: 2.1ms | Allocations: 26179)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:30:30 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOqyvHiibShxDkjqdC7zjmf", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510629, "data"=>{"object"=>{"id"=>"pi_1HOqyvHiibShxDkjwerz9blL", "object"=>"payment_intent", "amount"=>1600, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HOqyvHiibShxDkjwerz9blL"}, "client_secret"=>"pi_1HOqyvHiibShxDkjwerz9blL_secret_yhY6JnBnS7txsOGdXH7uWsmVc", "confirmation_method"=>"automatic", "created"=>1599510629, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_dOs1icgoIHZXHA", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOqyvHiibShxDkjqdC7zjmf", "data"=>{"object"=>{"id"=>"pi_1HOqyvHiibShxDkjwerz9blL", "object"=>"payment_intent", "amount"=>1600, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HOqyvHiibShxDkjwerz9blL"}, "client_secret"=>"pi_1HOqyvHiibShxDkjwerz9blL_secret_yhY6JnBnS7txsOGdXH7uWsmVc", "confirmation_method"=>"automatic", "created"=>1599510629, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (2.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOqyvHiibShxDkjqdC7zjmf"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.5ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOqyvHiibShxDkjqdC7zjmf"], ["data", "{\"id\":\"evt_1HOqyvHiibShxDkjqdC7zjmf\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510629,\"data\":{\"object\":{\"id\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"object\":\"payment_intent\",\"amount\":1600,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HOqyvHiibShxDkjwerz9blL\"},\"client_secret\":\"pi_1HOqyvHiibShxDkjwerz9blL_secret_yhY6JnBnS7txsOGdXH7uWsmVc\",\"confirmation_method\":\"automatic\",\"created\":1599510629,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_dOs1icgoIHZXHA\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HOqyvHiibShxDkjqdC7zjmf\",\"data\":{\"object\":{\"id\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"object\":\"payment_intent\",\"amount\":1600,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HOqyvHiibShxDkjwerz9blL\"},\"client_secret\":\"pi_1HOqyvHiibShxDkjwerz9blL_secret_yhY6JnBnS7txsOGdXH7uWsmVc\",\"confirmation_method\":\"automatic\",\"created\":1599510629,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-07 20:30:30.378662"], ["updated_at", "2020-09-07 20:30:30.378662"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (59.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 95eabe98-c76e-42d5-a5db-27f704b04c0b) to Async(default) with arguments: 322
Completed 200 OK in 183ms (Views: 2.4ms | ActiveRecord: 81.5ms | Allocations: 25752)


[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b] Performing ProcessEventsJob (Job ID: 95eabe98-c76e-42d5-a5db-27f704b04c0b) from Async(default) enqueued at 2020-09-07T20:30:30Z with arguments: 322
[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b]   [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 322], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:30:30.552382"], ["id", 322]]
[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b]   [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [95eabe98-c76e-42d5-a5db-27f704b04c0b] Error performing ProcessEventsJob (Job ID: 95eabe98-c76e-42d5-a5db-27f704b04c0b) from Async(default) in 61.93ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:34: syntax error, unexpected end-of-input, expecting `end'):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:31:06 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOqzTHiibShxDkjv6AZzxc6", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510663, "data"=>{"object"=>{"id"=>"ch_1HOqzTHiibShxDkjSMH2YMD6", "object"=>"charge", "amount"=>1600, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HOqzTHiibShxDkjG0ZIVDMi", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23232", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F B", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599510663, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>33, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HOqyvHiibShxDkjwerz9blL", "payment_method"=>"pm_1HOqzSHiibShxDkjNj6OJA3S", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOqzTHiibShxDkjSMH2YMD6/rcpt_HyocoN7zLW4Sh8MTlmoHkCNs6z4IJFF", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HOqzTHiibShxDkjSMH2YMD6/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_7kSSm3kZlphMVc", "idempotency_key"=>nil}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOqzTHiibShxDkjv6AZzxc6", "data"=>{"object"=>{"id"=>"ch_1HOqzTHiibShxDkjSMH2YMD6", "object"=>"charge", "amount"=>1600, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HOqzTHiibShxDkjG0ZIVDMi", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23232", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F B", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599510663, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>33, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HOqyvHiibShxDkjwerz9blL", "payment_method"=>"pm_1HOqzSHiibShxDkjNj6OJA3S", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOqzTHiibShxDkjSMH2YMD6/rcpt_HyocoN7zLW4Sh8MTlmoHkCNs6z4IJFF", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HOqzTHiibShxDkjSMH2YMD6/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (4.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOqzTHiibShxDkjv6AZzxc6"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOqzTHiibShxDkjv6AZzxc6"], ["data", "{\"id\":\"evt_1HOqzTHiibShxDkjv6AZzxc6\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510663,\"data\":{\"object\":{\"id\":\"ch_1HOqzTHiibShxDkjSMH2YMD6\",\"object\":\"charge\",\"amount\":1600,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HOqzTHiibShxDkjG0ZIVDMi\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23232\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F B\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599510663,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":33,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"payment_method\":\"pm_1HOqzSHiibShxDkjNj6OJA3S\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOqzTHiibShxDkjSMH2YMD6/rcpt_HyocoN7zLW4Sh8MTlmoHkCNs6z4IJFF\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HOqzTHiibShxDkjSMH2YMD6/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_7kSSm3kZlphMVc\",\"idempotency_key\":null},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HOqzTHiibShxDkjv6AZzxc6\",\"data\":{\"object\":{\"id\":\"ch_1HOqzTHiibShxDkjSMH2YMD6\",\"object\":\"charge\",\"amount\":1600,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HOqzTHiibShxDkjG0ZIVDMi\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23232\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F B\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599510663,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":33,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"payment_method\":\"pm_1HOqzSHiibShxDkjNj6OJA3S\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOqzTHiibShxDkjSMH2YMD6/rcpt_HyocoN7zLW4Sh8MTlmoHkCNs6z4IJFF\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HOqzTHiibShxDkjSMH2YMD6/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-07 20:31:06.180872"], ["updated_at", "2020-09-07 20:31:06.180872"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (21.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 48f49e59-09a4-426e-a437-287ad34d4304) to Async(default) with arguments: 323
Completed 200 OK in 174ms (Views: 7.5ms | ActiveRecord: 30.2ms | Allocations: 30971)


[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304] Performing ProcessEventsJob (Job ID: 48f49e59-09a4-426e-a437-287ad34d4304) from Async(default) enqueued at 2020-09-07T20:31:06Z with arguments: 323
[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304]   [1m[36mWebhookEvent Load (1.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 323], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304]   [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304]   [1m[36mWebhookEvent Update (0.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:31:06.362490"], ["id", 323]]
[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304]   [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [48f49e59-09a4-426e-a437-287ad34d4304] Error performing ProcessEventsJob (Job ID: 48f49e59-09a4-426e-a437-287ad34d4304) from Async(default) in 42.36ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:34: syntax error, unexpected end-of-input, expecting `end'):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:31:06 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOqzUHiibShxDkjzit7otT6", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510662, "data"=>{"object"=>{"id"=>"pm_1HOqzSHiibShxDkjNj6OJA3S", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23232", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F B", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599510662, "customer"=>"cus_HTfrdHaUJIXzTt", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_7kSSm3kZlphMVc", "idempotency_key"=>nil}, "type"=>"payment_method.attached", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOqzUHiibShxDkjzit7otT6", "data"=>{"object"=>{"id"=>"pm_1HOqzSHiibShxDkjNj6OJA3S", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23232", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F B", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599510662, "customer"=>"cus_HTfrdHaUJIXzTt", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}}}
  [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOqzUHiibShxDkjzit7otT6"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.5ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOqzUHiibShxDkjzit7otT6"], ["data", "{\"id\":\"evt_1HOqzUHiibShxDkjzit7otT6\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510662,\"data\":{\"object\":{\"id\":\"pm_1HOqzSHiibShxDkjNj6OJA3S\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23232\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F B\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599510662,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_7kSSm3kZlphMVc\",\"idempotency_key\":null},\"type\":\"payment_method.attached\",\"webhook_event\":{\"id\":\"evt_1HOqzUHiibShxDkjzit7otT6\",\"data\":{\"object\":{\"id\":\"pm_1HOqzSHiibShxDkjNj6OJA3S\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23232\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F B\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599510662,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}}}}"], ["created_at", "2020-09-07 20:31:06.937527"], ["updated_at", "2020-09-07 20:31:06.937527"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (30.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: f0527689-7c32-4a65-bdc8-3bf47d5eb202) to Async(default) with arguments: 324
Completed 200 OK in 82ms (Views: 1.4ms | ActiveRecord: 33.2ms | Allocations: 20912)


[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202] Performing ProcessEventsJob (Job ID: f0527689-7c32-4a65-bdc8-3bf47d5eb202) from Async(default) enqueued at 2020-09-07T20:31:06Z with arguments: 324
[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202]   [1m[36mWebhookEvent Load (0.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 324], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202]   [1m[35m (5.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202]   [1m[36mWebhookEvent Update (3.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:31:07.023356"], ["id", 324]]
[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202]   [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f0527689-7c32-4a65-bdc8-3bf47d5eb202] Error performing ProcessEventsJob (Job ID: f0527689-7c32-4a65-bdc8-3bf47d5eb202) from Async(default) in 29.92ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:34: syntax error, unexpected end-of-input, expecting `end'):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:31:07 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOqzUHiibShxDkjxbqf2xsg", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510663, "data"=>{"object"=>{"id"=>"pi_1HOqyvHiibShxDkjwerz9blL", "object"=>"payment_intent", "amount"=>1600, "amount_capturable"=>0, "amount_received"=>1600, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HOqzTHiibShxDkjSMH2YMD6", "object"=>"charge", "amount"=>1600, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HOqzTHiibShxDkjG0ZIVDMi", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23232", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F B", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599510663, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>33, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HOqyvHiibShxDkjwerz9blL", "payment_method"=>"pm_1HOqzSHiibShxDkjNj6OJA3S", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOqzTHiibShxDkjSMH2YMD6/rcpt_HyocoN7zLW4Sh8MTlmoHkCNs6z4IJFF", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HOqzTHiibShxDkjSMH2YMD6/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HOqyvHiibShxDkjwerz9blL"}, "client_secret"=>"pi_1HOqyvHiibShxDkjwerz9blL_secret_yhY6JnBnS7txsOGdXH7uWsmVc", "confirmation_method"=>"automatic", "created"=>1599510629, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HOqzSHiibShxDkjNj6OJA3S", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"frankyB@gmail.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_7kSSm3kZlphMVc", "idempotency_key"=>nil}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOqzUHiibShxDkjxbqf2xsg", "data"=>{"object"=>{"id"=>"pi_1HOqyvHiibShxDkjwerz9blL", "object"=>"payment_intent", "amount"=>1600, "amount_capturable"=>0, "amount_received"=>1600, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HOqzTHiibShxDkjSMH2YMD6", "object"=>"charge", "amount"=>1600, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HOqzTHiibShxDkjG0ZIVDMi", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"23232", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F B", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599510663, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>33, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HOqyvHiibShxDkjwerz9blL", "payment_method"=>"pm_1HOqzSHiibShxDkjNj6OJA3S", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOqzTHiibShxDkjSMH2YMD6/rcpt_HyocoN7zLW4Sh8MTlmoHkCNs6z4IJFF", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HOqzTHiibShxDkjSMH2YMD6/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HOqyvHiibShxDkjwerz9blL"}, "client_secret"=>"pi_1HOqyvHiibShxDkjwerz9blL_secret_yhY6JnBnS7txsOGdXH7uWsmVc", "confirmation_method"=>"automatic", "created"=>1599510629, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HOqzSHiibShxDkjNj6OJA3S", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"frankyB@gmail.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOqzUHiibShxDkjxbqf2xsg"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (3.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOqzUHiibShxDkjxbqf2xsg"], ["data", "{\"id\":\"evt_1HOqzUHiibShxDkjxbqf2xsg\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510663,\"data\":{\"object\":{\"id\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"object\":\"payment_intent\",\"amount\":1600,\"amount_capturable\":0,\"amount_received\":1600,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HOqzTHiibShxDkjSMH2YMD6\",\"object\":\"charge\",\"amount\":1600,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HOqzTHiibShxDkjG0ZIVDMi\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23232\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F B\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599510663,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":33,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"payment_method\":\"pm_1HOqzSHiibShxDkjNj6OJA3S\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOqzTHiibShxDkjSMH2YMD6/rcpt_HyocoN7zLW4Sh8MTlmoHkCNs6z4IJFF\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HOqzTHiibShxDkjSMH2YMD6/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HOqyvHiibShxDkjwerz9blL\"},\"client_secret\":\"pi_1HOqyvHiibShxDkjwerz9blL_secret_yhY6JnBnS7txsOGdXH7uWsmVc\",\"confirmation_method\":\"automatic\",\"created\":1599510629,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HOqzSHiibShxDkjNj6OJA3S\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"frankyB@gmail.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_7kSSm3kZlphMVc\",\"idempotency_key\":null},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HOqzUHiibShxDkjxbqf2xsg\",\"data\":{\"object\":{\"id\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"object\":\"payment_intent\",\"amount\":1600,\"amount_capturable\":0,\"amount_received\":1600,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HOqzTHiibShxDkjSMH2YMD6\",\"object\":\"charge\",\"amount\":1600,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HOqzTHiibShxDkjG0ZIVDMi\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"23232\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F B\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599510663,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":33,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"payment_method\":\"pm_1HOqzSHiibShxDkjNj6OJA3S\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOqzTHiibShxDkjSMH2YMD6/rcpt_HyocoN7zLW4Sh8MTlmoHkCNs6z4IJFF\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HOqzTHiibShxDkjSMH2YMD6/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HOqyvHiibShxDkjwerz9blL\"},\"client_secret\":\"pi_1HOqyvHiibShxDkjwerz9blL_secret_yhY6JnBnS7txsOGdXH7uWsmVc\",\"confirmation_method\":\"automatic\",\"created\":1599510629,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HOqzSHiibShxDkjNj6OJA3S\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"frankyB@gmail.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-07 20:31:07.942806"], ["updated_at", "2020-09-07 20:31:07.942806"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 309add1b-21a6-479e-af1a-80861549a949) to Async(default) with arguments: 325
Completed 200 OK in 108ms (Views: 3.9ms | ActiveRecord: 15.6ms | Allocations: 41386)


[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949] Performing ProcessEventsJob (Job ID: 309add1b-21a6-479e-af1a-80861549a949) from Async(default) enqueued at 2020-09-07T20:31:08Z with arguments: 325
[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949]   [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 325], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949]   [1m[36mWebhookEvent Update (6.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:31:08.055571"], ["id", 325]]
[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949]   [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [309add1b-21a6-479e-af1a-80861549a949] Error performing ProcessEventsJob (Job ID: 309add1b-21a6-479e-af1a-80861549a949) from Async(default) in 40.0ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:34: syntax error, unexpected end-of-input, expecting `end'):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:31:08 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOqzUHiibShxDkjzmCse9eh", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510664, "data"=>{"object"=>{"id"=>"cs_test_mV8lMSLQRASWbOHps8XfMpcezyNZviaDVVSGu7TfMnrvObVGGsBmZ77k", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>1600, "amount_total"=>1600, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"262", "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "customer_email"=>nil, "display_items"=>[{"amount"=>1600, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HOqyvHiibShxDkjwerz9blL", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"checkout.session.completed", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOqzUHiibShxDkjzmCse9eh", "data"=>{"object"=>{"id"=>"cs_test_mV8lMSLQRASWbOHps8XfMpcezyNZviaDVVSGu7TfMnrvObVGGsBmZ77k", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>1600, "amount_total"=>1600, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"262", "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "customer_email"=>nil, "display_items"=>[{"amount"=>1600, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HOqyvHiibShxDkjwerz9blL", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}}}
  [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOqzUHiibShxDkjzmCse9eh"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOqzUHiibShxDkjzmCse9eh"], ["data", "{\"id\":\"evt_1HOqzUHiibShxDkjzmCse9eh\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510664,\"data\":{\"object\":{\"id\":\"cs_test_mV8lMSLQRASWbOHps8XfMpcezyNZviaDVVSGu7TfMnrvObVGGsBmZ77k\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":1600,\"amount_total\":1600,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"262\",\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_email\":null,\"display_items\":[{\"amount\":1600,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"checkout.session.completed\",\"webhook_event\":{\"id\":\"evt_1HOqzUHiibShxDkjzmCse9eh\",\"data\":{\"object\":{\"id\":\"cs_test_mV8lMSLQRASWbOHps8XfMpcezyNZviaDVVSGu7TfMnrvObVGGsBmZ77k\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":1600,\"amount_total\":1600,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"262\",\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_email\":null,\"display_items\":[{\"amount\":1600,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HOqyvHiibShxDkjwerz9blL\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}}}}"], ["created_at", "2020-09-07 20:31:08.558615"], ["updated_at", "2020-09-07 20:31:08.558615"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (39.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 027245e4-607c-4631-ad9c-ec0b667563a4) to Async(default) with arguments: 326
Completed 200 OK in 119ms (Views: 2.5ms | ActiveRecord: 42.4ms | Allocations: 19297)


[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4] Performing ProcessEventsJob (Job ID: 027245e4-607c-4631-ad9c-ec0b667563a4) from Async(default) enqueued at 2020-09-07T20:31:08Z with arguments: 326
[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4]   [1m[36mWebhookEvent Load (3.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 326], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4]   [1m[36mWebhookEvent Update (1.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:31:08.693422"], ["id", 326]]
[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4]   [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [027245e4-607c-4631-ad9c-ec0b667563a4] Error performing ProcessEventsJob (Job ID: 027245e4-607c-4631-ad9c-ec0b667563a4) from Async(default) in 43.83ms: SyntaxError (/home/tom/paul/app/services/events/stripe_handler.rb:34: syntax error, unexpected end-of-input, expecting `end'):
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/.rvm/gems/ruby-2.7.1/gems/zeitwerk-2.4.0/lib/zeitwerk/kernel.rb:27:in `require'
/home/tom/paul/app/jobs/process_events_job.rb:11:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:40:in `block in perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/i18n-1.8.5/lib/i18n.rb:313:in `with_locale'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:25:in `block (4 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `block in instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/notifications.rb:180:in `instrument'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:24:in `block (3 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `block in tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `block in tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:28:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/tagged_logging.rb:80:in `tagged'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:45:in `tag_logger'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/logging.rb:21:in `block (2 levels) in <module:Logging>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:39:in `perform_now'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:25:in `block in execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:112:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:43:in `block (4 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:72:in `block in wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/execution_wrapper.rb:88:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/reloader.rb:71:in `wrap'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/railtie.rb:42:in `block (3 levels) in <class:Railtie>'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `instance_exec'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:121:in `block in run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activesupport-6.0.3.2/lib/active_support/callbacks.rb:139:in `run_callbacks'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/execution.rb:23:in `execute'
/home/tom/.rvm/gems/ruby-2.7.1/gems/activejob-6.0.3.2/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:363:in `run_task'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `block (3 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `loop'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:335:in `block (2 levels) in create_worker'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `catch'
/home/tom/.rvm/gems/ruby-2.7.1/gems/concurrent-ruby-1.1.7/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block in create_worker'
Started GET "/checkout/success?session_idcs_test_mV8lMSLQRASWbOHps8XfMpcezyNZviaDVVSGu7TfMnrvObVGGsBmZ77k" for 127.0.0.1 at 2020-09-07 16:31:09 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_mV8lMSLQRASWbOHps8XfMpcezyNZviaDVVSGu7TfMnrvObVGGsBmZ77k"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.2ms | Allocations: 5)
  Rendered layouts/_header.html.erb (Duration: 12.6ms | Allocations: 1268)
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 41.0ms | Allocations: 4778)
  Rendered layouts/_footer.html.erb (Duration: 1.9ms | Allocations: 360)
Completed 200 OK in 113ms (Views: 102.5ms | ActiveRecord: 3.0ms | Allocations: 13855)


Started GET "/donations/new" for 127.0.0.1 at 2020-09-07 16:34:48 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 1.4ms | Allocations: 780)
  Rendered donations/new.html.erb within layouts/application (Duration: 28.0ms | Allocations: 16083)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1264)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 18.7ms | Allocations: 12847)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | Allocations: 347)
Completed 200 OK in 75ms (Views: 50.6ms | ActiveRecord: 11.2ms | Allocations: 45711)


Started POST "/donations" for 127.0.0.1 at 2020-09-07 16:34:55 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"G32AzwSpuAfPksBHYlkBXm/iUTmpVI5nUMmVEfB2JZNNTGZLih2oy2+AGKnb4WKit6aG54DQt2ilwRoyusqOMg==", "donation"=>{"dollars"=>"36"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (1.9ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 312], ["created_at", "2020-09-07 20:34:55.309584"], ["updated_at", "2020-09-07 20:34:55.309584"], ["amount", 3600], ["dollars", 36]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (31.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/263
Completed 200 OK in 96ms (ActiveRecord: 36.2ms | Allocations: 13766)


Started GET "/donations/263" for 127.0.0.1 at 2020-09-07 16:34:55 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"263"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mDonation Load (1.6ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 263], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 11.4ms | Allocations: 2291)
  Rendered layouts/_header.html.erb (Duration: 5.0ms | Allocations: 1263)
  [1m[36mProfile Load (0.8ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.2ms | Allocations: 2574)
  Rendered layouts/_footer.html.erb (Duration: 2.0ms | Allocations: 346)
Completed 200 OK in 82ms (Views: 50.9ms | ActiveRecord: 5.0ms | Allocations: 17724)


Started POST "/checkout/create" for 127.0.0.1 at 2020-09-07 16:35:01 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"jC9CQuC50/rf+7O8PqTkWb7DOpJdmg7Oc2cfZwM0iasaMPuqvRamv3yTUXh9Kx1EFtqwMq5hnaoX2nCzDWLcBQ==", "id"=>"263"}
  [1m[36mDonation Load (0.8ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 263], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 0.3ms | Allocations: 12)
Completed 200 OK in 1144ms (Views: 4.8ms | ActiveRecord: 1.8ms | Allocations: 26360)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:35:02 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOr3KHiibShxDkjPwDyMQtY", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510902, "data"=>{"object"=>{"id"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "object"=>"payment_intent", "amount"=>3600, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HOr3KHiibShxDkjfsVODI5j"}, "client_secret"=>"pi_1HOr3KHiibShxDkjfsVODI5j_secret_hBJDksTziI8zHdhl3moIwwQ8u", "confirmation_method"=>"automatic", "created"=>1599510902, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_sud15QkdtHHaFV", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOr3KHiibShxDkjPwDyMQtY", "data"=>{"object"=>{"id"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "object"=>"payment_intent", "amount"=>3600, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HOr3KHiibShxDkjfsVODI5j"}, "client_secret"=>"pi_1HOr3KHiibShxDkjfsVODI5j_secret_hBJDksTziI8zHdhl3moIwwQ8u", "confirmation_method"=>"automatic", "created"=>1599510902, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (2.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOr3KHiibShxDkjPwDyMQtY"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOr3KHiibShxDkjPwDyMQtY"], ["data", "{\"id\":\"evt_1HOr3KHiibShxDkjPwDyMQtY\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510902,\"data\":{\"object\":{\"id\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"object\":\"payment_intent\",\"amount\":3600,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HOr3KHiibShxDkjfsVODI5j\"},\"client_secret\":\"pi_1HOr3KHiibShxDkjfsVODI5j_secret_hBJDksTziI8zHdhl3moIwwQ8u\",\"confirmation_method\":\"automatic\",\"created\":1599510902,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_sud15QkdtHHaFV\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HOr3KHiibShxDkjPwDyMQtY\",\"data\":{\"object\":{\"id\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"object\":\"payment_intent\",\"amount\":3600,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HOr3KHiibShxDkjfsVODI5j\"},\"client_secret\":\"pi_1HOr3KHiibShxDkjfsVODI5j_secret_hBJDksTziI8zHdhl3moIwwQ8u\",\"confirmation_method\":\"automatic\",\"created\":1599510902,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-07 20:35:02.725070"], ["updated_at", "2020-09-07 20:35:02.725070"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (45.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 9c43cf3b-6000-487c-b629-64dbcfb95dc4) to Async(default) with arguments: 327
Completed 200 OK in 163ms (Views: 1.2ms | ActiveRecord: 66.2ms | Allocations: 25343)


[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4] Performing ProcessEventsJob (Job ID: 9c43cf3b-6000-487c-b629-64dbcfb95dc4) from Async(default) enqueued at 2020-09-07T20:35:02Z with arguments: 327
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 327], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:35:02.821752"], ["id", 327]]
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   [1m[35m (62.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   [1m[36mWebhookEvent Update (1.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-07 20:35:02.896712"], ["id", 327]]
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   [1m[35m (13.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [9c43cf3b-6000-487c-b629-64dbcfb95dc4] Performed ProcessEventsJob (Job ID: 9c43cf3b-6000-487c-b629-64dbcfb95dc4) from Async(default) in 105.38ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:35:36 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOr3rHiibShxDkjZrvE4dIn", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510935, "data"=>{"object"=>{"id"=>"ch_1HOr3qHiibShxDkjrgwIoeXY", "object"=>"charge", "amount"=>3600, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HOr3rHiibShxDkjBs20UIaw", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F Bakon", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599510934, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>9, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "payment_method"=>"pm_1HOr3qHiibShxDkjmaf5ZOWb", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOr3qHiibShxDkjrgwIoeXY/rcpt_Hyohsh0rUrmLHMlcDJYFKceUOUtW8VH", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HOr3qHiibShxDkjrgwIoeXY/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_MsL9PUnRQTxHle", "idempotency_key"=>nil}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOr3rHiibShxDkjZrvE4dIn", "data"=>{"object"=>{"id"=>"ch_1HOr3qHiibShxDkjrgwIoeXY", "object"=>"charge", "amount"=>3600, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HOr3rHiibShxDkjBs20UIaw", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F Bakon", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599510934, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>9, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "payment_method"=>"pm_1HOr3qHiibShxDkjmaf5ZOWb", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOr3qHiibShxDkjrgwIoeXY/rcpt_Hyohsh0rUrmLHMlcDJYFKceUOUtW8VH", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HOr3qHiibShxDkjrgwIoeXY/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOr3rHiibShxDkjZrvE4dIn"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (5.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOr3rHiibShxDkjZrvE4dIn"], ["data", "{\"id\":\"evt_1HOr3rHiibShxDkjZrvE4dIn\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510935,\"data\":{\"object\":{\"id\":\"ch_1HOr3qHiibShxDkjrgwIoeXY\",\"object\":\"charge\",\"amount\":3600,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HOr3rHiibShxDkjBs20UIaw\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F Bakon\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599510934,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":9,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"payment_method\":\"pm_1HOr3qHiibShxDkjmaf5ZOWb\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOr3qHiibShxDkjrgwIoeXY/rcpt_Hyohsh0rUrmLHMlcDJYFKceUOUtW8VH\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HOr3qHiibShxDkjrgwIoeXY/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_MsL9PUnRQTxHle\",\"idempotency_key\":null},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HOr3rHiibShxDkjZrvE4dIn\",\"data\":{\"object\":{\"id\":\"ch_1HOr3qHiibShxDkjrgwIoeXY\",\"object\":\"charge\",\"amount\":3600,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HOr3rHiibShxDkjBs20UIaw\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F Bakon\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599510934,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":9,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"payment_method\":\"pm_1HOr3qHiibShxDkjmaf5ZOWb\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOr3qHiibShxDkjrgwIoeXY/rcpt_Hyohsh0rUrmLHMlcDJYFKceUOUtW8VH\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HOr3qHiibShxDkjrgwIoeXY/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-07 20:35:36.344469"], ["updated_at", "2020-09-07 20:35:36.344469"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (10.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: f8977e46-ae15-4da7-8afb-fbe0962c8bee) to Async(default) with arguments: 328
Completed 200 OK in 144ms (Views: 6.5ms | ActiveRecord: 17.7ms | Allocations: 30663)


[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee] Performing ProcessEventsJob (Job ID: f8977e46-ae15-4da7-8afb-fbe0962c8bee) from Async(default) enqueued at 2020-09-07T20:35:36Z with arguments: 328
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   [1m[36mWebhookEvent Load (2.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 328], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   [1m[35m (6.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   [1m[36mWebhookEvent Update (3.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:35:36.517595"], ["id", 328]]
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   [1m[35m (14.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   [1m[36mWebhookEvent Update (1.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-07 20:35:36.590052"], ["id", 328]]
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [f8977e46-ae15-4da7-8afb-fbe0962c8bee] Performed ProcessEventsJob (Job ID: f8977e46-ae15-4da7-8afb-fbe0962c8bee) from Async(default) in 125.69ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:35:37 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOr3rHiibShxDkjufqR2Wy3", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510934, "data"=>{"object"=>{"id"=>"pm_1HOr3qHiibShxDkjmaf5ZOWb", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F Bakon", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599510934, "customer"=>"cus_HTfrdHaUJIXzTt", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_MsL9PUnRQTxHle", "idempotency_key"=>nil}, "type"=>"payment_method.attached", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOr3rHiibShxDkjufqR2Wy3", "data"=>{"object"=>{"id"=>"pm_1HOr3qHiibShxDkjmaf5ZOWb", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F Bakon", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599510934, "customer"=>"cus_HTfrdHaUJIXzTt", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}}}
  [1m[36mWebhookEvent Load (1.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOr3rHiibShxDkjufqR2Wy3"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.5ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOr3rHiibShxDkjufqR2Wy3"], ["data", "{\"id\":\"evt_1HOr3rHiibShxDkjufqR2Wy3\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510934,\"data\":{\"object\":{\"id\":\"pm_1HOr3qHiibShxDkjmaf5ZOWb\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F Bakon\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599510934,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_MsL9PUnRQTxHle\",\"idempotency_key\":null},\"type\":\"payment_method.attached\",\"webhook_event\":{\"id\":\"evt_1HOr3rHiibShxDkjufqR2Wy3\",\"data\":{\"object\":{\"id\":\"pm_1HOr3qHiibShxDkjmaf5ZOWb\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F Bakon\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599510934,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}}}}"], ["created_at", "2020-09-07 20:35:37.311927"], ["updated_at", "2020-09-07 20:35:37.311927"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (32.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 1e573d24-be4b-4867-ad3f-a1ecbd5ad409) to Async(default) with arguments: 329
Completed 200 OK in 143ms (Views: 4.8ms | ActiveRecord: 36.3ms | Allocations: 20854)


[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409] Performing ProcessEventsJob (Job ID: 1e573d24-be4b-4867-ad3f-a1ecbd5ad409) from Async(default) enqueued at 2020-09-07T20:35:37Z with arguments: 329
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 329], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   [1m[35m (5.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   [1m[36mWebhookEvent Update (1.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:35:37.474129"], ["id", 329]]
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   [1m[35m (10.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-07 20:35:37.507379"], ["id", 329]]
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [1e573d24-be4b-4867-ad3f-a1ecbd5ad409] Performed ProcessEventsJob (Job ID: 1e573d24-be4b-4867-ad3f-a1ecbd5ad409) from Async(default) in 58.98ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:35:37 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOr3rHiibShxDkjJIQYKpf7", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510935, "data"=>{"object"=>{"id"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "object"=>"payment_intent", "amount"=>3600, "amount_capturable"=>0, "amount_received"=>3600, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HOr3qHiibShxDkjrgwIoeXY", "object"=>"charge", "amount"=>3600, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HOr3rHiibShxDkjBs20UIaw", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F Bakon", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599510934, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>9, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "payment_method"=>"pm_1HOr3qHiibShxDkjmaf5ZOWb", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOr3qHiibShxDkjrgwIoeXY/rcpt_Hyohsh0rUrmLHMlcDJYFKceUOUtW8VH", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HOr3qHiibShxDkjrgwIoeXY/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HOr3KHiibShxDkjfsVODI5j"}, "client_secret"=>"pi_1HOr3KHiibShxDkjfsVODI5j_secret_hBJDksTziI8zHdhl3moIwwQ8u", "confirmation_method"=>"automatic", "created"=>1599510902, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HOr3qHiibShxDkjmaf5ZOWb", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"frankyB@gmail.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_MsL9PUnRQTxHle", "idempotency_key"=>nil}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOr3rHiibShxDkjJIQYKpf7", "data"=>{"object"=>{"id"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "object"=>"payment_intent", "amount"=>3600, "amount_capturable"=>0, "amount_received"=>3600, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HOr3qHiibShxDkjrgwIoeXY", "object"=>"charge", "amount"=>3600, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HOr3rHiibShxDkjBs20UIaw", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"F Bakon", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599510934, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>9, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "payment_method"=>"pm_1HOr3qHiibShxDkjmaf5ZOWb", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOr3qHiibShxDkjrgwIoeXY/rcpt_Hyohsh0rUrmLHMlcDJYFKceUOUtW8VH", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HOr3qHiibShxDkjrgwIoeXY/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HOr3KHiibShxDkjfsVODI5j"}, "client_secret"=>"pi_1HOr3KHiibShxDkjfsVODI5j_secret_hBJDksTziI8zHdhl3moIwwQ8u", "confirmation_method"=>"automatic", "created"=>1599510902, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HOr3qHiibShxDkjmaf5ZOWb", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"frankyB@gmail.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOr3rHiibShxDkjJIQYKpf7"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOr3rHiibShxDkjJIQYKpf7"], ["data", "{\"id\":\"evt_1HOr3rHiibShxDkjJIQYKpf7\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510935,\"data\":{\"object\":{\"id\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"object\":\"payment_intent\",\"amount\":3600,\"amount_capturable\":0,\"amount_received\":3600,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HOr3qHiibShxDkjrgwIoeXY\",\"object\":\"charge\",\"amount\":3600,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HOr3rHiibShxDkjBs20UIaw\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F Bakon\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599510934,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":9,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"payment_method\":\"pm_1HOr3qHiibShxDkjmaf5ZOWb\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOr3qHiibShxDkjrgwIoeXY/rcpt_Hyohsh0rUrmLHMlcDJYFKceUOUtW8VH\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HOr3qHiibShxDkjrgwIoeXY/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HOr3KHiibShxDkjfsVODI5j\"},\"client_secret\":\"pi_1HOr3KHiibShxDkjfsVODI5j_secret_hBJDksTziI8zHdhl3moIwwQ8u\",\"confirmation_method\":\"automatic\",\"created\":1599510902,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HOr3qHiibShxDkjmaf5ZOWb\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"frankyB@gmail.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_MsL9PUnRQTxHle\",\"idempotency_key\":null},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HOr3rHiibShxDkjJIQYKpf7\",\"data\":{\"object\":{\"id\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"object\":\"payment_intent\",\"amount\":3600,\"amount_capturable\":0,\"amount_received\":3600,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HOr3qHiibShxDkjrgwIoeXY\",\"object\":\"charge\",\"amount\":3600,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HOr3rHiibShxDkjBs20UIaw\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"F Bakon\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599510934,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":9,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"payment_method\":\"pm_1HOr3qHiibShxDkjmaf5ZOWb\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HOr3qHiibShxDkjrgwIoeXY/rcpt_Hyohsh0rUrmLHMlcDJYFKceUOUtW8VH\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HOr3qHiibShxDkjrgwIoeXY/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HOr3KHiibShxDkjfsVODI5j\"},\"client_secret\":\"pi_1HOr3KHiibShxDkjfsVODI5j_secret_hBJDksTziI8zHdhl3moIwwQ8u\",\"confirmation_method\":\"automatic\",\"created\":1599510902,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HOr3qHiibShxDkjmaf5ZOWb\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"frankyB@gmail.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-07 20:35:37.843234"], ["updated_at", "2020-09-07 20:35:37.843234"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (29.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: c1f21c24-82aa-461c-be71-0df711487194) to Async(default) with arguments: 330
Completed 200 OK in 199ms (Views: 9.3ms | ActiveRecord: 33.7ms | Allocations: 41444)


[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194] Performing ProcessEventsJob (Job ID: c1f21c24-82aa-461c-be71-0df711487194) from Async(default) enqueued at 2020-09-07T20:35:37Z with arguments: 330
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-07 16:35:38 -0400
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   [1m[36mWebhookEvent Load (1.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 330], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   [1m[36mWebhookEvent Update (1.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:35:38.064841"], ["id", 330]]
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HOr3sHiibShxDkjR7apdeAM", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599510936, "data"=>{"object"=>{"id"=>"cs_test_FjVdhkPvYzmkNCmzKYAvjJby3zH6Jt4hLBE1WFFZPhPj7YlMkPcSI159", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>3600, "amount_total"=>3600, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"263", "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "customer_email"=>nil, "display_items"=>[{"amount"=>3600, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"checkout.session.completed", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HOr3sHiibShxDkjR7apdeAM", "data"=>{"object"=>{"id"=>"cs_test_FjVdhkPvYzmkNCmzKYAvjJby3zH6Jt4hLBE1WFFZPhPj7YlMkPcSI159", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>3600, "amount_total"=>3600, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"263", "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "customer_email"=>nil, "display_items"=>[{"amount"=>3600, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HOr3KHiibShxDkjfsVODI5j", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}}}
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   [1m[35m (16.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[36mWebhookEvent Load (2.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HOr3sHiibShxDkjR7apdeAM"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   [1m[36mWebhookEvent Update (2.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-07 20:35:38.102520"], ["id", 330]]
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[35m (16.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (3.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HOr3sHiibShxDkjR7apdeAM"], ["data", "{\"id\":\"evt_1HOr3sHiibShxDkjR7apdeAM\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599510936,\"data\":{\"object\":{\"id\":\"cs_test_FjVdhkPvYzmkNCmzKYAvjJby3zH6Jt4hLBE1WFFZPhPj7YlMkPcSI159\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":3600,\"amount_total\":3600,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"263\",\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_email\":null,\"display_items\":[{\"amount\":3600,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"checkout.session.completed\",\"webhook_event\":{\"id\":\"evt_1HOr3sHiibShxDkjR7apdeAM\",\"data\":{\"object\":{\"id\":\"cs_test_FjVdhkPvYzmkNCmzKYAvjJby3zH6Jt4hLBE1WFFZPhPj7YlMkPcSI159\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":3600,\"amount_total\":3600,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"263\",\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_email\":null,\"display_items\":[{\"amount\":3600,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HOr3KHiibShxDkjfsVODI5j\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}}}}"], ["created_at", "2020-09-07 20:35:38.109821"], ["updated_at", "2020-09-07 20:35:38.109821"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [c1f21c24-82aa-461c-be71-0df711487194] Performed ProcessEventsJob (Job ID: c1f21c24-82aa-461c-be71-0df711487194) from Async(default) in 93.79ms
  [1m[35m (16.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: c213cff2-f17c-48b8-93fb-094963f03911) to Async(default) with arguments: 331
Completed 200 OK in 72ms (Views: 0.8ms | ActiveRecord: 40.0ms | Allocations: 34530)


[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911] Performing ProcessEventsJob (Job ID: c213cff2-f17c-48b8-93fb-094963f03911) from Async(default) enqueued at 2020-09-07T20:35:38Z with arguments: 331
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[36mWebhookEvent Load (1.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 331], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-07 20:35:38.176291"], ["id", 331]]
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HTfrdHaUJIXzTt"], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/services/events/stripe_handler.rb:12:in `process'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[36mDonation Load (1.3ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 263], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/services/events/stripe_handler.rb:18:in `process'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[36mDonation Update (0.6ms)[0m  [1m[33mUPDATE "donations" SET "stripe_id" = $1, "status" = $2, "updated_at" = $3 WHERE "donations"."id" = $4[0m  [["stripe_id", "pi_1HOr3KHiibShxDkjfsVODI5j"], ["status", "1"], ["updated_at", "2020-09-07 20:35:38.216371"], ["id", 263]]
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[35m (11.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-07 20:35:38.240208"], ["id", 331]]
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [c213cff2-f17c-48b8-93fb-094963f03911] Performed ProcessEventsJob (Job ID: c213cff2-f17c-48b8-93fb-094963f03911) from Async(default) in 90.19ms
Started GET "/checkout/success?session_idcs_test_FjVdhkPvYzmkNCmzKYAvjJby3zH6Jt4hLBE1WFFZPhPj7YlMkPcSI159" for 127.0.0.1 at 2020-09-07 16:35:39 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_FjVdhkPvYzmkNCmzKYAvjJby3zH6Jt4hLBE1WFFZPhPj7YlMkPcSI159"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.2ms | Allocations: 5)
  Rendered layouts/_header.html.erb (Duration: 9.2ms | Allocations: 1273)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (1.9ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 34.2ms | Allocations: 4730)
  Rendered layouts/_footer.html.erb (Duration: 2.0ms | Allocations: 362)
Completed 200 OK in 102ms (Views: 92.2ms | ActiveRecord: 3.1ms | Allocations: 13862)


  [1m[36mDonation Load (1.0ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (1.1ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 312], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (0.8ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 260], ["LIMIT", 1]]
  [1m[36mPayment Load (26.5ms)[0m  [1m[34mSELECT "payments".* FROM "payments"[0m
Started GET "/register/edit" for 127.0.0.1 at 2020-09-08 06:07:39 -0400
Processing by Devise::RegistrationsController#edit as HTML
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  Rendering devise/registrations/edit.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.7ms | Allocations: 200)
  Rendered devise/registrations/edit.html.erb within layouts/application (Duration: 50.8ms | Allocations: 3823)
  Rendered layouts/_header.html.erb (Duration: 6.4ms | Allocations: 1267)
  [1m[36mProfile Load (1.8ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 67.0ms | Allocations: 11814)
  Rendered layouts/_footer.html.erb (Duration: 2.7ms | Allocations: 344)
Completed 200 OK in 283ms (Views: 188.7ms | ActiveRecord: 4.4ms | Allocations: 41141)


Started GET "/profiles/262/edit" for 127.0.0.1 at 2020-09-08 06:08:44 -0400
Processing by ProfilesController#edit as HTML
  Parameters: {"id"=>"262"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mProfile Load (0.8ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  â†³ app/controllers/profiles_controller.rb:57:in `set_profile'
  Rendering profiles/edit.html.erb within layouts/application
  Rendered profiles/_form.html.erb (Duration: 35.5ms | Allocations: 3803)
  Rendered profiles/edit.html.erb within layouts/application (Duration: 39.0ms | Allocations: 4368)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1263)
  [1m[36mProfile Load (0.9ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 12.9ms | Allocations: 2592)
  Rendered layouts/_footer.html.erb (Duration: 2.7ms | Allocations: 348)
Completed 200 OK in 117ms (Views: 89.1ms | ActiveRecord: 2.9ms | Allocations: 20774)


Started PATCH "/profiles/262" for 127.0.0.1 at 2020-09-08 06:09:09 -0400
Processing by ProfilesController#update as HTML
  Parameters: {"authenticity_token"=>"6ab0060xPoCDoPdGiSVs8mQiocJFAVWHhzs1LgL+B5jk42MrIR7Ws/KVfL7j2rk2XpO/gx9F0Us8Z4Kz0J/c2w==", "profile"=>{"cities"=>"", "background"=>"", "career"=>"", "family"=>"", "lifestyle"=>"", "civic"=>"", "church"=>""}, "commit"=>"save changes", "id"=>"262"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mProfile Load (1.1ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  â†³ app/controllers/profiles_controller.rb:57:in `set_profile'
DEPRECATION WARNING: update_attributes is deprecated and will be removed from Rails 6.1 (please, use update instead) (called from update at /home/tom/paul/app/controllers/profiles_controller.rb:29)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/profiles_controller.rb:29:in `update'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/profiles_controller.rb:29:in `update'
  [1m[36mProfile Update (1.5ms)[0m  [1m[33mUPDATE "profiles" SET "cities" = $1, "background" = $2, "career" = $3, "family" = $4, "lifestyle" = $5, "civic" = $6, "church" = $7, "updated_at" = $8 WHERE "profiles"."id" = $9[0m  [["cities", ""], ["background", ""], ["career", ""], ["family", ""], ["lifestyle", ""], ["civic", ""], ["church", ""], ["updated_at", "2020-09-08 10:09:09.167078"], ["id", 262]]
  â†³ app/controllers/profiles_controller.rb:29:in `update'
  [1m[35m (51.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/profiles_controller.rb:29:in `update'
Redirected to http://localhost:5000/profiles/262
Completed 302 Found in 129ms (ActiveRecord: 56.6ms | Allocations: 15401)


Started GET "/profiles/262" for 127.0.0.1 at 2020-09-08 06:09:09 -0400
Processing by ProfilesController#show as HTML
  Parameters: {"id"=>"262"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mProfile Load (1.0ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."id" = $1 LIMIT $2[0m  [["id", 262], ["LIMIT", 1]]
  â†³ app/controllers/profiles_controller.rb:57:in `set_profile'
  Rendering profiles/show.html.erb within layouts/application
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/profiles/show.html.erb:2
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 312], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/views/profiles/show.html.erb:3
  Rendered profiles/show.html.erb within layouts/application (Duration: 48.7ms | Allocations: 8358)
  Rendered layouts/_header.html.erb (Duration: 4.8ms | Allocations: 1264)
  [1m[36mProfile Load (0.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 6.1ms | Allocations: 2597)
  Rendered layouts/_footer.html.erb (Duration: 1.0ms | Allocations: 348)
Completed 200 OK in 113ms (Views: 80.6ms | ActiveRecord: 11.8ms | Allocations: 23881)


Started GET "/users/312/edit" for 127.0.0.1 at 2020-09-08 06:09:34 -0400
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"312"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/users_controller.rb:78:in `set_user'
  Rendering users/edit.html.erb within layouts/application
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 312], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  â†³ app/views/users/_form.html.erb:4
  Rendered users/_form.html.erb (Duration: 56.5ms | Allocations: 3658)
  Rendered users/edit.html.erb within layouts/application (Duration: 61.1ms | Allocations: 4216)
  Rendered layouts/_header.html.erb (Duration: 8.3ms | Allocations: 1263)
  [1m[36mProfile Load (0.9ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 15.6ms | Allocations: 2599)
  Rendered layouts/_footer.html.erb (Duration: 2.7ms | Allocations: 348)
Completed 200 OK in 158ms (Views: 124.4ms | ActiveRecord: 4.5ms | Allocations: 20589)


  [1m[35m (70.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "pledges"[0m
  [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 19:53:51 -0400
  [1m[35m (22.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m

NameError - uninitialized constant StripeReportHelper:
  app/controllers/application_controller.rb:2:in `<top (required)>'
  app/controllers/webhook_events_controller.rb:1:in `<top (required)>'

Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 19:54:11 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPGdbHiibShxDkjK7gBxWXH", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599609251, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600214028, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_266d1d21a2e5d4", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600818828, "start"=>1600214028}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTfrdHaUJIXzTt&subscription=sub_HTm9P21Nj9JhLU"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600217628, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600214028, "period_start"=>1599609228, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPGdbHiibShxDkjK7gBxWXH", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600214028, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_266d1d21a2e5d4", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600818828, "start"=>1600214028}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTfrdHaUJIXzTt&subscription=sub_HTm9P21Nj9JhLU"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600217628, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600214028, "period_start"=>1599609228, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (125.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPGdbHiibShxDkjK7gBxWXH"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (100.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPGdbHiibShxDkjK7gBxWXH"], ["data", "{\"id\":\"evt_1HPGdbHiibShxDkjK7gBxWXH\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599609251,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600214028,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_266d1d21a2e5d4\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600818828,\"start\":1600214028},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTfrdHaUJIXzTt\\u0026subscription=sub_HTm9P21Nj9JhLU\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600217628,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600214028,\"period_start\":1599609228,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HPGdbHiibShxDkjK7gBxWXH\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600214028,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_266d1d21a2e5d4\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600818828,\"start\":1600214028},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTfrdHaUJIXzTt\\u0026subscription=sub_HTm9P21Nj9JhLU\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600217628,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600214028,\"period_start\":1599609228,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-08 23:54:12.067954"], ["updated_at", "2020-09-08 23:54:12.067954"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (11.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: cec256e5-a152-413c-8bd7-14df4d42261f) to Async(default) with arguments: 332
Completed 200 OK in 609ms (Views: 5.1ms | ActiveRecord: 418.2ms | Allocations: 48297)


[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f] Performing ProcessEventsJob (Job ID: cec256e5-a152-413c-8bd7-14df4d42261f) from Async(default) enqueued at 2020-09-08T23:54:12Z with arguments: 332
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   [1m[36mWebhookEvent Load (1.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 332], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   [1m[36mWebhookEvent Update (17.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-08 23:54:12.478234"], ["id", 332]]
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   [1m[35m (17.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   [1m[36mWebhookEvent Update (1.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-08 23:54:12.564121"], ["id", 332]]
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   [1m[35m (15.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [cec256e5-a152-413c-8bd7-14df4d42261f] Performed ProcessEventsJob (Job ID: cec256e5-a152-413c-8bd7-14df4d42261f) from Async(default) in 249.83ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 20:46:23 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHS7HiibShxDkjlA73WQa6", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599612383, "data"=>{"object"=>{"object"=>"balance", "available"=>[{"amount"=>0, "currency"=>"usd", "source_types"=>{"card"=>0}}], "instant_available"=>[{"amount"=>362578, "currency"=>"usd", "source_types"=>{"card"=>362578}}], "livemode"=>false, "pending"=>[{"amount"=>362578, "currency"=>"usd", "source_types"=>{"card"=>362578}}]}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"balance.available", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHS7HiibShxDkjlA73WQa6", "data"=>{"object"=>{"object"=>"balance", "available"=>[{"amount"=>0, "currency"=>"usd", "source_types"=>{"card"=>0}}], "instant_available"=>[{"amount"=>362578, "currency"=>"usd", "source_types"=>{"card"=>362578}}], "livemode"=>false, "pending"=>[{"amount"=>362578, "currency"=>"usd", "source_types"=>{"card"=>362578}}]}}}}
  [1m[36mWebhookEvent Load (2.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHS7HiibShxDkjlA73WQa6"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHS7HiibShxDkjlA73WQa6"], ["data", "{\"id\":\"evt_1HPHS7HiibShxDkjlA73WQa6\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599612383,\"data\":{\"object\":{\"object\":\"balance\",\"available\":[{\"amount\":0,\"currency\":\"usd\",\"source_types\":{\"card\":0}}],\"instant_available\":[{\"amount\":362578,\"currency\":\"usd\",\"source_types\":{\"card\":362578}}],\"livemode\":false,\"pending\":[{\"amount\":362578,\"currency\":\"usd\",\"source_types\":{\"card\":362578}}]}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"balance.available\",\"webhook_event\":{\"id\":\"evt_1HPHS7HiibShxDkjlA73WQa6\",\"data\":{\"object\":{\"object\":\"balance\",\"available\":[{\"amount\":0,\"currency\":\"usd\",\"source_types\":{\"card\":0}}],\"instant_available\":[{\"amount\":362578,\"currency\":\"usd\",\"source_types\":{\"card\":362578}}],\"livemode\":false,\"pending\":[{\"amount\":362578,\"currency\":\"usd\",\"source_types\":{\"card\":362578}}]}}}}"], ["created_at", "2020-09-09 00:46:24.076588"], ["updated_at", "2020-09-09 00:46:24.076588"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (15.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 5b2559c0-2c97-47e8-85e1-a67876259859) to Async(default) with arguments: 333
Completed 200 OK in 102ms (Views: 2.6ms | ActiveRecord: 21.6ms | Allocations: 16295)


[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859] Performing ProcessEventsJob (Job ID: 5b2559c0-2c97-47e8-85e1-a67876259859) from Async(default) enqueued at 2020-09-09T00:46:24Z with arguments: 333
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   [1m[36mWebhookEvent Load (1.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 333], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   [1m[36mWebhookEvent Update (1.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 00:46:24.264442"], ["id", 333]]
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   [1m[36mWebhookEvent Update (1.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 00:46:24.299344"], ["id", 333]]
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   [1m[35m (5.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5b2559c0-2c97-47e8-85e1-a67876259859] Performed ProcessEventsJob (Job ID: 5b2559c0-2c97-47e8-85e1-a67876259859) from Async(default) in 140.42ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 20:54:12 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHZeHiibShxDkjnTm46KrE", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599612849, "data"=>{"object"=>{"id"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>8800, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPHZdHiibShxDkjrsa5XBnh", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"tedwardconnolly@gmail.com", "name"=>"T C", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599612849, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>19, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPHZdHiibShxDkjIKrDwieL/rcpt_HzG5RZaz9dSLGlbaWlRwPlpfhnFwakU", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPHZdHiibShxDkjIKrDwieL/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPHZdHiibShxDkjGPzY3Kza"}, "client_secret"=>"pi_1HPHZdHiibShxDkjGPzY3Kza_secret_Y91A1NCEtxw3Y4nnR9eec31Ln", "confirmation_method"=>"automatic", "created"=>1599612849, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HPGdEHiibShxDkjFisdQeFI-initial_attempt-a4fd1513a6762f3c0"}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHZeHiibShxDkjnTm46KrE", "data"=>{"object"=>{"id"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>8800, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPHZdHiibShxDkjrsa5XBnh", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"tedwardconnolly@gmail.com", "name"=>"T C", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599612849, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>19, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPHZdHiibShxDkjIKrDwieL/rcpt_HzG5RZaz9dSLGlbaWlRwPlpfhnFwakU", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPHZdHiibShxDkjIKrDwieL/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPHZdHiibShxDkjGPzY3Kza"}, "client_secret"=>"pi_1HPHZdHiibShxDkjGPzY3Kza_secret_Y91A1NCEtxw3Y4nnR9eec31Ln", "confirmation_method"=>"automatic", "created"=>1599612849, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (2.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjnTm46KrE"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 20:54:12 -0400
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 20:54:12 -0400
  [1m[35m (10.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 20:54:12 -0400
  [1m[36mWebhookEvent Create (5.5ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjnTm46KrE"], ["data", "{\"id\":\"evt_1HPHZeHiibShxDkjnTm46KrE\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599612849,\"data\":{\"object\":{\"id\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":8800,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPHZdHiibShxDkjrsa5XBnh\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"tedwardconnolly@gmail.com\",\"name\":\"T C\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599612849,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":19,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPHZdHiibShxDkjIKrDwieL/rcpt_HzG5RZaz9dSLGlbaWlRwPlpfhnFwakU\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPHZdHiibShxDkjIKrDwieL/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPHZdHiibShxDkjGPzY3Kza\"},\"client_secret\":\"pi_1HPHZdHiibShxDkjGPzY3Kza_secret_Y91A1NCEtxw3Y4nnR9eec31Ln\",\"confirmation_method\":\"automatic\",\"created\":1599612849,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HPGdEHiibShxDkjFisdQeFI-initial_attempt-a4fd1513a6762f3c0\"},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPHZeHiibShxDkjnTm46KrE\",\"data\":{\"object\":{\"id\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":8800,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPHZdHiibShxDkjrsa5XBnh\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"tedwardconnolly@gmail.com\",\"name\":\"T C\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599612849,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":19,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPHZdHiibShxDkjIKrDwieL/rcpt_HzG5RZaz9dSLGlbaWlRwPlpfhnFwakU\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPHZdHiibShxDkjIKrDwieL/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPHZdHiibShxDkjGPzY3Kza\"},\"client_secret\":\"pi_1HPHZdHiibShxDkjGPzY3Kza_secret_Y91A1NCEtxw3Y4nnR9eec31Ln\",\"confirmation_method\":\"automatic\",\"created\":1599612849,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 00:54:12.783731"], ["updated_at", "2020-09-09 00:54:12.783731"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 20:54:12 -0400
  [1m[35m (22.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 5713d0e7-03e5-4419-b1aa-3ad40aa0d540) to Async(default) with arguments: 334
Completed 200 OK in 241ms (Views: 9.4ms | ActiveRecord: 41.6ms | Allocations: 47517)


[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540] Performing ProcessEventsJob (Job ID: 5713d0e7-03e5-4419-b1aa-3ad40aa0d540) from Async(default) enqueued at 2020-09-09T00:54:12Z with arguments: 334
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHZeHiibShxDkjoZpWFCR5", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599612850, "data"=>{"object"=>{"id"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPHZdHiibShxDkjGPzY3Kza"}, "client_secret"=>"pi_1HPHZdHiibShxDkjGPzY3Kza_secret_Y91A1NCEtxw3Y4nnR9eec31Ln", "confirmation_method"=>"automatic", "created"=>1599612849, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHZeHiibShxDkjoZpWFCR5", "data"=>{"object"=>{"id"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPHZdHiibShxDkjGPzY3Kza"}, "client_secret"=>"pi_1HPHZdHiibShxDkjGPzY3Kza_secret_Y91A1NCEtxw3Y4nnR9eec31Ln", "confirmation_method"=>"automatic", "created"=>1599612849, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHZeHiibShxDkjcWlDXzJA", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599612850, "data"=>{"object"=>{"id"=>"in_1HPGdEHiibShxDkjFisdQeFI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "collection_method"=>"charge_automatically", "created"=>1599609228, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPGdEHiibShxDkjbpDsMcCD", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600214028, "start"=>1599609228}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0052", "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "period_end"=>1599609228, "period_start"=>1599004428, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599612848, "marked_uncollectible_at"=>nil, "paid_at"=>1599612848, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599609229}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.paid", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHZeHiibShxDkjcWlDXzJA", "data"=>{"object"=>{"id"=>"in_1HPGdEHiibShxDkjFisdQeFI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "collection_method"=>"charge_automatically", "created"=>1599609228, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPGdEHiibShxDkjbpDsMcCD", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600214028, "start"=>1599609228}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0052", "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "period_end"=>1599609228, "period_start"=>1599004428, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599612848, "marked_uncollectible_at"=>nil, "paid_at"=>1599612848, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599609229}}}}
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHZeHiibShxDkjx9gDGjxv", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599612850, "data"=>{"object"=>{"id"=>"in_1HPGdEHiibShxDkjFisdQeFI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "collection_method"=>"charge_automatically", "created"=>1599609228, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPGdEHiibShxDkjbpDsMcCD", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600214028, "start"=>1599609228}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0052", "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "period_end"=>1599609228, "period_start"=>1599004428, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599612848, "marked_uncollectible_at"=>nil, "paid_at"=>1599612848, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599609229}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.payment_succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHZeHiibShxDkjx9gDGjxv", "data"=>{"object"=>{"id"=>"in_1HPGdEHiibShxDkjFisdQeFI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "collection_method"=>"charge_automatically", "created"=>1599609228, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPGdEHiibShxDkjbpDsMcCD", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600214028, "start"=>1599609228}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0052", "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "period_end"=>1599609228, "period_start"=>1599004428, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599612848, "marked_uncollectible_at"=>nil, "paid_at"=>1599612848, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599609229}}}}
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHZeHiibShxDkjKnKb8qlu", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599612849, "data"=>{"object"=>{"id"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPHZdHiibShxDkjrsa5XBnh", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"tedwardconnolly@gmail.com", "name"=>"T C", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599612849, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>19, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPHZdHiibShxDkjIKrDwieL/rcpt_HzG5RZaz9dSLGlbaWlRwPlpfhnFwakU", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPHZdHiibShxDkjIKrDwieL/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HPGdEHiibShxDkjFisdQeFI-initial_attempt-a4fd1513a6762f3c0"}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHZeHiibShxDkjKnKb8qlu", "data"=>{"object"=>{"id"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPHZdHiibShxDkjrsa5XBnh", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34555", "state"=>nil}, "email"=>"tedwardconnolly@gmail.com", "name"=>"T C", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599612849, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>19, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>4, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPHZdHiibShxDkjIKrDwieL/rcpt_HzG5RZaz9dSLGlbaWlRwPlpfhnFwakU", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPHZdHiibShxDkjIKrDwieL/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (37.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjoZpWFCR5"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Load (11.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjcWlDXzJA"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   [1m[36mWebhookEvent Load (32.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 334], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   â†³ app/jobs/process_events_job.rb:5:in `perform'
  [1m[36mWebhookEvent Load (36.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjKnKb8qlu"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   [1m[35m (6.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (6.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (48.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   [1m[36mWebhookEvent Update (6.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 00:54:13.307974"], ["id", 334]]
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (2.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjx9gDGjxv"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (9.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   [1m[35m (37.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (47.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   [1m[35m (21.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[36mWebhookEvent Create (48.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjoZpWFCR5"], ["data", "{\"id\":\"evt_1HPHZeHiibShxDkjoZpWFCR5\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599612850,\"data\":{\"object\":{\"id\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPHZdHiibShxDkjGPzY3Kza\"},\"client_secret\":\"pi_1HPHZdHiibShxDkjGPzY3Kza_secret_Y91A1NCEtxw3Y4nnR9eec31Ln\",\"confirmation_method\":\"automatic\",\"created\":1599612849,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HPHZeHiibShxDkjoZpWFCR5\",\"data\":{\"object\":{\"id\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPHZdHiibShxDkjGPzY3Kza\"},\"client_secret\":\"pi_1HPHZdHiibShxDkjGPzY3Kza_secret_Y91A1NCEtxw3Y4nnR9eec31Ln\",\"confirmation_method\":\"automatic\",\"created\":1599612849,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 00:54:13.246371"], ["updated_at", "2020-09-09 00:54:13.246371"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (10.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjx9gDGjxv"], ["data", "{\"id\":\"evt_1HPHZeHiibShxDkjx9gDGjxv\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599612850,\"data\":{\"object\":{\"id\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"collection_method\":\"charge_automatically\",\"created\":1599609228,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPGdEHiibShxDkjbpDsMcCD\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600214028,\"start\":1599609228},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0052\",\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"period_end\":1599609228,\"period_start\":1599004428,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599612848,\"marked_uncollectible_at\":null,\"paid_at\":1599612848,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599609229}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.payment_succeeded\",\"webhook_event\":{\"id\":\"evt_1HPHZeHiibShxDkjx9gDGjxv\",\"data\":{\"object\":{\"id\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"collection_method\":\"charge_automatically\",\"created\":1599609228,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPGdEHiibShxDkjbpDsMcCD\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600214028,\"start\":1599609228},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0052\",\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"period_end\":1599609228,\"period_start\":1599004428,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599612848,\"marked_uncollectible_at\":null,\"paid_at\":1599612848,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599609229}}}}"], ["created_at", "2020-09-09 00:54:13.420419"], ["updated_at", "2020-09-09 00:54:13.420419"]]
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   [1m[36mWebhookEvent Update (20.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 00:54:13.472692"], ["id", 334]]
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[36mWebhookEvent Create (13.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjcWlDXzJA"], ["data", "{\"id\":\"evt_1HPHZeHiibShxDkjcWlDXzJA\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599612850,\"data\":{\"object\":{\"id\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"collection_method\":\"charge_automatically\",\"created\":1599609228,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPGdEHiibShxDkjbpDsMcCD\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600214028,\"start\":1599609228},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0052\",\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"period_end\":1599609228,\"period_start\":1599004428,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599612848,\"marked_uncollectible_at\":null,\"paid_at\":1599612848,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599609229}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.paid\",\"webhook_event\":{\"id\":\"evt_1HPHZeHiibShxDkjcWlDXzJA\",\"data\":{\"object\":{\"id\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"collection_method\":\"charge_automatically\",\"created\":1599609228,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPGdEHiibShxDkjbpDsMcCD\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600214028,\"start\":1599609228},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0052\",\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"period_end\":1599609228,\"period_start\":1599004428,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599612848,\"marked_uncollectible_at\":null,\"paid_at\":1599612848,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599609229}}}}"], ["created_at", "2020-09-09 00:54:13.280372"], ["updated_at", "2020-09-09 00:54:13.280372"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 20:54:13 -0400
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   [1m[35m (64.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5713d0e7-03e5-4419-b1aa-3ad40aa0d540] Performed ProcessEventsJob (Job ID: 5713d0e7-03e5-4419-b1aa-3ad40aa0d540) from Async(default) in 590.04ms
  [1m[35m (16.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e) to Async(default) with arguments: 336
Completed 200 OK in 563ms (Views: 3.7ms | ActiveRecord: 155.3ms | Allocations: 119366)


  [1m[36mWebhookEvent Create (41.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjKnKb8qlu"], ["data", "{\"id\":\"evt_1HPHZeHiibShxDkjKnKb8qlu\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599612849,\"data\":{\"object\":{\"id\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPHZdHiibShxDkjrsa5XBnh\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"tedwardconnolly@gmail.com\",\"name\":\"T C\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599612849,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":19,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPHZdHiibShxDkjIKrDwieL/rcpt_HzG5RZaz9dSLGlbaWlRwPlpfhnFwakU\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPHZdHiibShxDkjIKrDwieL/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HPGdEHiibShxDkjFisdQeFI-initial_attempt-a4fd1513a6762f3c0\"},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPHZeHiibShxDkjKnKb8qlu\",\"data\":{\"object\":{\"id\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPHZdHiibShxDkjrsa5XBnh\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34555\",\"state\":null},\"email\":\"tedwardconnolly@gmail.com\",\"name\":\"T C\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599612849,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":19,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":4,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPHZdHiibShxDkjIKrDwieL/rcpt_HzG5RZaz9dSLGlbaWlRwPlpfhnFwakU\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPHZdHiibShxDkjIKrDwieL/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 00:54:13.330482"], ["updated_at", "2020-09-09 00:54:13.330482"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e] Performing ProcessEventsJob (Job ID: 1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e) from Async(default) enqueued at 2020-09-09T00:54:13Z with arguments: 336
  [1m[35m (31.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 33de8672-07dc-4942-aa25-e9a6b195a483) to Async(default) with arguments: 335
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHZeHiibShxDkjd1FEezK7", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599612850, "data"=>{"object"=>{"id"=>"in_1HPGdEHiibShxDkjFisdQeFI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "collection_method"=>"charge_automatically", "created"=>1599609228, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPGdEHiibShxDkjbpDsMcCD", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600214028, "start"=>1599609228}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0052", "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "period_end"=>1599609228, "period_start"=>1599004428, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599612848, "marked_uncollectible_at"=>nil, "paid_at"=>1599612848, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599609229}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>8800, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599612828, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHZeHiibShxDkjd1FEezK7", "data"=>{"object"=>{"id"=>"in_1HPGdEHiibShxDkjFisdQeFI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "collection_method"=>"charge_automatically", "created"=>1599609228, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPGdEHiibShxDkjbpDsMcCD", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600214028, "start"=>1599609228}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0052", "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "period_end"=>1599609228, "period_start"=>1599004428, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599612848, "marked_uncollectible_at"=>nil, "paid_at"=>1599612848, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599609229}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>8800, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599612828, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}}}
Completed 200 OK in 621ms (Views: 7.9ms | ActiveRecord: 96.3ms | Allocations: 143616)


  [1m[35m (64.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 2f655c9c-aae6-4f7e-9bb8-137845bd003d) to Async(default) with arguments: 337
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483] Performing ProcessEventsJob (Job ID: 33de8672-07dc-4942-aa25-e9a6b195a483) from Async(default) enqueued at 2020-09-09T00:54:13Z with arguments: 335
Completed 200 OK in 685ms (Views: 7.1ms | ActiveRecord: 174.7ms | Allocations: 162380)


  [1m[35m (29.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 653118f1-c91c-454b-904d-00770f3f08c1) to Async(default) with arguments: 338
  [1m[36mWebhookEvent Load (55.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjd1FEezK7"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
Completed 200 OK in 817ms (Views: 32.5ms | ActiveRecord: 108.7ms | Allocations: 201382)


  [1m[35m (32.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   [1m[36mWebhookEvent Load (7.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 336], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   â†³ app/jobs/process_events_job.rb:5:in `perform'
  [1m[36mWebhookEvent Create (13.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjd1FEezK7"], ["data", "{\"id\":\"evt_1HPHZeHiibShxDkjd1FEezK7\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599612850,\"data\":{\"object\":{\"id\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"collection_method\":\"charge_automatically\",\"created\":1599609228,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPGdEHiibShxDkjbpDsMcCD\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600214028,\"start\":1599609228},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0052\",\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"period_end\":1599609228,\"period_start\":1599004428,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599612848,\"marked_uncollectible_at\":null,\"paid_at\":1599612848,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599609229},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":8800,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599612828,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.updated\",\"webhook_event\":{\"id\":\"evt_1HPHZeHiibShxDkjd1FEezK7\",\"data\":{\"object\":{\"id\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"collection_method\":\"charge_automatically\",\"created\":1599609228,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPGdEHiibShxDkjbpDsMcCD\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600214028,\"start\":1599609228},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0052\",\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"period_end\":1599609228,\"period_start\":1599004428,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599612848,\"marked_uncollectible_at\":null,\"paid_at\":1599612848,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599609229},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":8800,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599612828,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}}}}"], ["created_at", "2020-09-09 00:54:13.954570"], ["updated_at", "2020-09-09 00:54:13.954570"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1] Performing ProcessEventsJob (Job ID: 653118f1-c91c-454b-904d-00770f3f08c1) from Async(default) enqueued at 2020-09-09T00:54:13Z with arguments: 338
  [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: a2365a89-bb8d-4a45-a214-6ca1fc18b9a9) to Async(default) with arguments: 339
Completed 200 OK in 416ms (Views: 10.1ms | ActiveRecord: 114.1ms | Allocations: 113335)


[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d] Performing ProcessEventsJob (Job ID: 2f655c9c-aae6-4f7e-9bb8-137845bd003d) from Async(default) enqueued at 2020-09-09T00:54:13Z with arguments: 337
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   [1m[36mWebhookEvent Load (45.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 338], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   â†³ app/jobs/process_events_job.rb:5:in `perform'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 20:54:14 -0400
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   [1m[35m (50.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   [1m[36mWebhookEvent Update (2.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 00:54:14.064720"], ["id", 336]]
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 20:54:14 -0400
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   [1m[36mWebhookEvent Load (33.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 335], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   [1m[35m (22.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHZeHiibShxDkjDx074WSl", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599612850, "data"=>{"object"=>{"id"=>"in_1HPGdEHiibShxDkjFisdQeFI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "collection_method"=>"charge_automatically", "created"=>1599609228, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPGdEHiibShxDkjbpDsMcCD", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600214028, "start"=>1599609228}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0052", "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "period_end"=>1599609228, "period_start"=>1599004428, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599612848, "marked_uncollectible_at"=>nil, "paid_at"=>1599612848, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599609229}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.finalized", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHZeHiibShxDkjDx074WSl", "data"=>{"object"=>{"id"=>"in_1HPGdEHiibShxDkjFisdQeFI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPHZdHiibShxDkjIKrDwieL", "collection_method"=>"charge_automatically", "created"=>1599609228, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPGdEHiibShxDkjbpDsMcCD", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600214028, "start"=>1599609228}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "subscription_item"=>"si_HTm9LhZZrXIU4u", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"86A87608-0052", "paid"=>true, "payment_intent"=>"pi_1HPHZdHiibShxDkjGPzY3Kza", "period_end"=>1599609228, "period_start"=>1599004428, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599612848, "marked_uncollectible_at"=>nil, "paid_at"=>1599612848, "voided_at"=>nil}, "subscription"=>"sub_HTm9P21Nj9JhLU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599609229}}}}
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   [1m[35m (34.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   [1m[36mWebhookEvent Update (20.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 00:54:14.253161"], ["id", 338]]
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   [1m[36mWebhookEvent Update (38.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 00:54:14.303968"], ["id", 335]]
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   [1m[35m (5.9ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[36mWebhookEvent Load (13.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjDx074WSl"], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   [1m[35m (20.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   [1m[36mWebhookEvent Update (41.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 00:54:14.367884"], ["id", 336]]
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   [1m[35m (51.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   [1m[35m (12.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   [1m[35m (50.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e] Performed ProcessEventsJob (Job ID: 1bc211bd-b9c1-4ef8-809b-9dab7c98bb0e) from Async(default) in 841.29ms
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   [1m[36mWebhookEvent Update (37.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 00:54:14.448159"], ["id", 338]]
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   [1m[35m (5.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (40.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   [1m[36mWebhookEvent Load (38.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 337], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   [1m[35m (11.9ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   [1m[36mWebhookEvent Update (22.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `client_reference_id' for #<Stripe::Invoice:0x00007f036c062dd8>"], ["updated_at", "2020-09-09 00:54:14.524354"], ["id", 335]]
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHZeHiibShxDkjsg1jUrHT", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599612850, "data"=>{"object"=>{"id"=>"cus_HTfrdHaUJIXzTt", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1592328244, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"frankyB@gmail.com", "invoice_prefix"=>"86A87608", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>53, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HXpc286cBy6bD7", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1593287060, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1593287060, "current_period_end"=>1599939860, "current_period_start"=>1599335060, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HXpcOIEVnxhBGF", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1593287061, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7"}, "latest_invoice"=>"in_1HO7KFHiibShxDkjKiOYQZKi", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>23, "schedule"=>nil, "start_date"=>1593287060, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTmSCB4f6ppubB", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592352779, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592352779, "current_period_end"=>1600301579, "current_period_start"=>1592352779, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuotiHiibShxDkjohKEdTRG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTmSchi1I6bckD", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592352780, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>2500, "subscription"=>"sub_HTmSCB4f6ppubB", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB"}, "latest_invoice"=>"in_1GuotjHiibShxDkjmvUEzmzP", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>2500, "schedule"=>nil, "start_date"=>1592352779, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTm9P21Nj9JhLU", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592351628, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592351628, "current_period_end"=>1600214028, "current_period_start"=>1599609228, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTm9LhZZrXIU4u", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592351629, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU"}, "latest_invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1592351628, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTiAInwER448NQ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592336800, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592336800, "current_period_end"=>1600199200, "current_period_start"=>1599594400, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukjzHiibShxDkjhmgK5cHQ", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTiAFJ65OaXbLb", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592336801, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>11, "subscription"=>"sub_HTiAInwER448NQ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTiAInwER448NQ"}, "latest_invoice"=>"in_1HPCnQHiibShxDkjQVKebOVI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>11, "schedule"=>nil, "start_date"=>1592336800, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HThol5LxxWW2T8", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592335489, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592335489, "current_period_end"=>1600197889, "current_period_start"=>1599593089, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukOqHiibShxDkjkZit1pEu", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HThosUD0Aw71cE", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592335490, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>77, "subscription"=>"sub_HThol5LxxWW2T8", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8"}, "latest_invoice"=>"in_1HPCRiHiibShxDkjQMoC5qZE", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>77, "schedule"=>nil, "start_date"=>1592335489, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTgCNofRQ2SxCZ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592329479, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592329479, "current_period_end"=>1600278279, "current_period_start"=>1592329479, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuiptHiibShxDkjduc2lzn6", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTgCco1ui7JKVe", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592329479, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>6000, "subscription"=>"sub_HTgCNofRQ2SxCZ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ"}, "latest_invoice"=>"in_1GuipvHiibShxDkjRNwJ0mnb", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>6000, "schedule"=>nil, "start_date"=>1592329479, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>6, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>52}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHZeHiibShxDkjsg1jUrHT", "data"=>{"object"=>{"id"=>"cus_HTfrdHaUJIXzTt", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1592328244, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"frankyB@gmail.com", "invoice_prefix"=>"86A87608", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>53, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HXpc286cBy6bD7", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1593287060, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1593287060, "current_period_end"=>1599939860, "current_period_start"=>1599335060, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HXpcOIEVnxhBGF", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1593287061, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7"}, "latest_invoice"=>"in_1HO7KFHiibShxDkjKiOYQZKi", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>23, "schedule"=>nil, "start_date"=>1593287060, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTmSCB4f6ppubB", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592352779, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592352779, "current_period_end"=>1600301579, "current_period_start"=>1592352779, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuotiHiibShxDkjohKEdTRG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTmSchi1I6bckD", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592352780, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>2500, "subscription"=>"sub_HTmSCB4f6ppubB", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB"}, "latest_invoice"=>"in_1GuotjHiibShxDkjmvUEzmzP", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>2500, "schedule"=>nil, "start_date"=>1592352779, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTm9P21Nj9JhLU", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592351628, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592351628, "current_period_end"=>1600214028, "current_period_start"=>1599609228, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTm9LhZZrXIU4u", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592351629, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU"}, "latest_invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1592351628, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTiAInwER448NQ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592336800, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592336800, "current_period_end"=>1600199200, "current_period_start"=>1599594400, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukjzHiibShxDkjhmgK5cHQ", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTiAFJ65OaXbLb", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592336801, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>11, "subscription"=>"sub_HTiAInwER448NQ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTiAInwER448NQ"}, "latest_invoice"=>"in_1HPCnQHiibShxDkjQVKebOVI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>11, "schedule"=>nil, "start_date"=>1592336800, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HThol5LxxWW2T8", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592335489, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592335489, "current_period_end"=>1600197889, "current_period_start"=>1599593089, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukOqHiibShxDkjkZit1pEu", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HThosUD0Aw71cE", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592335490, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>77, "subscription"=>"sub_HThol5LxxWW2T8", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8"}, "latest_invoice"=>"in_1HPCRiHiibShxDkjQMoC5qZE", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>77, "schedule"=>nil, "start_date"=>1592335489, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTgCNofRQ2SxCZ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592329479, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592329479, "current_period_end"=>1600278279, "current_period_start"=>1592329479, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuiptHiibShxDkjduc2lzn6", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTgCco1ui7JKVe", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592329479, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>6000, "subscription"=>"sub_HTgCNofRQ2SxCZ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ"}, "latest_invoice"=>"in_1GuipvHiibShxDkjRNwJ0mnb", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>6000, "schedule"=>nil, "start_date"=>1592329479, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>6, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>52}}}}
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   [1m[36mWebhookEvent Update (104.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 00:54:14.601474"], ["id", 337]]
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9] Performing ProcessEventsJob (Job ID: a2365a89-bb8d-4a45-a214-6ca1fc18b9a9) from Async(default) enqueued at 2020-09-09T00:54:14Z with arguments: 339
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   [1m[35m (21.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [33de8672-07dc-4942-aa25-e9a6b195a483] Performed ProcessEventsJob (Job ID: 33de8672-07dc-4942-aa25-e9a6b195a483) from Async(default) in 899.15ms
  [1m[36mWebhookEvent Create (35.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjDx074WSl"], ["data", "{\"id\":\"evt_1HPHZeHiibShxDkjDx074WSl\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599612850,\"data\":{\"object\":{\"id\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"collection_method\":\"charge_automatically\",\"created\":1599609228,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPGdEHiibShxDkjbpDsMcCD\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600214028,\"start\":1599609228},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0052\",\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"period_end\":1599609228,\"period_start\":1599004428,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599612848,\"marked_uncollectible_at\":null,\"paid_at\":1599612848,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599609229}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.finalized\",\"webhook_event\":{\"id\":\"evt_1HPHZeHiibShxDkjDx074WSl\",\"data\":{\"object\":{\"id\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPHZdHiibShxDkjIKrDwieL\",\"collection_method\":\"charge_automatically\",\"created\":1599609228,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzF7iZMnKhXIKpjKHT1NxwKExrh4asH/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPGdEHiibShxDkjbpDsMcCD\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600214028,\"start\":1599609228},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subscription_item\":\"si_HTm9LhZZrXIU4u\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPGdEHiibShxDkjFisdQeFI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"86A87608-0052\",\"paid\":true,\"payment_intent\":\"pi_1HPHZdHiibShxDkjGPzY3Kza\",\"period_end\":1599609228,\"period_start\":1599004428,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599612848,\"marked_uncollectible_at\":null,\"paid_at\":1599612848,\"voided_at\":null},\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599609229}}}}"], ["created_at", "2020-09-09 00:54:14.499329"], ["updated_at", "2020-09-09 00:54:14.499329"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Load (15.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjsg1jUrHT"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   [1m[35m (14.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (99.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 78c796f3-e967-4661-97fb-03428a2654a0) to Async(default) with arguments: 340
Completed 200 OK in 615ms (Views: 3.3ms | ActiveRecord: 188.4ms | Allocations: 180568)


[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   [1m[36mWebhookEvent Load (93.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 339], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   [1m[35m (32.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [653118f1-c91c-454b-904d-00770f3f08c1] Performed ProcessEventsJob (Job ID: 653118f1-c91c-454b-904d-00770f3f08c1) from Async(default) in 857.44ms
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   [1m[35m (5.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0] Performing ProcessEventsJob (Job ID: 78c796f3-e967-4661-97fb-03428a2654a0) from Async(default) enqueued at 2020-09-09T00:54:14Z with arguments: 340
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   [1m[36mWebhookEvent Update (6.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 00:54:14.977219"], ["id", 337]]
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Create (58.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHZeHiibShxDkjsg1jUrHT"], ["data", "{\"id\":\"evt_1HPHZeHiibShxDkjsg1jUrHT\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599612850,\"data\":{\"object\":{\"id\":\"cus_HTfrdHaUJIXzTt\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1592328244,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"frankyB@gmail.com\",\"invoice_prefix\":\"86A87608\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":53,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HXpc286cBy6bD7\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1593287060,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1593287060,\"current_period_end\":1599939860,\"current_period_start\":1599335060,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HXpcOIEVnxhBGF\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1593287061,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7\"},\"latest_invoice\":\"in_1HO7KFHiibShxDkjKiOYQZKi\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":23,\"schedule\":null,\"start_date\":1593287060,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTmSCB4f6ppubB\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592352779,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592352779,\"current_period_end\":1600301579,\"current_period_start\":1592352779,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuotiHiibShxDkjohKEdTRG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTmSchi1I6bckD\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592352780,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":2500,\"subscription\":\"sub_HTmSCB4f6ppubB\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB\"},\"latest_invoice\":\"in_1GuotjHiibShxDkjmvUEzmzP\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":2500,\"schedule\":null,\"start_date\":1592352779,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTm9P21Nj9JhLU\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592351628,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592351628,\"current_period_end\":1600214028,\"current_period_start\":1599609228,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTm9LhZZrXIU4u\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592351629,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU\"},\"latest_invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1592351628,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTiAInwER448NQ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592336800,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592336800,\"current_period_end\":1600199200,\"current_period_start\":1599594400,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukjzHiibShxDkjhmgK5cHQ\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTiAFJ65OaXbLb\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592336801,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":11,\"subscription\":\"sub_HTiAInwER448NQ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTiAInwER448NQ\"},\"latest_invoice\":\"in_1HPCnQHiibShxDkjQVKebOVI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":11,\"schedule\":null,\"start_date\":1592336800,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HThol5LxxWW2T8\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592335489,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592335489,\"current_period_end\":1600197889,\"current_period_start\":1599593089,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukOqHiibShxDkjkZit1pEu\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HThosUD0Aw71cE\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592335490,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":77,\"subscription\":\"sub_HThol5LxxWW2T8\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8\"},\"latest_invoice\":\"in_1HPCRiHiibShxDkjQMoC5qZE\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":77,\"schedule\":null,\"start_date\":1592335489,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTgCNofRQ2SxCZ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592329479,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592329479,\"current_period_end\":1600278279,\"current_period_start\":1592329479,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuiptHiibShxDkjduc2lzn6\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTgCco1ui7JKVe\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592329479,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":6000,\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ\"},\"latest_invoice\":\"in_1GuipvHiibShxDkjRNwJ0mnb\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":6000,\"schedule\":null,\"start_date\":1592329479,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":6,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":52}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.updated\",\"webhook_event\":{\"id\":\"evt_1HPHZeHiibShxDkjsg1jUrHT\",\"data\":{\"object\":{\"id\":\"cus_HTfrdHaUJIXzTt\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1592328244,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"frankyB@gmail.com\",\"invoice_prefix\":\"86A87608\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":53,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HXpc286cBy6bD7\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1593287060,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1593287060,\"current_period_end\":1599939860,\"current_period_start\":1599335060,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HXpcOIEVnxhBGF\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1593287061,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7\"},\"latest_invoice\":\"in_1HO7KFHiibShxDkjKiOYQZKi\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":23,\"schedule\":null,\"start_date\":1593287060,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTmSCB4f6ppubB\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592352779,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592352779,\"current_period_end\":1600301579,\"current_period_start\":1592352779,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuotiHiibShxDkjohKEdTRG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTmSchi1I6bckD\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592352780,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":2500,\"subscription\":\"sub_HTmSCB4f6ppubB\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB\"},\"latest_invoice\":\"in_1GuotjHiibShxDkjmvUEzmzP\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":2500,\"schedule\":null,\"start_date\":1592352779,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTm9P21Nj9JhLU\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592351628,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592351628,\"current_period_end\":1600214028,\"current_period_start\":1599609228,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTm9LhZZrXIU4u\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592351629,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU\"},\"latest_invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1592351628,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTiAInwER448NQ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592336800,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592336800,\"current_period_end\":1600199200,\"current_period_start\":1599594400,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukjzHiibShxDkjhmgK5cHQ\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTiAFJ65OaXbLb\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592336801,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":11,\"subscription\":\"sub_HTiAInwER448NQ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTiAInwER448NQ\"},\"latest_invoice\":\"in_1HPCnQHiibShxDkjQVKebOVI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":11,\"schedule\":null,\"start_date\":1592336800,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HThol5LxxWW2T8\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592335489,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592335489,\"current_period_end\":1600197889,\"current_period_start\":1599593089,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukOqHiibShxDkjkZit1pEu\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HThosUD0Aw71cE\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592335490,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":77,\"subscription\":\"sub_HThol5LxxWW2T8\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8\"},\"latest_invoice\":\"in_1HPCRiHiibShxDkjQMoC5qZE\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":77,\"schedule\":null,\"start_date\":1592335489,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTgCNofRQ2SxCZ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592329479,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592329479,\"current_period_end\":1600278279,\"current_period_start\":1592329479,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuiptHiibShxDkjduc2lzn6\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTgCco1ui7JKVe\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592329479,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":6000,\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ\"},\"latest_invoice\":\"in_1GuipvHiibShxDkjRNwJ0mnb\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":6000,\"schedule\":null,\"start_date\":1592329479,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":6,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":52}}}}"], ["created_at", "2020-09-09 00:54:14.835597"], ["updated_at", "2020-09-09 00:54:14.835597"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   [1m[36mWebhookEvent Load (108.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 340], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   [1m[36mWebhookEvent Update (128.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 00:54:14.981984"], ["id", 339]]
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   [1m[35m (18.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   [1m[35m (10.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   [1m[35m (128.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [2f655c9c-aae6-4f7e-9bb8-137845bd003d] Performed ProcessEventsJob (Job ID: 2f655c9c-aae6-4f7e-9bb8-137845bd003d) from Async(default) in 969.07ms
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   [1m[36mWebhookEvent Update (36.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 00:54:15.132845"], ["id", 340]]
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   [1m[35m (3.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[35m (29.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   [1m[36mWebhookEvent Update (10.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 00:54:15.196545"], ["id", 339]]
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794] Performing ProcessEventsJob (Job ID: b73b9c12-a786-4307-9721-23620c194794) from Async(default) enqueued at 2020-09-09T00:54:15Z with arguments: 341
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   [1m[35m (25.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: b73b9c12-a786-4307-9721-23620c194794) to Async(default) with arguments: 341
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   [1m[35m (32.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [a2365a89-bb8d-4a45-a214-6ca1fc18b9a9] Performed ProcessEventsJob (Job ID: a2365a89-bb8d-4a45-a214-6ca1fc18b9a9) from Async(default) in 651.32ms
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   [1m[36mWebhookEvent Load (87.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 341], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   [1m[35m (43.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   â†³ app/jobs/process_events_job.rb:5:in `perform'
Completed 200 OK in 731ms (Views: 33.6ms | ActiveRecord: 105.6ms | Allocations: 281697)


[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   [1m[35m (39.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   [1m[36mWebhookEvent Update (2.1ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 00:54:15.298547"], ["id", 340]]
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   [1m[36mWebhookEvent Update (5.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 00:54:15.401217"], ["id", 341]]
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   [1m[35m (12.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [78c796f3-e967-4661-97fb-03428a2654a0] Performed ProcessEventsJob (Job ID: 78c796f3-e967-4661-97fb-03428a2654a0) from Async(default) in 466.41ms
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   [1m[35m (11.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 00:54:15.504109"], ["id", 341]]
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   [1m[35m (10.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b73b9c12-a786-4307-9721-23620c194794] Performed ProcessEventsJob (Job ID: b73b9c12-a786-4307-9721-23620c194794) from Async(default) in 286.31ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 21:05:50 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHkwHiibShxDkjzyK6hVxo", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599613550, "data"=>{"object"=>{"id"=>"po_1HPHjzHiibShxDkjvzDAw5HU", "object"=>"payout", "amount"=>362578, "arrival_date"=>1599609600, "automatic"=>true, "balance_transaction"=>"txn_1HPHjzHiibShxDkjFRBfh4JQ", "created"=>1599613491, "currency"=>"usd", "description"=>"STRIPE PAYOUT", "destination"=>"ba_15u280HiibShxDkj5TYYpdyJ", "failure_balance_transaction"=>nil, "failure_code"=>nil, "failure_message"=>nil, "livemode"=>false, "metadata"=>{}, "method"=>"standard", "source_type"=>"card", "statement_descriptor"=>nil, "status"=>"in_transit", "type"=>"bank_account"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payout.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHkwHiibShxDkjzyK6hVxo", "data"=>{"object"=>{"id"=>"po_1HPHjzHiibShxDkjvzDAw5HU", "object"=>"payout", "amount"=>362578, "arrival_date"=>1599609600, "automatic"=>true, "balance_transaction"=>"txn_1HPHjzHiibShxDkjFRBfh4JQ", "created"=>1599613491, "currency"=>"usd", "description"=>"STRIPE PAYOUT", "destination"=>"ba_15u280HiibShxDkj5TYYpdyJ", "failure_balance_transaction"=>nil, "failure_code"=>nil, "failure_message"=>nil, "livemode"=>false, "metadata"=>{}, "method"=>"standard", "source_type"=>"card", "statement_descriptor"=>nil, "status"=>"in_transit", "type"=>"bank_account"}}}}
  [1m[36mWebhookEvent Load (4.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHkwHiibShxDkjzyK6hVxo"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-08 21:05:50 -0400
  [1m[35m (5.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.3ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHkwHiibShxDkjzyK6hVxo"], ["data", "{\"id\":\"evt_1HPHkwHiibShxDkjzyK6hVxo\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599613550,\"data\":{\"object\":{\"id\":\"po_1HPHjzHiibShxDkjvzDAw5HU\",\"object\":\"payout\",\"amount\":362578,\"arrival_date\":1599609600,\"automatic\":true,\"balance_transaction\":\"txn_1HPHjzHiibShxDkjFRBfh4JQ\",\"created\":1599613491,\"currency\":\"usd\",\"description\":\"STRIPE PAYOUT\",\"destination\":\"ba_15u280HiibShxDkj5TYYpdyJ\",\"failure_balance_transaction\":null,\"failure_code\":null,\"failure_message\":null,\"livemode\":false,\"metadata\":{},\"method\":\"standard\",\"source_type\":\"card\",\"statement_descriptor\":null,\"status\":\"in_transit\",\"type\":\"bank_account\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payout.created\",\"webhook_event\":{\"id\":\"evt_1HPHkwHiibShxDkjzyK6hVxo\",\"data\":{\"object\":{\"id\":\"po_1HPHjzHiibShxDkjvzDAw5HU\",\"object\":\"payout\",\"amount\":362578,\"arrival_date\":1599609600,\"automatic\":true,\"balance_transaction\":\"txn_1HPHjzHiibShxDkjFRBfh4JQ\",\"created\":1599613491,\"currency\":\"usd\",\"description\":\"STRIPE PAYOUT\",\"destination\":\"ba_15u280HiibShxDkj5TYYpdyJ\",\"failure_balance_transaction\":null,\"failure_code\":null,\"failure_message\":null,\"livemode\":false,\"metadata\":{},\"method\":\"standard\",\"source_type\":\"card\",\"statement_descriptor\":null,\"status\":\"in_transit\",\"type\":\"bank_account\"}}}}"], ["created_at", "2020-09-09 01:05:50.849184"], ["updated_at", "2020-09-09 01:05:50.849184"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (28.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 086588e8-d0e6-4747-a4f2-474206292316) to Async(default) with arguments: 342
Completed 200 OK in 145ms (Views: 3.5ms | ActiveRecord: 41.2ms | Allocations: 19487)


Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPHkwHiibShxDkjMt0bhYBj", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599613550, "data"=>{"object"=>{"id"=>"po_1HPHjzHiibShxDkjvzDAw5HU", "object"=>"payout", "amount"=>362578, "arrival_date"=>1599609600, "automatic"=>true, "balance_transaction"=>"txn_1HPHjzHiibShxDkjFRBfh4JQ", "created"=>1599613491, "currency"=>"usd", "description"=>"STRIPE PAYOUT", "destination"=>"ba_15u280HiibShxDkj5TYYpdyJ", "failure_balance_transaction"=>nil, "failure_code"=>nil, "failure_message"=>nil, "livemode"=>false, "metadata"=>{}, "method"=>"standard", "source_type"=>"card", "statement_descriptor"=>nil, "status"=>"paid", "type"=>"bank_account"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payout.paid", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPHkwHiibShxDkjMt0bhYBj", "data"=>{"object"=>{"id"=>"po_1HPHjzHiibShxDkjvzDAw5HU", "object"=>"payout", "amount"=>362578, "arrival_date"=>1599609600, "automatic"=>true, "balance_transaction"=>"txn_1HPHjzHiibShxDkjFRBfh4JQ", "created"=>1599613491, "currency"=>"usd", "description"=>"STRIPE PAYOUT", "destination"=>"ba_15u280HiibShxDkj5TYYpdyJ", "failure_balance_transaction"=>nil, "failure_code"=>nil, "failure_message"=>nil, "livemode"=>false, "metadata"=>{}, "method"=>"standard", "source_type"=>"card", "statement_descriptor"=>nil, "status"=>"paid", "type"=>"bank_account"}}}}
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316] Performing ProcessEventsJob (Job ID: 086588e8-d0e6-4747-a4f2-474206292316) from Async(default) enqueued at 2020-09-09T01:05:50Z with arguments: 342
  [1m[36mWebhookEvent Load (3.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPHkwHiibShxDkjMt0bhYBj"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (7.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPHkwHiibShxDkjMt0bhYBj"], ["data", "{\"id\":\"evt_1HPHkwHiibShxDkjMt0bhYBj\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599613550,\"data\":{\"object\":{\"id\":\"po_1HPHjzHiibShxDkjvzDAw5HU\",\"object\":\"payout\",\"amount\":362578,\"arrival_date\":1599609600,\"automatic\":true,\"balance_transaction\":\"txn_1HPHjzHiibShxDkjFRBfh4JQ\",\"created\":1599613491,\"currency\":\"usd\",\"description\":\"STRIPE PAYOUT\",\"destination\":\"ba_15u280HiibShxDkj5TYYpdyJ\",\"failure_balance_transaction\":null,\"failure_code\":null,\"failure_message\":null,\"livemode\":false,\"metadata\":{},\"method\":\"standard\",\"source_type\":\"card\",\"statement_descriptor\":null,\"status\":\"paid\",\"type\":\"bank_account\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payout.paid\",\"webhook_event\":{\"id\":\"evt_1HPHkwHiibShxDkjMt0bhYBj\",\"data\":{\"object\":{\"id\":\"po_1HPHjzHiibShxDkjvzDAw5HU\",\"object\":\"payout\",\"amount\":362578,\"arrival_date\":1599609600,\"automatic\":true,\"balance_transaction\":\"txn_1HPHjzHiibShxDkjFRBfh4JQ\",\"created\":1599613491,\"currency\":\"usd\",\"description\":\"STRIPE PAYOUT\",\"destination\":\"ba_15u280HiibShxDkj5TYYpdyJ\",\"failure_balance_transaction\":null,\"failure_code\":null,\"failure_message\":null,\"livemode\":false,\"metadata\":{},\"method\":\"standard\",\"source_type\":\"card\",\"statement_descriptor\":null,\"status\":\"paid\",\"type\":\"bank_account\"}}}}"], ["created_at", "2020-09-09 01:05:51.047909"], ["updated_at", "2020-09-09 01:05:51.047909"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (28.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: dfaf3e0a-6fff-4902-a599-08d3a8b58f8f) to Async(default) with arguments: 343
Completed 200 OK in 159ms (Views: 2.8ms | ActiveRecord: 50.9ms | Allocations: 19889)


[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f] Performing ProcessEventsJob (Job ID: dfaf3e0a-6fff-4902-a599-08d3a8b58f8f) from Async(default) enqueued at 2020-09-09T01:05:51Z with arguments: 343
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   [1m[36mWebhookEvent Load (5.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 343], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   [1m[36mWebhookEvent Load (6.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 342], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   [1m[36mWebhookEvent Update (2.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 01:05:51.194358"], ["id", 343]]
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   [1m[36mWebhookEvent Update (2.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 01:05:51.211370"], ["id", 342]]
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   [1m[35m (20.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   [1m[35m (16.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   [1m[36mWebhookEvent Update (25.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 01:05:51.257366"], ["id", 343]]
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   [1m[36mWebhookEvent Update (9.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 01:05:51.280720"], ["id", 342]]
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [dfaf3e0a-6fff-4902-a599-08d3a8b58f8f] Performed ProcessEventsJob (Job ID: dfaf3e0a-6fff-4902-a599-08d3a8b58f8f) from Async(default) in 139.6ms
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [086588e8-d0e6-4747-a4f2-474206292316] Performed ProcessEventsJob (Job ID: 086588e8-d0e6-4747-a4f2-474206292316) from Async(default) in 320.24ms
  [1m[36mWebhookEvent Load (1.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 342], ["LIMIT", 1]]
  [1m[36mWebhookEvent Load (2.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 341], ["LIMIT", 1]]
  [1m[36mWebhookEvent Load (1.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/donations/new" for 127.0.0.1 at 2020-09-09 08:30:42 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (54.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 121.1ms | Allocations: 7661)
  Rendered donations/new.html.erb within layouts/application (Duration: 231.1ms | Allocations: 24715)
  Rendered layouts/_header.html.erb (Duration: 76.8ms | Allocations: 1532)
  [1m[36mProfile Load (69.1ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 249.1ms | Allocations: 16020)
  Rendered layouts/_footer.html.erb (Duration: 11.2ms | Allocations: 530)
Completed 200 OK in 1714ms (Views: 1438.9ms | ActiveRecord: 214.4ms | Allocations: 70247)


Started POST "/donations" for 127.0.0.1 at 2020-09-09 08:30:53 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"c3J26emoM9jQQhHYsUEhArBDcceKRIt12uI1kDi63KglQ5BtZxwjFHBQyTYI+UL+aAemGaPAsnov6rqzcgZ3CQ==", "donation"=>{"dollars"=>"333"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (95.5ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 312], ["created_at", "2020-09-09 12:30:53.348713"], ["updated_at", "2020-09-09 12:30:53.348713"], ["amount", 33300], ["dollars", 333]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (20.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/264
Completed 200 OK in 148ms (ActiveRecord: 117.2ms | Allocations: 13841)


Started GET "/donations/264" for 127.0.0.1 at 2020-09-09 08:30:53 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"264"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mDonation Load (1.1ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 264], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 77.2ms | Allocations: 3536)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1264)
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 4.8ms | Allocations: 2599)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | Allocations: 349)
Completed 200 OK in 115ms (Views: 101.9ms | ActiveRecord: 2.8ms | Allocations: 19158)


Started POST "/checkout/create" for 127.0.0.1 at 2020-09-09 08:30:55 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"iXh7GMCzxsxdQnz8nEqyhg8FDaEz3ighgz/0WbfIN8IfZ8LwnRyzif4qnjjfxUubpxyHAcAlu0XngpuNuZ5ibA==", "id"=>"264"}
  [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 264], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 55.3ms | Allocations: 184)
Completed 200 OK in 1188ms (Views: 63.9ms | ActiveRecord: 1.9ms | Allocations: 28306)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 08:30:58 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPSRxHiibShxDkjsncwSzrv", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599654656, "data"=>{"object"=>{"id"=>"pi_1HPSRwHiibShxDkjh705lzg0", "object"=>"payment_intent", "amount"=>33300, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPSRwHiibShxDkjh705lzg0"}, "client_secret"=>"pi_1HPSRwHiibShxDkjh705lzg0_secret_bhrRS9GySHUf0sLWVyImmO8n3", "confirmation_method"=>"automatic", "created"=>1599654656, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_yrk73B6Txc1AKJ", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPSRxHiibShxDkjsncwSzrv", "data"=>{"object"=>{"id"=>"pi_1HPSRwHiibShxDkjh705lzg0", "object"=>"payment_intent", "amount"=>33300, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPSRwHiibShxDkjh705lzg0"}, "client_secret"=>"pi_1HPSRwHiibShxDkjh705lzg0_secret_bhrRS9GySHUf0sLWVyImmO8n3", "confirmation_method"=>"automatic", "created"=>1599654656, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPSRxHiibShxDkjsncwSzrv"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPSRxHiibShxDkjsncwSzrv"], ["data", "{\"id\":\"evt_1HPSRxHiibShxDkjsncwSzrv\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599654656,\"data\":{\"object\":{\"id\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"object\":\"payment_intent\",\"amount\":33300,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPSRwHiibShxDkjh705lzg0\"},\"client_secret\":\"pi_1HPSRwHiibShxDkjh705lzg0_secret_bhrRS9GySHUf0sLWVyImmO8n3\",\"confirmation_method\":\"automatic\",\"created\":1599654656,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_yrk73B6Txc1AKJ\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HPSRxHiibShxDkjsncwSzrv\",\"data\":{\"object\":{\"id\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"object\":\"payment_intent\",\"amount\":33300,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPSRwHiibShxDkjh705lzg0\"},\"client_secret\":\"pi_1HPSRwHiibShxDkjh705lzg0_secret_bhrRS9GySHUf0sLWVyImmO8n3\",\"confirmation_method\":\"automatic\",\"created\":1599654656,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 12:30:58.181484"], ["updated_at", "2020-09-09 12:30:58.181484"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (15.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: dcc16b74-4d25-4d2a-bef4-61c0d70cdf30) to Async(default) with arguments: 344
Completed 200 OK in 33ms (Views: 0.6ms | ActiveRecord: 16.8ms | Allocations: 20898)


[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30] Performing ProcessEventsJob (Job ID: dcc16b74-4d25-4d2a-bef4-61c0d70cdf30) from Async(default) enqueued at 2020-09-09T12:30:58Z with arguments: 344
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 344], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 12:30:58.226962"], ["id", 344]]
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   [1m[35m (8.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 12:30:58.240869"], ["id", 344]]
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [dcc16b74-4d25-4d2a-bef4-61c0d70cdf30] Performed ProcessEventsJob (Job ID: dcc16b74-4d25-4d2a-bef4-61c0d70cdf30) from Async(default) in 36.65ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 08:31:32 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPSSWHiibShxDkjWyXN9QFy", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599654691, "data"=>{"object"=>{"id"=>"ch_1HPSSVHiibShxDkjuGCz1aGh", "object"=>"charge", "amount"=>33300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPSSVHiibShxDkjRmNd7442", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33445", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"No Name", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599654691, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>50, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPSRwHiibShxDkjh705lzg0", "payment_method"=>"pm_1HPSSUHiibShxDkjSpX2AGWJ", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPSSVHiibShxDkjuGCz1aGh/rcpt_HzRLw0EQ2nvx6jIoKji7oqGyhaxRxne", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPSSVHiibShxDkjuGCz1aGh/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_i2iw55j8PY9h9y", "idempotency_key"=>nil}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPSSWHiibShxDkjWyXN9QFy", "data"=>{"object"=>{"id"=>"ch_1HPSSVHiibShxDkjuGCz1aGh", "object"=>"charge", "amount"=>33300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPSSVHiibShxDkjRmNd7442", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33445", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"No Name", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599654691, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>50, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPSRwHiibShxDkjh705lzg0", "payment_method"=>"pm_1HPSSUHiibShxDkjSpX2AGWJ", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPSSVHiibShxDkjuGCz1aGh/rcpt_HzRLw0EQ2nvx6jIoKji7oqGyhaxRxne", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPSSVHiibShxDkjuGCz1aGh/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 08:31:32 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPSSWHiibShxDkjhIpScTJ7", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599654690, "data"=>{"object"=>{"id"=>"pm_1HPSSUHiibShxDkjSpX2AGWJ", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33445", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"No Name", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599654690, "customer"=>"cus_HTfrdHaUJIXzTt", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_i2iw55j8PY9h9y", "idempotency_key"=>nil}, "type"=>"payment_method.attached", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPSSWHiibShxDkjhIpScTJ7", "data"=>{"object"=>{"id"=>"pm_1HPSSUHiibShxDkjSpX2AGWJ", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33445", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"No Name", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599654690, "customer"=>"cus_HTfrdHaUJIXzTt", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}}}
  [1m[36mWebhookEvent Load (15.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPSSWHiibShxDkjWyXN9QFy"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Load (32.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPSSWHiibShxDkjhIpScTJ7"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (5.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 08:31:32 -0400
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 08:31:32 -0400
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPSSWHiibShxDkjWyXN9QFy"], ["data", "{\"id\":\"evt_1HPSSWHiibShxDkjWyXN9QFy\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599654691,\"data\":{\"object\":{\"id\":\"ch_1HPSSVHiibShxDkjuGCz1aGh\",\"object\":\"charge\",\"amount\":33300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPSSVHiibShxDkjRmNd7442\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33445\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"No Name\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599654691,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":50,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"payment_method\":\"pm_1HPSSUHiibShxDkjSpX2AGWJ\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPSSVHiibShxDkjuGCz1aGh/rcpt_HzRLw0EQ2nvx6jIoKji7oqGyhaxRxne\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPSSVHiibShxDkjuGCz1aGh/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_i2iw55j8PY9h9y\",\"idempotency_key\":null},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPSSWHiibShxDkjWyXN9QFy\",\"data\":{\"object\":{\"id\":\"ch_1HPSSVHiibShxDkjuGCz1aGh\",\"object\":\"charge\",\"amount\":33300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPSSVHiibShxDkjRmNd7442\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33445\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"No Name\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599654691,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":50,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"payment_method\":\"pm_1HPSSUHiibShxDkjSpX2AGWJ\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPSSVHiibShxDkjuGCz1aGh/rcpt_HzRLw0EQ2nvx6jIoKji7oqGyhaxRxne\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPSSVHiibShxDkjuGCz1aGh/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 12:31:32.847722"], ["updated_at", "2020-09-09 12:31:32.847722"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (10.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPSSWHiibShxDkjhIpScTJ7"], ["data", "{\"id\":\"evt_1HPSSWHiibShxDkjhIpScTJ7\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599654690,\"data\":{\"object\":{\"id\":\"pm_1HPSSUHiibShxDkjSpX2AGWJ\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33445\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"No Name\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599654690,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_i2iw55j8PY9h9y\",\"idempotency_key\":null},\"type\":\"payment_method.attached\",\"webhook_event\":{\"id\":\"evt_1HPSSWHiibShxDkjhIpScTJ7\",\"data\":{\"object\":{\"id\":\"pm_1HPSSUHiibShxDkjSpX2AGWJ\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33445\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"No Name\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599654690,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}}}}"], ["created_at", "2020-09-09 12:31:32.854695"], ["updated_at", "2020-09-09 12:31:32.854695"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (21.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: cc71776a-fac8-4cc9-8084-1fc707207949) to Async(default) with arguments: 345
Completed 200 OK in 143ms (Views: 1.7ms | ActiveRecord: 45.5ms | Allocations: 52784)


  [1m[35m (42.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 409ba9e9-b701-4057-a4de-4329e7338785) to Async(default) with arguments: 346
Completed 200 OK in 137ms (Views: 0.8ms | ActiveRecord: 86.6ms | Allocations: 69195)


[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785] Performing ProcessEventsJob (Job ID: 409ba9e9-b701-4057-a4de-4329e7338785) from Async(default) enqueued at 2020-09-09T12:31:32Z with arguments: 346
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949] Performing ProcessEventsJob (Job ID: cc71776a-fac8-4cc9-8084-1fc707207949) from Async(default) enqueued at 2020-09-09T12:31:32Z with arguments: 345
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPSSWHiibShxDkj4ikv5MIW", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599654691, "data"=>{"object"=>{"id"=>"pi_1HPSRwHiibShxDkjh705lzg0", "object"=>"payment_intent", "amount"=>33300, "amount_capturable"=>0, "amount_received"=>33300, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPSSVHiibShxDkjuGCz1aGh", "object"=>"charge", "amount"=>33300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPSSVHiibShxDkjRmNd7442", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33445", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"No Name", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599654691, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>50, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPSRwHiibShxDkjh705lzg0", "payment_method"=>"pm_1HPSSUHiibShxDkjSpX2AGWJ", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPSSVHiibShxDkjuGCz1aGh/rcpt_HzRLw0EQ2nvx6jIoKji7oqGyhaxRxne", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPSSVHiibShxDkjuGCz1aGh/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPSRwHiibShxDkjh705lzg0"}, "client_secret"=>"pi_1HPSRwHiibShxDkjh705lzg0_secret_bhrRS9GySHUf0sLWVyImmO8n3", "confirmation_method"=>"automatic", "created"=>1599654656, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HPSSUHiibShxDkjSpX2AGWJ", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"frankyB@gmail.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_i2iw55j8PY9h9y", "idempotency_key"=>nil}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPSSWHiibShxDkj4ikv5MIW", "data"=>{"object"=>{"id"=>"pi_1HPSRwHiibShxDkjh705lzg0", "object"=>"payment_intent", "amount"=>33300, "amount_capturable"=>0, "amount_received"=>33300, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPSSVHiibShxDkjuGCz1aGh", "object"=>"charge", "amount"=>33300, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPSSVHiibShxDkjRmNd7442", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"33445", "state"=>nil}, "email"=>"frankyB@gmail.com", "name"=>"No Name", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599654691, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>50, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPSRwHiibShxDkjh705lzg0", "payment_method"=>"pm_1HPSSUHiibShxDkjSpX2AGWJ", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"frankyB@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPSSVHiibShxDkjuGCz1aGh/rcpt_HzRLw0EQ2nvx6jIoKji7oqGyhaxRxne", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPSSVHiibShxDkjuGCz1aGh/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPSRwHiibShxDkjh705lzg0"}, "client_secret"=>"pi_1HPSRwHiibShxDkjh705lzg0_secret_bhrRS9GySHUf0sLWVyImmO8n3", "confirmation_method"=>"automatic", "created"=>1599654656, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HPSSUHiibShxDkjSpX2AGWJ", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"frankyB@gmail.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPSSWHiibShxDkjPyjWfKyr", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599654692, "data"=>{"object"=>{"id"=>"cs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>33300, "amount_total"=>33300, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"264", "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "customer_email"=>nil, "display_items"=>[{"amount"=>33300, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HPSRwHiibShxDkjh705lzg0", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"checkout.session.completed", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPSSWHiibShxDkjPyjWfKyr", "data"=>{"object"=>{"id"=>"cs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>33300, "amount_total"=>33300, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"264", "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "customer_email"=>nil, "display_items"=>[{"amount"=>33300, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HPSRwHiibShxDkjh705lzg0", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}}}
  [1m[36mWebhookEvent Load (3.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPSSWHiibShxDkj4ikv5MIW"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Load (13.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPSSWHiibShxDkjPyjWfKyr"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Create (8.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPSSWHiibShxDkj4ikv5MIW"], ["data", "{\"id\":\"evt_1HPSSWHiibShxDkj4ikv5MIW\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599654691,\"data\":{\"object\":{\"id\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"object\":\"payment_intent\",\"amount\":33300,\"amount_capturable\":0,\"amount_received\":33300,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPSSVHiibShxDkjuGCz1aGh\",\"object\":\"charge\",\"amount\":33300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPSSVHiibShxDkjRmNd7442\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33445\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"No Name\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599654691,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":50,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"payment_method\":\"pm_1HPSSUHiibShxDkjSpX2AGWJ\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPSSVHiibShxDkjuGCz1aGh/rcpt_HzRLw0EQ2nvx6jIoKji7oqGyhaxRxne\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPSSVHiibShxDkjuGCz1aGh/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPSRwHiibShxDkjh705lzg0\"},\"client_secret\":\"pi_1HPSRwHiibShxDkjh705lzg0_secret_bhrRS9GySHUf0sLWVyImmO8n3\",\"confirmation_method\":\"automatic\",\"created\":1599654656,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HPSSUHiibShxDkjSpX2AGWJ\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"frankyB@gmail.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_i2iw55j8PY9h9y\",\"idempotency_key\":null},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPSSWHiibShxDkj4ikv5MIW\",\"data\":{\"object\":{\"id\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"object\":\"payment_intent\",\"amount\":33300,\"amount_capturable\":0,\"amount_received\":33300,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPSSVHiibShxDkjuGCz1aGh\",\"object\":\"charge\",\"amount\":33300,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPSSVHiibShxDkjRmNd7442\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"33445\",\"state\":null},\"email\":\"frankyB@gmail.com\",\"name\":\"No Name\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599654691,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":50,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"payment_method\":\"pm_1HPSSUHiibShxDkjSpX2AGWJ\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"frankyB@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPSSVHiibShxDkjuGCz1aGh/rcpt_HzRLw0EQ2nvx6jIoKji7oqGyhaxRxne\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPSSVHiibShxDkjuGCz1aGh/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPSRwHiibShxDkjh705lzg0\"},\"client_secret\":\"pi_1HPSRwHiibShxDkjh705lzg0_secret_bhrRS9GySHUf0sLWVyImmO8n3\",\"confirmation_method\":\"automatic\",\"created\":1599654656,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HPSSUHiibShxDkjSpX2AGWJ\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"frankyB@gmail.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 12:31:32.973864"], ["updated_at", "2020-09-09 12:31:32.973864"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   [1m[36mWebhookEvent Load (13.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 345], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Create (4.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPSSWHiibShxDkjPyjWfKyr"], ["data", "{\"id\":\"evt_1HPSSWHiibShxDkjPyjWfKyr\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599654692,\"data\":{\"object\":{\"id\":\"cs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":33300,\"amount_total\":33300,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"264\",\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_email\":null,\"display_items\":[{\"amount\":33300,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"checkout.session.completed\",\"webhook_event\":{\"id\":\"evt_1HPSSWHiibShxDkjPyjWfKyr\",\"data\":{\"object\":{\"id\":\"cs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":33300,\"amount_total\":33300,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"264\",\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_email\":null,\"display_items\":[{\"amount\":33300,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HPSRwHiibShxDkjh705lzg0\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}}}}"], ["created_at", "2020-09-09 12:31:32.987651"], ["updated_at", "2020-09-09 12:31:32.987651"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (16.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 6111c46e-4b52-4b38-bcbf-f8cf50b0a872) to Async(default) with arguments: 347
Completed 200 OK in 75ms (Views: 1.5ms | ActiveRecord: 31.3ms | Allocations: 61474)


[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   [1m[36mWebhookEvent Update (8.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 12:31:33.009014"], ["id", 345]]
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (23.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 3858351b-3045-4e71-bdb4-e8d6828774d9) to Async(default) with arguments: 348
Completed 200 OK in 86ms (Views: 0.6ms | ActiveRecord: 43.7ms | Allocations: 79828)


[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872] Performing ProcessEventsJob (Job ID: 6111c46e-4b52-4b38-bcbf-f8cf50b0a872) from Async(default) enqueued at 2020-09-09T12:31:33Z with arguments: 347
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9] Performing ProcessEventsJob (Job ID: 3858351b-3045-4e71-bdb4-e8d6828774d9) from Async(default) enqueued at 2020-09-09T12:31:33Z with arguments: 348
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   [1m[36mWebhookEvent Load (2.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 346], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   [1m[36mWebhookEvent Load (2.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 347], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   [1m[36mWebhookEvent Update (3.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 12:31:33.062286"], ["id", 345]]
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[36mWebhookEvent Load (3.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 348], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   [1m[36mWebhookEvent Update (2.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 12:31:33.078007"], ["id", 347]]
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   [1m[35m (9.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [cc71776a-fac8-4cc9-8084-1fc707207949] Performed ProcessEventsJob (Job ID: cc71776a-fac8-4cc9-8084-1fc707207949) from Async(default) in 138.06ms
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   [1m[36mWebhookEvent Update (2.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 12:31:33.076409"], ["id", 346]]
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 12:31:33.086538"], ["id", 348]]
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   [1m[35m (16.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[35m (13.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   [1m[36mWebhookEvent Update (3.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 12:31:33.107159"], ["id", 347]]
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HTfrdHaUJIXzTt"], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/services/events/stripe_handler.rb:12:in `process'
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   [1m[35m (6.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 264], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/services/events/stripe_handler.rb:18:in `process'
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 12:31:33.115354"], ["id", 346]]
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6111c46e-4b52-4b38-bcbf-f8cf50b0a872] Performed ProcessEventsJob (Job ID: 6111c46e-4b52-4b38-bcbf-f8cf50b0a872) from Async(default) in 69.2ms
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[36mDonation Update (2.0ms)[0m  [1m[33mUPDATE "donations" SET "stripe_id" = $1, "status" = $2, "updated_at" = $3 WHERE "donations"."id" = $4[0m  [["stripe_id", "pi_1HPSRwHiibShxDkjh705lzg0"], ["status", "1"], ["updated_at", "2020-09-09 12:31:33.131692"], ["id", 264]]
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   [1m[35m (15.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [409ba9e9-b701-4057-a4de-4329e7338785] Performed ProcessEventsJob (Job ID: 409ba9e9-b701-4057-a4de-4329e7338785) from Async(default) in 192.74ms
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[35m (17.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 12:31:33.155474"], ["id", 348]]
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3858351b-3045-4e71-bdb4-e8d6828774d9] Performed ProcessEventsJob (Job ID: 3858351b-3045-4e71-bdb4-e8d6828774d9) from Async(default) in 93.99ms
Started GET "/checkout/success?session_idcs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ" for 127.0.0.1 at 2020-09-09 08:31:34 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 9.4ms | Allocations: 81)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1273)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 8.4ms | Allocations: 4743)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 364)
Completed 200 OK in 41ms (Views: 34.7ms | ActiveRecord: 1.2ms | Allocations: 14506)


DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from load at /home/tom/.rvm/gems/ruby-2.7.1/bin/rake:23)
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 10:28:23 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPUHbHiibShxDkjbuwzK1z8", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599661703, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>26600, "amount_paid"=>0, "amount_remaining"=>26600, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600266487, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTbnYzdpIU8fB4", "customer_address"=>nil, "customer_email"=>"tedwardconnolly@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_d92c74592acd22", "object"=>"line_item", "amount"=>26600, "currency"=>"usd", "description"=>"266 Ã— Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1602858487, "start"=>1600266487}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>266, "subscription"=>"sub_HTd1xieHI5rjuP", "subscription_item"=>"si_HTd1UppdoFzZS9", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTbnYzdpIU8fB4&subscription=sub_HTd1xieHI5rjuP"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600270087, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600266487, "period_start"=>1597588087, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTd1xieHI5rjuP", "subtotal"=>26600, "tax"=>nil, "tax_percent"=>nil, "total"=>26600, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPUHbHiibShxDkjbuwzK1z8", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>26600, "amount_paid"=>0, "amount_remaining"=>26600, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600266487, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTbnYzdpIU8fB4", "customer_address"=>nil, "customer_email"=>"tedwardconnolly@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_d92c74592acd22", "object"=>"line_item", "amount"=>26600, "currency"=>"usd", "description"=>"266 Ã— Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1602858487, "start"=>1600266487}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>266, "subscription"=>"sub_HTd1xieHI5rjuP", "subscription_item"=>"si_HTd1UppdoFzZS9", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTbnYzdpIU8fB4&subscription=sub_HTd1xieHI5rjuP"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600270087, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600266487, "period_start"=>1597588087, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTd1xieHI5rjuP", "subtotal"=>26600, "tax"=>nil, "tax_percent"=>nil, "total"=>26600, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPUHbHiibShxDkjbuwzK1z8"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPUHbHiibShxDkjbuwzK1z8"], ["data", "{\"id\":\"evt_1HPUHbHiibShxDkjbuwzK1z8\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599661703,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":26600,\"amount_paid\":0,\"amount_remaining\":26600,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600266487,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTbnYzdpIU8fB4\",\"customer_address\":null,\"customer_email\":\"tedwardconnolly@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_d92c74592acd22\",\"object\":\"line_item\",\"amount\":26600,\"currency\":\"usd\",\"description\":\"266 Ã— Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1602858487,\"start\":1600266487},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":266,\"subscription\":\"sub_HTd1xieHI5rjuP\",\"subscription_item\":\"si_HTd1UppdoFzZS9\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTbnYzdpIU8fB4\\u0026subscription=sub_HTd1xieHI5rjuP\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600270087,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600266487,\"period_start\":1597588087,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTd1xieHI5rjuP\",\"subtotal\":26600,\"tax\":null,\"tax_percent\":null,\"total\":26600,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HPUHbHiibShxDkjbuwzK1z8\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":26600,\"amount_paid\":0,\"amount_remaining\":26600,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600266487,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTbnYzdpIU8fB4\",\"customer_address\":null,\"customer_email\":\"tedwardconnolly@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_d92c74592acd22\",\"object\":\"line_item\",\"amount\":26600,\"currency\":\"usd\",\"description\":\"266 Ã— Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1602858487,\"start\":1600266487},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":266,\"subscription\":\"sub_HTd1xieHI5rjuP\",\"subscription_item\":\"si_HTd1UppdoFzZS9\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTbnYzdpIU8fB4\\u0026subscription=sub_HTd1xieHI5rjuP\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600270087,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600266487,\"period_start\":1597588087,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTd1xieHI5rjuP\",\"subtotal\":26600,\"tax\":null,\"tax_percent\":null,\"total\":26600,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-09 14:28:23.921640"], ["updated_at", "2020-09-09 14:28:23.921640"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (15.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 74d89b58-767d-43ce-89cb-b0b81a0dafa1) to Async(default) with arguments: 349
Completed 200 OK in 53ms (Views: 1.3ms | ActiveRecord: 17.4ms | Allocations: 41262)


[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1] Performing ProcessEventsJob (Job ID: 74d89b58-767d-43ce-89cb-b0b81a0dafa1) from Async(default) enqueued at 2020-09-09T14:28:23Z with arguments: 349
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 349], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 14:28:23.985303"], ["id", 349]]
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   [1m[35m (5.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 14:28:24.001464"], ["id", 349]]
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   [1m[35m (12.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [74d89b58-767d-43ce-89cb-b0b81a0dafa1] Performed ProcessEventsJob (Job ID: 74d89b58-767d-43ce-89cb-b0b81a0dafa1) from Async(default) in 50.93ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 10:36:02 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPUP0HiibShxDkjUigOw6Cy", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599662162, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>41200, "amount_paid"=>0, "amount_remaining"=>41200, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600266898, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTd8ByN5dhLZAv", "customer_address"=>nil, "customer_email"=>"tedwardconnolly@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_dd62c05d389dbd", "object"=>"line_item", "amount"=>41200, "currency"=>"usd", "description"=>"412 Ã— Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1602858898, "start"=>1600266898}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>412, "subscription"=>"sub_HTd8AdX621zAwA", "subscription_item"=>"si_HTd8vgOLuHVoPm", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTd8ByN5dhLZAv&subscription=sub_HTd8AdX621zAwA"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600270498, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600266898, "period_start"=>1597588498, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTd8AdX621zAwA", "subtotal"=>41200, "tax"=>nil, "tax_percent"=>nil, "total"=>41200, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPUP0HiibShxDkjUigOw6Cy", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>41200, "amount_paid"=>0, "amount_remaining"=>41200, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600266898, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTd8ByN5dhLZAv", "customer_address"=>nil, "customer_email"=>"tedwardconnolly@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_dd62c05d389dbd", "object"=>"line_item", "amount"=>41200, "currency"=>"usd", "description"=>"412 Ã— Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1602858898, "start"=>1600266898}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>412, "subscription"=>"sub_HTd8AdX621zAwA", "subscription_item"=>"si_HTd8vgOLuHVoPm", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTd8ByN5dhLZAv&subscription=sub_HTd8AdX621zAwA"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600270498, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600266898, "period_start"=>1597588498, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTd8AdX621zAwA", "subtotal"=>41200, "tax"=>nil, "tax_percent"=>nil, "total"=>41200, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPUP0HiibShxDkjUigOw6Cy"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPUP0HiibShxDkjUigOw6Cy"], ["data", "{\"id\":\"evt_1HPUP0HiibShxDkjUigOw6Cy\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599662162,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":41200,\"amount_paid\":0,\"amount_remaining\":41200,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600266898,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTd8ByN5dhLZAv\",\"customer_address\":null,\"customer_email\":\"tedwardconnolly@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_dd62c05d389dbd\",\"object\":\"line_item\",\"amount\":41200,\"currency\":\"usd\",\"description\":\"412 Ã— Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1602858898,\"start\":1600266898},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":412,\"subscription\":\"sub_HTd8AdX621zAwA\",\"subscription_item\":\"si_HTd8vgOLuHVoPm\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTd8ByN5dhLZAv\\u0026subscription=sub_HTd8AdX621zAwA\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600270498,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600266898,\"period_start\":1597588498,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTd8AdX621zAwA\",\"subtotal\":41200,\"tax\":null,\"tax_percent\":null,\"total\":41200,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HPUP0HiibShxDkjUigOw6Cy\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":41200,\"amount_paid\":0,\"amount_remaining\":41200,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600266898,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTd8ByN5dhLZAv\",\"customer_address\":null,\"customer_email\":\"tedwardconnolly@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_dd62c05d389dbd\",\"object\":\"line_item\",\"amount\":41200,\"currency\":\"usd\",\"description\":\"412 Ã— Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1602858898,\"start\":1600266898},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":412,\"subscription\":\"sub_HTd8AdX621zAwA\",\"subscription_item\":\"si_HTd8vgOLuHVoPm\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTd8ByN5dhLZAv\\u0026subscription=sub_HTd8AdX621zAwA\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600270498,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600266898,\"period_start\":1597588498,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTd8AdX621zAwA\",\"subtotal\":41200,\"tax\":null,\"tax_percent\":null,\"total\":41200,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-09 14:36:02.996759"], ["updated_at", "2020-09-09 14:36:02.996759"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (13.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 70882814-5106-483e-ab4f-c71699adaee6) to Async(default) with arguments: 350
Completed 200 OK in 51ms (Views: 1.5ms | ActiveRecord: 16.0ms | Allocations: 41261)


[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6] Performing ProcessEventsJob (Job ID: 70882814-5106-483e-ab4f-c71699adaee6) from Async(default) enqueued at 2020-09-09T14:36:03Z with arguments: 350
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 350], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 14:36:03.055188"], ["id", 350]]
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   [1m[35m (10.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 14:36:03.087292"], ["id", 350]]
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [70882814-5106-483e-ab4f-c71699adaee6] Performed ProcessEventsJob (Job ID: 70882814-5106-483e-ab4f-c71699adaee6) from Async(default) in 64.73ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 11:43:29 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPVSHHiibShxDkjZRBSNUHQ", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599666209, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>61300, "amount_paid"=>0, "amount_remaining"=>61300, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600270994, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTd8ByN5dhLZAv", "customer_address"=>nil, "customer_email"=>"tedwardconnolly@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_bb9e779cc00069", "object"=>"line_item", "amount"=>61300, "currency"=>"usd", "description"=>"613 Ã— Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1602862994, "start"=>1600270994}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>613, "subscription"=>"sub_HTeE3xlDpPTBu3", "subscription_item"=>"si_HTeEwLz5aSG4C9", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTd8ByN5dhLZAv&subscription=sub_HTeE3xlDpPTBu3"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600274594, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600270994, "period_start"=>1597592594, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTeE3xlDpPTBu3", "subtotal"=>61300, "tax"=>nil, "tax_percent"=>nil, "total"=>61300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPVSHHiibShxDkjZRBSNUHQ", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>61300, "amount_paid"=>0, "amount_remaining"=>61300, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600270994, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTd8ByN5dhLZAv", "customer_address"=>nil, "customer_email"=>"tedwardconnolly@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_bb9e779cc00069", "object"=>"line_item", "amount"=>61300, "currency"=>"usd", "description"=>"613 Ã— Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1602862994, "start"=>1600270994}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>613, "subscription"=>"sub_HTeE3xlDpPTBu3", "subscription_item"=>"si_HTeEwLz5aSG4C9", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTd8ByN5dhLZAv&subscription=sub_HTeE3xlDpPTBu3"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600274594, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600270994, "period_start"=>1597592594, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTeE3xlDpPTBu3", "subtotal"=>61300, "tax"=>nil, "tax_percent"=>nil, "total"=>61300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPVSHHiibShxDkjZRBSNUHQ"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPVSHHiibShxDkjZRBSNUHQ"], ["data", "{\"id\":\"evt_1HPVSHHiibShxDkjZRBSNUHQ\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599666209,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":61300,\"amount_paid\":0,\"amount_remaining\":61300,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600270994,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTd8ByN5dhLZAv\",\"customer_address\":null,\"customer_email\":\"tedwardconnolly@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_bb9e779cc00069\",\"object\":\"line_item\",\"amount\":61300,\"currency\":\"usd\",\"description\":\"613 Ã— Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1602862994,\"start\":1600270994},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":613,\"subscription\":\"sub_HTeE3xlDpPTBu3\",\"subscription_item\":\"si_HTeEwLz5aSG4C9\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTd8ByN5dhLZAv\\u0026subscription=sub_HTeE3xlDpPTBu3\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600274594,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600270994,\"period_start\":1597592594,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTeE3xlDpPTBu3\",\"subtotal\":61300,\"tax\":null,\"tax_percent\":null,\"total\":61300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HPVSHHiibShxDkjZRBSNUHQ\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":61300,\"amount_paid\":0,\"amount_remaining\":61300,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600270994,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTd8ByN5dhLZAv\",\"customer_address\":null,\"customer_email\":\"tedwardconnolly@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_bb9e779cc00069\",\"object\":\"line_item\",\"amount\":61300,\"currency\":\"usd\",\"description\":\"613 Ã— Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1602862994,\"start\":1600270994},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":613,\"subscription\":\"sub_HTeE3xlDpPTBu3\",\"subscription_item\":\"si_HTeEwLz5aSG4C9\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTd8ByN5dhLZAv\\u0026subscription=sub_HTeE3xlDpPTBu3\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600274594,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600270994,\"period_start\":1597592594,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTeE3xlDpPTBu3\",\"subtotal\":61300,\"tax\":null,\"tax_percent\":null,\"total\":61300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-09 15:43:29.682317"], ["updated_at", "2020-09-09 15:43:29.682317"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (18.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: f29901ca-3701-4fa7-91a1-c2334c6d7d03) to Async(default) with arguments: 351
Completed 200 OK in 51ms (Views: 1.3ms | ActiveRecord: 20.7ms | Allocations: 41261)


[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03] Performing ProcessEventsJob (Job ID: f29901ca-3701-4fa7-91a1-c2334c6d7d03) from Async(default) enqueued at 2020-09-09T15:43:29Z with arguments: 351
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 351], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 15:43:29.746059"], ["id", 351]]
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   [1m[35m (8.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 15:43:29.773226"], ["id", 351]]
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [f29901ca-3701-4fa7-91a1-c2334c6d7d03] Performed ProcessEventsJob (Job ID: f29901ca-3701-4fa7-91a1-c2334c6d7d03) from Async(default) in 64.92ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 11:55:20 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPVdkHiibShxDkjHFgK0YlM", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599666920, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>31300, "amount_paid"=>0, "amount_remaining"=>31300, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600271696, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTeO15Nh6H9t4i", "customer_address"=>nil, "customer_email"=>"tedwardconnolly@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_69ffd1b35473dd", "object"=>"line_item", "amount"=>31300, "currency"=>"usd", "description"=>"313 Ã— Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1602863696, "start"=>1600271696}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>313, "subscription"=>"sub_HTeQCNlFVPwaWi", "subscription_item"=>"si_HTeQFFFE0kbqAC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTeO15Nh6H9t4i&subscription=sub_HTeQCNlFVPwaWi"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600275296, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600271696, "period_start"=>1597593296, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTeQCNlFVPwaWi", "subtotal"=>31300, "tax"=>nil, "tax_percent"=>nil, "total"=>31300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPVdkHiibShxDkjHFgK0YlM", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>31300, "amount_paid"=>0, "amount_remaining"=>31300, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600271696, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTeO15Nh6H9t4i", "customer_address"=>nil, "customer_email"=>"tedwardconnolly@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_69ffd1b35473dd", "object"=>"line_item", "amount"=>31300, "currency"=>"usd", "description"=>"313 Ã— Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1602863696, "start"=>1600271696}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>313, "subscription"=>"sub_HTeQCNlFVPwaWi", "subscription_item"=>"si_HTeQFFFE0kbqAC", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTeO15Nh6H9t4i&subscription=sub_HTeQCNlFVPwaWi"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600275296, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600271696, "period_start"=>1597593296, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTeQCNlFVPwaWi", "subtotal"=>31300, "tax"=>nil, "tax_percent"=>nil, "total"=>31300, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPVdkHiibShxDkjHFgK0YlM"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPVdkHiibShxDkjHFgK0YlM"], ["data", "{\"id\":\"evt_1HPVdkHiibShxDkjHFgK0YlM\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599666920,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":31300,\"amount_paid\":0,\"amount_remaining\":31300,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600271696,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTeO15Nh6H9t4i\",\"customer_address\":null,\"customer_email\":\"tedwardconnolly@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_69ffd1b35473dd\",\"object\":\"line_item\",\"amount\":31300,\"currency\":\"usd\",\"description\":\"313 Ã— Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1602863696,\"start\":1600271696},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":313,\"subscription\":\"sub_HTeQCNlFVPwaWi\",\"subscription_item\":\"si_HTeQFFFE0kbqAC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTeO15Nh6H9t4i\\u0026subscription=sub_HTeQCNlFVPwaWi\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600275296,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600271696,\"period_start\":1597593296,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTeQCNlFVPwaWi\",\"subtotal\":31300,\"tax\":null,\"tax_percent\":null,\"total\":31300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HPVdkHiibShxDkjHFgK0YlM\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":31300,\"amount_paid\":0,\"amount_remaining\":31300,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600271696,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTeO15Nh6H9t4i\",\"customer_address\":null,\"customer_email\":\"tedwardconnolly@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_69ffd1b35473dd\",\"object\":\"line_item\",\"amount\":31300,\"currency\":\"usd\",\"description\":\"313 Ã— Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1602863696,\"start\":1600271696},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":313,\"subscription\":\"sub_HTeQCNlFVPwaWi\",\"subscription_item\":\"si_HTeQFFFE0kbqAC\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTeO15Nh6H9t4i\\u0026subscription=sub_HTeQCNlFVPwaWi\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600275296,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600271696,\"period_start\":1597593296,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTeQCNlFVPwaWi\",\"subtotal\":31300,\"tax\":null,\"tax_percent\":null,\"total\":31300,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-09 15:55:20.687302"], ["updated_at", "2020-09-09 15:55:20.687302"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (35.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: ef88ae31-c8a8-41b8-b2f4-180ece1487db) to Async(default) with arguments: 352
Completed 200 OK in 81ms (Views: 4.0ms | ActiveRecord: 37.4ms | Allocations: 41260)


[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db] Performing ProcessEventsJob (Job ID: ef88ae31-c8a8-41b8-b2f4-180ece1487db) from Async(default) enqueued at 2020-09-09T15:55:20Z with arguments: 352
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 352], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 15:55:20.787478"], ["id", 352]]
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 15:55:20.806468"], ["id", 352]]
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   [1m[35m (9.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ef88ae31-c8a8-41b8-b2f4-180ece1487db] Performed ProcessEventsJob (Job ID: ef88ae31-c8a8-41b8-b2f4-180ece1487db) from Async(default) in 53.04ms
  [1m[35m (42.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "subscriptions"[0m
  [1m[36mSubscription Load (0.3ms)[0m  [1m[34mSELECT "subscriptions".* FROM "subscriptions"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7411833289957498605)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DropSubscriptions (20200909161606)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (208.0ms)[0m  [1m[35mDROP TABLE "subscriptions"[0m
  [1m[36mprimary::SchemaMigration Create (11.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200909161606"]]
  [1m[35m (26.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (26.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(7411833289957498605)[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7411833289957498605)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateStripeReports (20200909163548)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (494.1ms)[0m  [1m[35mCREATE TABLE "stripe_reports" ("id" bigserial primary key, "date" character varying, "user_id" bigint NOT NULL, "pledge_id" bigint, "donation_id" bigint, "amount" integer, "fee" integer, "net" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1e8057a630"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_404e859ad4"
FOREIGN KEY ("pledge_id")
  REFERENCES "pledges" ("id")
, CONSTRAINT "fk_rails_faa6486da2"
FOREIGN KEY ("donation_id")
  REFERENCES "donations" ("id")
)[0m
  [1m[35m (34.4ms)[0m  [1m[35mCREATE  INDEX  "index_stripe_reports_on_user_id" ON "stripe_reports"  ("user_id")[0m
  [1m[35m (48.1ms)[0m  [1m[35mCREATE  INDEX  "index_stripe_reports_on_pledge_id" ON "stripe_reports"  ("pledge_id")[0m
  [1m[35m (47.8ms)[0m  [1m[35mCREATE  INDEX  "index_stripe_reports_on_donation_id" ON "stripe_reports"  ("donation_id")[0m
  [1m[36mprimary::SchemaMigration Create (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200909163548"]]
  [1m[35m (21.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(7411833289957498605)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mPledge Load (36.9ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" ORDER BY "pledges"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (52.6ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 16], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (65.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
Started GET "/checkout/success?session_idcs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ" for 127.0.0.1 at 2020-09-09 12:46:35 -0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.8ms | Allocations: 243)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1546)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 65.0ms | Allocations: 33784)
  Rendered layouts/_footer.html.erb (Duration: 1.4ms | Allocations: 538)
Completed 200 OK in 119ms (Views: 102.5ms | ActiveRecord: 8.2ms | Allocations: 58503)


Started GET "/checkout/success?session_idcs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ" for 127.0.0.1 at 2020-09-09 12:57:14 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.8ms | Allocations: 243)
  Rendered layouts/_header.html.erb (Duration: 2.6ms | Allocations: 1546)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 66.7ms | Allocations: 33784)
  Rendered layouts/_footer.html.erb (Duration: 1.6ms | Allocations: 538)
Completed 200 OK in 121ms (Views: 104.6ms | ActiveRecord: 8.5ms | Allocations: 58515)


  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mPledge Load (0.9ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mPledge Load (0.9ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
Started GET "/checkout/success?session_idcs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ" for 127.0.0.1 at 2020-09-09 13:07:57 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_yPDXL9HOh3JFnoNTnxXGyGNKOAcAbsE1zsmtyoOt81afwawNG8OjwWhJ"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 1.1ms | Allocations: 243)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1546)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 68.1ms | Allocations: 33784)
  Rendered layouts/_footer.html.erb (Duration: 1.5ms | Allocations: 538)
Completed 200 OK in 123ms (Views: 106.2ms | ActiveRecord: 8.2ms | Allocations: 58499)


  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mStripeReport Create (2.3ms)[0m  [1m[32mINSERT INTO "stripe_reports" ("user_id", "pledge_id", "amount", "fee", "net", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", 16], ["pledge_id", 85], ["amount", 33300], ["fee", 995], ["net", 32305], ["created_at", "2020-09-09 17:08:40.570109"], ["updated_at", "2020-09-09 17:08:40.570109"]]
  [1m[35m (31.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStripeReport Load (1.2ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" WHERE "stripe_reports"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mStripeReport Create (1.4ms)[0m  [1m[32mINSERT INTO "stripe_reports" ("user_id", "pledge_id", "amount", "fee", "net", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", 16], ["pledge_id", 85], ["amount", 44500], ["fee", 1320], ["net", 43180], ["created_at", "2020-09-09 17:18:32.445110"], ["updated_at", "2020-09-09 17:18:32.445110"]]
  [1m[35m (26.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mStripeReport Load (1.0ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" WHERE "stripe_reports"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mPledge Load (1.2ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
Started GET "/donations/new" for 127.0.0.1 at 2020-09-09 13:44:45 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 24.2ms | Allocations: 10629)
  Rendered donations/new.html.erb within layouts/application (Duration: 49.9ms | Allocations: 25601)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1264)
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 17.6ms | Allocations: 11878)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 357)
Completed 200 OK in 95ms (Views: 76.5ms | ActiveRecord: 5.9ms | Allocations: 54666)


Started POST "/donations" for 127.0.0.1 at 2020-09-09 13:44:52 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"+AHhs80paQcFZgKlzdr8eSKQPSTRzehpcftRWN8viV6uMAc3Q515y6V02kt0Yp+F+tTq+vhJ0WaE8957lZMi/w==", "donation"=>{"dollars"=>"12"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (2.1ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 312], ["created_at", "2020-09-09 17:44:52.481647"], ["updated_at", "2020-09-09 17:44:52.481647"], ["amount", 1200], ["dollars", 12]]
  â†³ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (23.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/265
Completed 200 OK in 90ms (ActiveRecord: 28.2ms | Allocations: 14009)


Started GET "/donations/265" for 127.0.0.1 at 2020-09-09 13:44:52 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"265"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mDonation Load (2.0ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 265], ["LIMIT", 1]]
  â†³ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 43.8ms | Allocations: 3536)
  Rendered layouts/_header.html.erb (Duration: 5.7ms | Allocations: 1264)
  [1m[36mProfile Load (0.9ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.6ms | Allocations: 2599)
  Rendered layouts/_footer.html.erb (Duration: 2.2ms | Allocations: 349)
Completed 200 OK in 123ms (Views: 85.7ms | ActiveRecord: 6.6ms | Allocations: 19155)


Started POST "/checkout/create" for 127.0.0.1 at 2020-09-09 13:44:55 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"iX83nbUiIL04vamqS8sUfIAZG60IEqeelTXPv3ONQJcfYI516I1V+JvVS24IRO1hKACRDfvpNPrxiKBrfdsVOQ==", "id"=>"265"}
  [1m[36mDonation Load (1.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 265], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 1.6ms | Allocations: 183)
Completed 200 OK in 1341ms (Views: 10.3ms | ActiveRecord: 2.6ms | Allocations: 28742)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 13:44:57 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXLoHiibShxDkjFDfUsRes", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599673496, "data"=>{"object"=>{"id"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "object"=>"payment_intent", "amount"=>1200, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPXLoHiibShxDkj14J5RlN7"}, "client_secret"=>"pi_1HPXLoHiibShxDkj14J5RlN7_secret_JgarP0PSkB7x6N0pHkqjyMaRX", "confirmation_method"=>"automatic", "created"=>1599673496, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_AE4kfe4PuXx7vd", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXLoHiibShxDkjFDfUsRes", "data"=>{"object"=>{"id"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "object"=>"payment_intent", "amount"=>1200, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPXLoHiibShxDkj14J5RlN7"}, "client_secret"=>"pi_1HPXLoHiibShxDkj14J5RlN7_secret_JgarP0PSkB7x6N0pHkqjyMaRX", "confirmation_method"=>"automatic", "created"=>1599673496, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (2.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXLoHiibShxDkjFDfUsRes"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXLoHiibShxDkjFDfUsRes"], ["data", "{\"id\":\"evt_1HPXLoHiibShxDkjFDfUsRes\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599673496,\"data\":{\"object\":{\"id\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"object\":\"payment_intent\",\"amount\":1200,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPXLoHiibShxDkj14J5RlN7\"},\"client_secret\":\"pi_1HPXLoHiibShxDkj14J5RlN7_secret_JgarP0PSkB7x6N0pHkqjyMaRX\",\"confirmation_method\":\"automatic\",\"created\":1599673496,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_AE4kfe4PuXx7vd\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HPXLoHiibShxDkjFDfUsRes\",\"data\":{\"object\":{\"id\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"object\":\"payment_intent\",\"amount\":1200,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPXLoHiibShxDkj14J5RlN7\"},\"client_secret\":\"pi_1HPXLoHiibShxDkj14J5RlN7_secret_JgarP0PSkB7x6N0pHkqjyMaRX\",\"confirmation_method\":\"automatic\",\"created\":1599673496,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 17:44:57.538958"], ["updated_at", "2020-09-09 17:44:57.538958"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (12.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 89e628f3-d223-40c4-a4cb-ea14a4570c45) to Async(default) with arguments: 353
Completed 200 OK in 151ms (Views: 1.1ms | ActiveRecord: 32.1ms | Allocations: 25729)


[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45] Performing ProcessEventsJob (Job ID: 89e628f3-d223-40c4-a4cb-ea14a4570c45) from Async(default) enqueued at 2020-09-09T17:44:57Z with arguments: 353
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 353], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 17:44:57.639458"], ["id", 353]]
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 17:44:57.668853"], ["id", 353]]
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [89e628f3-d223-40c4-a4cb-ea14a4570c45] Performed ProcessEventsJob (Job ID: 89e628f3-d223-40c4-a4cb-ea14a4570c45) from Async(default) in 67.99ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 13:45:18 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXMAHiibShxDkjGXuSjaOd", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599673518, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>600000, "amount_paid"=>0, "amount_remaining"=>600000, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600278279, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_198e29b1b74d5d", "object"=>"line_item", "amount"=>600000, "currency"=>"usd", "description"=>"6000 Ã— Stewardship (at $1.00 / every 3 months)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1608140679, "start"=>1600278279}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>6000, "subscription"=>"sub_HTgCNofRQ2SxCZ", "subscription_item"=>"si_HTgCco1ui7JKVe", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTfrdHaUJIXzTt&subscription=sub_HTgCNofRQ2SxCZ"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600281879, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600278279, "period_start"=>1592329479, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTgCNofRQ2SxCZ", "subtotal"=>600000, "tax"=>nil, "tax_percent"=>nil, "total"=>600000, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXMAHiibShxDkjGXuSjaOd", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>600000, "amount_paid"=>0, "amount_remaining"=>600000, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600278279, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HTfrdHaUJIXzTt", "customer_address"=>nil, "customer_email"=>"frankyB@gmail.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_198e29b1b74d5d", "object"=>"line_item", "amount"=>600000, "currency"=>"usd", "description"=>"6000 Ã— Stewardship (at $1.00 / every 3 months)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1608140679, "start"=>1600278279}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>6000, "subscription"=>"sub_HTgCNofRQ2SxCZ", "subscription_item"=>"si_HTgCco1ui7JKVe", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HTfrdHaUJIXzTt&subscription=sub_HTgCNofRQ2SxCZ"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600281879, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600278279, "period_start"=>1592329479, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HTgCNofRQ2SxCZ", "subtotal"=>600000, "tax"=>nil, "tax_percent"=>nil, "total"=>600000, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXMAHiibShxDkjGXuSjaOd"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.0ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXMAHiibShxDkjGXuSjaOd"], ["data", "{\"id\":\"evt_1HPXMAHiibShxDkjGXuSjaOd\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599673518,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":600000,\"amount_paid\":0,\"amount_remaining\":600000,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600278279,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_198e29b1b74d5d\",\"object\":\"line_item\",\"amount\":600000,\"currency\":\"usd\",\"description\":\"6000 Ã— Stewardship (at $1.00 / every 3 months)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1608140679,\"start\":1600278279},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":6000,\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"subscription_item\":\"si_HTgCco1ui7JKVe\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTfrdHaUJIXzTt\\u0026subscription=sub_HTgCNofRQ2SxCZ\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600281879,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600278279,\"period_start\":1592329479,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"subtotal\":600000,\"tax\":null,\"tax_percent\":null,\"total\":600000,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HPXMAHiibShxDkjGXuSjaOd\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":600000,\"amount_paid\":0,\"amount_remaining\":600000,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600278279,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_address\":null,\"customer_email\":\"frankyB@gmail.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_198e29b1b74d5d\",\"object\":\"line_item\",\"amount\":600000,\"currency\":\"usd\",\"description\":\"6000 Ã— Stewardship (at $1.00 / every 3 months)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1608140679,\"start\":1600278279},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":6000,\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"subscription_item\":\"si_HTgCco1ui7JKVe\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HTfrdHaUJIXzTt\\u0026subscription=sub_HTgCNofRQ2SxCZ\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600281879,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600278279,\"period_start\":1592329479,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"subtotal\":600000,\"tax\":null,\"tax_percent\":null,\"total\":600000,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-09 17:45:18.808031"], ["updated_at", "2020-09-09 17:45:18.808031"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (48.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 8cfd156f-0215-4737-a83f-70a935444610) to Async(default) with arguments: 354
Completed 200 OK in 156ms (Views: 4.8ms | ActiveRecord: 52.1ms | Allocations: 41091)


[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610] Performing ProcessEventsJob (Job ID: 8cfd156f-0215-4737-a83f-70a935444610) from Async(default) enqueued at 2020-09-09T17:45:18Z with arguments: 354
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   [1m[36mWebhookEvent Load (1.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 354], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   [1m[36mWebhookEvent Update (1.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 17:45:18.975388"], ["id", 354]]
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   [1m[36mWebhookEvent Update (1.1ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 17:45:19.035321"], ["id", 354]]
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   [1m[35m (10.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [8cfd156f-0215-4737-a83f-70a935444610] Performed ProcessEventsJob (Job ID: 8cfd156f-0215-4737-a83f-70a935444610) from Async(default) in 109.31ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 13:46:00 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXMpHiibShxDkjfUZh3QTE", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599673559, "data"=>{"object"=>{"id"=>"ch_1HPXMpHiibShxDkjmFe5ibve", "object"=>"charge", "amount"=>1200, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPXMpHiibShxDkjYH3Z1NBS", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"58585", "state"=>nil}, "email"=>"flagrantOpponent@gmail.com", "name"=>"FOP", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599673559, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>21, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "payment_method"=>"pm_1HPXMoHiibShxDkjSCQag0Sh", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>2, "exp_year"=>2024, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"flagrantOpponent@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPXMpHiibShxDkjmFe5ibve/rcpt_HzWP81X1r9OCT5sXgFkcOCL4TRy6N99", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPXMpHiibShxDkjmFe5ibve/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>"req_57icoGVTRzhYVq", "idempotency_key"=>nil}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXMpHiibShxDkjfUZh3QTE", "data"=>{"object"=>{"id"=>"ch_1HPXMpHiibShxDkjmFe5ibve", "object"=>"charge", "amount"=>1200, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPXMpHiibShxDkjYH3Z1NBS", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"58585", "state"=>nil}, "email"=>"flagrantOpponent@gmail.com", "name"=>"FOP", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599673559, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>21, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "payment_method"=>"pm_1HPXMoHiibShxDkjSCQag0Sh", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>2, "exp_year"=>2024, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"flagrantOpponent@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPXMpHiibShxDkjmFe5ibve/rcpt_HzWP81X1r9OCT5sXgFkcOCL4TRy6N99", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPXMpHiibShxDkjmFe5ibve/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXMpHiibShxDkjfUZh3QTE"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXMpHiibShxDkjfUZh3QTE"], ["data", "{\"id\":\"evt_1HPXMpHiibShxDkjfUZh3QTE\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599673559,\"data\":{\"object\":{\"id\":\"ch_1HPXMpHiibShxDkjmFe5ibve\",\"object\":\"charge\",\"amount\":1200,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPXMpHiibShxDkjYH3Z1NBS\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"58585\",\"state\":null},\"email\":\"flagrantOpponent@gmail.com\",\"name\":\"FOP\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599673559,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":21,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"payment_method\":\"pm_1HPXMoHiibShxDkjSCQag0Sh\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":2,\"exp_year\":2024,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"flagrantOpponent@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPXMpHiibShxDkjmFe5ibve/rcpt_HzWP81X1r9OCT5sXgFkcOCL4TRy6N99\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPXMpHiibShxDkjmFe5ibve/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":\"req_57icoGVTRzhYVq\",\"idempotency_key\":null},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPXMpHiibShxDkjfUZh3QTE\",\"data\":{\"object\":{\"id\":\"ch_1HPXMpHiibShxDkjmFe5ibve\",\"object\":\"charge\",\"amount\":1200,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPXMpHiibShxDkjYH3Z1NBS\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"58585\",\"state\":null},\"email\":\"flagrantOpponent@gmail.com\",\"name\":\"FOP\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599673559,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":21,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"payment_method\":\"pm_1HPXMoHiibShxDkjSCQag0Sh\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":2,\"exp_year\":2024,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"flagrantOpponent@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPXMpHiibShxDkjmFe5ibve/rcpt_HzWP81X1r9OCT5sXgFkcOCL4TRy6N99\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPXMpHiibShxDkjmFe5ibve/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 17:46:00.278800"], ["updated_at", "2020-09-09 17:46:00.278800"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 13:46:00 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXMpHiibShxDkjkPU0BCtE", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599673558, "data"=>{"object"=>{"id"=>"pm_1HPXMoHiibShxDkjSCQag0Sh", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"58585", "state"=>nil}, "email"=>"flagrantOpponent@gmail.com", "name"=>"FOP", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>2, "exp_year"=>2024, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599673558, "customer"=>"cus_HTfrdHaUJIXzTt", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_57icoGVTRzhYVq", "idempotency_key"=>nil}, "type"=>"payment_method.attached", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXMpHiibShxDkjkPU0BCtE", "data"=>{"object"=>{"id"=>"pm_1HPXMoHiibShxDkjSCQag0Sh", "object"=>"payment_method", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"58585", "state"=>nil}, "email"=>"flagrantOpponent@gmail.com", "name"=>"FOP", "phone"=>nil}, "card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>2, "exp_year"=>2024, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "generated_from"=>nil, "last4"=>"4242", "networks"=>{"available"=>["visa"], "preferred"=>nil}, "three_d_secure_usage"=>{"supported"=>true}, "wallet"=>nil}, "created"=>1599673558, "customer"=>"cus_HTfrdHaUJIXzTt", "livemode"=>false, "metadata"=>{}, "type"=>"card"}}}}
  [1m[35m (29.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: fad2f719-2995-4101-8211-ea747ae52690) to Async(default) with arguments: 355
Completed 200 OK in 157ms (Views: 4.5ms | ActiveRecord: 34.1ms | Allocations: 35360)


[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690] Performing ProcessEventsJob (Job ID: fad2f719-2995-4101-8211-ea747ae52690) from Async(default) enqueued at 2020-09-09T17:46:00Z with arguments: 355
  [1m[36mWebhookEvent Load (5.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXMpHiibShxDkjkPU0BCtE"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.0ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXMpHiibShxDkjkPU0BCtE"], ["data", "{\"id\":\"evt_1HPXMpHiibShxDkjkPU0BCtE\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599673558,\"data\":{\"object\":{\"id\":\"pm_1HPXMoHiibShxDkjSCQag0Sh\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"58585\",\"state\":null},\"email\":\"flagrantOpponent@gmail.com\",\"name\":\"FOP\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":2,\"exp_year\":2024,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599673558,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_57icoGVTRzhYVq\",\"idempotency_key\":null},\"type\":\"payment_method.attached\",\"webhook_event\":{\"id\":\"evt_1HPXMpHiibShxDkjkPU0BCtE\",\"data\":{\"object\":{\"id\":\"pm_1HPXMoHiibShxDkjSCQag0Sh\",\"object\":\"payment_method\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"58585\",\"state\":null},\"email\":\"flagrantOpponent@gmail.com\",\"name\":\"FOP\",\"phone\":null},\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":2,\"exp_year\":2024,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"generated_from\":null,\"last4\":\"4242\",\"networks\":{\"available\":[\"visa\"],\"preferred\":null},\"three_d_secure_usage\":{\"supported\":true},\"wallet\":null},\"created\":1599673558,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"livemode\":false,\"metadata\":{},\"type\":\"card\"}}}}"], ["created_at", "2020-09-09 17:46:00.490119"], ["updated_at", "2020-09-09 17:46:00.490119"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 13:46:00 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXMpHiibShxDkjvRQ1yFJ3", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599673559, "data"=>{"object"=>{"id"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "object"=>"payment_intent", "amount"=>1200, "amount_capturable"=>0, "amount_received"=>1200, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPXMpHiibShxDkjmFe5ibve", "object"=>"charge", "amount"=>1200, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPXMpHiibShxDkjYH3Z1NBS", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"58585", "state"=>nil}, "email"=>"flagrantOpponent@gmail.com", "name"=>"FOP", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599673559, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>21, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "payment_method"=>"pm_1HPXMoHiibShxDkjSCQag0Sh", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>2, "exp_year"=>2024, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"flagrantOpponent@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPXMpHiibShxDkjmFe5ibve/rcpt_HzWP81X1r9OCT5sXgFkcOCL4TRy6N99", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPXMpHiibShxDkjmFe5ibve/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPXLoHiibShxDkj14J5RlN7"}, "client_secret"=>"pi_1HPXLoHiibShxDkj14J5RlN7_secret_JgarP0PSkB7x6N0pHkqjyMaRX", "confirmation_method"=>"automatic", "created"=>1599673496, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HPXMoHiibShxDkjSCQag0Sh", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"flagrantOpponent@gmail.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_57icoGVTRzhYVq", "idempotency_key"=>nil}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXMpHiibShxDkjvRQ1yFJ3", "data"=>{"object"=>{"id"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "object"=>"payment_intent", "amount"=>1200, "amount_capturable"=>0, "amount_received"=>1200, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPXMpHiibShxDkjmFe5ibve", "object"=>"charge", "amount"=>1200, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPXMpHiibShxDkjYH3Z1NBS", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"58585", "state"=>nil}, "email"=>"flagrantOpponent@gmail.com", "name"=>"FOP", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599673559, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>nil, "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>21, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "payment_method"=>"pm_1HPXMoHiibShxDkjSCQag0Sh", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>"pass"}, "country"=>"US", "exp_month"=>2, "exp_year"=>2024, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"flagrantOpponent@gmail.com", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPXMpHiibShxDkjmFe5ibve/rcpt_HzWP81X1r9OCT5sXgFkcOCL4TRy6N99", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPXMpHiibShxDkjmFe5ibve/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPXLoHiibShxDkj14J5RlN7"}, "client_secret"=>"pi_1HPXLoHiibShxDkj14J5RlN7_secret_JgarP0PSkB7x6N0pHkqjyMaRX", "confirmation_method"=>"automatic", "created"=>1599673496, "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1HPXMoHiibShxDkjSCQag0Sh", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>"flagrantOpponent@gmail.com", "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXMpHiibShxDkjvRQ1yFJ3"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (40.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 3342f546-84d6-482b-bc7a-01e4d480ab60) to Async(default) with arguments: 356
Completed 200 OK in 212ms (Views: 0.8ms | ActiveRecord: 46.9ms | Allocations: 66765)


[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   [1m[36mWebhookEvent Load (17.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 355], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   â†³ app/jobs/process_events_job.rb:5:in `perform'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 13:46:00 -0400
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60] Performing ProcessEventsJob (Job ID: 3342f546-84d6-482b-bc7a-01e4d480ab60) from Async(default) enqueued at 2020-09-09T17:46:00Z with arguments: 356
  [1m[36mWebhookEvent Create (6.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXMpHiibShxDkjvRQ1yFJ3"], ["data", "{\"id\":\"evt_1HPXMpHiibShxDkjvRQ1yFJ3\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599673559,\"data\":{\"object\":{\"id\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"object\":\"payment_intent\",\"amount\":1200,\"amount_capturable\":0,\"amount_received\":1200,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPXMpHiibShxDkjmFe5ibve\",\"object\":\"charge\",\"amount\":1200,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPXMpHiibShxDkjYH3Z1NBS\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"58585\",\"state\":null},\"email\":\"flagrantOpponent@gmail.com\",\"name\":\"FOP\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599673559,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":21,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"payment_method\":\"pm_1HPXMoHiibShxDkjSCQag0Sh\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":2,\"exp_year\":2024,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"flagrantOpponent@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPXMpHiibShxDkjmFe5ibve/rcpt_HzWP81X1r9OCT5sXgFkcOCL4TRy6N99\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPXMpHiibShxDkjmFe5ibve/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPXLoHiibShxDkj14J5RlN7\"},\"client_secret\":\"pi_1HPXLoHiibShxDkj14J5RlN7_secret_JgarP0PSkB7x6N0pHkqjyMaRX\",\"confirmation_method\":\"automatic\",\"created\":1599673496,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HPXMoHiibShxDkjSCQag0Sh\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"flagrantOpponent@gmail.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_57icoGVTRzhYVq\",\"idempotency_key\":null},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPXMpHiibShxDkjvRQ1yFJ3\",\"data\":{\"object\":{\"id\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"object\":\"payment_intent\",\"amount\":1200,\"amount_capturable\":0,\"amount_received\":1200,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPXMpHiibShxDkjmFe5ibve\",\"object\":\"charge\",\"amount\":1200,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPXMpHiibShxDkjYH3Z1NBS\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"58585\",\"state\":null},\"email\":\"flagrantOpponent@gmail.com\",\"name\":\"FOP\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599673559,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":null,\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":21,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"payment_method\":\"pm_1HPXMoHiibShxDkjSCQag0Sh\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":\"pass\"},\"country\":\"US\",\"exp_month\":2,\"exp_year\":2024,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"flagrantOpponent@gmail.com\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPXMpHiibShxDkjmFe5ibve/rcpt_HzWP81X1r9OCT5sXgFkcOCL4TRy6N99\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPXMpHiibShxDkjmFe5ibve/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPXLoHiibShxDkj14J5RlN7\"},\"client_secret\":\"pi_1HPXLoHiibShxDkj14J5RlN7_secret_JgarP0PSkB7x6N0pHkqjyMaRX\",\"confirmation_method\":\"automatic\",\"created\":1599673496,\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1HPXMoHiibShxDkjSCQag0Sh\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":\"flagrantOpponent@gmail.com\",\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 17:46:00.547655"], ["updated_at", "2020-09-09 17:46:00.547655"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   [1m[36mWebhookEvent Update (15.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 17:46:00.585392"], ["id", 355]]
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXMqHiibShxDkjLjJsCwRT", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599673560, "data"=>{"object"=>{"id"=>"cs_test_2hsdPIDa5zsoSqHexHznpSv4E8Xg48t82CE1u8GGgNJC6ataMnxrHYXG", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>1200, "amount_total"=>1200, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"265", "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "customer_email"=>nil, "display_items"=>[{"amount"=>1200, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"checkout.session.completed", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXMqHiibShxDkjLjJsCwRT", "data"=>{"object"=>{"id"=>"cs_test_2hsdPIDa5zsoSqHexHznpSv4E8Xg48t82CE1u8GGgNJC6ataMnxrHYXG", "object"=>"checkout.session", "allow_promotion_codes"=>nil, "amount_subtotal"=>1200, "amount_total"=>1200, "billing_address_collection"=>nil, "cancel_url"=>"http://localhost:5000/checkout/cancel", "client_reference_id"=>"265", "currency"=>"usd", "customer"=>"cus_HTfrdHaUJIXzTt", "customer_email"=>nil, "display_items"=>[{"amount"=>1200, "currency"=>"usd", "custom"=>{"description"=>"Donation to St. Paul's", "images"=>nil, "name"=>"St. Paul's Episcopal Church"}, "quantity"=>1, "type"=>"custom"}], "livemode"=>false, "locale"=>nil, "metadata"=>{}, "mode"=>"payment", "payment_intent"=>"pi_1HPXLoHiibShxDkj14J5RlN7", "payment_method_types"=>["card"], "payment_status"=>"paid", "setup_intent"=>nil, "shipping"=>nil, "shipping_address_collection"=>nil, "submit_type"=>nil, "subscription"=>nil, "success_url"=>"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}", "total_details"=>{"amount_discount"=>0, "amount_tax"=>0}}}}}
  [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXMqHiibShxDkjLjJsCwRT"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   [1m[35m (25.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (31.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6) to Async(default) with arguments: 357
  [1m[36mWebhookEvent Create (8.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXMqHiibShxDkjLjJsCwRT"], ["data", "{\"id\":\"evt_1HPXMqHiibShxDkjLjJsCwRT\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599673560,\"data\":{\"object\":{\"id\":\"cs_test_2hsdPIDa5zsoSqHexHznpSv4E8Xg48t82CE1u8GGgNJC6ataMnxrHYXG\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":1200,\"amount_total\":1200,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"265\",\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_email\":null,\"display_items\":[{\"amount\":1200,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"checkout.session.completed\",\"webhook_event\":{\"id\":\"evt_1HPXMqHiibShxDkjLjJsCwRT\",\"data\":{\"object\":{\"id\":\"cs_test_2hsdPIDa5zsoSqHexHznpSv4E8Xg48t82CE1u8GGgNJC6ataMnxrHYXG\",\"object\":\"checkout.session\",\"allow_promotion_codes\":null,\"amount_subtotal\":1200,\"amount_total\":1200,\"billing_address_collection\":null,\"cancel_url\":\"http://localhost:5000/checkout/cancel\",\"client_reference_id\":\"265\",\"currency\":\"usd\",\"customer\":\"cus_HTfrdHaUJIXzTt\",\"customer_email\":null,\"display_items\":[{\"amount\":1200,\"currency\":\"usd\",\"custom\":{\"description\":\"Donation to St. Paul's\",\"images\":null,\"name\":\"St. Paul's Episcopal Church\"},\"quantity\":1,\"type\":\"custom\"}],\"livemode\":false,\"locale\":null,\"metadata\":{},\"mode\":\"payment\",\"payment_intent\":\"pi_1HPXLoHiibShxDkj14J5RlN7\",\"payment_method_types\":[\"card\"],\"payment_status\":\"paid\",\"setup_intent\":null,\"shipping\":null,\"shipping_address_collection\":null,\"submit_type\":null,\"subscription\":null,\"success_url\":\"http://localhost:5000/checkout/success?session_id{CHECKOUT_SESSION_ID}\",\"total_details\":{\"amount_discount\":0,\"amount_tax\":0}}}}}"], ["created_at", "2020-09-09 17:46:00.629500"], ["updated_at", "2020-09-09 17:46:00.629500"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 13:46:00 -0400
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   â†³ app/jobs/process_events_job.rb:13:in `perform'
Completed 200 OK in 143ms (Views: 1.8ms | ActiveRecord: 39.5ms | Allocations: 85569)


[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6] Performing ProcessEventsJob (Job ID: 7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6) from Async(default) enqueued at 2020-09-09T17:46:00Z with arguments: 357
  [1m[35m (19.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: fb04dfa3-bf69-4792-83ec-5ba621f4fdb8) to Async(default) with arguments: 358
Completed 200 OK in 89ms (Views: 1.3ms | ActiveRecord: 29.2ms | Allocations: 58431)


[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   [1m[36mWebhookEvent Update (16.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 17:46:00.648142"], ["id", 355]]
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   [1m[36mWebhookEvent Load (6.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 356], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8] Performing ProcessEventsJob (Job ID: fb04dfa3-bf69-4792-83ec-5ba621f4fdb8) from Async(default) enqueued at 2020-09-09T17:46:00Z with arguments: 358
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [fad2f719-2995-4101-8211-ea747ae52690] Performed ProcessEventsJob (Job ID: fad2f719-2995-4101-8211-ea747ae52690) from Async(default) in 269.64ms
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   [1m[35m (5.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 17:46:00.729830"], ["id", 356]]
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   [1m[36mWebhookEvent Load (10.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 357], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   [1m[35m (22.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXMqHiibShxDkjxwquYJfb", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599673560, "data"=>{"object"=>{"id"=>"cus_HTfrdHaUJIXzTt", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1592328244, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"flagrantOpponent@gmail.com", "invoice_prefix"=>"86A87608", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>53, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HXpc286cBy6bD7", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1593287060, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1593287060, "current_period_end"=>1599939860, "current_period_start"=>1599335060, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HXpcOIEVnxhBGF", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1593287061, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7"}, "latest_invoice"=>"in_1HO7KFHiibShxDkjKiOYQZKi", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>23, "schedule"=>nil, "start_date"=>1593287060, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTmSCB4f6ppubB", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592352779, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592352779, "current_period_end"=>1600301579, "current_period_start"=>1592352779, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuotiHiibShxDkjohKEdTRG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTmSchi1I6bckD", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592352780, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>2500, "subscription"=>"sub_HTmSCB4f6ppubB", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB"}, "latest_invoice"=>"in_1GuotjHiibShxDkjmvUEzmzP", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>2500, "schedule"=>nil, "start_date"=>1592352779, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTm9P21Nj9JhLU", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592351628, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592351628, "current_period_end"=>1600214028, "current_period_start"=>1599609228, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTm9LhZZrXIU4u", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592351629, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU"}, "latest_invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1592351628, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTiAInwER448NQ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592336800, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592336800, "current_period_end"=>1600199200, "current_period_start"=>1599594400, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukjzHiibShxDkjhmgK5cHQ", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTiAFJ65OaXbLb", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592336801, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>11, "subscription"=>"sub_HTiAInwER448NQ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTiAInwER448NQ"}, "latest_invoice"=>"in_1HPCnQHiibShxDkjQVKebOVI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>11, "schedule"=>nil, "start_date"=>1592336800, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HThol5LxxWW2T8", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592335489, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592335489, "current_period_end"=>1600197889, "current_period_start"=>1599593089, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukOqHiibShxDkjkZit1pEu", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HThosUD0Aw71cE", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592335490, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>77, "subscription"=>"sub_HThol5LxxWW2T8", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8"}, "latest_invoice"=>"in_1HPCRiHiibShxDkjQMoC5qZE", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>77, "schedule"=>nil, "start_date"=>1592335489, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTgCNofRQ2SxCZ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592329479, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592329479, "current_period_end"=>1600278279, "current_period_start"=>1592329479, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuiptHiibShxDkjduc2lzn6", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTgCco1ui7JKVe", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592329479, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>6000, "subscription"=>"sub_HTgCNofRQ2SxCZ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ"}, "latest_invoice"=>"in_1GuipvHiibShxDkjRNwJ0mnb", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>6000, "schedule"=>nil, "start_date"=>1592329479, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>6, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids"}}, "previous_attributes"=>{"email"=>"frankyB@gmail.com"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXMqHiibShxDkjxwquYJfb", "data"=>{"object"=>{"id"=>"cus_HTfrdHaUJIXzTt", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1592328244, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"flagrantOpponent@gmail.com", "invoice_prefix"=>"86A87608", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>53, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HXpc286cBy6bD7", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1593287060, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1593287060, "current_period_end"=>1599939860, "current_period_start"=>1599335060, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GyjwmHiibShxDkjryLluWnG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HXpcOIEVnxhBGF", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1593287061, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>23, "subscription"=>"sub_HXpc286cBy6bD7", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7"}, "latest_invoice"=>"in_1HO7KFHiibShxDkjKiOYQZKi", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>23, "schedule"=>nil, "start_date"=>1593287060, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTmSCB4f6ppubB", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592352779, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592352779, "current_period_end"=>1600301579, "current_period_start"=>1592352779, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuotiHiibShxDkjohKEdTRG", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTmSchi1I6bckD", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592352780, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>2500, "subscription"=>"sub_HTmSCB4f6ppubB", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB"}, "latest_invoice"=>"in_1GuotjHiibShxDkjmvUEzmzP", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>2500, "schedule"=>nil, "start_date"=>1592352779, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTm9P21Nj9JhLU", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592351628, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592351628, "current_period_end"=>1600214028, "current_period_start"=>1599609228, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1Guob9HiibShxDkjjcP4jNIg", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTm9LhZZrXIU4u", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592351629, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HTm9P21Nj9JhLU", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU"}, "latest_invoice"=>"in_1HPGdEHiibShxDkjFisdQeFI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1592351628, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTiAInwER448NQ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592336800, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592336800, "current_period_end"=>1600199200, "current_period_start"=>1599594400, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukjzHiibShxDkjhmgK5cHQ", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTiAFJ65OaXbLb", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592336801, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>11, "subscription"=>"sub_HTiAInwER448NQ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTiAInwER448NQ"}, "latest_invoice"=>"in_1HPCnQHiibShxDkjQVKebOVI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>11, "schedule"=>nil, "start_date"=>1592336800, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HThol5LxxWW2T8", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592335489, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592335489, "current_period_end"=>1600197889, "current_period_start"=>1599593089, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GukOqHiibShxDkjkZit1pEu", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HThosUD0Aw71cE", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592335490, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>77, "subscription"=>"sub_HThol5LxxWW2T8", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8"}, "latest_invoice"=>"in_1HPCRiHiibShxDkjQMoC5qZE", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>77, "schedule"=>nil, "start_date"=>1592335489, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, {"id"=>"sub_HTgCNofRQ2SxCZ", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1592329479, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1592329479, "current_period_end"=>1600278279, "current_period_start"=>1592329479, "customer"=>"cus_HTfrdHaUJIXzTt", "days_until_due"=>nil, "default_payment_method"=>"pm_1GuiptHiibShxDkjduc2lzn6", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HTgCco1ui7JKVe", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1592329479, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>3, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>6000, "subscription"=>"sub_HTgCNofRQ2SxCZ", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ"}, "latest_invoice"=>"in_1GuipvHiibShxDkjRNwJ0mnb", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxxRCehGf5Pog", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474674, "currency"=>"usd", "interval"=>"month", "interval_count"=>3, "livemode"=>false, "metadata"=>{}, "nickname"=>"Quarterly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>6000, "schedule"=>nil, "start_date"=>1592329479, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>6, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids"}}, "previous_attributes"=>{"email"=>"frankyB@gmail.com"}}}}
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   [1m[36mWebhookEvent Update (38.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 17:46:00.748212"], ["id", 357]]
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[36mWebhookEvent Load (16.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 358], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   [1m[35m (9.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   [1m[35m (5.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[35m (14.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   [1m[36mWebhookEvent Update (16.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 17:46:00.772979"], ["id", 356]]
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[36mWebhookEvent Load (16.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXMqHiibShxDkjxwquYJfb"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   [1m[36mWebhookEvent Update (32.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 17:46:00.827056"], ["id", 357]]
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[36mWebhookEvent Update (3.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 17:46:00.812820"], ["id", 358]]
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   [1m[35m (28.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3342f546-84d6-482b-bc7a-01e4d480ab60] Performed ProcessEventsJob (Job ID: 3342f546-84d6-482b-bc7a-01e4d480ab60) from Async(default) in 298.34ms
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[35m (13.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   [1m[35m (15.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6] Performed ProcessEventsJob (Job ID: 7cd69ac5-7dbe-4f52-8c5d-738c7b0097d6) from Async(default) in 196.39ms
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_HTfrdHaUJIXzTt"], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/services/events/stripe_handler.rb:12:in `process'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[36mDonation Load (0.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 265], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/services/events/stripe_handler.rb:18:in `process'
  [1m[36mWebhookEvent Create (13.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXMqHiibShxDkjxwquYJfb"], ["data", "{\"id\":\"evt_1HPXMqHiibShxDkjxwquYJfb\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599673560,\"data\":{\"object\":{\"id\":\"cus_HTfrdHaUJIXzTt\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1592328244,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"flagrantOpponent@gmail.com\",\"invoice_prefix\":\"86A87608\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":53,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HXpc286cBy6bD7\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1593287060,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1593287060,\"current_period_end\":1599939860,\"current_period_start\":1599335060,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HXpcOIEVnxhBGF\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1593287061,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7\"},\"latest_invoice\":\"in_1HO7KFHiibShxDkjKiOYQZKi\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":23,\"schedule\":null,\"start_date\":1593287060,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTmSCB4f6ppubB\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592352779,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592352779,\"current_period_end\":1600301579,\"current_period_start\":1592352779,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuotiHiibShxDkjohKEdTRG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTmSchi1I6bckD\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592352780,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":2500,\"subscription\":\"sub_HTmSCB4f6ppubB\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB\"},\"latest_invoice\":\"in_1GuotjHiibShxDkjmvUEzmzP\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":2500,\"schedule\":null,\"start_date\":1592352779,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTm9P21Nj9JhLU\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592351628,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592351628,\"current_period_end\":1600214028,\"current_period_start\":1599609228,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTm9LhZZrXIU4u\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592351629,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU\"},\"latest_invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1592351628,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTiAInwER448NQ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592336800,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592336800,\"current_period_end\":1600199200,\"current_period_start\":1599594400,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukjzHiibShxDkjhmgK5cHQ\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTiAFJ65OaXbLb\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592336801,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":11,\"subscription\":\"sub_HTiAInwER448NQ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTiAInwER448NQ\"},\"latest_invoice\":\"in_1HPCnQHiibShxDkjQVKebOVI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":11,\"schedule\":null,\"start_date\":1592336800,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HThol5LxxWW2T8\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592335489,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592335489,\"current_period_end\":1600197889,\"current_period_start\":1599593089,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukOqHiibShxDkjkZit1pEu\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HThosUD0Aw71cE\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592335490,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":77,\"subscription\":\"sub_HThol5LxxWW2T8\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8\"},\"latest_invoice\":\"in_1HPCRiHiibShxDkjQMoC5qZE\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":77,\"schedule\":null,\"start_date\":1592335489,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTgCNofRQ2SxCZ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592329479,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592329479,\"current_period_end\":1600278279,\"current_period_start\":1592329479,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuiptHiibShxDkjduc2lzn6\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTgCco1ui7JKVe\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592329479,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":6000,\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ\"},\"latest_invoice\":\"in_1GuipvHiibShxDkjRNwJ0mnb\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":6000,\"schedule\":null,\"start_date\":1592329479,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":6,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids\"}},\"previous_attributes\":{\"email\":\"frankyB@gmail.com\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.updated\",\"webhook_event\":{\"id\":\"evt_1HPXMqHiibShxDkjxwquYJfb\",\"data\":{\"object\":{\"id\":\"cus_HTfrdHaUJIXzTt\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1592328244,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"flagrantOpponent@gmail.com\",\"invoice_prefix\":\"86A87608\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":53,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HXpc286cBy6bD7\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1593287060,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1593287060,\"current_period_end\":1599939860,\"current_period_start\":1599335060,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GyjwmHiibShxDkjryLluWnG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HXpcOIEVnxhBGF\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1593287061,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":23,\"subscription\":\"sub_HXpc286cBy6bD7\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HXpc286cBy6bD7\"},\"latest_invoice\":\"in_1HO7KFHiibShxDkjKiOYQZKi\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":23,\"schedule\":null,\"start_date\":1593287060,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTmSCB4f6ppubB\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592352779,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592352779,\"current_period_end\":1600301579,\"current_period_start\":1592352779,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuotiHiibShxDkjohKEdTRG\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTmSchi1I6bckD\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592352780,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":2500,\"subscription\":\"sub_HTmSCB4f6ppubB\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTmSCB4f6ppubB\"},\"latest_invoice\":\"in_1GuotjHiibShxDkjmvUEzmzP\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":2500,\"schedule\":null,\"start_date\":1592352779,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTm9P21Nj9JhLU\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592351628,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592351628,\"current_period_end\":1600214028,\"current_period_start\":1599609228,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Guob9HiibShxDkjjcP4jNIg\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTm9LhZZrXIU4u\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592351629,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HTm9P21Nj9JhLU\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTm9P21Nj9JhLU\"},\"latest_invoice\":\"in_1HPGdEHiibShxDkjFisdQeFI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1592351628,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTiAInwER448NQ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592336800,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592336800,\"current_period_end\":1600199200,\"current_period_start\":1599594400,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukjzHiibShxDkjhmgK5cHQ\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTiAFJ65OaXbLb\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592336801,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":11,\"subscription\":\"sub_HTiAInwER448NQ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTiAInwER448NQ\"},\"latest_invoice\":\"in_1HPCnQHiibShxDkjQVKebOVI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":11,\"schedule\":null,\"start_date\":1592336800,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HThol5LxxWW2T8\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592335489,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592335489,\"current_period_end\":1600197889,\"current_period_start\":1599593089,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GukOqHiibShxDkjkZit1pEu\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HThosUD0Aw71cE\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592335490,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":77,\"subscription\":\"sub_HThol5LxxWW2T8\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HThol5LxxWW2T8\"},\"latest_invoice\":\"in_1HPCRiHiibShxDkjQMoC5qZE\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":77,\"schedule\":null,\"start_date\":1592335489,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},{\"id\":\"sub_HTgCNofRQ2SxCZ\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1592329479,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1592329479,\"current_period_end\":1600278279,\"current_period_start\":1592329479,\"customer\":\"cus_HTfrdHaUJIXzTt\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GuiptHiibShxDkjduc2lzn6\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HTgCco1ui7JKVe\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1592329479,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":3,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":6000,\"subscription\":\"sub_HTgCNofRQ2SxCZ\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HTgCNofRQ2SxCZ\"},\"latest_invoice\":\"in_1GuipvHiibShxDkjRNwJ0mnb\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxxRCehGf5Pog\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474674,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":3,\"livemode\":false,\"metadata\":{},\"nickname\":\"Quarterly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":6000,\"schedule\":null,\"start_date\":1592329479,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":6,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HTfrdHaUJIXzTt/tax_ids\"}},\"previous_attributes\":{\"email\":\"frankyB@gmail.com\"}}}}"], ["created_at", "2020-09-09 17:46:00.851207"], ["updated_at", "2020-09-09 17:46:00.851207"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[35m (4.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/services/events/stripe_handler.rb:19:in `process'
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 0bdea153-44a0-4d72-94cb-bf1120ab4d08) to Async(default) with arguments: 359
Completed 200 OK in 235ms (Views: 11.8ms | ActiveRecord: 44.8ms | Allocations: 226417)


[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[36mDonation Update (69.6ms)[0m  [1m[33mUPDATE "donations" SET "stripe_id" = $1, "status" = $2, "updated_at" = $3 WHERE "donations"."id" = $4[0m  [["stripe_id", "pi_1HPXLoHiibShxDkj14J5RlN7"], ["status", "1"], ["updated_at", "2020-09-09 17:46:00.948558"], ["id", 265]]
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08] Performing ProcessEventsJob (Job ID: 0bdea153-44a0-4d72-94cb-bf1120ab4d08) from Async(default) enqueued at 2020-09-09T17:46:00Z with arguments: 359
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   [1m[36mWebhookEvent Load (1.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 359], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 17:46:01.076595"], ["id", 359]]
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[35m (25.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/services/events/stripe_handler.rb:19:in `process'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[36mWebhookEvent Update (47.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 17:46:01.099251"], ["id", 358]]
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 17:46:01.147722"], ["id", 359]]
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   [1m[35m (18.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [fb04dfa3-bf69-4792-83ec-5ba621f4fdb8] Performed ProcessEventsJob (Job ID: fb04dfa3-bf69-4792-83ec-5ba621f4fdb8) from Async(default) in 443.88ms
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [0bdea153-44a0-4d72-94cb-bf1120ab4d08] Performed ProcessEventsJob (Job ID: 0bdea153-44a0-4d72-94cb-bf1120ab4d08) from Async(default) in 108.26ms
Started GET "/checkout/success?session_idcs_test_2hsdPIDa5zsoSqHexHznpSv4E8Xg48t82CE1u8GGgNJC6ataMnxrHYXG" for 127.0.0.1 at 2020-09-09 13:46:02 -0400
Processing by CheckoutController#success as HTML
  Parameters: {"session_idcs_test_2hsdPIDa5zsoSqHexHznpSv4E8Xg48t82CE1u8GGgNJC6ataMnxrHYXG"=>nil}
  Rendering checkout/success.html.erb within layouts/application
  Rendered checkout/success.html.erb within layouts/application (Duration: 0.2ms | Allocations: 5)
  Rendered layouts/_header.html.erb (Duration: 9.9ms | Allocations: 1273)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (1.1ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 27.8ms | Allocations: 4738)
  Rendered layouts/_footer.html.erb (Duration: 3.0ms | Allocations: 364)
Completed 200 OK in 91ms (Views: 80.7ms | ActiveRecord: 2.4ms | Allocations: 13868)


  [1m[36mWebhookEvent Load (2.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (1.8ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (1.0ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 265], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7411833289957498605)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(7411833289957498605)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 14:21:28 -0400
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 14:21:28 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXuxHiibShxDkjIppIOEfu", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599675675, "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "billing_reason"=>"subscription_cycle", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>nil, "footer"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599679275, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXuxHiibShxDkjIppIOEfu", "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "billing_reason"=>"subscription_cycle", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>nil, "footer"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599679275, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXuxHiibShxDkjFYO48XIh", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599675675, "data"=>{"object"=>{"id"=>"sub_HOoq6bsD5aQqTR", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591208441, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591208441, "current_period_end"=>1600280441, "current_period_start"=>1599675641, "customer"=>"cus_HOopcPgPtvmtju", "days_until_due"=>nil, "default_payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HOoqeTday04vCY", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591208441, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HOoq6bsD5aQqTR"}, "latest_invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591208441, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, "previous_attributes"=>{"current_period_end"=>1599675641, "current_period_start"=>1599070841, "latest_invoice"=>"in_1HN0a1HiibShxDkj4CPCKfHj"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.subscription.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXuxHiibShxDkjFYO48XIh", "data"=>{"object"=>{"id"=>"sub_HOoq6bsD5aQqTR", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591208441, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591208441, "current_period_end"=>1600280441, "current_period_start"=>1599675641, "customer"=>"cus_HOopcPgPtvmtju", "days_until_due"=>nil, "default_payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HOoqeTday04vCY", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591208441, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HOoq6bsD5aQqTR"}, "latest_invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591208441, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, "previous_attributes"=>{"current_period_end"=>1599675641, "current_period_start"=>1599070841, "latest_invoice"=>"in_1HN0a1HiibShxDkj4CPCKfHj"}}}}
  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXuxHiibShxDkjFYO48XIh"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Load (2.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXuxHiibShxDkjIppIOEfu"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (6.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (3.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (3.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXuxHiibShxDkjFYO48XIh"], ["data", "{\"id\":\"evt_1HPXuxHiibShxDkjFYO48XIh\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599675675,\"data\":{\"object\":{\"id\":\"sub_HOoq6bsD5aQqTR\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591208441,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591208441,\"current_period_end\":1600280441,\"current_period_start\":1599675641,\"customer\":\"cus_HOopcPgPtvmtju\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HOoqeTday04vCY\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591208441,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HOoq6bsD5aQqTR\"},\"latest_invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591208441,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},\"previous_attributes\":{\"current_period_end\":1599675641,\"current_period_start\":1599070841,\"latest_invoice\":\"in_1HN0a1HiibShxDkj4CPCKfHj\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.subscription.updated\",\"webhook_event\":{\"id\":\"evt_1HPXuxHiibShxDkjFYO48XIh\",\"data\":{\"object\":{\"id\":\"sub_HOoq6bsD5aQqTR\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591208441,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591208441,\"current_period_end\":1600280441,\"current_period_start\":1599675641,\"customer\":\"cus_HOopcPgPtvmtju\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HOoqeTday04vCY\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591208441,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HOoq6bsD5aQqTR\"},\"latest_invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591208441,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},\"previous_attributes\":{\"current_period_end\":1599675641,\"current_period_start\":1599070841,\"latest_invoice\":\"in_1HN0a1HiibShxDkj4CPCKfHj\"}}}}"], ["created_at", "2020-09-09 18:21:28.778355"], ["updated_at", "2020-09-09 18:21:28.778355"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.0ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXuxHiibShxDkjIppIOEfu"], ["data", "{\"id\":\"evt_1HPXuxHiibShxDkjIppIOEfu\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599675675,\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"billing_reason\":\"subscription_cycle\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":null,\"footer\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599679275,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.created\",\"webhook_event\":{\"id\":\"evt_1HPXuxHiibShxDkjIppIOEfu\",\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"billing_reason\":\"subscription_cycle\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":null,\"footer\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599679275,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-09 18:21:28.784531"], ["updated_at", "2020-09-09 18:21:28.784531"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (23.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (36.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 61eee0dc-96fc-477d-994d-120dd195b17d) to Async(default) with arguments: 361
Completed 200 OK in 96ms (Views: 1.4ms | ActiveRecord: 34.4ms | Allocations: 73842)


[ActiveJob] Enqueued ProcessEventsJob (Job ID: 3450cdd1-22e7-4571-b803-f50bbf284688) to Async(default) with arguments: 360
Completed 200 OK in 117ms (Views: 1.8ms | ActiveRecord: 47.1ms | Allocations: 97984)


[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d] Performing ProcessEventsJob (Job ID: 61eee0dc-96fc-477d-994d-120dd195b17d) from Async(default) enqueued at 2020-09-09T18:21:28Z with arguments: 361
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 14:21:29 -0400
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688] Performing ProcessEventsJob (Job ID: 3450cdd1-22e7-4571-b803-f50bbf284688) from Async(default) enqueued at 2020-09-09T18:21:28Z with arguments: 360
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPXv3HiibShxDkjwYZCpInE", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599675681, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600280441, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_e7e1ba9f521367", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600885241, "start"=>1600280441}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HOopcPgPtvmtju&subscription=sub_HOoq6bsD5aQqTR"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600284041, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600280441, "period_start"=>1599675641, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPXv3HiibShxDkjwYZCpInE", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600280441, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_e7e1ba9f521367", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600885241, "start"=>1600280441}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HOopcPgPtvmtju&subscription=sub_HOoq6bsD5aQqTR"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600284041, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600280441, "period_start"=>1599675641, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   [1m[36mWebhookEvent Load (2.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 361], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   [1m[36mWebhookEvent Update (1.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 18:21:29.166127"], ["id", 361]]
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (8.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPXv3HiibShxDkjwYZCpInE"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 360], ["LIMIT", 1]]
  [1m[36mWebhookEvent Create (1.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPXv3HiibShxDkjwYZCpInE"], ["data", "{\"id\":\"evt_1HPXv3HiibShxDkjwYZCpInE\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599675681,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600280441,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_e7e1ba9f521367\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600885241,\"start\":1600280441},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HOopcPgPtvmtju\\u0026subscription=sub_HOoq6bsD5aQqTR\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600284041,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600280441,\"period_start\":1599675641,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HPXv3HiibShxDkjwYZCpInE\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600280441,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_e7e1ba9f521367\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600885241,\"start\":1600280441},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HOopcPgPtvmtju\\u0026subscription=sub_HOoq6bsD5aQqTR\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600284041,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600280441,\"period_start\":1599675641,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-09 18:21:29.189316"], ["updated_at", "2020-09-09 18:21:29.189316"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   [1m[35m (34.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   [1m[36mWebhookEvent Update (7.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 18:21:29.215570"], ["id", 360]]
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[35m (13.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63) to Async(default) with arguments: 362
Completed 200 OK in 104ms (Views: 1.5ms | ActiveRecord: 23.7ms | Allocations: 72731)


[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63] Performing ProcessEventsJob (Job ID: a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63) from Async(default) enqueued at 2020-09-09T18:21:29Z with arguments: 362
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   [1m[35m (50.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   [1m[36mWebhookEvent Update (21.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 18:21:29.225627"], ["id", 361]]
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   [1m[35m (8.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [61eee0dc-96fc-477d-994d-120dd195b17d] Performed ProcessEventsJob (Job ID: 61eee0dc-96fc-477d-994d-120dd195b17d) from Async(default) in 218.08ms
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   [1m[36mWebhookEvent Update (7.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 18:21:29.291652"], ["id", 360]]
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3450cdd1-22e7-4571-b803-f50bbf284688] Performed ProcessEventsJob (Job ID: 3450cdd1-22e7-4571-b803-f50bbf284688) from Async(default) in 226.28ms
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   [1m[36mWebhookEvent Load (0.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 362], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   [1m[36mWebhookEvent Update (4.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 18:21:29.338896"], ["id", 362]]
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   [1m[36mWebhookEvent Update (2.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 18:21:29.368382"], ["id", 362]]
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63] Performed ProcessEventsJob (Job ID: a2ad7ab6-76cc-4baf-a96f-f4c7f8f53a63) from Async(default) in 111.91ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 14:55:33 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYS9HiibShxDkjQIZBHkz7", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599677733, "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "billing_reason"=>"subscription_cycle", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>nil, "footer"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599681333, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYS9HiibShxDkjQIZBHkz7", "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "billing_reason"=>"subscription_cycle", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>nil, "footer"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599681333, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYS9HiibShxDkjQIZBHkz7"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYS9HiibShxDkjQIZBHkz7"], ["data", "{\"id\":\"evt_1HPYS9HiibShxDkjQIZBHkz7\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599677733,\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"billing_reason\":\"subscription_cycle\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":null,\"footer\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599681333,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.created\",\"webhook_event\":{\"id\":\"evt_1HPYS9HiibShxDkjQIZBHkz7\",\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"billing_reason\":\"subscription_cycle\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":null,\"footer\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599681333,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-09 18:55:33.899005"], ["updated_at", "2020-09-09 18:55:33.899005"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (25.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: f480b287-d766-4dbb-aa38-f43590b57dcc) to Async(default) with arguments: 363
Completed 200 OK in 139ms (Views: 2.2ms | ActiveRecord: 30.5ms | Allocations: 42012)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 14:55:34 -0400
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc] Performing ProcessEventsJob (Job ID: f480b287-d766-4dbb-aa38-f43590b57dcc) from Async(default) enqueued at 2020-09-09T18:55:33Z with arguments: 363
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   [1m[36mWebhookEvent Load (2.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 363], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   â†³ app/jobs/process_events_job.rb:5:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYS9HiibShxDkjQukkuuuR", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599677733, "data"=>{"object"=>{"id"=>"sub_HOpPYpNsYjqlwq", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591210523, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591210523, "current_period_end"=>1600282523, "current_period_start"=>1599677723, "customer"=>"cus_HOpOJmEk0fTWk1", "days_until_due"=>nil, "default_payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HOpPgs4mTPNBV1", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591210524, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HOpPYpNsYjqlwq"}, "latest_invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591210523, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, "previous_attributes"=>{"current_period_end"=>1599677723, "current_period_start"=>1599072923, "latest_invoice"=>"in_1HN19yHiibShxDkjPey6s1xM"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.subscription.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYS9HiibShxDkjQukkuuuR", "data"=>{"object"=>{"id"=>"sub_HOpPYpNsYjqlwq", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591210523, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591210523, "current_period_end"=>1600282523, "current_period_start"=>1599677723, "customer"=>"cus_HOpOJmEk0fTWk1", "days_until_due"=>nil, "default_payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HOpPgs4mTPNBV1", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591210524, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HOpPYpNsYjqlwq"}, "latest_invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591210523, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, "previous_attributes"=>{"current_period_end"=>1599677723, "current_period_start"=>1599072923, "latest_invoice"=>"in_1HN19yHiibShxDkjPey6s1xM"}}}}
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   [1m[36mWebhookEvent Update (0.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 18:55:34.046141"], ["id", 363]]
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYS9HiibShxDkjQukkuuuR"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   [1m[35m (8.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[36mWebhookEvent Create (1.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYS9HiibShxDkjQukkuuuR"], ["data", "{\"id\":\"evt_1HPYS9HiibShxDkjQukkuuuR\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599677733,\"data\":{\"object\":{\"id\":\"sub_HOpPYpNsYjqlwq\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591210523,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591210523,\"current_period_end\":1600282523,\"current_period_start\":1599677723,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HOpPgs4mTPNBV1\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591210524,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HOpPYpNsYjqlwq\"},\"latest_invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591210523,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},\"previous_attributes\":{\"current_period_end\":1599677723,\"current_period_start\":1599072923,\"latest_invoice\":\"in_1HN19yHiibShxDkjPey6s1xM\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.subscription.updated\",\"webhook_event\":{\"id\":\"evt_1HPYS9HiibShxDkjQukkuuuR\",\"data\":{\"object\":{\"id\":\"sub_HOpPYpNsYjqlwq\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591210523,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591210523,\"current_period_end\":1600282523,\"current_period_start\":1599677723,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HOpPgs4mTPNBV1\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591210524,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HOpPYpNsYjqlwq\"},\"latest_invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591210523,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},\"previous_attributes\":{\"current_period_end\":1599677723,\"current_period_start\":1599072923,\"latest_invoice\":\"in_1HN19yHiibShxDkjPey6s1xM\"}}}}"], ["created_at", "2020-09-09 18:55:34.066690"], ["updated_at", "2020-09-09 18:55:34.066690"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   [1m[36mWebhookEvent Update (3.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 18:55:34.079478"], ["id", 363]]
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 6bfbfe50-9957-4e0f-9442-421d10422ce4) to Async(default) with arguments: 364
Completed 200 OK in 76ms (Views: 1.6ms | ActiveRecord: 16.2ms | Allocations: 58428)


[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   [1m[35m (28.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [f480b287-d766-4dbb-aa38-f43590b57dcc] Performed ProcessEventsJob (Job ID: f480b287-d766-4dbb-aa38-f43590b57dcc) from Async(default) in 128.26ms
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4] Performing ProcessEventsJob (Job ID: 6bfbfe50-9957-4e0f-9442-421d10422ce4) from Async(default) enqueued at 2020-09-09T18:55:34Z with arguments: 364
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 364], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 18:55:34.146331"], ["id", 364]]
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 18:55:34.167001"], ["id", 364]]
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6bfbfe50-9957-4e0f-9442-421d10422ce4] Performed ProcessEventsJob (Job ID: 6bfbfe50-9957-4e0f-9442-421d10422ce4) from Async(default) in 40.83ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 14:56:10 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYSkHiibShxDkjfggvPi7t", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599677770, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600282523, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_07a0e533d9b57f", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600887323, "start"=>1600282523}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HOpOJmEk0fTWk1&subscription=sub_HOpPYpNsYjqlwq"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600286123, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600282523, "period_start"=>1599677723, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYSkHiibShxDkjfggvPi7t", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600282523, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_07a0e533d9b57f", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600887323, "start"=>1600282523}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HOpOJmEk0fTWk1&subscription=sub_HOpPYpNsYjqlwq"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600286123, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600282523, "period_start"=>1599677723, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (1.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYSkHiibShxDkjfggvPi7t"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (5.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.5ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYSkHiibShxDkjfggvPi7t"], ["data", "{\"id\":\"evt_1HPYSkHiibShxDkjfggvPi7t\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599677770,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600282523,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_07a0e533d9b57f\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600887323,\"start\":1600282523},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HOpOJmEk0fTWk1\\u0026subscription=sub_HOpPYpNsYjqlwq\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600286123,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600282523,\"period_start\":1599677723,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HPYSkHiibShxDkjfggvPi7t\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600282523,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_07a0e533d9b57f\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600887323,\"start\":1600282523},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HOpOJmEk0fTWk1\\u0026subscription=sub_HOpPYpNsYjqlwq\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600286123,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600282523,\"period_start\":1599677723,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-09 18:56:11.061887"], ["updated_at", "2020-09-09 18:56:11.061887"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (59.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 654be66b-870f-47b5-a33e-93c992ecfae1) to Async(default) with arguments: 365
Completed 200 OK in 201ms (Views: 3.2ms | ActiveRecord: 68.0ms | Allocations: 40790)


[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1] Performing ProcessEventsJob (Job ID: 654be66b-870f-47b5-a33e-93c992ecfae1) from Async(default) enqueued at 2020-09-09T18:56:11Z with arguments: 365
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 365], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 18:56:11.229912"], ["id", 365]]
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 18:56:11.255711"], ["id", 365]]
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [654be66b-870f-47b5-a33e-93c992ecfae1] Performed ProcessEventsJob (Job ID: 654be66b-870f-47b5-a33e-93c992ecfae1) from Async(default) in 53.72ms
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (1.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 16], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mPledge Load (0.7ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 11]]
  [1m[36mPledge Load (1.3ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:22:29 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYsCHiibShxDkjT9oIcz4i", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599679348, "data"=>{"object"=>{"id"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>8800, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPYsBHiibShxDkj4O4BAdlR", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34444", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"me", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599679347, "currency"=>"usd", "customer"=>"cus_HOopcPgPtvmtju", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>43, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>11, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPYsBHiibShxDkjJKThaZHU/rcpt_HzXy7OKbMDu7hx3jHDxuErpLXlAd7ng", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPYsBHiibShxDkjJKThaZHU/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPYsBHiibShxDkjvG2fQ4rz"}, "client_secret"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz_secret_89jRHGZlu42LOXAGVE2770Qj5", "confirmation_method"=>"automatic", "created"=>1599679347, "currency"=>"usd", "customer"=>"cus_HOopcPgPtvmtju", "description"=>"Subscription update", "invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HPXuxHiibShxDkjXnYybOSp-initial_attempt-e8f47d21e665f3931"}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYsCHiibShxDkjT9oIcz4i", "data"=>{"object"=>{"id"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>8800, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPYsBHiibShxDkj4O4BAdlR", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34444", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"me", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599679347, "currency"=>"usd", "customer"=>"cus_HOopcPgPtvmtju", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>43, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>11, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPYsBHiibShxDkjJKThaZHU/rcpt_HzXy7OKbMDu7hx3jHDxuErpLXlAd7ng", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPYsBHiibShxDkjJKThaZHU/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPYsBHiibShxDkjvG2fQ4rz"}, "client_secret"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz_secret_89jRHGZlu42LOXAGVE2770Qj5", "confirmation_method"=>"automatic", "created"=>1599679347, "currency"=>"usd", "customer"=>"cus_HOopcPgPtvmtju", "description"=>"Subscription update", "invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYsCHiibShxDkjT9oIcz4i"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYsCHiibShxDkjT9oIcz4i"], ["data", "{\"id\":\"evt_1HPYsCHiibShxDkjT9oIcz4i\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599679348,\"data\":{\"object\":{\"id\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":8800,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPYsBHiibShxDkj4O4BAdlR\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34444\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"me\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599679347,\"currency\":\"usd\",\"customer\":\"cus_HOopcPgPtvmtju\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":43,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":11,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPYsBHiibShxDkjJKThaZHU/rcpt_HzXy7OKbMDu7hx3jHDxuErpLXlAd7ng\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPYsBHiibShxDkjJKThaZHU/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPYsBHiibShxDkjvG2fQ4rz\"},\"client_secret\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz_secret_89jRHGZlu42LOXAGVE2770Qj5\",\"confirmation_method\":\"automatic\",\"created\":1599679347,\"currency\":\"usd\",\"customer\":\"cus_HOopcPgPtvmtju\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HPXuxHiibShxDkjXnYybOSp-initial_attempt-e8f47d21e665f3931\"},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPYsCHiibShxDkjT9oIcz4i\",\"data\":{\"object\":{\"id\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":8800,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPYsBHiibShxDkj4O4BAdlR\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34444\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"me\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599679347,\"currency\":\"usd\",\"customer\":\"cus_HOopcPgPtvmtju\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":43,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":11,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPYsBHiibShxDkjJKThaZHU/rcpt_HzXy7OKbMDu7hx3jHDxuErpLXlAd7ng\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPYsBHiibShxDkjJKThaZHU/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPYsBHiibShxDkjvG2fQ4rz\"},\"client_secret\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz_secret_89jRHGZlu42LOXAGVE2770Qj5\",\"confirmation_method\":\"automatic\",\"created\":1599679347,\"currency\":\"usd\",\"customer\":\"cus_HOopcPgPtvmtju\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 19:22:29.161855"], ["updated_at", "2020-09-09 19:22:29.161855"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (33.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 22e8d724-6565-4e01-983e-29831a46d24f) to Async(default) with arguments: 366
Completed 200 OK in 159ms (Views: 4.5ms | ActiveRecord: 39.5ms | Allocations: 42022)


[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f] Performing ProcessEventsJob (Job ID: 22e8d724-6565-4e01-983e-29831a46d24f) from Async(default) enqueued at 2020-09-09T19:22:29Z with arguments: 366
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:22:29 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYsCHiibShxDkj3xu5Vb6o", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599679348, "data"=>{"object"=>{"id"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPYsBHiibShxDkj4O4BAdlR", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34444", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"me", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599679347, "currency"=>"usd", "customer"=>"cus_HOopcPgPtvmtju", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>43, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>11, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPYsBHiibShxDkjJKThaZHU/rcpt_HzXy7OKbMDu7hx3jHDxuErpLXlAd7ng", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPYsBHiibShxDkjJKThaZHU/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HPXuxHiibShxDkjXnYybOSp-initial_attempt-e8f47d21e665f3931"}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYsCHiibShxDkj3xu5Vb6o", "data"=>{"object"=>{"id"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPYsBHiibShxDkj4O4BAdlR", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34444", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"me", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599679347, "currency"=>"usd", "customer"=>"cus_HOopcPgPtvmtju", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>43, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>11, "exp_year"=>2022, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPYsBHiibShxDkjJKThaZHU/rcpt_HzXy7OKbMDu7hx3jHDxuErpLXlAd7ng", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPYsBHiibShxDkjJKThaZHU/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:22:29 -0400
  [1m[36mWebhookEvent Load (7.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYsCHiibShxDkj3xu5Vb6o"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:22:29 -0400
  [1m[35m (8.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (9.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYsCHiibShxDkj3xu5Vb6o"], ["data", "{\"id\":\"evt_1HPYsCHiibShxDkj3xu5Vb6o\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599679348,\"data\":{\"object\":{\"id\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPYsBHiibShxDkj4O4BAdlR\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34444\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"me\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599679347,\"currency\":\"usd\",\"customer\":\"cus_HOopcPgPtvmtju\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":43,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":11,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPYsBHiibShxDkjJKThaZHU/rcpt_HzXy7OKbMDu7hx3jHDxuErpLXlAd7ng\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPYsBHiibShxDkjJKThaZHU/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HPXuxHiibShxDkjXnYybOSp-initial_attempt-e8f47d21e665f3931\"},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPYsCHiibShxDkj3xu5Vb6o\",\"data\":{\"object\":{\"id\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPYsBHiibShxDkj4O4BAdlR\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34444\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"me\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599679347,\"currency\":\"usd\",\"customer\":\"cus_HOopcPgPtvmtju\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":43,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":11,\"exp_year\":2022,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPYsBHiibShxDkjJKThaZHU/rcpt_HzXy7OKbMDu7hx3jHDxuErpLXlAd7ng\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPYsBHiibShxDkjJKThaZHU/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 19:22:29.407386"], ["updated_at", "2020-09-09 19:22:29.407386"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   [1m[36mWebhookEvent Load (2.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 366], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   [1m[36mWebhookEvent Update (2.1ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:22:29.480923"], ["id", 366]]
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (40.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: a64bfc4a-6dc0-485f-a4ac-ed64cf30888e) to Async(default) with arguments: 367
Completed 200 OK in 180ms (Views: 4.6ms | ActiveRecord: 66.2ms | Allocations: 45927)


[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   [1m[35m (72.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYsDHiibShxDkjdee7vM6I", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599679349, "data"=>{"object"=>{"id"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPYsBHiibShxDkjvG2fQ4rz"}, "client_secret"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz_secret_89jRHGZlu42LOXAGVE2770Qj5", "confirmation_method"=>"automatic", "created"=>1599679347, "currency"=>"usd", "customer"=>"cus_HOopcPgPtvmtju", "description"=>"Subscription update", "invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYsDHiibShxDkjdee7vM6I", "data"=>{"object"=>{"id"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPYsBHiibShxDkjvG2fQ4rz"}, "client_secret"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz_secret_89jRHGZlu42LOXAGVE2770Qj5", "confirmation_method"=>"automatic", "created"=>1599679347, "currency"=>"usd", "customer"=>"cus_HOopcPgPtvmtju", "description"=>"Subscription update", "invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   [1m[35m (22.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:22:29 -0400
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   [1m[36mWebhookEvent Update (3.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:22:29.608587"], ["id", 366]]
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYsCHiibShxDkjQgP1WFYR", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599679348, "data"=>{"object"=>{"id"=>"cus_HOopcPgPtvmtju", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1591208407, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"tom.connolly@comcast.net", "invoice_prefix"=>"82104D7E", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>16, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HOopcPgPtvmtju/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HOoq6bsD5aQqTR", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591208441, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591208441, "current_period_end"=>1600280441, "current_period_start"=>1599675641, "customer"=>"cus_HOopcPgPtvmtju", "days_until_due"=>nil, "default_payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HOoqeTday04vCY", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591208441, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HOoq6bsD5aQqTR"}, "latest_invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591208441, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_HOopcPgPtvmtju/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HOopcPgPtvmtju/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>15}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYsCHiibShxDkjQgP1WFYR", "data"=>{"object"=>{"id"=>"cus_HOopcPgPtvmtju", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1591208407, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"tom.connolly@comcast.net", "invoice_prefix"=>"82104D7E", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>16, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HOopcPgPtvmtju/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HOoq6bsD5aQqTR", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591208441, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591208441, "current_period_end"=>1600280441, "current_period_start"=>1599675641, "customer"=>"cus_HOopcPgPtvmtju", "days_until_due"=>nil, "default_payment_method"=>"pm_1Gq1CeHiibShxDkj7KjbpWdD", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HOoqeTday04vCY", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591208441, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HOoq6bsD5aQqTR"}, "latest_invoice"=>"in_1HPXuxHiibShxDkjXnYybOSp", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591208441, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_HOopcPgPtvmtju/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HOopcPgPtvmtju/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>15}}}}
  [1m[36mWebhookEvent Load (7.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjdee7vM6I"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   [1m[35m (28.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [22e8d724-6565-4e01-983e-29831a46d24f] Performed ProcessEventsJob (Job ID: 22e8d724-6565-4e01-983e-29831a46d24f) from Async(default) in 406.4ms
  [1m[36mWebhookEvent Load (6.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYsCHiibShxDkjQgP1WFYR"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:22:29 -0400
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e] Performing ProcessEventsJob (Job ID: a64bfc4a-6dc0-485f-a4ac-ed64cf30888e) from Async(default) enqueued at 2020-09-09T19:22:29Z with arguments: 367
  [1m[35m (6.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYsDHiibShxDkjVwmFLqjY", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599679349, "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"82104D7E-0015", "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599679346, "marked_uncollectible_at"=>nil, "paid_at"=>1599679346, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599675688}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.paid", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYsDHiibShxDkjVwmFLqjY", "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"82104D7E-0015", "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599679346, "marked_uncollectible_at"=>nil, "paid_at"=>1599679346, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599675688}}}}
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (26.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjdee7vM6I"], ["data", "{\"id\":\"evt_1HPYsDHiibShxDkjdee7vM6I\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599679349,\"data\":{\"object\":{\"id\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPYsBHiibShxDkjvG2fQ4rz\"},\"client_secret\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz_secret_89jRHGZlu42LOXAGVE2770Qj5\",\"confirmation_method\":\"automatic\",\"created\":1599679347,\"currency\":\"usd\",\"customer\":\"cus_HOopcPgPtvmtju\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HPYsDHiibShxDkjdee7vM6I\",\"data\":{\"object\":{\"id\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPYsBHiibShxDkjvG2fQ4rz\"},\"client_secret\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz_secret_89jRHGZlu42LOXAGVE2770Qj5\",\"confirmation_method\":\"automatic\",\"created\":1599679347,\"currency\":\"usd\",\"customer\":\"cus_HOopcPgPtvmtju\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 19:22:29.710119"], ["updated_at", "2020-09-09 19:22:29.710119"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Load (30.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjVwmFLqjY"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Create (33.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYsCHiibShxDkjQgP1WFYR"], ["data", "{\"id\":\"evt_1HPYsCHiibShxDkjQgP1WFYR\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599679348,\"data\":{\"object\":{\"id\":\"cus_HOopcPgPtvmtju\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1591208407,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"tom.connolly@comcast.net\",\"invoice_prefix\":\"82104D7E\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":16,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HOopcPgPtvmtju/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HOoq6bsD5aQqTR\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591208441,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591208441,\"current_period_end\":1600280441,\"current_period_start\":1599675641,\"customer\":\"cus_HOopcPgPtvmtju\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HOoqeTday04vCY\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591208441,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HOoq6bsD5aQqTR\"},\"latest_invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591208441,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_HOopcPgPtvmtju/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HOopcPgPtvmtju/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":15}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.updated\",\"webhook_event\":{\"id\":\"evt_1HPYsCHiibShxDkjQgP1WFYR\",\"data\":{\"object\":{\"id\":\"cus_HOopcPgPtvmtju\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1591208407,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"tom.connolly@comcast.net\",\"invoice_prefix\":\"82104D7E\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":16,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HOopcPgPtvmtju/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HOoq6bsD5aQqTR\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591208441,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591208441,\"current_period_end\":1600280441,\"current_period_start\":1599675641,\"customer\":\"cus_HOopcPgPtvmtju\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Gq1CeHiibShxDkj7KjbpWdD\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HOoqeTday04vCY\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591208441,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HOoq6bsD5aQqTR\"},\"latest_invoice\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591208441,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_HOopcPgPtvmtju/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HOopcPgPtvmtju/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":15}}}}"], ["created_at", "2020-09-09 19:22:29.749983"], ["updated_at", "2020-09-09 19:22:29.749983"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (5.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (34.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYsDHiibShxDkjFJ8CLMfC", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599679349, "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"82104D7E-0015", "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599679346, "marked_uncollectible_at"=>nil, "paid_at"=>1599679346, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599675688}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.payment_succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYsDHiibShxDkjFJ8CLMfC", "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"82104D7E-0015", "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599679346, "marked_uncollectible_at"=>nil, "paid_at"=>1599679346, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599675688}}}}
  [1m[35m (20.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: f451435b-3c23-44b3-9fd9-36f15ed5c02e) to Async(default) with arguments: 369
Completed 200 OK in 292ms (Views: 5.6ms | ActiveRecord: 78.2ms | Allocations: 95218)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:22:29 -0400
  [1m[36mWebhookEvent Load (27.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjFJ8CLMfC"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 93ced49a-ab37-44bb-81fb-6b425fe7cbf1) to Async(default) with arguments: 368
Completed 200 OK in 401ms (Views: 1.8ms | ActiveRecord: 82.9ms | Allocations: 135455)


[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e] Performing ProcessEventsJob (Job ID: f451435b-3c23-44b3-9fd9-36f15ed5c02e) from Async(default) enqueued at 2020-09-09T19:22:29Z with arguments: 369
  [1m[35m (7.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   [1m[36mWebhookEvent Load (2.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 367], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1] Performing ProcessEventsJob (Job ID: 93ced49a-ab37-44bb-81fb-6b425fe7cbf1) from Async(default) enqueued at 2020-09-09T19:22:29Z with arguments: 368
  [1m[36mWebhookEvent Create (6.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjVwmFLqjY"], ["data", "{\"id\":\"evt_1HPYsDHiibShxDkjVwmFLqjY\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599679349,\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"82104D7E-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599679346,\"marked_uncollectible_at\":null,\"paid_at\":1599679346,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599675688}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.paid\",\"webhook_event\":{\"id\":\"evt_1HPYsDHiibShxDkjVwmFLqjY\",\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"82104D7E-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599679346,\"marked_uncollectible_at\":null,\"paid_at\":1599679346,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599675688}}}}"], ["created_at", "2020-09-09 19:22:29.853478"], ["updated_at", "2020-09-09 19:22:29.853478"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (4.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjFJ8CLMfC"], ["data", "{\"id\":\"evt_1HPYsDHiibShxDkjFJ8CLMfC\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599679349,\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"82104D7E-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599679346,\"marked_uncollectible_at\":null,\"paid_at\":1599679346,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599675688}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.payment_succeeded\",\"webhook_event\":{\"id\":\"evt_1HPYsDHiibShxDkjFJ8CLMfC\",\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"82104D7E-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599679346,\"marked_uncollectible_at\":null,\"paid_at\":1599679346,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599675688}}}}"], ["created_at", "2020-09-09 19:22:30.013561"], ["updated_at", "2020-09-09 19:22:30.013561"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (11.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee) to Async(default) with arguments: 370
Completed 200 OK in 298ms (Views: 2.6ms | ActiveRecord: 53.9ms | Allocations: 147158)


[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   [1m[36mWebhookEvent Update (4.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:22:30.039864"], ["id", 367]]
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYsDHiibShxDkjC5YNFpwZ", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599679349, "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"82104D7E-0015", "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599679346, "marked_uncollectible_at"=>nil, "paid_at"=>1599679346, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599675688}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.finalized", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYsDHiibShxDkjC5YNFpwZ", "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"82104D7E-0015", "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599679346, "marked_uncollectible_at"=>nil, "paid_at"=>1599679346, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599675688}}}}
  [1m[35m (39.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 0890453d-b87e-48f3-80bb-bef4dd3773e1) to Async(default) with arguments: 371
Completed 200 OK in 214ms (Views: 2.4ms | ActiveRecord: 82.5ms | Allocations: 141727)


  [1m[36mWebhookEvent Load (26.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjC5YNFpwZ"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   [1m[36mWebhookEvent Load (27.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 369], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee] Performing ProcessEventsJob (Job ID: 6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee) from Async(default) enqueued at 2020-09-09T19:22:30Z with arguments: 370
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   [1m[36mWebhookEvent Load (2.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 368], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   [1m[35m (4.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:22:30 -0400
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   [1m[36mWebhookEvent Update (6.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:22:30.163289"], ["id", 367]]
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   [1m[36mWebhookEvent Load (3.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 370], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   [1m[36mWebhookEvent Update (9.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:22:30.166247"], ["id", 369]]
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   [1m[36mWebhookEvent Update (2.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:22:30.172862"], ["id", 368]]
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (5.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Create (1.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjC5YNFpwZ"], ["data", "{\"id\":\"evt_1HPYsDHiibShxDkjC5YNFpwZ\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599679349,\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"82104D7E-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599679346,\"marked_uncollectible_at\":null,\"paid_at\":1599679346,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599675688}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.finalized\",\"webhook_event\":{\"id\":\"evt_1HPYsDHiibShxDkjC5YNFpwZ\",\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"82104D7E-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599679346,\"marked_uncollectible_at\":null,\"paid_at\":1599679346,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599675688}}}}"], ["created_at", "2020-09-09 19:22:30.156514"], ["updated_at", "2020-09-09 19:22:30.156514"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [a64bfc4a-6dc0-485f-a4ac-ed64cf30888e] Performed ProcessEventsJob (Job ID: a64bfc4a-6dc0-485f-a4ac-ed64cf30888e) from Async(default) in 449.6ms
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   [1m[35m (17.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   [1m[36mWebhookEvent Update (9.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:22:30.186240"], ["id", 370]]
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   [1m[35m (4.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1] Performing ProcessEventsJob (Job ID: 0890453d-b87e-48f3-80bb-bef4dd3773e1) from Async(default) enqueued at 2020-09-09T19:22:30Z with arguments: 371
  [1m[35m (17.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: e3796743-76b0-4819-9944-f6d9b126d1d8) to Async(default) with arguments: 372
Completed 200 OK in 117ms (Views: 1.7ms | ActiveRecord: 50.4ms | Allocations: 116356)


Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPYsDHiibShxDkjWmofAqn0", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599679349, "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"82104D7E-0015", "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599679346, "marked_uncollectible_at"=>nil, "paid_at"=>1599679346, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599675688}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>8800, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599679275, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPYsDHiibShxDkjWmofAqn0", "data"=>{"object"=>{"id"=>"in_1HPXuxHiibShxDkjXnYybOSp", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPYsBHiibShxDkjJKThaZHU", "collection_method"=>"charge_automatically", "created"=>1599675675, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOopcPgPtvmtju", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPXuxHiibShxDkjXhXVlId8", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600280441, "start"=>1599675641}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOoq6bsD5aQqTR", "subscription_item"=>"si_HOoqeTday04vCY", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"82104D7E-0015", "paid"=>true, "payment_intent"=>"pi_1HPYsBHiibShxDkjvG2fQ4rz", "period_end"=>1599675641, "period_start"=>1599070841, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599679346, "marked_uncollectible_at"=>nil, "paid_at"=>1599679346, "voided_at"=>nil}, "subscription"=>"sub_HOoq6bsD5aQqTR", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599675688}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>8800, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599679275, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}}}
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   [1m[36mWebhookEvent Update (1.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:22:30.218061"], ["id", 369]]
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   [1m[35m (24.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   [1m[35m (17.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (1.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjWmofAqn0"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   [1m[35m (18.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [f451435b-3c23-44b3-9fd9-36f15ed5c02e] Performed ProcessEventsJob (Job ID: f451435b-3c23-44b3-9fd9-36f15ed5c02e) from Async(default) in 250.12ms
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   [1m[36mWebhookEvent Load (8.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 371], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   [1m[35m (3.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8] Performing ProcessEventsJob (Job ID: e3796743-76b0-4819-9944-f6d9b126d1d8) from Async(default) enqueued at 2020-09-09T19:22:30Z with arguments: 372
  [1m[36mWebhookEvent Create (1.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPYsDHiibShxDkjWmofAqn0"], ["data", "{\"id\":\"evt_1HPYsDHiibShxDkjWmofAqn0\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599679349,\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"82104D7E-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599679346,\"marked_uncollectible_at\":null,\"paid_at\":1599679346,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599675688},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":8800,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599679275,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.updated\",\"webhook_event\":{\"id\":\"evt_1HPYsDHiibShxDkjWmofAqn0\",\"data\":{\"object\":{\"id\":\"in_1HPXuxHiibShxDkjXnYybOSp\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPYsBHiibShxDkjJKThaZHU\",\"collection_method\":\"charge_automatically\",\"created\":1599675675,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOopcPgPtvmtju\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzWyFSwAveUeFKbHIxzfwM6Ow0TOhVc/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPXuxHiibShxDkjXhXVlId8\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600280441,\"start\":1599675641},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subscription_item\":\"si_HOoqeTday04vCY\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPXuxHiibShxDkjXnYybOSp/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"82104D7E-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPYsBHiibShxDkjvG2fQ4rz\",\"period_end\":1599675641,\"period_start\":1599070841,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599679346,\"marked_uncollectible_at\":null,\"paid_at\":1599679346,\"voided_at\":null},\"subscription\":\"sub_HOoq6bsD5aQqTR\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599675688},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":8800,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599679275,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}}}}"], ["created_at", "2020-09-09 19:22:30.278709"], ["updated_at", "2020-09-09 19:22:30.278709"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   [1m[36mWebhookEvent Update (10.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:22:30.272586"], ["id", 368]]
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   [1m[36mWebhookEvent Load (1.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 372], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   [1m[36mWebhookEvent Update (0.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `client_reference_id' for #<Stripe::Invoice:0x00005623acedaf50>"], ["updated_at", "2020-09-09 19:22:30.264663"], ["id", 370]]
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   [1m[35m (3.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   [1m[36mWebhookEvent Update (8.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:22:30.291516"], ["id", 371]]
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (13.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 68ed22db-a55f-459f-83e6-6149eba6118f) to Async(default) with arguments: 373
Completed 200 OK in 90ms (Views: 1.8ms | ActiveRecord: 17.4ms | Allocations: 84823)


[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [93ced49a-ab37-44bb-81fb-6b425fe7cbf1] Performed ProcessEventsJob (Job ID: 93ced49a-ab37-44bb-81fb-6b425fe7cbf1) from Async(default) in 306.49ms
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   [1m[35m (26.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee] Performed ProcessEventsJob (Job ID: 6ed5e9f1-b1f0-4d67-bd7e-f403cd2a53ee) from Async(default) in 181.97ms
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   [1m[36mWebhookEvent Update (3.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:22:30.318021"], ["id", 372]]
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   [1m[35m (21.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f] Performing ProcessEventsJob (Job ID: 68ed22db-a55f-459f-83e6-6149eba6118f) from Async(default) enqueued at 2020-09-09T19:22:30Z with arguments: 373
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   [1m[36mWebhookEvent Load (1.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 373], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   [1m[36mWebhookEvent Update (3.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:22:30.362330"], ["id", 371]]
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [0890453d-b87e-48f3-80bb-bef4dd3773e1] Performed ProcessEventsJob (Job ID: 0890453d-b87e-48f3-80bb-bef4dd3773e1) from Async(default) in 158.12ms
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   [1m[36mWebhookEvent Update (2.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:22:30.368349"], ["id", 373]]
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   [1m[36mWebhookEvent Update (1.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:22:30.380388"], ["id", 372]]
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:22:30.406635"], ["id", 373]]
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   [1m[35m (21.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e3796743-76b0-4819-9944-f6d9b126d1d8] Performed ProcessEventsJob (Job ID: e3796743-76b0-4819-9944-f6d9b126d1d8) from Async(default) in 119.4ms
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [68ed22db-a55f-459f-83e6-6149eba6118f] Performed ProcessEventsJob (Job ID: 68ed22db-a55f-459f-83e6-6149eba6118f) from Async(default) in 58.82ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:56:47 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPZPOHiibShxDkjQYZnq9M2", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599681406, "data"=>{"object"=>{"id"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>8800, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPZPNHiibShxDkj9x5TlQkG", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34114", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"me", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599681405, "currency"=>"usd", "customer"=>"cus_HOpOJmEk0fTWk1", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>53, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>10, "exp_year"=>2023, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPZPNHiibShxDkjloVkv2Rb/rcpt_HzYWs9viy92EKRHu29noe2LDuGm0GMb", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPZPNHiibShxDkjloVkv2Rb/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPZPNHiibShxDkj1vfkkKhS"}, "client_secret"=>"pi_1HPZPNHiibShxDkj1vfkkKhS_secret_GL73c3saShqBtYM7syNpI0Q1e", "confirmation_method"=>"automatic", "created"=>1599681405, "currency"=>"usd", "customer"=>"cus_HOpOJmEk0fTWk1", "description"=>"Subscription update", "invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HPYS9HiibShxDkjubtnvXYI-initial_attempt-b2495e15a60d42133"}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPZPOHiibShxDkjQYZnq9M2", "data"=>{"object"=>{"id"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>8800, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPZPNHiibShxDkj9x5TlQkG", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34114", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"me", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599681405, "currency"=>"usd", "customer"=>"cus_HOpOJmEk0fTWk1", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>53, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>10, "exp_year"=>2023, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPZPNHiibShxDkjloVkv2Rb/rcpt_HzYWs9viy92EKRHu29noe2LDuGm0GMb", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPZPNHiibShxDkjloVkv2Rb/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPZPNHiibShxDkj1vfkkKhS"}, "client_secret"=>"pi_1HPZPNHiibShxDkj1vfkkKhS_secret_GL73c3saShqBtYM7syNpI0Q1e", "confirmation_method"=>"automatic", "created"=>1599681405, "currency"=>"usd", "customer"=>"cus_HOpOJmEk0fTWk1", "description"=>"Subscription update", "invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjQYZnq9M2"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.3ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjQYZnq9M2"], ["data", "{\"id\":\"evt_1HPZPOHiibShxDkjQYZnq9M2\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599681406,\"data\":{\"object\":{\"id\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":8800,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPZPNHiibShxDkj9x5TlQkG\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34114\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"me\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599681405,\"currency\":\"usd\",\"customer\":\"cus_HOpOJmEk0fTWk1\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":53,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":10,\"exp_year\":2023,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPZPNHiibShxDkjloVkv2Rb/rcpt_HzYWs9viy92EKRHu29noe2LDuGm0GMb\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPZPNHiibShxDkjloVkv2Rb/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPZPNHiibShxDkj1vfkkKhS\"},\"client_secret\":\"pi_1HPZPNHiibShxDkj1vfkkKhS_secret_GL73c3saShqBtYM7syNpI0Q1e\",\"confirmation_method\":\"automatic\",\"created\":1599681405,\"currency\":\"usd\",\"customer\":\"cus_HOpOJmEk0fTWk1\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HPYS9HiibShxDkjubtnvXYI-initial_attempt-b2495e15a60d42133\"},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPZPOHiibShxDkjQYZnq9M2\",\"data\":{\"object\":{\"id\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":8800,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPZPNHiibShxDkj9x5TlQkG\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34114\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"me\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599681405,\"currency\":\"usd\",\"customer\":\"cus_HOpOJmEk0fTWk1\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":53,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":10,\"exp_year\":2023,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPZPNHiibShxDkjloVkv2Rb/rcpt_HzYWs9viy92EKRHu29noe2LDuGm0GMb\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPZPNHiibShxDkjloVkv2Rb/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPZPNHiibShxDkj1vfkkKhS\"},\"client_secret\":\"pi_1HPZPNHiibShxDkj1vfkkKhS_secret_GL73c3saShqBtYM7syNpI0Q1e\",\"confirmation_method\":\"automatic\",\"created\":1599681405,\"currency\":\"usd\",\"customer\":\"cus_HOpOJmEk0fTWk1\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 19:56:47.097564"], ["updated_at", "2020-09-09 19:56:47.097564"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5) to Async(default) with arguments: 374
Completed 200 OK in 131ms (Views: 5.5ms | ActiveRecord: 26.4ms | Allocations: 42021)


[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5] Performing ProcessEventsJob (Job ID: 4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5) from Async(default) enqueued at 2020-09-09T19:56:47Z with arguments: 374
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 374], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:56:47.272059"], ["id", 374]]
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   [1m[36mWebhookEvent Update (1.1ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:56:47.309813"], ["id", 374]]
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   [1m[35m (10.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5] Performed ProcessEventsJob (Job ID: 4bc0bbd1-52a4-4db3-813a-f3d60c7b45f5) from Async(default) in 113.84ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:56:47 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPZPOHiibShxDkjItoEp6vJ", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599681405, "data"=>{"object"=>{"id"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPZPNHiibShxDkj9x5TlQkG", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34114", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"me", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599681405, "currency"=>"usd", "customer"=>"cus_HOpOJmEk0fTWk1", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>53, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>10, "exp_year"=>2023, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPZPNHiibShxDkjloVkv2Rb/rcpt_HzYWs9viy92EKRHu29noe2LDuGm0GMb", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPZPNHiibShxDkjloVkv2Rb/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HPYS9HiibShxDkjubtnvXYI-initial_attempt-b2495e15a60d42133"}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPZPOHiibShxDkjItoEp6vJ", "data"=>{"object"=>{"id"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "object"=>"charge", "amount"=>8800, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPZPNHiibShxDkj9x5TlQkG", "billing_details"=>{"address"=>{"city"=>nil, "country"=>"US", "line1"=>nil, "line2"=>nil, "postal_code"=>"34114", "state"=>nil}, "email"=>"tom.connolly@comcast.net", "name"=>"me", "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599681405, "currency"=>"usd", "customer"=>"cus_HOpOJmEk0fTWk1", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>53, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>10, "exp_year"=>2023, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPZPNHiibShxDkjloVkv2Rb/rcpt_HzYWs9viy92EKRHu29noe2LDuGm0GMb", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPZPNHiibShxDkjloVkv2Rb/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>nil, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjItoEp6vJ"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjItoEp6vJ"], ["data", "{\"id\":\"evt_1HPZPOHiibShxDkjItoEp6vJ\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599681405,\"data\":{\"object\":{\"id\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPZPNHiibShxDkj9x5TlQkG\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34114\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"me\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599681405,\"currency\":\"usd\",\"customer\":\"cus_HOpOJmEk0fTWk1\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":53,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":10,\"exp_year\":2023,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPZPNHiibShxDkjloVkv2Rb/rcpt_HzYWs9viy92EKRHu29noe2LDuGm0GMb\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPZPNHiibShxDkjloVkv2Rb/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HPYS9HiibShxDkjubtnvXYI-initial_attempt-b2495e15a60d42133\"},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPZPOHiibShxDkjItoEp6vJ\",\"data\":{\"object\":{\"id\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"object\":\"charge\",\"amount\":8800,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPZPNHiibShxDkj9x5TlQkG\",\"billing_details\":{\"address\":{\"city\":null,\"country\":\"US\",\"line1\":null,\"line2\":null,\"postal_code\":\"34114\",\"state\":null},\"email\":\"tom.connolly@comcast.net\",\"name\":\"me\",\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599681405,\"currency\":\"usd\",\"customer\":\"cus_HOpOJmEk0fTWk1\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":53,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":10,\"exp_year\":2023,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPZPNHiibShxDkjloVkv2Rb/rcpt_HzYWs9viy92EKRHu29noe2LDuGm0GMb\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPZPNHiibShxDkjloVkv2Rb/refunds\"},\"review\":null,\"shipping\":null,\"source\":null,\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 19:56:47.669470"], ["updated_at", "2020-09-09 19:56:47.669470"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (17.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 48d8c245-0196-4286-8641-ef7f392739fb) to Async(default) with arguments: 375
Completed 200 OK in 121ms (Views: 4.8ms | ActiveRecord: 22.0ms | Allocations: 30670)


[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb] Performing ProcessEventsJob (Job ID: 48d8c245-0196-4286-8641-ef7f392739fb) from Async(default) enqueued at 2020-09-09T19:56:47Z with arguments: 375
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   [1m[36mWebhookEvent Load (1.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 375], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:56:47 -0400
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   [1m[36mWebhookEvent Update (2.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:56:47.809475"], ["id", 375]]
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   â†³ app/jobs/process_events_job.rb:7:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPZPOHiibShxDkjJ6eQ3aUV", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599681406, "data"=>{"object"=>{"id"=>"cus_HOpOJmEk0fTWk1", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1591210478, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"tom.connolly@comcast.net", "invoice_prefix"=>"48AE7098", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>16, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HOpOJmEk0fTWk1/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HOpPYpNsYjqlwq", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591210523, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591210523, "current_period_end"=>1600282523, "current_period_start"=>1599677723, "customer"=>"cus_HOpOJmEk0fTWk1", "days_until_due"=>nil, "default_payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HOpPgs4mTPNBV1", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591210524, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HOpPYpNsYjqlwq"}, "latest_invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591210523, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_HOpOJmEk0fTWk1/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HOpOJmEk0fTWk1/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>15}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPZPOHiibShxDkjJ6eQ3aUV", "data"=>{"object"=>{"id"=>"cus_HOpOJmEk0fTWk1", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1591210478, "currency"=>"usd", "default_source"=>nil, "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"tom.connolly@comcast.net", "invoice_prefix"=>"48AE7098", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>16, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HOpOJmEk0fTWk1/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_HOpPYpNsYjqlwq", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591210523, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591210523, "current_period_end"=>1600282523, "current_period_start"=>1599677723, "customer"=>"cus_HOpOJmEk0fTWk1", "days_until_due"=>nil, "default_payment_method"=>"pm_1Gq1kFHiibShxDkjYKN3pU9m", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HOpPgs4mTPNBV1", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591210524, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HOpPYpNsYjqlwq"}, "latest_invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591210523, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_HOpOJmEk0fTWk1/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_HOpOJmEk0fTWk1/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>15}}}}
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   [1m[35m (12.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (6.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjJ6eQ3aUV"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   [1m[36mWebhookEvent Update (1.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:56:47.839354"], ["id", 375]]
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   â†³ app/jobs/process_events_job.rb:13:in `perform'
  [1m[36mWebhookEvent Create (2.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjJ6eQ3aUV"], ["data", "{\"id\":\"evt_1HPZPOHiibShxDkjJ6eQ3aUV\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599681406,\"data\":{\"object\":{\"id\":\"cus_HOpOJmEk0fTWk1\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1591210478,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"tom.connolly@comcast.net\",\"invoice_prefix\":\"48AE7098\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":16,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HOpOJmEk0fTWk1/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HOpPYpNsYjqlwq\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591210523,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591210523,\"current_period_end\":1600282523,\"current_period_start\":1599677723,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HOpPgs4mTPNBV1\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591210524,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HOpPYpNsYjqlwq\"},\"latest_invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591210523,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_HOpOJmEk0fTWk1/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HOpOJmEk0fTWk1/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":15}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.updated\",\"webhook_event\":{\"id\":\"evt_1HPZPOHiibShxDkjJ6eQ3aUV\",\"data\":{\"object\":{\"id\":\"cus_HOpOJmEk0fTWk1\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1591210478,\"currency\":\"usd\",\"default_source\":null,\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"tom.connolly@comcast.net\",\"invoice_prefix\":\"48AE7098\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":16,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HOpOJmEk0fTWk1/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_HOpPYpNsYjqlwq\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591210523,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591210523,\"current_period_end\":1600282523,\"current_period_start\":1599677723,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"days_until_due\":null,\"default_payment_method\":\"pm_1Gq1kFHiibShxDkjYKN3pU9m\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HOpPgs4mTPNBV1\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591210524,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HOpPYpNsYjqlwq\"},\"latest_invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591210523,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_HOpOJmEk0fTWk1/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_HOpOJmEk0fTWk1/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":15}}}}"], ["created_at", "2020-09-09 19:56:47.845098"], ["updated_at", "2020-09-09 19:56:47.845098"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [48d8c245-0196-4286-8641-ef7f392739fb] Performed ProcessEventsJob (Job ID: 48d8c245-0196-4286-8641-ef7f392739fb) from Async(default) in 64.89ms
  [1m[35m (10.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 2527bec8-e79e-4bb1-9501-a1b1d5f28161) to Async(default) with arguments: 376
Completed 200 OK in 58ms (Views: 2.0ms | ActiveRecord: 21.5ms | Allocations: 60297)


[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161] Performing ProcessEventsJob (Job ID: 2527bec8-e79e-4bb1-9501-a1b1d5f28161) from Async(default) enqueued at 2020-09-09T19:56:47Z with arguments: 376
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   [1m[36mWebhookEvent Load (1.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 376], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:56:47.900241"], ["id", 376]]
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   [1m[36mWebhookEvent Update (1.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:56:47.950390"], ["id", 376]]
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [2527bec8-e79e-4bb1-9501-a1b1d5f28161] Performed ProcessEventsJob (Job ID: 2527bec8-e79e-4bb1-9501-a1b1d5f28161) from Async(default) in 81.73ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:56:48 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPZPOHiibShxDkjXy7Au5x3", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599681406, "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"48AE7098-0015", "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599681404, "marked_uncollectible_at"=>nil, "paid_at"=>1599681404, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599677733}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.paid", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPZPOHiibShxDkjXy7Au5x3", "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"48AE7098-0015", "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599681404, "marked_uncollectible_at"=>nil, "paid_at"=>1599681404, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599677733}}}}
  [1m[36mWebhookEvent Load (2.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjXy7Au5x3"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjXy7Au5x3"], ["data", "{\"id\":\"evt_1HPZPOHiibShxDkjXy7Au5x3\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599681406,\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"48AE7098-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599681404,\"marked_uncollectible_at\":null,\"paid_at\":1599681404,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599677733}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.paid\",\"webhook_event\":{\"id\":\"evt_1HPZPOHiibShxDkjXy7Au5x3\",\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"48AE7098-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599681404,\"marked_uncollectible_at\":null,\"paid_at\":1599681404,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599677733}}}}"], ["created_at", "2020-09-09 19:56:48.289778"], ["updated_at", "2020-09-09 19:56:48.289778"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:56:48 -0400
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:56:48 -0400
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:56:48 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPZPOHiibShxDkjxnpMr0qO", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599681406, "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"48AE7098-0015", "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599681404, "marked_uncollectible_at"=>nil, "paid_at"=>1599681404, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599677733}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.payment_succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPZPOHiibShxDkjxnpMr0qO", "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"48AE7098-0015", "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599681404, "marked_uncollectible_at"=>nil, "paid_at"=>1599681404, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599677733}}}}
  [1m[35m (35.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: e7c7f796-fb73-443a-8fe3-22673b57010c) to Async(default) with arguments: 377
Completed 200 OK in 194ms (Views: 8.3ms | ActiveRecord: 40.2ms | Allocations: 51103)


[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c] Performing ProcessEventsJob (Job ID: e7c7f796-fb73-443a-8fe3-22673b57010c) from Async(default) enqueued at 2020-09-09T19:56:48Z with arguments: 377
  [1m[36mWebhookEvent Load (42.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjxnpMr0qO"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (7.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjxnpMr0qO"], ["data", "{\"id\":\"evt_1HPZPOHiibShxDkjxnpMr0qO\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599681406,\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"48AE7098-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599681404,\"marked_uncollectible_at\":null,\"paid_at\":1599681404,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599677733}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.payment_succeeded\",\"webhook_event\":{\"id\":\"evt_1HPZPOHiibShxDkjxnpMr0qO\",\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"48AE7098-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599681404,\"marked_uncollectible_at\":null,\"paid_at\":1599681404,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599677733}}}}"], ["created_at", "2020-09-09 19:56:48.516465"], ["updated_at", "2020-09-09 19:56:48.516465"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPZPPHiibShxDkj0RgU60LI", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599681407, "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"48AE7098-0015", "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599681404, "marked_uncollectible_at"=>nil, "paid_at"=>1599681404, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599677733}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>8800, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599681333, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPZPPHiibShxDkj0RgU60LI", "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"48AE7098-0015", "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599681404, "marked_uncollectible_at"=>nil, "paid_at"=>1599681404, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599677733}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>8800, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599681333, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}}}
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPZPOHiibShxDkjPjqGHuPj", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599681406, "data"=>{"object"=>{"id"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPZPNHiibShxDkj1vfkkKhS"}, "client_secret"=>"pi_1HPZPNHiibShxDkj1vfkkKhS_secret_GL73c3saShqBtYM7syNpI0Q1e", "confirmation_method"=>"automatic", "created"=>1599681405, "currency"=>"usd", "customer"=>"cus_HOpOJmEk0fTWk1", "description"=>"Subscription update", "invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPZPOHiibShxDkjPjqGHuPj", "data"=>{"object"=>{"id"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "object"=>"payment_intent", "amount"=>8800, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPZPNHiibShxDkj1vfkkKhS"}, "client_secret"=>"pi_1HPZPNHiibShxDkj1vfkkKhS_secret_GL73c3saShqBtYM7syNpI0Q1e", "confirmation_method"=>"automatic", "created"=>1599681405, "currency"=>"usd", "customer"=>"cus_HOpOJmEk0fTWk1", "description"=>"Subscription update", "invoice"=>"in_1HPYS9HiibShxDkjubtnvXYI", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[35m (56.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 7ba09dd3-23b8-4ca5-b243-848f9861205c) to Async(default) with arguments: 378
Completed 200 OK in 366ms (Views: 5.1ms | ActiveRecord: 108.4ms | Allocations: 93395)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 15:56:48 -0400
  [1m[36mWebhookEvent Load (9.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPZPPHiibShxDkj0RgU60LI"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (4.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Load (16.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjPjqGHuPj"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   [1m[36mWebhookEvent Load (10.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 377], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   â†³ app/jobs/process_events_job.rb:5:in `perform'
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPZPPHiibShxDkjX7zCckiC", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599681407, "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"48AE7098-0015", "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599681404, "marked_uncollectible_at"=>nil, "paid_at"=>1599681404, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599677733}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.finalized", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPZPPHiibShxDkjX7zCckiC", "data"=>{"object"=>{"id"=>"in_1HPYS9HiibShxDkjubtnvXYI", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>8800, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPZPNHiibShxDkjloVkv2Rb", "collection_method"=>"charge_automatically", "created"=>1599677733, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HOpOJmEk0fTWk1", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPYS9HiibShxDkjfxhjXh3u", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 Ã— Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600282523, "start"=>1599677723}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HOpPYpNsYjqlwq", "subscription_item"=>"si_HOpPgs4mTPNBV1", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"48AE7098-0015", "paid"=>true, "payment_intent"=>"pi_1HPZPNHiibShxDkj1vfkkKhS", "period_end"=>1599677723, "period_start"=>1599072923, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599681404, "marked_uncollectible_at"=>nil, "paid_at"=>1599681404, "voided_at"=>nil}, "subscription"=>"sub_HOpPYpNsYjqlwq", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599677733}}}}
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   [1m[35m (4.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c] Performing ProcessEventsJob (Job ID: 7ba09dd3-23b8-4ca5-b243-848f9861205c) from Async(default) enqueued at 2020-09-09T19:56:48Z with arguments: 378
  [1m[36mWebhookEvent Create (3.0ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPZPPHiibShxDkj0RgU60LI"], ["data", "{\"id\":\"evt_1HPZPPHiibShxDkj0RgU60LI\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599681407,\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"48AE7098-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599681404,\"marked_uncollectible_at\":null,\"paid_at\":1599681404,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599677733},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":8800,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599681333,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.updated\",\"webhook_event\":{\"id\":\"evt_1HPZPPHiibShxDkj0RgU60LI\",\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"48AE7098-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599681404,\"marked_uncollectible_at\":null,\"paid_at\":1599681404,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599677733},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":8800,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599681333,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}}}}"], ["created_at", "2020-09-09 19:56:48.785048"], ["updated_at", "2020-09-09 19:56:48.785048"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (8.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   [1m[36mWebhookEvent Update (8.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:56:48.811069"], ["id", 377]]
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (1.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPZPPHiibShxDkjX7zCckiC"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Create (9.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPZPOHiibShxDkjPjqGHuPj"], ["data", "{\"id\":\"evt_1HPZPOHiibShxDkjPjqGHuPj\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599681406,\"data\":{\"object\":{\"id\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPZPNHiibShxDkj1vfkkKhS\"},\"client_secret\":\"pi_1HPZPNHiibShxDkj1vfkkKhS_secret_GL73c3saShqBtYM7syNpI0Q1e\",\"confirmation_method\":\"automatic\",\"created\":1599681405,\"currency\":\"usd\",\"customer\":\"cus_HOpOJmEk0fTWk1\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HPZPOHiibShxDkjPjqGHuPj\",\"data\":{\"object\":{\"id\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"object\":\"payment_intent\",\"amount\":8800,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPZPNHiibShxDkj1vfkkKhS\"},\"client_secret\":\"pi_1HPZPNHiibShxDkj1vfkkKhS_secret_GL73c3saShqBtYM7syNpI0Q1e\",\"confirmation_method\":\"automatic\",\"created\":1599681405,\"currency\":\"usd\",\"customer\":\"cus_HOpOJmEk0fTWk1\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-09 19:56:48.808101"], ["updated_at", "2020-09-09 19:56:48.808101"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (18.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: e188ea86-250c-4444-a2a7-768ef3942859) to Async(default) with arguments: 379
Completed 200 OK in 212ms (Views: 1.9ms | ActiveRecord: 43.2ms | Allocations: 114072)


  [1m[35m (2.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   [1m[35m (37.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   â†³ app/jobs/process_events_job.rb:7:in `perform'
  [1m[35m (26.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859] Performing ProcessEventsJob (Job ID: e188ea86-250c-4444-a2a7-768ef3942859) from Async(default) enqueued at 2020-09-09T19:56:48Z with arguments: 379
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   [1m[36mWebhookEvent Load (14.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 378], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   â†³ app/jobs/process_events_job.rb:5:in `perform'
  [1m[36mWebhookEvent Create (1.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPZPPHiibShxDkjX7zCckiC"], ["data", "{\"id\":\"evt_1HPZPPHiibShxDkjX7zCckiC\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599681407,\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"48AE7098-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599681404,\"marked_uncollectible_at\":null,\"paid_at\":1599681404,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599677733}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.finalized\",\"webhook_event\":{\"id\":\"evt_1HPZPPHiibShxDkjX7zCckiC\",\"data\":{\"object\":{\"id\":\"in_1HPYS9HiibShxDkjubtnvXYI\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":8800,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPZPNHiibShxDkjloVkv2Rb\",\"collection_method\":\"charge_automatically\",\"created\":1599677733,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HOpOJmEk0fTWk1\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzXXF6q9LU9RZN8GJ272jtbo1r8eMQy/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPYS9HiibShxDkjfxhjXh3u\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 Ã— Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600282523,\"start\":1599677723},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subscription_item\":\"si_HOpPgs4mTPNBV1\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPYS9HiibShxDkjubtnvXYI/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"48AE7098-0015\",\"paid\":true,\"payment_intent\":\"pi_1HPZPNHiibShxDkj1vfkkKhS\",\"period_end\":1599677723,\"period_start\":1599072923,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599681404,\"marked_uncollectible_at\":null,\"paid_at\":1599681404,\"voided_at\":null},\"subscription\":\"sub_HOpPYpNsYjqlwq\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599677733}}}}"], ["created_at", "2020-09-09 19:56:48.837687"], ["updated_at", "2020-09-09 19:56:48.837687"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   [1m[35m (7.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   [1m[36mWebhookEvent Update (10.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `client_reference_id' for #<Stripe::Invoice:0x00007feae02f40b8>"], ["updated_at", "2020-09-09 19:56:48.881573"], ["id", 377]]
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 7c645ec1-bd7a-4e27-843e-d7765ed8150d) to Async(default) with arguments: 380
Completed 200 OK in 239ms (Views: 1.0ms | ActiveRecord: 77.7ms | Allocations: 160558)


[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   [1m[36mWebhookEvent Update (13.1ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:56:48.893559"], ["id", 378]]
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d] Performing ProcessEventsJob (Job ID: 7c645ec1-bd7a-4e27-843e-d7765ed8150d) from Async(default) enqueued at 2020-09-09T19:56:48Z with arguments: 380
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   [1m[35m (19.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c]   â†³ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [e7c7f796-fb73-443a-8fe3-22673b57010c] Performed ProcessEventsJob (Job ID: e7c7f796-fb73-443a-8fe3-22673b57010c) from Async(default) in 435.47ms
  [1m[35m (16.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: d0462848-4661-4c71-ba5a-f56ed5c49e08) to Async(default) with arguments: 381
Completed 200 OK in 125ms (Views: 1.6ms | ActiveRecord: 22.0ms | Allocations: 136827)


[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   [1m[36mWebhookEvent Load (1.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 379], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08] Performing ProcessEventsJob (Job ID: d0462848-4661-4c71-ba5a-f56ed5c49e08) from Async(default) enqueued at 2020-09-09T19:56:48Z with arguments: 381
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   [1m[35m (25.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   [1m[36mWebhookEvent Load (4.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 380], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   [1m[35m (9.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   [1m[36mWebhookEvent Update (1.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:56:48.962173"], ["id", 380]]
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   [1m[36mWebhookEvent Load (0.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 381], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   [1m[36mWebhookEvent Update (2.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:56:48.959759"], ["id", 378]]
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   [1m[36mWebhookEvent Update (0.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:56:48.950374"], ["id", 379]]
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   [1m[35m (8.8ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   [1m[36mWebhookEvent Update (5.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-09 19:56:48.974078"], ["id", 381]]
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   [1m[35m (5.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   [1m[35m (13.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [7ba09dd3-23b8-4ca5-b243-848f9861205c] Performed ProcessEventsJob (Job ID: 7ba09dd3-23b8-4ca5-b243-848f9861205c) from Async(default) in 177.5ms
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   [1m[35m (15.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   [1m[36mWebhookEvent Update (13.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:56:48.989114"], ["id", 380]]
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   [1m[35m (16.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   [1m[35m (8.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [7c645ec1-bd7a-4e27-843e-d7765ed8150d] Performed ProcessEventsJob (Job ID: 7c645ec1-bd7a-4e27-843e-d7765ed8150d) from Async(default) in 104.33ms
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   [1m[36mWebhookEvent Update (1.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:56:49.021944"], ["id", 381]]
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   [1m[36mWebhookEvent Update (1.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-09 19:56:49.010340"], ["id", 379]]
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   [1m[35m (10.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [d0462848-4661-4c71-ba5a-f56ed5c49e08] Performed ProcessEventsJob (Job ID: d0462848-4661-4c71-ba5a-f56ed5c49e08) from Async(default) in 95.13ms
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   [1m[35m (17.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e188ea86-250c-4444-a2a7-768ef3942859] Performed ProcessEventsJob (Job ID: e188ea86-250c-4444-a2a7-768ef3942859) from Async(default) in 169.14ms
  [1m[36mPledge Load (1.0ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" ORDER BY "pledges"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/worship" for 127.0.0.1 at 2020-09-09 16:10:19 -0400
Processing by WorshipController#index as HTML
  Rendering worship/index.html.erb within layouts/application
  Rendered worship/index.html.erb within layouts/application (Duration: 5.1ms | Allocations: 606)
  Rendered layouts/_header.html.erb (Duration: 8.0ms | Allocations: 1265)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 102.3ms | Allocations: 28806)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 355)
Completed 200 OK in 159ms (Views: 122.4ms | ActiveRecord: 30.4ms | Allocations: 39333)


Started GET "/worship" for 127.0.0.1 at 2020-09-09 21:10:07 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WorshipController#index as HTML
  Rendering worship/index.html.erb within layouts/application
  Rendered worship/index.html.erb within layouts/application (Duration: 14.9ms | Allocations: 4438)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1526)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  â†³ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 65.1ms | Allocations: 33735)
  Rendered layouts/_footer.html.erb (Duration: 1.9ms | Allocations: 530)
Completed 200 OK in 122ms (Views: 104.3ms | ActiveRecord: 8.4ms | Allocations: 59220)


  [1m[36mStripeReport Load (0.9ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" ORDER BY "stripe_reports"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mStripeReport Load (3.7ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" WHERE "stripe_reports"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 21:14:46 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPeN8HiibShxDkj7wmfADZ5", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599700486, "data"=>{"object"=>{"id"=>"po_1HPeMFHiibShxDkj90NwiMrl", "object"=>"payout", "amount"=>58984, "arrival_date"=>1599696000, "automatic"=>true, "balance_transaction"=>"txn_1HPeMFHiibShxDkjjC5qeHbN", "created"=>1599700431, "currency"=>"usd", "description"=>"STRIPE PAYOUT", "destination"=>"ba_15u280HiibShxDkj5TYYpdyJ", "failure_balance_transaction"=>nil, "failure_code"=>nil, "failure_message"=>nil, "livemode"=>false, "metadata"=>{}, "method"=>"standard", "source_type"=>"card", "statement_descriptor"=>nil, "status"=>"in_transit", "type"=>"bank_account"}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payout.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPeN8HiibShxDkj7wmfADZ5", "data"=>{"object"=>{"id"=>"po_1HPeMFHiibShxDkj90NwiMrl", "object"=>"payout", "amount"=>58984, "arrival_date"=>1599696000, "automatic"=>true, "balance_transaction"=>"txn_1HPeMFHiibShxDkjjC5qeHbN", "created"=>1599700431, "currency"=>"usd", "description"=>"STRIPE PAYOUT", "destination"=>"ba_15u280HiibShxDkj5TYYpdyJ", "failure_balance_transaction"=>nil, "failure_code"=>nil, "failure_message"=>nil, "livemode"=>false, "metadata"=>{}, "method"=>"standard", "source_type"=>"card", "statement_descriptor"=>nil, "status"=>"in_transit", "type"=>"bank_account"}}}}
  [1m[36mWebhookEvent Load (1.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPeN8HiibShxDkj7wmfADZ5"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPeN8HiibShxDkj7wmfADZ5"], ["data", "{\"id\":\"evt_1HPeN8HiibShxDkj7wmfADZ5\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599700486,\"data\":{\"object\":{\"id\":\"po_1HPeMFHiibShxDkj90NwiMrl\",\"object\":\"payout\",\"amount\":58984,\"arrival_date\":1599696000,\"automatic\":true,\"balance_transaction\":\"txn_1HPeMFHiibShxDkjjC5qeHbN\",\"created\":1599700431,\"currency\":\"usd\",\"description\":\"STRIPE PAYOUT\",\"destination\":\"ba_15u280HiibShxDkj5TYYpdyJ\",\"failure_balance_transaction\":null,\"failure_code\":null,\"failure_message\":null,\"livemode\":false,\"metadata\":{},\"method\":\"standard\",\"source_type\":\"card\",\"statement_descriptor\":null,\"status\":\"in_transit\",\"type\":\"bank_account\"}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payout.created\",\"webhook_event\":{\"id\":\"evt_1HPeN8HiibShxDkj7wmfADZ5\",\"data\":{\"object\":{\"id\":\"po_1HPeMFHiibShxDkj90NwiMrl\",\"object\":\"payout\",\"amount\":58984,\"arrival_date\":1599696000,\"automatic\":true,\"balance_transaction\":\"txn_1HPeMFHiibShxDkjjC5qeHbN\",\"created\":1599700431,\"currency\":\"usd\",\"description\":\"STRIPE PAYOUT\",\"destination\":\"ba_15u280HiibShxDkj5TYYpdyJ\",\"failure_balance_transaction\":null,\"failure_code\":null,\"failure_message\":null,\"livemode\":false,\"metadata\":{},\"method\":\"standard\",\"source_type\":\"card\",\"statement_descriptor\":null,\"status\":\"in_transit\",\"type\":\"bank_account\"}}}}"], ["created_at", "2020-09-10 01:14:46.149841"], ["updated_at", "2020-09-10 01:14:46.149841"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (14.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 8a83d517-23da-4d5b-b02b-686a66be5bb2) to Async(default) with arguments: 382
Completed 200 OK in 131ms (Views: 1.2ms | ActiveRecord: 25.2ms | Allocations: 20313)


[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2] Performing ProcessEventsJob (Job ID: 8a83d517-23da-4d5b-b02b-686a66be5bb2) from Async(default) enqueued at 2020-09-10T01:14:46Z with arguments: 382
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   [1m[36mWebhookEvent Load (0.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 382], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   [1m[36mWebhookEvent Update (1.1ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 01:14:46.237358"], ["id", 382]]
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   [1m[35m (11.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   [1m[36mWebhookEvent Update (0.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 01:14:46.270185"], ["id", 382]]
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   [1m[35m (12.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [8a83d517-23da-4d5b-b02b-686a66be5bb2] Performed ProcessEventsJob (Job ID: 8a83d517-23da-4d5b-b02b-686a66be5bb2) from Async(default) in 86.07ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 21:14:46 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPeN8HiibShxDkjsfnQxoAV", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599700486, "data"=>{"object"=>{"id"=>"po_1HPeMFHiibShxDkj90NwiMrl", "object"=>"payout", "amount"=>58984, "arrival_date"=>1599696000, "automatic"=>true, "balance_transaction"=>"txn_1HPeMFHiibShxDkjjC5qeHbN", "created"=>1599700431, "currency"=>"usd", "description"=>"STRIPE PAYOUT", "destination"=>"ba_15u280HiibShxDkj5TYYpdyJ", "failure_balance_transaction"=>nil, "failure_code"=>nil, "failure_message"=>nil, "livemode"=>false, "metadata"=>{}, "method"=>"standard", "source_type"=>"card", "statement_descriptor"=>nil, "status"=>"paid", "type"=>"bank_account"}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payout.paid", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPeN8HiibShxDkjsfnQxoAV", "data"=>{"object"=>{"id"=>"po_1HPeMFHiibShxDkj90NwiMrl", "object"=>"payout", "amount"=>58984, "arrival_date"=>1599696000, "automatic"=>true, "balance_transaction"=>"txn_1HPeMFHiibShxDkjjC5qeHbN", "created"=>1599700431, "currency"=>"usd", "description"=>"STRIPE PAYOUT", "destination"=>"ba_15u280HiibShxDkj5TYYpdyJ", "failure_balance_transaction"=>nil, "failure_code"=>nil, "failure_message"=>nil, "livemode"=>false, "metadata"=>{}, "method"=>"standard", "source_type"=>"card", "statement_descriptor"=>nil, "status"=>"paid", "type"=>"bank_account"}}}}
  [1m[36mWebhookEvent Load (1.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPeN8HiibShxDkjsfnQxoAV"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPeN8HiibShxDkjsfnQxoAV"], ["data", "{\"id\":\"evt_1HPeN8HiibShxDkjsfnQxoAV\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599700486,\"data\":{\"object\":{\"id\":\"po_1HPeMFHiibShxDkj90NwiMrl\",\"object\":\"payout\",\"amount\":58984,\"arrival_date\":1599696000,\"automatic\":true,\"balance_transaction\":\"txn_1HPeMFHiibShxDkjjC5qeHbN\",\"created\":1599700431,\"currency\":\"usd\",\"description\":\"STRIPE PAYOUT\",\"destination\":\"ba_15u280HiibShxDkj5TYYpdyJ\",\"failure_balance_transaction\":null,\"failure_code\":null,\"failure_message\":null,\"livemode\":false,\"metadata\":{},\"method\":\"standard\",\"source_type\":\"card\",\"statement_descriptor\":null,\"status\":\"paid\",\"type\":\"bank_account\"}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payout.paid\",\"webhook_event\":{\"id\":\"evt_1HPeN8HiibShxDkjsfnQxoAV\",\"data\":{\"object\":{\"id\":\"po_1HPeMFHiibShxDkj90NwiMrl\",\"object\":\"payout\",\"amount\":58984,\"arrival_date\":1599696000,\"automatic\":true,\"balance_transaction\":\"txn_1HPeMFHiibShxDkjjC5qeHbN\",\"created\":1599700431,\"currency\":\"usd\",\"description\":\"STRIPE PAYOUT\",\"destination\":\"ba_15u280HiibShxDkj5TYYpdyJ\",\"failure_balance_transaction\":null,\"failure_code\":null,\"failure_message\":null,\"livemode\":false,\"metadata\":{},\"method\":\"standard\",\"source_type\":\"card\",\"statement_descriptor\":null,\"status\":\"paid\",\"type\":\"bank_account\"}}}}"], ["created_at", "2020-09-10 01:14:46.458246"], ["updated_at", "2020-09-10 01:14:46.458246"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (69.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: afc9bf17-1a9f-41d5-8ab7-42c05567954e) to Async(default) with arguments: 383
Completed 200 OK in 119ms (Views: 1.7ms | ActiveRecord: 72.4ms | Allocations: 15344)


[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e] Performing ProcessEventsJob (Job ID: afc9bf17-1a9f-41d5-8ab7-42c05567954e) from Async(default) enqueued at 2020-09-10T01:14:46Z with arguments: 383
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   [1m[36mWebhookEvent Load (1.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 383], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   [1m[36mWebhookEvent Update (1.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 01:14:46.625421"], ["id", 383]]
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   [1m[36mWebhookEvent Update (1.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 01:14:46.658126"], ["id", 383]]
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   [1m[35m (10.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [afc9bf17-1a9f-41d5-8ab7-42c05567954e] Performed ProcessEventsJob (Job ID: afc9bf17-1a9f-41d5-8ab7-42c05567954e) from Async(default) in 111.01ms
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7411833289957498605)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateStripeReports (20200909163548)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.7ms)[0m  [1m[35mDROP TABLE "stripe_reports"[0m
  [1m[36mprimary::SchemaMigration Destroy (11.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200909163548"]]
  [1m[35m (25.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(7411833289957498605)[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 16], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (1.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mPledge Load (1.3ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7411833289957498605)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateStripeReports (20200909163548)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (116.6ms)[0m  [1m[35mCREATE TABLE "stripe_reports" ("id" bigserial primary key, "date" character varying, "user_id" bigint NOT NULL, "pledge_id" bigint, "donation_id" bigint, "amount" integer, "fee" integer, "net" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1e8057a630"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_404e859ad4"
FOREIGN KEY ("pledge_id")
  REFERENCES "pledges" ("id")
, CONSTRAINT "fk_rails_faa6486da2"
FOREIGN KEY ("donation_id")
  REFERENCES "donations" ("id")
)[0m
  [1m[35m (43.4ms)[0m  [1m[35mCREATE  INDEX  "index_stripe_reports_on_user_id" ON "stripe_reports"  ("user_id")[0m
  [1m[35m (37.0ms)[0m  [1m[35mCREATE  INDEX  "index_stripe_reports_on_pledge_id" ON "stripe_reports"  ("pledge_id")[0m
  [1m[35m (61.3ms)[0m  [1m[35mCREATE  INDEX  "index_stripe_reports_on_donation_id" ON "stripe_reports"  ("donation_id")[0m
  [1m[36mprimary::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200909163548"]]
  [1m[35m (10.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_advisory_unlock(7411833289957498605)[0m
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mStripeReport Load (1.7ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" ORDER BY "stripe_reports"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7411833289957498605)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateStripeReports (20200909163548)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE "stripe_reports"[0m
  [1m[36mprimary::SchemaMigration Destroy (0.5ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20200909163548"]]
  [1m[35m (31.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(7411833289957498605)[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(7411833289957498605)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateStripeReports (20200909163548)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (51.9ms)[0m  [1m[35mCREATE TABLE "stripe_reports" ("id" bigserial primary key, "user_id" bigint NOT NULL, "pledge_id" bigint, "donation_id" bigint, "amount" integer, "fee" integer, "net" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1e8057a630"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_404e859ad4"
FOREIGN KEY ("pledge_id")
  REFERENCES "pledges" ("id")
, CONSTRAINT "fk_rails_faa6486da2"
FOREIGN KEY ("donation_id")
  REFERENCES "donations" ("id")
)[0m
  [1m[35m (31.1ms)[0m  [1m[35mCREATE  INDEX  "index_stripe_reports_on_user_id" ON "stripe_reports"  ("user_id")[0m
  [1m[35m (35.6ms)[0m  [1m[35mCREATE  INDEX  "index_stripe_reports_on_pledge_id" ON "stripe_reports"  ("pledge_id")[0m
  [1m[35m (36.6ms)[0m  [1m[35mCREATE  INDEX  "index_stripe_reports_on_donation_id" ON "stripe_reports"  ("donation_id")[0m
  [1m[36mprimary::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200909163548"]]
  [1m[35m (17.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT pg_advisory_unlock(7411833289957498605)[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-09 21:46:21 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPergHiibShxDkjAZCtCpzI", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599702380, "data"=>{"object"=>{"object"=>"balance", "available"=>[{"amount"=>0, "currency"=>"usd", "source_types"=>{"card"=>0}}], "instant_available"=>[{"amount"=>0, "currency"=>"usd", "source_types"=>{"card"=>0}}], "livemode"=>false, "pending"=>[{"amount"=>58984, "currency"=>"usd", "source_types"=>{"card"=>58984}}]}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"balance.available", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPergHiibShxDkjAZCtCpzI", "data"=>{"object"=>{"object"=>"balance", "available"=>[{"amount"=>0, "currency"=>"usd", "source_types"=>{"card"=>0}}], "instant_available"=>[{"amount"=>0, "currency"=>"usd", "source_types"=>{"card"=>0}}], "livemode"=>false, "pending"=>[{"amount"=>58984, "currency"=>"usd", "source_types"=>{"card"=>58984}}]}}}}
  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPergHiibShxDkjAZCtCpzI"], ["LIMIT", 1]]
  â†³ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.5ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPergHiibShxDkjAZCtCpzI"], ["data", "{\"id\":\"evt_1HPergHiibShxDkjAZCtCpzI\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599702380,\"data\":{\"object\":{\"object\":\"balance\",\"available\":[{\"amount\":0,\"currency\":\"usd\",\"source_types\":{\"card\":0}}],\"instant_available\":[{\"amount\":0,\"currency\":\"usd\",\"source_types\":{\"card\":0}}],\"livemode\":false,\"pending\":[{\"amount\":58984,\"currency\":\"usd\",\"source_types\":{\"card\":58984}}]}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"balance.available\",\"webhook_event\":{\"id\":\"evt_1HPergHiibShxDkjAZCtCpzI\",\"data\":{\"object\":{\"object\":\"balance\",\"available\":[{\"amount\":0,\"currency\":\"usd\",\"source_types\":{\"card\":0}}],\"instant_available\":[{\"amount\":0,\"currency\":\"usd\",\"source_types\":{\"card\":0}}],\"livemode\":false,\"pending\":[{\"amount\":58984,\"currency\":\"usd\",\"source_types\":{\"card\":58984}}]}}}}"], ["created_at", "2020-09-10 01:46:22.024032"], ["updated_at", "2020-09-10 01:46:22.024032"]]
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (26.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 762245ac-a096-491e-89c1-1a1901a1edf1) to Async(default) with arguments: 384
Completed 200 OK in 52ms (Views: 0.5ms | ActiveRecord: 27.4ms | Allocations: 21048)


[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1] Performing ProcessEventsJob (Job ID: 762245ac-a096-491e-89c1-1a1901a1edf1) from Async(default) enqueued at 2020-09-10T01:46:22Z with arguments: 384
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 384], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   â†³ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 01:46:22.276622"], ["id", 384]]
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   [1m[35m (20.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   â†³ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 01:46:22.304346"], ["id", 384]]
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   [1m[35m (4.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1]   â†³ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [762245ac-a096-491e-89c1-1a1901a1edf1] Performed ProcessEventsJob (Job ID: 762245ac-a096-491e-89c1-1a1901a1edf1) from Async(default) in 53.73ms
