  [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (0.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 268], ["LIMIT", 1]]
  [1m[36mStripeReport Load (0.9ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" ORDER BY "stripe_reports"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 12:14:19 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mRole Load (261.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 312]]
  ↳ app/controllers/stripe_reports_controller.rb:29:in `admin_only'
Redirected to http://localhost:5000/
Filter chain halted as :admin_only rendered or redirected
Completed 302 Found in 365ms (ActiveRecord: 269.6ms | Allocations: 14868)


Started GET "/" for 127.0.0.1 at 2020-09-10 12:14:19 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.8ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 4.4ms | Allocations: 4362)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1264)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 312], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 8.8ms | Allocations: 4772)
  Rendered layouts/_footer.html.erb (Duration: 1.5ms | Allocations: 342)
Completed 200 OK in 76ms (Views: 28.3ms | ActiveRecord: 9.5ms | Allocations: 39251)


Started DELETE "/logout" for 127.0.0.1 at 2020-09-10 12:14:29 -0400
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"FQ3UzVXLQN+w3gJn4PEWt/tFfmskN5ud5W/B7qE8Ed4yZcr+YdONHtTXdCt9vrNSdwTNivP/q4jvMAHW3QMZUQ=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
Redirected to http://localhost:5000/
Completed 302 Found in 8ms (ActiveRecord: 0.3ms | Allocations: 5502)


Started GET "/" for 127.0.0.1 at 2020-09-10 12:14:29 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.6ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.3ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 2.9ms | Allocations: 3113)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1263)
  Rendered layouts/_navbar.html.erb (Duration: 2.1ms | Allocations: 618)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 342)
Completed 200 OK in 30ms (Views: 12.9ms | ActiveRecord: 1.9ms | Allocations: 23710)


Started GET "/sign_in" for 127.0.0.1 at 2020-09-10 12:14:32 -0400
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 2.0ms | Allocations: 599)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 34.0ms | Allocations: 3831)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1266)
  Rendered layouts/_navbar.html.erb (Duration: 1.1ms | Allocations: 596)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | Allocations: 341)
Completed 200 OK in 58ms (Views: 55.3ms | ActiveRecord: 0.0ms | Allocations: 15419)


Started POST "/sign_in" for 127.0.0.1 at 2020-09-10 12:14:42 -0400
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"jIu0kjUyPnqioXFSTVH0C1Dk2pYnJT0jkYOtSdQ9v/BMgcctUbuaElT44qUN/nNYG6CQPgz63wjMUDT3NA+pvA==", "user"=>{"login"=>"thomas connolly", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (lower(username) = 'thomas connolly' OR lower(email) = 'thomas connolly') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/models/user.rb:118:in `find_for_database_authentication'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2020-09-10 16:14:43.099611"], ["last_sign_in_at", "2020-09-10 02:17:09.361671"], ["sign_in_count", 582], ["updated_at", "2020-09-10 16:14:43.099894"], ["id", 16]]
  [1m[35m (82.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:5000/
Completed 302 Found in 216ms (ActiveRecord: 84.0ms | Allocations: 14178)


Started GET "/" for 127.0.0.1 at 2020-09-10 12:14:43 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.3ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 2.9ms | Allocations: 3128)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1264)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 8.5ms | Allocations: 4750)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 343)
Completed 200 OK in 35ms (Views: 18.5ms | ActiveRecord: 2.4ms | Allocations: 27873)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 12:14:57 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:29:in `admin_only'
Completed 500  in 33ms (ActiveRecord: 1.4ms | Allocations: 17487)



NoMethodError - undefined method `all_stripe_reports' for #<StripeReportsController:0x00007f92406571e0>:

Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 12:14:57 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 12:16:13 -0400
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 12:48:07 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPswMHiibShxDkjWnGqrioh", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599756486, "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>0, "amount_remaining"=>10640, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "billing_reason"=>"subscription_cycle", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>nil, "footer"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599760086, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPswMHiibShxDkjWnGqrioh", "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>0, "amount_remaining"=>10640, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "billing_reason"=>"subscription_cycle", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>nil, "footer"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599760086, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (2.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPswMHiibShxDkjWnGqrioh"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (3.0ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPswMHiibShxDkjWnGqrioh"], ["data", "{\"id\":\"evt_1HPswMHiibShxDkjWnGqrioh\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599756486,\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":0,\"amount_remaining\":10640,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"billing_reason\":\"subscription_cycle\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":null,\"footer\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599760086,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.created\",\"webhook_event\":{\"id\":\"evt_1HPswMHiibShxDkjWnGqrioh\",\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":0,\"amount_remaining\":10640,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"billing_reason\":\"subscription_cycle\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":null,\"footer\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599760086,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-10 16:48:07.258445"], ["updated_at", "2020-09-10 16:48:07.258445"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (15.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 6895a7f6-c580-458c-8408-0bd112348032) to Async(default) with arguments: 402
Completed 200 OK in 104ms (Views: 1.2ms | ActiveRecord: 22.2ms | Allocations: 42074)


[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032] Performing ProcessEventsJob (Job ID: 6895a7f6-c580-458c-8408-0bd112348032) from Async(default) enqueued at 2020-09-10T16:48:07Z with arguments: 402
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 402], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 16:48:07.349223"], ["id", 402]]
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 16:48:07.369989"], ["id", 402]]
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [6895a7f6-c580-458c-8408-0bd112348032] Performed ProcessEventsJob (Job ID: 6895a7f6-c580-458c-8408-0bd112348032) from Async(default) in 52.11ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 12:48:07 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPswNHiibShxDkj0FXpHOZ6", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599756487, "data"=>{"object"=>{"id"=>"sub_EhLP4kI8AB0j92", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1552582082, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1552582082, "current_period_end"=>1600361282, "current_period_start"=>1599756482, "customer"=>"cus_EhLP4SGu6xHErI", "days_until_due"=>nil, "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_EhLPmaPmuSmTcv", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1552582083, "metadata"=>{}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_EhLP4kI8AB0j92"}, "latest_invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>1, "schedule"=>nil, "start_date"=>1552582082, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, "previous_attributes"=>{"current_period_end"=>1599756482, "current_period_start"=>1599151682, "latest_invoice"=>"in_1HNLc9HiibShxDkjkM13sqEe"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.subscription.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPswNHiibShxDkj0FXpHOZ6", "data"=>{"object"=>{"id"=>"sub_EhLP4kI8AB0j92", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1552582082, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1552582082, "current_period_end"=>1600361282, "current_period_start"=>1599756482, "customer"=>"cus_EhLP4SGu6xHErI", "days_until_due"=>nil, "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_EhLPmaPmuSmTcv", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1552582083, "metadata"=>{}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_EhLP4kI8AB0j92"}, "latest_invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>1, "schedule"=>nil, "start_date"=>1552582082, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, "previous_attributes"=>{"current_period_end"=>1599756482, "current_period_start"=>1599151682, "latest_invoice"=>"in_1HNLc9HiibShxDkjkM13sqEe"}}}}
  [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPswNHiibShxDkj0FXpHOZ6"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPswNHiibShxDkj0FXpHOZ6"], ["data", "{\"id\":\"evt_1HPswNHiibShxDkj0FXpHOZ6\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599756487,\"data\":{\"object\":{\"id\":\"sub_EhLP4kI8AB0j92\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1552582082,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1552582082,\"current_period_end\":1600361282,\"current_period_start\":1599756482,\"customer\":\"cus_EhLP4SGu6xHErI\",\"days_until_due\":null,\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_EhLPmaPmuSmTcv\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1552582083,\"metadata\":{},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_EhLP4kI8AB0j92\"},\"latest_invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":1,\"schedule\":null,\"start_date\":1552582082,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},\"previous_attributes\":{\"current_period_end\":1599756482,\"current_period_start\":1599151682,\"latest_invoice\":\"in_1HNLc9HiibShxDkjkM13sqEe\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.subscription.updated\",\"webhook_event\":{\"id\":\"evt_1HPswNHiibShxDkj0FXpHOZ6\",\"data\":{\"object\":{\"id\":\"sub_EhLP4kI8AB0j92\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1552582082,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1552582082,\"current_period_end\":1600361282,\"current_period_start\":1599756482,\"customer\":\"cus_EhLP4SGu6xHErI\",\"days_until_due\":null,\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_EhLPmaPmuSmTcv\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1552582083,\"metadata\":{},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_EhLP4kI8AB0j92\"},\"latest_invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":1,\"schedule\":null,\"start_date\":1552582082,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},\"previous_attributes\":{\"current_period_end\":1599756482,\"current_period_start\":1599151682,\"latest_invoice\":\"in_1HNLc9HiibShxDkjkM13sqEe\"}}}}"], ["created_at", "2020-09-10 16:48:07.406058"], ["updated_at", "2020-09-10 16:48:07.406058"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 8b6df3b2-2941-4d1a-baf1-394cbe08ec7f) to Async(default) with arguments: 403
Completed 200 OK in 47ms (Views: 1.4ms | ActiveRecord: 8.5ms | Allocations: 38269)


[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f] Performing ProcessEventsJob (Job ID: 8b6df3b2-2941-4d1a-baf1-394cbe08ec7f) from Async(default) enqueued at 2020-09-10T16:48:07Z with arguments: 403
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 403], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 16:48:07.450911"], ["id", 403]]
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   [1m[35m (8.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 16:48:07.470738"], ["id", 403]]
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   [1m[35m (10.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [8b6df3b2-2941-4d1a-baf1-394cbe08ec7f] Performed ProcessEventsJob (Job ID: 8b6df3b2-2941-4d1a-baf1-394cbe08ec7f) from Async(default) in 40.12ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 12:49:11 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPsxPHiibShxDkjsPlHFmT4", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599756551, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>0, "amount_remaining"=>10640, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600361282, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_c1bcf5e903b7a4", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600966082, "start"=>1600361282}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_EhLP4SGu6xHErI&subscription=sub_EhLP4kI8AB0j92"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600364882, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600361282, "period_start"=>1599756482, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPsxPHiibShxDkjsPlHFmT4", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>0, "amount_remaining"=>10640, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600361282, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_c1bcf5e903b7a4", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600966082, "start"=>1600361282}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_EhLP4SGu6xHErI&subscription=sub_EhLP4kI8AB0j92"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600364882, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600361282, "period_start"=>1599756482, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (0.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPsxPHiibShxDkjsPlHFmT4"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.6ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPsxPHiibShxDkjsPlHFmT4"], ["data", "{\"id\":\"evt_1HPsxPHiibShxDkjsPlHFmT4\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599756551,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":0,\"amount_remaining\":10640,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600361282,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_c1bcf5e903b7a4\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600966082,\"start\":1600361282},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_EhLP4SGu6xHErI\\u0026subscription=sub_EhLP4kI8AB0j92\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600364882,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600361282,\"period_start\":1599756482,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HPsxPHiibShxDkjsPlHFmT4\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":0,\"amount_remaining\":10640,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600361282,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_c1bcf5e903b7a4\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600966082,\"start\":1600361282},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_EhLP4SGu6xHErI\\u0026subscription=sub_EhLP4kI8AB0j92\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600364882,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600361282,\"period_start\":1599756482,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-10 16:49:11.617975"], ["updated_at", "2020-09-10 16:49:11.617975"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (43.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 04fd88fe-508e-451b-b4ea-870748cc6578) to Async(default) with arguments: 404
Completed 200 OK in 110ms (Views: 7.7ms | ActiveRecord: 44.8ms | Allocations: 40619)


[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578] Performing ProcessEventsJob (Job ID: 04fd88fe-508e-451b-b4ea-870748cc6578) from Async(default) enqueued at 2020-09-10T16:49:11Z with arguments: 404
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 404], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 16:49:11.723640"], ["id", 404]]
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   [1m[35m (4.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 16:49:11.740886"], ["id", 404]]
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [04fd88fe-508e-451b-b4ea-870748cc6578] Performed ProcessEventsJob (Job ID: 04fd88fe-508e-451b-b4ea-870748cc6578) from Async(default) in 36.61ms
Started POST "/__better_errors/bcc14a048750b019/eval" for 127.0.0.1 at 2020-09-10 13:14:39 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:14:52 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:00 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:06 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:14 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:19 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:24 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:29 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:34 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:37 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:41 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:49 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:15:54 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:01 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:10 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:19 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:23 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:30 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:38 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:44 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:49 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:52 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:16:56 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:17:12 -0400
Started POST "/__better_errors/bcc14a048750b019/variables" for 127.0.0.1 at 2020-09-10 13:17:16 -0400
  [1m[36mStripeReport Load (0.3ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" WHERE "stripe_reports"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 312], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mDonation Load (1.0ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 268], ["LIMIT", 1]]
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 13:50:57 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPtv8HiibShxDkjIaV5xmPZ", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599760254, "data"=>{"object"=>{"id"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "object"=>"payment_intent", "amount"=>10640, "amount_capturable"=>0, "amount_received"=>10640, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "object"=>"charge", "amount"=>10640, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPtv8HiibShxDkjr2PS2TFl", "billing_details"=>{"address"=>{"city"=>nil, "country"=>nil, "line1"=>nil, "line2"=>nil, "postal_code"=>"45444", "state"=>nil}, "email"=>nil, "name"=>nil, "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599760254, "currency"=>"usd", "customer"=>"cus_EhLP4SGu6xHErI", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>57, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "payment_method"=>"card_1EDwirHiibShxDkjvKkpYKhi", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPtv8HiibShxDkjXqAeQPfk/rcpt_HztiUg534KAbORbJAEvnqoWs6lcdxum", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPtv8HiibShxDkjXqAeQPfk/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>{"id"=>"card_1EDwirHiibShxDkjvKkpYKhi", "object"=>"card", "address_city"=>nil, "address_country"=>nil, "address_line1"=>nil, "address_line1_check"=>nil, "address_line2"=>nil, "address_state"=>nil, "address_zip"=>"45444", "address_zip_check"=>"pass", "brand"=>"Visa", "country"=>"US", "customer"=>"cus_EhLP4SGu6xHErI", "cvc_check"=>nil, "dynamic_last4"=>nil, "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "last4"=>"4242", "metadata"=>{}, "name"=>nil, "tokenization_method"=>nil}, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPtv7HiibShxDkjz5HSm9lQ"}, "client_secret"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ_secret_yt7zqPT87OOjQM4PUAGSTOu5o", "confirmation_method"=>"automatic", "created"=>1599760253, "currency"=>"usd", "customer"=>"cus_EhLP4SGu6xHErI", "description"=>"Subscription update", "invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>"card_1EDwirHiibShxDkjvKkpYKhi", "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HPswMHiibShxDkjn8LQZfYW-initial_attempt-01510d6c6bd0abc44"}, "type"=>"payment_intent.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPtv8HiibShxDkjIaV5xmPZ", "data"=>{"object"=>{"id"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "object"=>"payment_intent", "amount"=>10640, "amount_capturable"=>0, "amount_received"=>10640, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[{"id"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "object"=>"charge", "amount"=>10640, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPtv8HiibShxDkjr2PS2TFl", "billing_details"=>{"address"=>{"city"=>nil, "country"=>nil, "line1"=>nil, "line2"=>nil, "postal_code"=>"45444", "state"=>nil}, "email"=>nil, "name"=>nil, "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599760254, "currency"=>"usd", "customer"=>"cus_EhLP4SGu6xHErI", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>57, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "payment_method"=>"card_1EDwirHiibShxDkjvKkpYKhi", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPtv8HiibShxDkjXqAeQPfk/rcpt_HztiUg534KAbORbJAEvnqoWs6lcdxum", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPtv8HiibShxDkjXqAeQPfk/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>{"id"=>"card_1EDwirHiibShxDkjvKkpYKhi", "object"=>"card", "address_city"=>nil, "address_country"=>nil, "address_line1"=>nil, "address_line1_check"=>nil, "address_line2"=>nil, "address_state"=>nil, "address_zip"=>"45444", "address_zip_check"=>"pass", "brand"=>"Visa", "country"=>"US", "customer"=>"cus_EhLP4SGu6xHErI", "cvc_check"=>nil, "dynamic_last4"=>nil, "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "last4"=>"4242", "metadata"=>{}, "name"=>nil, "tokenization_method"=>nil}, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/charges?payment_intent=pi_1HPtv7HiibShxDkjz5HSm9lQ"}, "client_secret"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ_secret_yt7zqPT87OOjQM4PUAGSTOu5o", "confirmation_method"=>"automatic", "created"=>1599760253, "currency"=>"usd", "customer"=>"cus_EhLP4SGu6xHErI", "description"=>"Subscription update", "invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>"card_1EDwirHiibShxDkjvKkpYKhi", "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPtv8HiibShxDkjIaV5xmPZ"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPtv8HiibShxDkjIaV5xmPZ"], ["data", "{\"id\":\"evt_1HPtv8HiibShxDkjIaV5xmPZ\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599760254,\"data\":{\"object\":{\"id\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"object\":\"payment_intent\",\"amount\":10640,\"amount_capturable\":0,\"amount_received\":10640,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"object\":\"charge\",\"amount\":10640,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPtv8HiibShxDkjr2PS2TFl\",\"billing_details\":{\"address\":{\"city\":null,\"country\":null,\"line1\":null,\"line2\":null,\"postal_code\":\"45444\",\"state\":null},\"email\":null,\"name\":null,\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599760254,\"currency\":\"usd\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":57,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"payment_method\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPtv8HiibShxDkjXqAeQPfk/rcpt_HztiUg534KAbORbJAEvnqoWs6lcdxum\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPtv8HiibShxDkjXqAeQPfk/refunds\"},\"review\":null,\"shipping\":null,\"source\":{\"id\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"object\":\"card\",\"address_city\":null,\"address_country\":null,\"address_line1\":null,\"address_line1_check\":null,\"address_line2\":null,\"address_state\":null,\"address_zip\":\"45444\",\"address_zip_check\":\"pass\",\"brand\":\"Visa\",\"country\":\"US\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"cvc_check\":null,\"dynamic_last4\":null,\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"last4\":\"4242\",\"metadata\":{},\"name\":null,\"tokenization_method\":null},\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPtv7HiibShxDkjz5HSm9lQ\"},\"client_secret\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ_secret_yt7zqPT87OOjQM4PUAGSTOu5o\",\"confirmation_method\":\"automatic\",\"created\":1599760253,\"currency\":\"usd\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HPswMHiibShxDkjn8LQZfYW-initial_attempt-01510d6c6bd0abc44\"},\"type\":\"payment_intent.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPtv8HiibShxDkjIaV5xmPZ\",\"data\":{\"object\":{\"id\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"object\":\"payment_intent\",\"amount\":10640,\"amount_capturable\":0,\"amount_received\":10640,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[{\"id\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"object\":\"charge\",\"amount\":10640,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPtv8HiibShxDkjr2PS2TFl\",\"billing_details\":{\"address\":{\"city\":null,\"country\":null,\"line1\":null,\"line2\":null,\"postal_code\":\"45444\",\"state\":null},\"email\":null,\"name\":null,\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599760254,\"currency\":\"usd\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":57,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"payment_method\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPtv8HiibShxDkjXqAeQPfk/rcpt_HztiUg534KAbORbJAEvnqoWs6lcdxum\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPtv8HiibShxDkjXqAeQPfk/refunds\"},\"review\":null,\"shipping\":null,\"source\":{\"id\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"object\":\"card\",\"address_city\":null,\"address_country\":null,\"address_line1\":null,\"address_line1_check\":null,\"address_line2\":null,\"address_state\":null,\"address_zip\":\"45444\",\"address_zip_check\":\"pass\",\"brand\":\"Visa\",\"country\":\"US\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"cvc_check\":null,\"dynamic_last4\":null,\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"last4\":\"4242\",\"metadata\":{},\"name\":null,\"tokenization_method\":null},\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/charges?payment_intent=pi_1HPtv7HiibShxDkjz5HSm9lQ\"},\"client_secret\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ_secret_yt7zqPT87OOjQM4PUAGSTOu5o\",\"confirmation_method\":\"automatic\",\"created\":1599760253,\"currency\":\"usd\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-10 17:50:57.140046"], ["updated_at", "2020-09-10 17:50:57.140046"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (37.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 907692d4-e871-42bc-9667-520bb889038a) to Async(default) with arguments: 405
Completed 200 OK in 87ms (Views: 1.4ms | ActiveRecord: 39.8ms | Allocations: 47398)


[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a] Performing ProcessEventsJob (Job ID: 907692d4-e871-42bc-9667-520bb889038a) from Async(default) enqueued at 2020-09-10T17:50:57Z with arguments: 405
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   [1m[36mWebhookEvent Load (0.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 405], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   [1m[36mWebhookEvent Update (0.7ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 17:50:57.234176"], ["id", 405]]
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 17:50:57.271548"], ["id", 405]]
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [907692d4-e871-42bc-9667-520bb889038a] Performed ProcessEventsJob (Job ID: 907692d4-e871-42bc-9667-520bb889038a) from Async(default) in 70.91ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 13:50:58 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPtv9HiibShxDkjRrbf8zyR", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599760254, "data"=>{"object"=>{"id"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "object"=>"charge", "amount"=>10640, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPtv8HiibShxDkjr2PS2TFl", "billing_details"=>{"address"=>{"city"=>nil, "country"=>nil, "line1"=>nil, "line2"=>nil, "postal_code"=>"45444", "state"=>nil}, "email"=>nil, "name"=>nil, "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599760254, "currency"=>"usd", "customer"=>"cus_EhLP4SGu6xHErI", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>57, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "payment_method"=>"card_1EDwirHiibShxDkjvKkpYKhi", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPtv8HiibShxDkjXqAeQPfk/rcpt_HztiUg534KAbORbJAEvnqoWs6lcdxum", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPtv8HiibShxDkjXqAeQPfk/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>{"id"=>"card_1EDwirHiibShxDkjvKkpYKhi", "object"=>"card", "address_city"=>nil, "address_country"=>nil, "address_line1"=>nil, "address_line1_check"=>nil, "address_line2"=>nil, "address_state"=>nil, "address_zip"=>"45444", "address_zip_check"=>"pass", "brand"=>"Visa", "country"=>"US", "customer"=>"cus_EhLP4SGu6xHErI", "cvc_check"=>nil, "dynamic_last4"=>nil, "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "last4"=>"4242", "metadata"=>{}, "name"=>nil, "tokenization_method"=>nil}, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>"in_1HPswMHiibShxDkjn8LQZfYW-initial_attempt-01510d6c6bd0abc44"}, "type"=>"charge.succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPtv9HiibShxDkjRrbf8zyR", "data"=>{"object"=>{"id"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "object"=>"charge", "amount"=>10640, "amount_refunded"=>0, "application"=>nil, "application_fee"=>nil, "application_fee_amount"=>nil, "balance_transaction"=>"txn_1HPtv8HiibShxDkjr2PS2TFl", "billing_details"=>{"address"=>{"city"=>nil, "country"=>nil, "line1"=>nil, "line2"=>nil, "postal_code"=>"45444", "state"=>nil}, "email"=>nil, "name"=>nil, "phone"=>nil}, "calculated_statement_descriptor"=>"SAINTPAULSNAPLES.ORG", "captured"=>true, "created"=>1599760254, "currency"=>"usd", "customer"=>"cus_EhLP4SGu6xHErI", "description"=>"Subscription update", "destination"=>nil, "dispute"=>nil, "disputed"=>false, "failure_code"=>nil, "failure_message"=>nil, "fraud_details"=>{}, "invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "livemode"=>false, "metadata"=>{}, "on_behalf_of"=>nil, "order"=>nil, "outcome"=>{"network_status"=>"approved_by_network", "reason"=>nil, "risk_level"=>"normal", "risk_score"=>57, "seller_message"=>"Payment complete.", "type"=>"authorized"}, "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "payment_method"=>"card_1EDwirHiibShxDkjvKkpYKhi", "payment_method_details"=>{"card"=>{"brand"=>"visa", "checks"=>{"address_line1_check"=>nil, "address_postal_code_check"=>"pass", "cvc_check"=>nil}, "country"=>"US", "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "installments"=>nil, "last4"=>"4242", "network"=>"visa", "three_d_secure"=>nil, "wallet"=>nil}, "type"=>"card"}, "receipt_email"=>"tom.connolly@comcast.net", "receipt_number"=>nil, "receipt_url"=>"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPtv8HiibShxDkjXqAeQPfk/rcpt_HztiUg534KAbORbJAEvnqoWs6lcdxum", "refunded"=>false, "refunds"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges/ch_1HPtv8HiibShxDkjXqAeQPfk/refunds"}, "review"=>nil, "shipping"=>nil, "source"=>{"id"=>"card_1EDwirHiibShxDkjvKkpYKhi", "object"=>"card", "address_city"=>nil, "address_country"=>nil, "address_line1"=>nil, "address_line1_check"=>nil, "address_line2"=>nil, "address_state"=>nil, "address_zip"=>"45444", "address_zip_check"=>"pass", "brand"=>"Visa", "country"=>"US", "customer"=>"cus_EhLP4SGu6xHErI", "cvc_check"=>nil, "dynamic_last4"=>nil, "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "last4"=>"4242", "metadata"=>{}, "name"=>nil, "tokenization_method"=>nil}, "source_transfer"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"succeeded", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (1.3ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjRrbf8zyR"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjRrbf8zyR"], ["data", "{\"id\":\"evt_1HPtv9HiibShxDkjRrbf8zyR\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599760254,\"data\":{\"object\":{\"id\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"object\":\"charge\",\"amount\":10640,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPtv8HiibShxDkjr2PS2TFl\",\"billing_details\":{\"address\":{\"city\":null,\"country\":null,\"line1\":null,\"line2\":null,\"postal_code\":\"45444\",\"state\":null},\"email\":null,\"name\":null,\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599760254,\"currency\":\"usd\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":57,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"payment_method\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPtv8HiibShxDkjXqAeQPfk/rcpt_HztiUg534KAbORbJAEvnqoWs6lcdxum\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPtv8HiibShxDkjXqAeQPfk/refunds\"},\"review\":null,\"shipping\":null,\"source\":{\"id\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"object\":\"card\",\"address_city\":null,\"address_country\":null,\"address_line1\":null,\"address_line1_check\":null,\"address_line2\":null,\"address_state\":null,\"address_zip\":\"45444\",\"address_zip_check\":\"pass\",\"brand\":\"Visa\",\"country\":\"US\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"cvc_check\":null,\"dynamic_last4\":null,\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"last4\":\"4242\",\"metadata\":{},\"name\":null,\"tokenization_method\":null},\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":\"in_1HPswMHiibShxDkjn8LQZfYW-initial_attempt-01510d6c6bd0abc44\"},\"type\":\"charge.succeeded\",\"webhook_event\":{\"id\":\"evt_1HPtv9HiibShxDkjRrbf8zyR\",\"data\":{\"object\":{\"id\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"object\":\"charge\",\"amount\":10640,\"amount_refunded\":0,\"application\":null,\"application_fee\":null,\"application_fee_amount\":null,\"balance_transaction\":\"txn_1HPtv8HiibShxDkjr2PS2TFl\",\"billing_details\":{\"address\":{\"city\":null,\"country\":null,\"line1\":null,\"line2\":null,\"postal_code\":\"45444\",\"state\":null},\"email\":null,\"name\":null,\"phone\":null},\"calculated_statement_descriptor\":\"SAINTPAULSNAPLES.ORG\",\"captured\":true,\"created\":1599760254,\"currency\":\"usd\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"description\":\"Subscription update\",\"destination\":null,\"dispute\":null,\"disputed\":false,\"failure_code\":null,\"failure_message\":null,\"fraud_details\":{},\"invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"livemode\":false,\"metadata\":{},\"on_behalf_of\":null,\"order\":null,\"outcome\":{\"network_status\":\"approved_by_network\",\"reason\":null,\"risk_level\":\"normal\",\"risk_score\":57,\"seller_message\":\"Payment complete.\",\"type\":\"authorized\"},\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"payment_method\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"payment_method_details\":{\"card\":{\"brand\":\"visa\",\"checks\":{\"address_line1_check\":null,\"address_postal_code_check\":\"pass\",\"cvc_check\":null},\"country\":\"US\",\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"installments\":null,\"last4\":\"4242\",\"network\":\"visa\",\"three_d_secure\":null,\"wallet\":null},\"type\":\"card\"},\"receipt_email\":\"tom.connolly@comcast.net\",\"receipt_number\":null,\"receipt_url\":\"https://pay.stripe.com/receipts/acct_15tUEZHiibShxDkj/ch_1HPtv8HiibShxDkjXqAeQPfk/rcpt_HztiUg534KAbORbJAEvnqoWs6lcdxum\",\"refunded\":false,\"refunds\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges/ch_1HPtv8HiibShxDkjXqAeQPfk/refunds\"},\"review\":null,\"shipping\":null,\"source\":{\"id\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"object\":\"card\",\"address_city\":null,\"address_country\":null,\"address_line1\":null,\"address_line1_check\":null,\"address_line2\":null,\"address_state\":null,\"address_zip\":\"45444\",\"address_zip_check\":\"pass\",\"brand\":\"Visa\",\"country\":\"US\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"cvc_check\":null,\"dynamic_last4\":null,\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"last4\":\"4242\",\"metadata\":{},\"name\":null,\"tokenization_method\":null},\"source_transfer\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"succeeded\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-10 17:50:58.202261"], ["updated_at", "2020-09-10 17:50:58.202261"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (33.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: ca7e4063-2f6e-4178-89f6-7745ddec821e) to Async(default) with arguments: 406
Completed 200 OK in 107ms (Views: 7.0ms | ActiveRecord: 36.4ms | Allocations: 36005)


[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e] Performing ProcessEventsJob (Job ID: ca7e4063-2f6e-4178-89f6-7745ddec821e) from Async(default) enqueued at 2020-09-10T17:50:58Z with arguments: 406
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 406], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 17:50:58.321303"], ["id", 406]]
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   [1m[35m (12.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 17:50:58.350989"], ["id", 406]]
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   [1m[35m (7.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [ca7e4063-2f6e-4178-89f6-7745ddec821e] Performed ProcessEventsJob (Job ID: ca7e4063-2f6e-4178-89f6-7745ddec821e) from Async(default) in 55.06ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 13:50:59 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPtv9HiibShxDkjJr6qPpnw", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599760255, "data"=>{"object"=>{"id"=>"cus_EhLP4SGu6xHErI", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1552582082, "currency"=>"usd", "default_source"=>"card_1EDwirHiibShxDkjvKkpYKhi", "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"tom.connolly@comcast.net", "invoice_prefix"=>"6515AB5", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>80, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[{"id"=>"card_1EDwirHiibShxDkjvKkpYKhi", "object"=>"card", "address_city"=>nil, "address_country"=>nil, "address_line1"=>nil, "address_line1_check"=>nil, "address_line2"=>nil, "address_state"=>nil, "address_zip"=>"45444", "address_zip_check"=>"pass", "brand"=>"Visa", "country"=>"US", "customer"=>"cus_EhLP4SGu6xHErI", "cvc_check"=>"pass", "dynamic_last4"=>nil, "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "last4"=>"4242", "metadata"=>{}, "name"=>nil, "tokenization_method"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_EhLP4SGu6xHErI/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_EhLP4kI8AB0j92", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1552582082, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1552582082, "current_period_end"=>1600361282, "current_period_start"=>1599756482, "customer"=>"cus_EhLP4SGu6xHErI", "days_until_due"=>nil, "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_EhLPmaPmuSmTcv", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1552582083, "metadata"=>{}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_EhLP4kI8AB0j92"}, "latest_invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>1, "schedule"=>nil, "start_date"=>1552582082, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_EhLP4SGu6xHErI/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_EhLP4SGu6xHErI/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>79}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPtv9HiibShxDkjJr6qPpnw", "data"=>{"object"=>{"id"=>"cus_EhLP4SGu6xHErI", "object"=>"customer", "address"=>nil, "balance"=>0, "created"=>1552582082, "currency"=>"usd", "default_source"=>"card_1EDwirHiibShxDkjvKkpYKhi", "delinquent"=>false, "description"=>nil, "discount"=>nil, "email"=>"tom.connolly@comcast.net", "invoice_prefix"=>"6515AB5", "invoice_settings"=>{"custom_fields"=>nil, "default_payment_method"=>nil, "footer"=>nil}, "livemode"=>false, "metadata"=>{}, "name"=>nil, "next_invoice_sequence"=>80, "phone"=>nil, "preferred_locales"=>[], "shipping"=>nil, "sources"=>{"object"=>"list", "data"=>[{"id"=>"card_1EDwirHiibShxDkjvKkpYKhi", "object"=>"card", "address_city"=>nil, "address_country"=>nil, "address_line1"=>nil, "address_line1_check"=>nil, "address_line2"=>nil, "address_state"=>nil, "address_zip"=>"45444", "address_zip_check"=>"pass", "brand"=>"Visa", "country"=>"US", "customer"=>"cus_EhLP4SGu6xHErI", "cvc_check"=>"pass", "dynamic_last4"=>nil, "exp_month"=>12, "exp_year"=>2021, "fingerprint"=>"WBTT0Pw5xbIt233E", "funding"=>"credit", "last4"=>"4242", "metadata"=>{}, "name"=>nil, "tokenization_method"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_EhLP4SGu6xHErI/sources"}, "subscriptions"=>{"object"=>"list", "data"=>[{"id"=>"sub_EhLP4kI8AB0j92", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1552582082, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1552582082, "current_period_end"=>1600361282, "current_period_start"=>1599756482, "customer"=>"cus_EhLP4SGu6xHErI", "days_until_due"=>nil, "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_EhLPmaPmuSmTcv", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1552582083, "metadata"=>{}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_EhLP4kI8AB0j92"}, "latest_invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>1, "schedule"=>nil, "start_date"=>1552582082, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/customers/cus_EhLP4SGu6xHErI/subscriptions"}, "tax_exempt"=>"none", "tax_ids"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/customers/cus_EhLP4SGu6xHErI/tax_ids"}}, "previous_attributes"=>{"next_invoice_sequence"=>79}}}}
  [1m[36mWebhookEvent Load (1.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjJr6qPpnw"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.2ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjJr6qPpnw"], ["data", "{\"id\":\"evt_1HPtv9HiibShxDkjJr6qPpnw\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599760255,\"data\":{\"object\":{\"id\":\"cus_EhLP4SGu6xHErI\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1552582082,\"currency\":\"usd\",\"default_source\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"tom.connolly@comcast.net\",\"invoice_prefix\":\"6515AB5\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":80,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[{\"id\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"object\":\"card\",\"address_city\":null,\"address_country\":null,\"address_line1\":null,\"address_line1_check\":null,\"address_line2\":null,\"address_state\":null,\"address_zip\":\"45444\",\"address_zip_check\":\"pass\",\"brand\":\"Visa\",\"country\":\"US\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"cvc_check\":\"pass\",\"dynamic_last4\":null,\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"last4\":\"4242\",\"metadata\":{},\"name\":null,\"tokenization_method\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_EhLP4SGu6xHErI/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_EhLP4kI8AB0j92\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1552582082,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1552582082,\"current_period_end\":1600361282,\"current_period_start\":1599756482,\"customer\":\"cus_EhLP4SGu6xHErI\",\"days_until_due\":null,\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_EhLPmaPmuSmTcv\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1552582083,\"metadata\":{},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_EhLP4kI8AB0j92\"},\"latest_invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":1,\"schedule\":null,\"start_date\":1552582082,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_EhLP4SGu6xHErI/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_EhLP4SGu6xHErI/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":79}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.updated\",\"webhook_event\":{\"id\":\"evt_1HPtv9HiibShxDkjJr6qPpnw\",\"data\":{\"object\":{\"id\":\"cus_EhLP4SGu6xHErI\",\"object\":\"customer\",\"address\":null,\"balance\":0,\"created\":1552582082,\"currency\":\"usd\",\"default_source\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"delinquent\":false,\"description\":null,\"discount\":null,\"email\":\"tom.connolly@comcast.net\",\"invoice_prefix\":\"6515AB5\",\"invoice_settings\":{\"custom_fields\":null,\"default_payment_method\":null,\"footer\":null},\"livemode\":false,\"metadata\":{},\"name\":null,\"next_invoice_sequence\":80,\"phone\":null,\"preferred_locales\":[],\"shipping\":null,\"sources\":{\"object\":\"list\",\"data\":[{\"id\":\"card_1EDwirHiibShxDkjvKkpYKhi\",\"object\":\"card\",\"address_city\":null,\"address_country\":null,\"address_line1\":null,\"address_line1_check\":null,\"address_line2\":null,\"address_state\":null,\"address_zip\":\"45444\",\"address_zip_check\":\"pass\",\"brand\":\"Visa\",\"country\":\"US\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"cvc_check\":\"pass\",\"dynamic_last4\":null,\"exp_month\":12,\"exp_year\":2021,\"fingerprint\":\"WBTT0Pw5xbIt233E\",\"funding\":\"credit\",\"last4\":\"4242\",\"metadata\":{},\"name\":null,\"tokenization_method\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_EhLP4SGu6xHErI/sources\"},\"subscriptions\":{\"object\":\"list\",\"data\":[{\"id\":\"sub_EhLP4kI8AB0j92\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1552582082,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1552582082,\"current_period_end\":1600361282,\"current_period_start\":1599756482,\"customer\":\"cus_EhLP4SGu6xHErI\",\"days_until_due\":null,\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_EhLPmaPmuSmTcv\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1552582083,\"metadata\":{},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_EhLP4kI8AB0j92\"},\"latest_invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":1,\"schedule\":null,\"start_date\":1552582082,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/customers/cus_EhLP4SGu6xHErI/subscriptions\"},\"tax_exempt\":\"none\",\"tax_ids\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/customers/cus_EhLP4SGu6xHErI/tax_ids\"}},\"previous_attributes\":{\"next_invoice_sequence\":79}}}}"], ["created_at", "2020-09-10 17:50:59.967706"], ["updated_at", "2020-09-10 17:50:59.967706"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (66.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 229c689e-aad9-4381-9c52-65de2197e7aa) to Async(default) with arguments: 407
Completed 200 OK in 176ms (Views: 1.5ms | ActiveRecord: 70.6ms | Allocations: 54517)


[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa] Performing ProcessEventsJob (Job ID: 229c689e-aad9-4381-9c52-65de2197e7aa) from Async(default) enqueued at 2020-09-10T17:51:00Z with arguments: 407
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   [1m[36mWebhookEvent Load (1.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 407], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   [1m[36mWebhookEvent Update (0.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 17:51:00.120766"], ["id", 407]]
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   [1m[35m (4.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   [1m[36mWebhookEvent Update (1.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 17:51:00.138872"], ["id", 407]]
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   [1m[35m (10.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [229c689e-aad9-4381-9c52-65de2197e7aa] Performed ProcessEventsJob (Job ID: 229c689e-aad9-4381-9c52-65de2197e7aa) from Async(default) in 47.94ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 13:51:00 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPtv9HiibShxDkjoXb4PmD1", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599760255, "data"=>{"object"=>{"id"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "object"=>"payment_intent", "amount"=>10640, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPtv7HiibShxDkjz5HSm9lQ"}, "client_secret"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ_secret_yt7zqPT87OOjQM4PUAGSTOu5o", "confirmation_method"=>"automatic", "created"=>1599760253, "currency"=>"usd", "customer"=>"cus_EhLP4SGu6xHErI", "description"=>"Subscription update", "invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPtv9HiibShxDkjoXb4PmD1", "data"=>{"object"=>{"id"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "object"=>"payment_intent", "amount"=>10640, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HPtv7HiibShxDkjz5HSm9lQ"}, "client_secret"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ_secret_yt7zqPT87OOjQM4PUAGSTOu5o", "confirmation_method"=>"automatic", "created"=>1599760253, "currency"=>"usd", "customer"=>"cus_EhLP4SGu6xHErI", "description"=>"Subscription update", "invoice"=>"in_1HPswMHiibShxDkjn8LQZfYW", "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjoXb4PmD1"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.4ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjoXb4PmD1"], ["data", "{\"id\":\"evt_1HPtv9HiibShxDkjoXb4PmD1\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599760255,\"data\":{\"object\":{\"id\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"object\":\"payment_intent\",\"amount\":10640,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPtv7HiibShxDkjz5HSm9lQ\"},\"client_secret\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ_secret_yt7zqPT87OOjQM4PUAGSTOu5o\",\"confirmation_method\":\"automatic\",\"created\":1599760253,\"currency\":\"usd\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HPtv9HiibShxDkjoXb4PmD1\",\"data\":{\"object\":{\"id\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"object\":\"payment_intent\",\"amount\":10640,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HPtv7HiibShxDkjz5HSm9lQ\"},\"client_secret\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ_secret_yt7zqPT87OOjQM4PUAGSTOu5o\",\"confirmation_method\":\"automatic\",\"created\":1599760253,\"currency\":\"usd\",\"customer\":\"cus_EhLP4SGu6xHErI\",\"description\":\"Subscription update\",\"invoice\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-10 17:51:00.644043"], ["updated_at", "2020-09-10 17:51:00.644043"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (8.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 2d08f129-a9e6-4974-8044-ee33c0571a2b) to Async(default) with arguments: 408
Completed 200 OK in 33ms (Views: 0.9ms | ActiveRecord: 10.0ms | Allocations: 20972)


[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b] Performing ProcessEventsJob (Job ID: 2d08f129-a9e6-4974-8044-ee33c0571a2b) from Async(default) enqueued at 2020-09-10T17:51:00Z with arguments: 408
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 408], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 17:51:00.682798"], ["id", 408]]
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 17:51:00.700738"], ["id", 408]]
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [2d08f129-a9e6-4974-8044-ee33c0571a2b] Performed ProcessEventsJob (Job ID: 2d08f129-a9e6-4974-8044-ee33c0571a2b) from Async(default) in 30.42ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 13:51:00 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPtv9HiibShxDkjL2P9pM5w", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599760255, "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>10640, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"6515AB5-0079", "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599760253, "marked_uncollectible_at"=>nil, "paid_at"=>1599760253, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599756487}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.paid", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPtv9HiibShxDkjL2P9pM5w", "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>10640, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"6515AB5-0079", "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599760253, "marked_uncollectible_at"=>nil, "paid_at"=>1599760253, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599756487}}}}
  [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjL2P9pM5w"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (0.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjL2P9pM5w"], ["data", "{\"id\":\"evt_1HPtv9HiibShxDkjL2P9pM5w\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599760255,\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":10640,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"6515AB5-0079\",\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599760253,\"marked_uncollectible_at\":null,\"paid_at\":1599760253,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599756487}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.paid\",\"webhook_event\":{\"id\":\"evt_1HPtv9HiibShxDkjL2P9pM5w\",\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":10640,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"6515AB5-0079\",\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599760253,\"marked_uncollectible_at\":null,\"paid_at\":1599760253,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599756487}}}}"], ["created_at", "2020-09-10 17:51:00.749058"], ["updated_at", "2020-09-10 17:51:00.749058"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (6.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 8943d41d-74eb-46b8-89c1-d5a15af1a97a) to Async(default) with arguments: 409
Completed 200 OK in 56ms (Views: 2.1ms | ActiveRecord: 8.2ms | Allocations: 41777)


[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a] Performing ProcessEventsJob (Job ID: 8943d41d-74eb-46b8-89c1-d5a15af1a97a) from Async(default) enqueued at 2020-09-10T17:51:00Z with arguments: 409
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 409], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 17:51:00.816079"], ["id", 409]]
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   ↳ app/jobs/process_events_job.rb:7:in `perform'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 13:51:00 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPtv9HiibShxDkjfENoYNVR", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599760255, "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>10640, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"6515AB5-0079", "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599760253, "marked_uncollectible_at"=>nil, "paid_at"=>1599760253, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599756487}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.payment_succeeded", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPtv9HiibShxDkjfENoYNVR", "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>10640, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"6515AB5-0079", "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599760253, "marked_uncollectible_at"=>nil, "paid_at"=>1599760253, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599756487}}}}
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   ↳ app/jobs/process_events_job.rb:7:in `perform'
  [1m[36mWebhookEvent Load (7.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjfENoYNVR"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 13:51:00 -0400
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   [1m[36mUser Load (9.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."stripe_id" = $1 LIMIT $2[0m  [["stripe_id", "cus_EhLP4SGu6xHErI"], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   ↳ app/services/events/stripe_handler.rb:30:in `process'
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   ↳ app/jobs/process_events_job.rb:15:in `rescue in perform'
  [1m[35m (6.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   [1m[36mWebhookEvent Update (3.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "processing_errors" = $2, "updated_at" = $3 WHERE "webhook_events"."id" = $4[0m  [["state", 3], ["processing_errors", "undefined method `id' for nil:NilClass"], ["updated_at", "2020-09-10 17:51:00.856110"], ["id", 409]]
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   ↳ app/jobs/process_events_job.rb:15:in `rescue in perform'
  [1m[36mWebhookEvent Create (2.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjfENoYNVR"], ["data", "{\"id\":\"evt_1HPtv9HiibShxDkjfENoYNVR\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599760255,\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":10640,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"6515AB5-0079\",\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599760253,\"marked_uncollectible_at\":null,\"paid_at\":1599760253,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599756487}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.payment_succeeded\",\"webhook_event\":{\"id\":\"evt_1HPtv9HiibShxDkjfENoYNVR\",\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":10640,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"6515AB5-0079\",\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599760253,\"marked_uncollectible_at\":null,\"paid_at\":1599760253,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599756487}}}}"], ["created_at", "2020-09-10 17:51:00.850557"], ["updated_at", "2020-09-10 17:51:00.850557"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a]   ↳ app/jobs/process_events_job.rb:15:in `rescue in perform'
[ActiveJob] [ProcessEventsJob] [8943d41d-74eb-46b8-89c1-d5a15af1a97a] Performed ProcessEventsJob (Job ID: 8943d41d-74eb-46b8-89c1-d5a15af1a97a) from Async(default) in 65.88ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 13:51:00 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPtv9HiibShxDkjkSjQHKgx", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599760255, "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>10640, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"6515AB5-0079", "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599760253, "marked_uncollectible_at"=>nil, "paid_at"=>1599760253, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599756487}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>10640, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599760086, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPtv9HiibShxDkjkSjQHKgx", "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>10640, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"6515AB5-0079", "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599760253, "marked_uncollectible_at"=>nil, "paid_at"=>1599760253, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599756487}, "previous_attributes"=>{"amount_paid"=>0, "amount_remaining"=>10640, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "charge"=>nil, "ending_balance"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "next_payment_attempt"=>1599760086, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "paid_at"=>nil}}}}}
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HPtv9HiibShxDkjwmMjSXZm", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599760255, "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>10640, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"6515AB5-0079", "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599760253, "marked_uncollectible_at"=>nil, "paid_at"=>1599760253, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599756487}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.finalized", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HPtv9HiibShxDkjwmMjSXZm", "data"=>{"object"=>{"id"=>"in_1HPswMHiibShxDkjn8LQZfYW", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>10640, "amount_paid"=>10640, "amount_remaining"=>0, "application_fee_amount"=>nil, "attempt_count"=>1, "attempted"=>true, "auto_advance"=>false, "billing_reason"=>"subscription_cycle", "charge"=>"ch_1HPtv8HiibShxDkjXqAeQPfk", "collection_method"=>"charge_automatically", "created"=>1599756486, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_EhLP4SGu6xHErI", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "hosted_invoice_url"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4", "invoice_pdf"=>"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf", "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HPswMHiibShxDkj4hVdYCRM", "object"=>"line_item", "amount"=>10640, "currency"=>"usd", "description"=>"1 × Stewardship (at $106.40 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600361282, "start"=>1599756482}, "plan"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"plan", "active"=>false, "aggregate_usage"=>nil, "amount"=>10640, "amount_decimal"=>"10640", "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_EhLPTJkjUWTzDK", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1552582081, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>nil, "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>10640, "unit_amount_decimal"=>"10640"}, "proration"=>false, "quantity"=>1, "subscription"=>"sub_EhLP4kI8AB0j92", "subscription_item"=>"si_EhLPmaPmuSmTcv", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>nil, "number"=>"6515AB5-0079", "paid"=>true, "payment_intent"=>"pi_1HPtv7HiibShxDkjz5HSm9lQ", "period_end"=>1599756482, "period_start"=>1599151682, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"paid", "status_transitions"=>{"finalized_at"=>1599760253, "marked_uncollectible_at"=>nil, "paid_at"=>1599760253, "voided_at"=>nil}, "subscription"=>"sub_EhLP4kI8AB0j92", "subtotal"=>10640, "tax"=>nil, "tax_percent"=>nil, "total"=>10640, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>1599756487}}}}
  [1m[35m (19.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: a5f6bd62-f58c-4c56-9534-efec53d24439) to Async(default) with arguments: 410
Completed 200 OK in 76ms (Views: 1.3ms | ActiveRecord: 36.3ms | Allocations: 78437)


[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439] Performing ProcessEventsJob (Job ID: a5f6bd62-f58c-4c56-9534-efec53d24439) from Async(default) enqueued at 2020-09-10T17:51:00Z with arguments: 410
  [1m[36mWebhookEvent Load (0.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjwmMjSXZm"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Load (7.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjkSjQHKgx"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (3.0ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjwmMjSXZm"], ["data", "{\"id\":\"evt_1HPtv9HiibShxDkjwmMjSXZm\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599760255,\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":10640,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"6515AB5-0079\",\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599760253,\"marked_uncollectible_at\":null,\"paid_at\":1599760253,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599756487}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.finalized\",\"webhook_event\":{\"id\":\"evt_1HPtv9HiibShxDkjwmMjSXZm\",\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":10640,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"6515AB5-0079\",\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599760253,\"marked_uncollectible_at\":null,\"paid_at\":1599760253,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599756487}}}}"], ["created_at", "2020-09-10 17:51:00.920254"], ["updated_at", "2020-09-10 17:51:00.920254"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (4.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HPtv9HiibShxDkjkSjQHKgx"], ["data", "{\"id\":\"evt_1HPtv9HiibShxDkjkSjQHKgx\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599760255,\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":10640,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"6515AB5-0079\",\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599760253,\"marked_uncollectible_at\":null,\"paid_at\":1599760253,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599756487},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":10640,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599760086,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.updated\",\"webhook_event\":{\"id\":\"evt_1HPtv9HiibShxDkjkSjQHKgx\",\"data\":{\"object\":{\"id\":\"in_1HPswMHiibShxDkjn8LQZfYW\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":10640,\"amount_paid\":10640,\"amount_remaining\":0,\"application_fee_amount\":null,\"attempt_count\":1,\"attempted\":true,\"auto_advance\":false,\"billing_reason\":\"subscription_cycle\",\"charge\":\"ch_1HPtv8HiibShxDkjXqAeQPfk\",\"collection_method\":\"charge_automatically\",\"created\":1599756486,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_EhLP4SGu6xHErI\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"hosted_invoice_url\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4\",\"invoice_pdf\":\"https://pay.stripe.com/invoice/acct_15tUEZHiibShxDkj/invst_HzshsJVvUwPkIh0sqe5rxAquV9ovcq4/pdf\",\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HPswMHiibShxDkj4hVdYCRM\",\"object\":\"line_item\",\"amount\":10640,\"currency\":\"usd\",\"description\":\"1 × Stewardship (at $106.40 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600361282,\"start\":1599756482},\"plan\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"plan\",\"active\":false,\"aggregate_usage\":null,\"amount\":10640,\"amount_decimal\":\"10640\",\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_EhLPTJkjUWTzDK\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1552582081,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":null,\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":10640,\"unit_amount_decimal\":\"10640\"},\"proration\":false,\"quantity\":1,\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subscription_item\":\"si_EhLPmaPmuSmTcv\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HPswMHiibShxDkjn8LQZfYW/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":null,\"number\":\"6515AB5-0079\",\"paid\":true,\"payment_intent\":\"pi_1HPtv7HiibShxDkjz5HSm9lQ\",\"period_end\":1599756482,\"period_start\":1599151682,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"paid\",\"status_transitions\":{\"finalized_at\":1599760253,\"marked_uncollectible_at\":null,\"paid_at\":1599760253,\"voided_at\":null},\"subscription\":\"sub_EhLP4kI8AB0j92\",\"subtotal\":10640,\"tax\":null,\"tax_percent\":null,\"total\":10640,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":1599756487},\"previous_attributes\":{\"amount_paid\":0,\"amount_remaining\":10640,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"charge\":null,\"ending_balance\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"next_payment_attempt\":1599760086,\"number\":null,\"paid\":false,\"payment_intent\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"paid_at\":null}}}}}"], ["created_at", "2020-09-10 17:51:00.926343"], ["updated_at", "2020-09-10 17:51:00.926343"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: e30c19a0-eec7-4c8f-a672-04d19c6eef72) to Async(default) with arguments: 412
Completed 200 OK in 95ms (Views: 2.3ms | ActiveRecord: 15.0ms | Allocations: 105198)


  [1m[35m (43.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: b0c6118f-3076-4c9b-8e60-c7cb1166fe4a) to Async(default) with arguments: 411
Completed 200 OK in 119ms (Views: 1.6ms | ActiveRecord: 49.2ms | Allocations: 129004)


[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72] Performing ProcessEventsJob (Job ID: e30c19a0-eec7-4c8f-a672-04d19c6eef72) from Async(default) enqueued at 2020-09-10T17:51:00Z with arguments: 412
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   [1m[36mWebhookEvent Load (17.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 410], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a] Performing ProcessEventsJob (Job ID: b0c6118f-3076-4c9b-8e60-c7cb1166fe4a) from Async(default) enqueued at 2020-09-10T17:51:00Z with arguments: 411
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   [1m[36mWebhookEvent Load (4.1ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 412], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   [1m[36mWebhookEvent Update (7.0ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 17:51:01.017269"], ["id", 410]]
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   [1m[36mWebhookEvent Update (3.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 17:51:01.024056"], ["id", 412]]
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   [1m[35m (12.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 17:51:01.048742"], ["id", 410]]
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   [1m[35m (19.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   [1m[36mWebhookEvent Load (2.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 411], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   [1m[36mWebhookEvent Update (1.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 17:51:01.061061"], ["id", 412]]
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [a5f6bd62-f58c-4c56-9534-efec53d24439] Performed ProcessEventsJob (Job ID: a5f6bd62-f58c-4c56-9534-efec53d24439) from Async(default) in 157.75ms
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-10 17:51:01.066704"], ["id", 411]]
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e30c19a0-eec7-4c8f-a672-04d19c6eef72] Performed ProcessEventsJob (Job ID: e30c19a0-eec7-4c8f-a672-04d19c6eef72) from Async(default) in 61.74ms
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   [1m[35m (10.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   [1m[36mWebhookEvent Update (0.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-10 17:51:01.091271"], ["id", 411]]
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [b0c6118f-3076-4c9b-8e60-c7cb1166fe4a] Performed ProcessEventsJob (Job ID: b0c6118f-3076-4c9b-8e60-c7cb1166fe4a) from Async(default) in 78.18ms
  [1m[36mStripeReport Load (0.4ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" WHERE "stripe_reports"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started GET "/" for 127.0.0.1 at 2020-09-10 14:40:32 -0400
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:6:in `index'
  [1m[36mLink Load (0.5ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mPathway Load (0.8ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  Rendering home/index.html.erb within layouts/application
  Rendered home/index.html.erb within layouts/application (Duration: 3.5ms | Allocations: 3113)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1263)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.1ms | Allocations: 4823)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 352)
Completed 200 OK in 44ms (Views: 22.3ms | ActiveRecord: 4.5ms | Allocations: 28274)


Started GET "/stripe_report" for 127.0.0.1 at 2020-09-10 14:40:46 -0400
  
ActionController::RoutingError (No route matches [GET] "/stripe_report"):
  
actionpack (6.0.3.2) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
rack-contrib (2.2.0) lib/rack/contrib/response_headers.rb:17:in `call'
meta_request (0.7.2) lib/meta_request/middlewares/headers.rb:16:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.2) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.2) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.2) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.2) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.2) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (c269f5e01fdf) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.2) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (5.2.1) lib/webpacker/dev_server_proxy.rb:25:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.2) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 14:40:59 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:29:in `admin_only'
Completed 500  in 33ms (ActiveRecord: 1.4ms | Allocations: 14407)



NoMethodError - undefined method `all_stripe_reports' for #<StripeReportsController:0x000055e21fbb1488>:

Started POST "/__better_errors/8dc90ce8a18d3806/variables" for 127.0.0.1 at 2020-09-10 14:40:59 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 14:44:08 -0400
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.5ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:1
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 17.7ms | Allocations: 12395)
Completed 500  in 94ms (ActiveRecord: 11.6ms | Allocations: 49554)



ActionView::Template::Error - undefined method `name' for #<StripeReport:0x000055c8501a4c80>:
  app/views/stripe_reports/index.html.erb:2:in `view template'

Started POST "/__better_errors/c9e011c4905bd268/variables" for 127.0.0.1 at 2020-09-10 14:44:09 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 14:45:00 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.3ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:1
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:2
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:2
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 16.1ms | Allocations: 7696)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1549)
  [1m[36mProfile Load (1.0ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 22.1ms | Allocations: 14124)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | Allocations: 532)
Completed 200 OK in 542ms (Views: 523.0ms | ActiveRecord: 6.1ms | Allocations: 192140)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:09:17 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.7ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:3
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 12.6ms | Allocations: 8260)
Completed 500  in 25ms (ActiveRecord: 3.1ms | Allocations: 15539)



ActionView::Template::Error - undefined method `date' for #<StripeReport:0x000055c850193340>
Did you mean?  update:
  app/views/stripe_reports/index.html.erb:20:in `view template'

Started POST "/__better_errors/0f509e76333706ea/variables" for 127.0.0.1 at 2020-09-10 15:09:17 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:13:33 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.3ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:3
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 11.9ms | Allocations: 8179)
Completed 500  in 26ms (ActiveRecord: 2.0ms | Allocations: 15026)



ActionView::Template::Error - undefined method `date' for #<StripeReport:0x000055c84f123d98>
Did you mean?  update:
  app/views/stripe_reports/index.html.erb:20:in `view template'

Started POST "/__better_errors/4e21b4d32f1f0d17/variables" for 127.0.0.1 at 2020-09-10 15:13:33 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:13:36 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.5ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:3
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 13.6ms | Allocations: 7957)
Completed 500  in 28ms (ActiveRecord: 2.6ms | Allocations: 13870)



ActionView::Template::Error - undefined method `date' for #<StripeReport:0x000055c84fb09c68>
Did you mean?  update:
  app/views/stripe_reports/index.html.erb:20:in `view template'

Started POST "/__better_errors/e777c47f0803739b/variables" for 127.0.0.1 at 2020-09-10 15:13:36 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:14:18 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (1.1ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:3
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 21.9ms | Allocations: 8462)
Completed 500  in 62ms (ActiveRecord: 3.7ms | Allocations: 15296)



ActionView::Template::Error - undefined method `created_on' for #<StripeReport:0x00007fc80062bc48>
Did you mean?  created_at
               created_at?
               created_at=:
  app/views/stripe_reports/index.html.erb:20:in `view template'

Started POST "/__better_errors/c90a4c03423ed865/variables" for 127.0.0.1 at 2020-09-10 15:14:19 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:14:33 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (1.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.4ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:3
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 13.8ms | Allocations: 8203)
Completed 500  in 30ms (ActiveRecord: 2.9ms | Allocations: 14097)



ActionView::Template::Error - undefined method `created_on' for #<StripeReport:0x00007fc8004bfd78>
Did you mean?  created_at
               created_at?
               created_at=:
  app/views/stripe_reports/index.html.erb:20:in `view template'

Started POST "/__better_errors/4b90f5d166004858/variables" for 127.0.0.1 at 2020-09-10 15:14:33 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:14:38 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.4ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:3
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 14.9ms | Allocations: 8203)
Completed 500  in 35ms (ActiveRecord: 2.7ms | Allocations: 14096)



ActionView::Template::Error - undefined method `created_on' for #<StripeReport:0x00007fc7e8031328>
Did you mean?  created_at
               created_at?
               created_at=:
  app/views/stripe_reports/index.html.erb:20:in `view template'

Started POST "/__better_errors/7bfcfe8d25b70e53/variables" for 127.0.0.1 at 2020-09-10 15:14:38 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:15:39 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (1.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (1.0ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:3
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 42.9ms | Allocations: 7823)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1513)
  [1m[36mProfile Load (1.1ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 8.9ms | Allocations: 3385)
  Rendered layouts/_footer.html.erb (Duration: 1.8ms | Allocations: 513)
Completed 200 OK in 105ms (Views: 74.1ms | ActiveRecord: 6.5ms | Allocations: 26478)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:18:38 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.3ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 10.9ms | Allocations: 5684)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1512)
  [1m[36mProfile Load (0.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 6.9ms | Allocations: 3361)
  Rendered layouts/_footer.html.erb (Duration: 1.3ms | Allocations: 504)
Completed 200 OK in 42ms (Views: 29.3ms | ActiveRecord: 3.0ms | Allocations: 24163)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:19:39 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.3ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 9.9ms | Allocations: 5680)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1512)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 5.2ms | Allocations: 3361)
  Rendered layouts/_footer.html.erb (Duration: 1.3ms | Allocations: 506)
Completed 200 OK in 51ms (Views: 33.8ms | ActiveRecord: 3.7ms | Allocations: 24214)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:24:37 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.6ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 14.4ms | Allocations: 6871)
Completed 500  in 32ms (ActiveRecord: 2.6ms | Allocations: 13713)



ActionView::Template::Error - undefined method `number_to_currency' for 13300:Integer:
  app/views/stripe_reports/index.html.erb:19:in `view template'

Started POST "/__better_errors/ca7ee2042de9bda1/variables" for 127.0.0.1 at 2020-09-10 15:24:37 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:25:22 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (1.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.5ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 9.6ms | Allocations: 5253)
Completed 500  in 40ms (ActiveRecord: 3.0ms | Allocations: 12073)



ActionView::Template::Error - wrong number of arguments (given 0, expected 1..2):
  app/views/stripe_reports/index.html.erb:19:in `view template'

Started POST "/__better_errors/18373fcb117818d6/variables" for 127.0.0.1 at 2020-09-10 15:25:22 -0400
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:27:05 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (1.1ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 45.2ms | Allocations: 9922)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1512)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 4.3ms | Allocations: 3361)
  Rendered layouts/_footer.html.erb (Duration: 0.9ms | Allocations: 508)
Completed 200 OK in 98ms (Views: 65.6ms | ActiveRecord: 5.4ms | Allocations: 28460)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:28:53 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.7ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 12.0ms | Allocations: 6244)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1513)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 5.3ms | Allocations: 3361)
  Rendered layouts/_footer.html.erb (Duration: 1.6ms | Allocations: 504)
Completed 200 OK in 47ms (Views: 36.5ms | ActiveRecord: 2.5ms | Allocations: 24701)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 15:31:26 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (1.2ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 13.7ms | Allocations: 6245)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1512)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 6.1ms | Allocations: 3362)
  Rendered layouts/_footer.html.erb (Duration: 1.5ms | Allocations: 504)
Completed 200 OK in 52ms (Views: 39.1ms | ActiveRecord: 3.1ms | Allocations: 24790)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 18:55:07 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (4.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (2.1ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 59.7ms | Allocations: 6284)
  Rendered layouts/_header.html.erb (Duration: 4.6ms | Allocations: 1512)
  [1m[36mProfile Load (0.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 9.7ms | Allocations: 3385)
  Rendered layouts/_footer.html.erb (Duration: 1.4ms | Allocations: 506)
Completed 200 OK in 165ms (Views: 108.2ms | ActiveRecord: 13.0ms | Allocations: 25288)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 20:02:18 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (3.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (2.7ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 68.7ms | Allocations: 6059)
  Rendered layouts/_header.html.erb (Duration: 6.4ms | Allocations: 1269)
  [1m[36mProfile Load (1.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 13.5ms | Allocations: 2624)
  Rendered layouts/_footer.html.erb (Duration: 2.2ms | Allocations: 349)
Completed 200 OK in 174ms (Views: 125.1ms | ActiveRecord: 15.9ms | Allocations: 22232)


  [1m[36mStripeReport Load (0.5ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" WHERE "stripe_reports"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-10 20:17:23 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (2.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.9ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 30.2ms | Allocations: 6288)
  Rendered layouts/_header.html.erb (Duration: 3.4ms | Allocations: 1512)
  [1m[36mProfile Load (1.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 12.5ms | Allocations: 3385)
  Rendered layouts/_footer.html.erb (Duration: 2.6ms | Allocations: 504)
Completed 200 OK in 95ms (Views: 70.6ms | ActiveRecord: 7.5ms | Allocations: 25227)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 20:40:00 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HQ0J1HiibShxDkj0GF8jdEP", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599784799, "data"=>{"object"=>{"object"=>"balance", "available"=>[{"amount"=>0, "currency"=>"usd", "source_types"=>{"card"=>0}}], "instant_available"=>[{"amount"=>87734, "currency"=>"usd", "source_types"=>{"card"=>87734}}], "livemode"=>false, "pending"=>[{"amount"=>87734, "currency"=>"usd", "source_types"=>{"card"=>87734}}]}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"balance.available", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HQ0J1HiibShxDkj0GF8jdEP", "data"=>{"object"=>{"object"=>"balance", "available"=>[{"amount"=>0, "currency"=>"usd", "source_types"=>{"card"=>0}}], "instant_available"=>[{"amount"=>87734, "currency"=>"usd", "source_types"=>{"card"=>87734}}], "livemode"=>false, "pending"=>[{"amount"=>87734, "currency"=>"usd", "source_types"=>{"card"=>87734}}]}}}}
  [1m[36mWebhookEvent Load (1.7ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HQ0J1HiibShxDkj0GF8jdEP"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.9ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HQ0J1HiibShxDkj0GF8jdEP"], ["data", "{\"id\":\"evt_1HQ0J1HiibShxDkj0GF8jdEP\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599784799,\"data\":{\"object\":{\"object\":\"balance\",\"available\":[{\"amount\":0,\"currency\":\"usd\",\"source_types\":{\"card\":0}}],\"instant_available\":[{\"amount\":87734,\"currency\":\"usd\",\"source_types\":{\"card\":87734}}],\"livemode\":false,\"pending\":[{\"amount\":87734,\"currency\":\"usd\",\"source_types\":{\"card\":87734}}]}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"balance.available\",\"webhook_event\":{\"id\":\"evt_1HQ0J1HiibShxDkj0GF8jdEP\",\"data\":{\"object\":{\"object\":\"balance\",\"available\":[{\"amount\":0,\"currency\":\"usd\",\"source_types\":{\"card\":0}}],\"instant_available\":[{\"amount\":87734,\"currency\":\"usd\",\"source_types\":{\"card\":87734}}],\"livemode\":false,\"pending\":[{\"amount\":87734,\"currency\":\"usd\",\"source_types\":{\"card\":87734}}]}}}}"], ["created_at", "2020-09-11 00:40:00.508921"], ["updated_at", "2020-09-11 00:40:00.508921"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (32.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4) to Async(default) with arguments: 413
Completed 200 OK in 136ms (Views: 1.5ms | ActiveRecord: 52.3ms | Allocations: 21044)


[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4] Performing ProcessEventsJob (Job ID: 13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4) from Async(default) enqueued at 2020-09-11T00:40:00Z with arguments: 413
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   [1m[36mWebhookEvent Load (1.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 413], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   [1m[36mWebhookEvent Update (1.4ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-11 00:40:00.680353"], ["id", 413]]
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   [1m[36mWebhookEvent Update (1.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-11 00:40:00.713263"], ["id", 413]]
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4] Performed ProcessEventsJob (Job ID: 13b5eda4-2d3c-4ab1-ad8a-42f7f0ffd8f4) from Async(default) in 126.48ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 21:16:39 -0400
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 21:16:39 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HQ0sVHiibShxDkjjOt2lEWy", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599786999, "data"=>{"object"=>{"id"=>"sub_HPIkg2Wf4JBglU", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591319686, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591319686, "current_period_end"=>1600391686, "current_period_start"=>1599786886, "customer"=>"cus_HPIjAAPEFz77Q2", "days_until_due"=>nil, "default_payment_method"=>"pm_1GqU8vHiibShxDkjpCacAV50", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HPIkFHSq46Px6M", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591319686, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HPIkg2Wf4JBglU", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HPIkg2Wf4JBglU"}, "latest_invoice"=>"in_1HQ0sUHiibShxDkjY9njj8lS", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591319686, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, "previous_attributes"=>{"current_period_end"=>1599786886, "current_period_start"=>1599182086, "latest_invoice"=>"in_1HNTYOHiibShxDkjV8wkZwWV"}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"customer.subscription.updated", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HQ0sVHiibShxDkjjOt2lEWy", "data"=>{"object"=>{"id"=>"sub_HPIkg2Wf4JBglU", "object"=>"subscription", "application_fee_percent"=>nil, "billing_cycle_anchor"=>1591319686, "billing_thresholds"=>nil, "cancel_at"=>nil, "cancel_at_period_end"=>false, "canceled_at"=>nil, "collection_method"=>"charge_automatically", "created"=>1591319686, "current_period_end"=>1600391686, "current_period_start"=>1599786886, "customer"=>"cus_HPIjAAPEFz77Q2", "days_until_due"=>nil, "default_payment_method"=>"pm_1GqU8vHiibShxDkjpCacAV50", "default_source"=>nil, "default_tax_rates"=>[], "discount"=>nil, "ended_at"=>nil, "items"=>{"object"=>"list", "data"=>[{"id"=>"si_HPIkFHSq46Px6M", "object"=>"subscription_item", "billing_thresholds"=>nil, "created"=>1591319686, "metadata"=>{}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "quantity"=>88, "subscription"=>"sub_HPIkg2Wf4JBglU", "tax_rates"=>[]}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/subscription_items?subscription=sub_HPIkg2Wf4JBglU"}, "latest_invoice"=>"in_1HQ0sUHiibShxDkjY9njj8lS", "livemode"=>false, "metadata"=>{}, "next_pending_invoice_item_invoice"=>nil, "pause_collection"=>nil, "pending_invoice_item_interval"=>nil, "pending_setup_intent"=>nil, "pending_update"=>nil, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "quantity"=>88, "schedule"=>nil, "start_date"=>1591319686, "status"=>"active", "tax_percent"=>nil, "transfer_data"=>nil, "trial_end"=>nil, "trial_start"=>nil}, "previous_attributes"=>{"current_period_end"=>1599786886, "current_period_start"=>1599182086, "latest_invoice"=>"in_1HNTYOHiibShxDkjV8wkZwWV"}}}}
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HQ0sVHiibShxDkj32JudY2Y", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599786999, "data"=>{"object"=>{"id"=>"in_1HQ0sUHiibShxDkjY9njj8lS", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "billing_reason"=>"subscription_cycle", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599786998, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPIjAAPEFz77Q2", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>nil, "footer"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HQ0sUHiibShxDkjHEKtAjaX", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 × Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600391686, "start"=>1599786886}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HPIkg2Wf4JBglU", "subscription_item"=>"si_HPIkFHSq46Px6M", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HQ0sUHiibShxDkjY9njj8lS/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599790598, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599786886, "period_start"=>1599182086, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HPIkg2Wf4JBglU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HQ0sVHiibShxDkj32JudY2Y", "data"=>{"object"=>{"id"=>"in_1HQ0sUHiibShxDkjY9njj8lS", "object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "auto_advance"=>true, "billing_reason"=>"subscription_cycle", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1599786998, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPIjAAPEFz77Q2", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>nil, "footer"=>nil, "hosted_invoice_url"=>nil, "invoice_pdf"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_1HQ0sUHiibShxDkjHEKtAjaX", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 × Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600391686, "start"=>1599786886}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HPIkg2Wf4JBglU", "subscription_item"=>"si_HPIkFHSq46Px6M", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/in_1HQ0sUHiibShxDkjY9njj8lS/lines"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1599790598, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1599786886, "period_start"=>1599182086, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HPIkg2Wf4JBglU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (1.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HQ0sVHiibShxDkjjOt2lEWy"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[36mWebhookEvent Load (4.0ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HQ0sVHiibShxDkj32JudY2Y"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (3.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (4.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (10.7ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HQ0sVHiibShxDkjjOt2lEWy"], ["data", "{\"id\":\"evt_1HQ0sVHiibShxDkjjOt2lEWy\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599786999,\"data\":{\"object\":{\"id\":\"sub_HPIkg2Wf4JBglU\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591319686,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591319686,\"current_period_end\":1600391686,\"current_period_start\":1599786886,\"customer\":\"cus_HPIjAAPEFz77Q2\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GqU8vHiibShxDkjpCacAV50\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HPIkFHSq46Px6M\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591319686,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HPIkg2Wf4JBglU\"},\"latest_invoice\":\"in_1HQ0sUHiibShxDkjY9njj8lS\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591319686,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},\"previous_attributes\":{\"current_period_end\":1599786886,\"current_period_start\":1599182086,\"latest_invoice\":\"in_1HNTYOHiibShxDkjV8wkZwWV\"}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"customer.subscription.updated\",\"webhook_event\":{\"id\":\"evt_1HQ0sVHiibShxDkjjOt2lEWy\",\"data\":{\"object\":{\"id\":\"sub_HPIkg2Wf4JBglU\",\"object\":\"subscription\",\"application_fee_percent\":null,\"billing_cycle_anchor\":1591319686,\"billing_thresholds\":null,\"cancel_at\":null,\"cancel_at_period_end\":false,\"canceled_at\":null,\"collection_method\":\"charge_automatically\",\"created\":1591319686,\"current_period_end\":1600391686,\"current_period_start\":1599786886,\"customer\":\"cus_HPIjAAPEFz77Q2\",\"days_until_due\":null,\"default_payment_method\":\"pm_1GqU8vHiibShxDkjpCacAV50\",\"default_source\":null,\"default_tax_rates\":[],\"discount\":null,\"ended_at\":null,\"items\":{\"object\":\"list\",\"data\":[{\"id\":\"si_HPIkFHSq46Px6M\",\"object\":\"subscription_item\",\"billing_thresholds\":null,\"created\":1591319686,\"metadata\":{},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"quantity\":88,\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"tax_rates\":[]}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/subscription_items?subscription=sub_HPIkg2Wf4JBglU\"},\"latest_invoice\":\"in_1HQ0sUHiibShxDkjY9njj8lS\",\"livemode\":false,\"metadata\":{},\"next_pending_invoice_item_invoice\":null,\"pause_collection\":null,\"pending_invoice_item_interval\":null,\"pending_setup_intent\":null,\"pending_update\":null,\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"quantity\":88,\"schedule\":null,\"start_date\":1591319686,\"status\":\"active\",\"tax_percent\":null,\"transfer_data\":null,\"trial_end\":null,\"trial_start\":null},\"previous_attributes\":{\"current_period_end\":1599786886,\"current_period_start\":1599182086,\"latest_invoice\":\"in_1HNTYOHiibShxDkjV8wkZwWV\"}}}}"], ["created_at", "2020-09-11 01:16:39.634695"], ["updated_at", "2020-09-11 01:16:39.634695"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (6.8ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HQ0sVHiibShxDkj32JudY2Y"], ["data", "{\"id\":\"evt_1HQ0sVHiibShxDkj32JudY2Y\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599786999,\"data\":{\"object\":{\"id\":\"in_1HQ0sUHiibShxDkjY9njj8lS\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"billing_reason\":\"subscription_cycle\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599786998,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPIjAAPEFz77Q2\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":null,\"footer\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HQ0sUHiibShxDkjHEKtAjaX\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 × Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600391686,\"start\":1599786886},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"subscription_item\":\"si_HPIkFHSq46Px6M\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HQ0sUHiibShxDkjY9njj8lS/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599790598,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599786886,\"period_start\":1599182086,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.created\",\"webhook_event\":{\"id\":\"evt_1HQ0sVHiibShxDkj32JudY2Y\",\"data\":{\"object\":{\"id\":\"in_1HQ0sUHiibShxDkjY9njj8lS\",\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"auto_advance\":true,\"billing_reason\":\"subscription_cycle\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1599786998,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPIjAAPEFz77Q2\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":null,\"footer\":null,\"hosted_invoice_url\":null,\"invoice_pdf\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_1HQ0sUHiibShxDkjHEKtAjaX\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 × Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600391686,\"start\":1599786886},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"subscription_item\":\"si_HPIkFHSq46Px6M\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/in_1HQ0sUHiibShxDkjY9njj8lS/lines\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1599790598,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1599786886,\"period_start\":1599182086,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-11 01:16:39.654966"], ["updated_at", "2020-09-11 01:16:39.654966"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (28.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 40baee59-0444-49ab-a00e-e671df95b7f1) to Async(default) with arguments: 414
Completed 200 OK in 185ms (Views: 4.7ms | ActiveRecord: 57.1ms | Allocations: 67017)


  [1m[35m (68.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1] Performing ProcessEventsJob (Job ID: 40baee59-0444-49ab-a00e-e671df95b7f1) from Async(default) enqueued at 2020-09-11T01:16:39Z with arguments: 414
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 5995598d-e42f-4f23-9d3a-c72e275fd416) to Async(default) with arguments: 415
Completed 200 OK in 259ms (Views: 7.7ms | ActiveRecord: 86.1ms | Allocations: 90350)


[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416] Performing ProcessEventsJob (Job ID: 5995598d-e42f-4f23-9d3a-c72e275fd416) from Async(default) enqueued at 2020-09-11T01:16:39Z with arguments: 415
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   [1m[36mWebhookEvent Load (3.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 415], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   [1m[35m (9.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   [1m[36mWebhookEvent Update (1.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-11 01:16:39.946159"], ["id", 415]]
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   [1m[36mWebhookEvent Load (1.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 414], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   [1m[36mWebhookEvent Update (0.9ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-11 01:16:39.997501"], ["id", 414]]
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   [1m[35m (87.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   [1m[35m (3.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-11 01:16:40.078720"], ["id", 415]]
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   [1m[35m (94.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   [1m[36mWebhookEvent Update (0.5ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-11 01:16:40.110656"], ["id", 414]]
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   [1m[35m (25.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [5995598d-e42f-4f23-9d3a-c72e275fd416] Performed ProcessEventsJob (Job ID: 5995598d-e42f-4f23-9d3a-c72e275fd416) from Async(default) in 187.01ms
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   [1m[35m (10.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [40baee59-0444-49ab-a00e-e671df95b7f1] Performed ProcessEventsJob (Job ID: 40baee59-0444-49ab-a00e-e671df95b7f1) from Async(default) in 310.27ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-10 21:16:56 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HQ0smHiibShxDkjOTQTSo6c", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599787016, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600391686, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPIjAAPEFz77Q2", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_908d542820de8c", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 × Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600996486, "start"=>1600391686}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HPIkg2Wf4JBglU", "subscription_item"=>"si_HPIkFHSq46Px6M", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HPIjAAPEFz77Q2&subscription=sub_HPIkg2Wf4JBglU"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600395286, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600391686, "period_start"=>1599786886, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HPIkg2Wf4JBglU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>1, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HQ0smHiibShxDkjOTQTSo6c", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>8800, "amount_paid"=>0, "amount_remaining"=>8800, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600391686, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HPIjAAPEFz77Q2", "customer_address"=>nil, "customer_email"=>"tom.connolly@comcast.net", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_908d542820de8c", "object"=>"line_item", "amount"=>8800, "currency"=>"usd", "description"=>"88 × Stewardship (at $1.00 / week)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1600996486, "start"=>1600391686}, "plan"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "interval"=>"week", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxvLz92uVgU3a", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474549, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Weekly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"week", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>88, "subscription"=>"sub_HPIkg2Wf4JBglU", "subscription_item"=>"si_HPIkFHSq46Px6M", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HPIjAAPEFz77Q2&subscription=sub_HPIkg2Wf4JBglU"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600395286, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600391686, "period_start"=>1599786886, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HPIkg2Wf4JBglU", "subtotal"=>8800, "tax"=>nil, "tax_percent"=>nil, "total"=>8800, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (1.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HQ0smHiibShxDkjOTQTSo6c"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (3.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HQ0smHiibShxDkjOTQTSo6c"], ["data", "{\"id\":\"evt_1HQ0smHiibShxDkjOTQTSo6c\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599787016,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600391686,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPIjAAPEFz77Q2\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_908d542820de8c\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 × Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600996486,\"start\":1600391686},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"subscription_item\":\"si_HPIkFHSq46Px6M\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HPIjAAPEFz77Q2\\u0026subscription=sub_HPIkg2Wf4JBglU\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600395286,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600391686,\"period_start\":1599786886,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":1,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HQ0smHiibShxDkjOTQTSo6c\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":8800,\"amount_paid\":0,\"amount_remaining\":8800,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600391686,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HPIjAAPEFz77Q2\",\"customer_address\":null,\"customer_email\":\"tom.connolly@comcast.net\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_908d542820de8c\",\"object\":\"line_item\",\"amount\":8800,\"currency\":\"usd\",\"description\":\"88 × Stewardship (at $1.00 / week)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1600996486,\"start\":1600391686},\"plan\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"interval\":\"week\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxvLz92uVgU3a\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474549,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Weekly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"week\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":88,\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"subscription_item\":\"si_HPIkFHSq46Px6M\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HPIjAAPEFz77Q2\\u0026subscription=sub_HPIkg2Wf4JBglU\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600395286,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600391686,\"period_start\":1599786886,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HPIkg2Wf4JBglU\",\"subtotal\":8800,\"tax\":null,\"tax_percent\":null,\"total\":8800,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-11 01:16:56.934476"], ["updated_at", "2020-09-11 01:16:56.934476"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (29.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 09e3b3f8-726d-4238-af20-24821b84521c) to Async(default) with arguments: 416
Completed 200 OK in 149ms (Views: 5.6ms | ActiveRecord: 34.7ms | Allocations: 40795)


[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c] Performing ProcessEventsJob (Job ID: 09e3b3f8-726d-4238-af20-24821b84521c) from Async(default) enqueued at 2020-09-11T01:16:57Z with arguments: 416
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   [1m[36mWebhookEvent Load (1.8ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 416], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   [1m[36mWebhookEvent Update (0.8ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-11 01:16:57.084255"], ["id", 416]]
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   [1m[35m (12.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   [1m[36mWebhookEvent Update (1.3ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-11 01:16:57.129563"], ["id", 416]]
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [09e3b3f8-726d-4238-af20-24821b84521c] Performed ProcessEventsJob (Job ID: 09e3b3f8-726d-4238-af20-24821b84521c) from Async(default) in 89.69ms
Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-11 04:00:08 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (3.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (2.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (2.0ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 57.4ms | Allocations: 6323)
  Rendered layouts/_header.html.erb (Duration: 7.2ms | Allocations: 1512)
  [1m[36mProfile Load (2.1ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 17.8ms | Allocations: 3385)
  Rendered layouts/_footer.html.erb (Duration: 3.5ms | Allocations: 512)
Completed 200 OK in 167ms (Views: 120.7ms | ActiveRecord: 13.8ms | Allocations: 25335)


Started GET "/formation_talks" for 127.0.0.1 at 2020-09-11 05:01:44 -0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by FormationTalksController#index as HTML
  Rendering formation_talks/index.html.erb within layouts/application
  Rendered formation_talks/_formationBox.html.erb (Duration: 14.4ms | Allocations: 3950)
  [1m[36mFormationTalk Load (69.7ms)[0m  [1m[34mSELECT "formation_talks".* FROM "formation_talks" ORDER BY delivered_on ASC[0m
  ↳ app/views/formation_talks/index.html.erb:17
  Rendered formation_talks/index.html.erb within layouts/application (Duration: 152.5ms | Allocations: 12065)
  Rendered layouts/_header.html.erb (Duration: 7.6ms | Allocations: 1525)
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (1.7ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 265.3ms | Allocations: 32489)
  Rendered layouts/_footer.html.erb (Duration: 3.8ms | Allocations: 531)
Completed 200 OK in 560ms (Views: 438.7ms | ActiveRecord: 110.2ms | Allocations: 65711)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-11 05:32:02 -0400
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.9ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 33.8ms | Allocations: 17560)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1274)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 4.1ms | Allocations: 2624)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 349)
Completed 200 OK in 97ms (Views: 44.3ms | ActiveRecord: 13.1ms | Allocations: 46885)


Started GET "/stripe_reports" for 127.0.0.1 at 2020-09-11 09:01:13 -0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by StripeReportsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/stripe_reports_controller.rb:28:in `admin_only'
  Rendering stripe_reports/index.html.erb within layouts/application
  [1m[36mStripeReport Load (0.6ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports"[0m
  ↳ app/views/stripe_reports/index.html.erb:17
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 312], ["LIMIT", 1]]
  ↳ app/views/stripe_reports/index.html.erb:18
  Rendered stripe_reports/index.html.erb within layouts/application (Duration: 38.6ms | Allocations: 18195)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1546)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 22.1ms | Allocations: 14116)
  Rendered layouts/_footer.html.erb (Duration: 1.6ms | Allocations: 531)
Completed 200 OK in 190ms (Views: 100.4ms | ActiveRecord: 17.9ms | Allocations: 89496)


Started GET "/vestry_minutes" for 127.0.0.1 at 2020-09-11 09:01:34 -0400
Processing by VestryMinutesController#index as HTML
  Rendering vestry_minutes/index.html.erb within layouts/application
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/vestry_minutes/index.html.erb:5
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:5
  [1m[36mVestryMinute Load (64.2ms)[0m  [1m[34mSELECT "vestry_minutes".* FROM "vestry_minutes" ORDER BY created_at DESC[0m
  ↳ app/views/vestry_minutes/index.html.erb:10
  [1m[36mCACHE Role Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  Rendered vestry_minutes/index.html.erb within layouts/application (Duration: 396.3ms | Allocations: 67331)
  Rendered layouts/_header.html.erb (Duration: 2.7ms | Allocations: 1264)
  [1m[36mProfile Load (0.7ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 6.2ms | Allocations: 2600)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | Allocations: 353)
Completed 200 OK in 449ms (Views: 344.3ms | ActiveRecord: 77.8ms | Allocations: 80638)


Started GET "/vestry_minutes/31" for 127.0.0.1 at 2020-09-11 09:02:07 -0400
Processing by VestryMinutesController#show as HTML
  Parameters: {"id"=>"31"}
  [1m[36mVestryMinute Load (5.7ms)[0m  [1m[34mSELECT "vestry_minutes".* FROM "vestry_minutes" WHERE "vestry_minutes"."id" = $1 ORDER BY created_at DESC LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/vestry_minutes_controller.rb:70:in `set_vestry_minute'
  Rendering vestry_minutes/show.html.erb within layouts/application
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/vestry_minutes/show.html.erb:16
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/show.html.erb:16
  Rendered vestry_minutes/show.html.erb within layouts/application (Duration: 78.4ms | Allocations: 5961)
  Rendered layouts/_header.html.erb (Duration: 7.8ms | Allocations: 1265)
  [1m[36mProfile Load (3.9ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 16.6ms | Allocations: 2598)
  Rendered layouts/_footer.html.erb (Duration: 1.8ms | Allocations: 350)
Completed 200 OK in 180ms (Views: 148.3ms | ActiveRecord: 13.1ms | Allocations: 19549)


Started GET "/vestry_minutes/31" for 127.0.0.1 at 2020-09-11 09:26:13 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by VestryMinutesController#show as HTML
  Parameters: {"id"=>"31"}
  [1m[36mVestryMinute Load (0.7ms)[0m  [1m[34mSELECT "vestry_minutes".* FROM "vestry_minutes" WHERE "vestry_minutes"."id" = $1 ORDER BY created_at DESC LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/vestry_minutes_controller.rb:70:in `set_vestry_minute'
  Rendering vestry_minutes/show.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/vestry_minutes/show.html.erb:16
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/show.html.erb:16
  Rendered vestry_minutes/show.html.erb within layouts/application (Duration: 71.4ms | Allocations: 33306)
  Rendered layouts/_header.html.erb (Duration: 2.2ms | Allocations: 1534)
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 25.8ms | Allocations: 14506)
  Rendered layouts/_footer.html.erb (Duration: 1.4ms | Allocations: 531)
Completed 200 OK in 172ms (Views: 132.2ms | ActiveRecord: 16.2ms | Allocations: 79941)


Started GET "/vestry_minutes/31" for 127.0.0.1 at 2020-09-11 09:31:45 -0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by VestryMinutesController#show as HTML
  Parameters: {"id"=>"31"}
  [1m[36mVestryMinute Load (0.7ms)[0m  [1m[34mSELECT "vestry_minutes".* FROM "vestry_minutes" WHERE "vestry_minutes"."id" = $1 ORDER BY created_at DESC LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  ↳ app/controllers/vestry_minutes_controller.rb:70:in `set_vestry_minute'
  Rendering vestry_minutes/show.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/vestry_minutes/show.html.erb:16
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/show.html.erb:16
  Rendered vestry_minutes/show.html.erb within layouts/application (Duration: 87.0ms | Allocations: 33303)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1534)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 25.7ms | Allocations: 14506)
  Rendered layouts/_footer.html.erb (Duration: 1.4ms | Allocations: 531)
Completed 200 OK in 199ms (Views: 151.2ms | ActiveRecord: 18.8ms | Allocations: 79932)


Check it out
Started GET "/leadership/index" for 127.0.0.1 at 2020-09-11 09:34:27 -0400
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by LeadershipController#index as HTML
  Rendering leadership/index.html.erb within layouts/application
  Rendered leadership/index.html.erb within layouts/application (Duration: 15.8ms | Allocations: 5188)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1534)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 69.5ms | Allocations: 33736)
  Rendered layouts/_footer.html.erb (Duration: 1.9ms | Allocations: 527)
Completed 200 OK in 128ms (Views: 109.3ms | ActiveRecord: 8.6ms | Allocations: 59952)


Started GET "/donations/new" for 127.0.0.1 at 2020-09-11 09:35:29 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 71.8ms | Allocations: 10629)
  Rendered donations/new.html.erb within layouts/application (Duration: 87.6ms | Allocations: 13500)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1263)
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 6.8ms | Allocations: 2601)
  Rendered layouts/_footer.html.erb (Duration: 0.9ms | Allocations: 348)
Completed 200 OK in 150ms (Views: 107.0ms | ActiveRecord: 10.2ms | Allocations: 31911)


Started POST "/donations" for 127.0.0.1 at 2020-09-11 09:35:45 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"nyZUR8k9cZayJTNdz7rI/Wjkymdom3s/n+J2EvawF1yPAJ9s51tqrnAtUE45qgmMCoEYIdoPqY3gFAot6Gu79g==", "donation"=>{"dollars"=>"224"}, "commit"=>"Set up donation"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mDonation Create (1.5ms)[0m  [1m[32mINSERT INTO "donations" ("user_id", "created_at", "updated_at", "amount", "dollars") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_id", 16], ["created_at", "2020-09-11 13:35:45.598222"], ["updated_at", "2020-09-11 13:35:45.598222"], ["amount", 22400], ["dollars", 224]]
  ↳ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (28.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/donations_controller.rb:27:in `create'
Redirected to http://localhost:5000/donations/269
Completed 200 OK in 76ms (ActiveRecord: 32.6ms | Allocations: 14022)


Started GET "/donations/269" for 127.0.0.1 at 2020-09-11 09:35:45 -0400
Processing by DonationsController#show as HTML
  Parameters: {"id"=>"269"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mDonation Load (0.6ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 269], ["LIMIT", 1]]
  ↳ app/controllers/donations_controller.rb:59:in `set_donation'
  Rendering donations/show.html.erb within layouts/application
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/donations/show.html.erb:1
  Rendered donations/show.html.erb within layouts/application (Duration: 26.4ms | Allocations: 3538)
  Rendered layouts/_header.html.erb (Duration: 4.1ms | Allocations: 1264)
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.8ms | Allocations: 2599)
  Rendered layouts/_footer.html.erb (Duration: 1.9ms | Allocations: 349)
Completed 200 OK in 79ms (Views: 63.8ms | ActiveRecord: 2.1ms | Allocations: 19172)


Started POST "/checkout/create" for 127.0.0.1 at 2020-09-11 09:35:49 -0400
Processing by CheckoutController#create as JS
  Parameters: {"authenticity_token"=>"xMcnW3rC8NDaHZLecd4e6GqlVT06AgtLuOY2y10Sw083fNVYLhCVmrtRG8Bu/W7HUpBA8si17OnnKNA8M+72hg==", "id"=>"269"}
  [1m[36mDonation Load (1.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 269], ["LIMIT", 1]]
  ↳ app/controllers/checkout_controller.rb:5:in `create'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/checkout_controller.rb:12:in `create'
  Rendering checkout/create.js.erb
  Rendered checkout/create.js.erb (Duration: 1.6ms | Allocations: 185)
Completed 200 OK in 1042ms (Views: 10.3ms | ActiveRecord: 2.7ms | Allocations: 14664)


Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-11 09:35:51 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HQCPrHiibShxDkjqnShyo5g", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599831350, "data"=>{"object"=>{"id"=>"pi_1HQCPqHiibShxDkjAdfdNYh3", "object"=>"payment_intent", "amount"=>22400, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HQCPqHiibShxDkjAdfdNYh3"}, "client_secret"=>"pi_1HQCPqHiibShxDkjAdfdNYh3_secret_wk7ortq6J91rkojRVLJ9e2Sqh", "confirmation_method"=>"automatic", "created"=>1599831350, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>"req_n72HBJ9skWjOgp", "idempotency_key"=>nil}, "type"=>"payment_intent.created", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HQCPrHiibShxDkjqnShyo5g", "data"=>{"object"=>{"id"=>"pi_1HQCPqHiibShxDkjAdfdNYh3", "object"=>"payment_intent", "amount"=>22400, "amount_capturable"=>0, "amount_received"=>0, "application"=>nil, "application_fee_amount"=>nil, "canceled_at"=>nil, "cancellation_reason"=>nil, "capture_method"=>"automatic", "charges"=>{"object"=>"list", "data"=>[], "has_more"=>false, "total_count"=>0, "url"=>"/v1/charges?payment_intent=pi_1HQCPqHiibShxDkjAdfdNYh3"}, "client_secret"=>"pi_1HQCPqHiibShxDkjAdfdNYh3_secret_wk7ortq6J91rkojRVLJ9e2Sqh", "confirmation_method"=>"automatic", "created"=>1599831350, "currency"=>"usd", "customer"=>"cus_HPwCcFFXCI7BQE", "description"=>nil, "invoice"=>nil, "last_payment_error"=>nil, "livemode"=>false, "metadata"=>{}, "next_action"=>nil, "on_behalf_of"=>nil, "payment_method"=>nil, "payment_method_options"=>{"card"=>{"installments"=>nil, "network"=>nil, "request_three_d_secure"=>"automatic"}}, "payment_method_types"=>["card"], "receipt_email"=>nil, "review"=>nil, "setup_future_usage"=>nil, "shipping"=>nil, "source"=>nil, "statement_descriptor"=>nil, "statement_descriptor_suffix"=>nil, "status"=>"requires_payment_method", "transfer_data"=>nil, "transfer_group"=>nil}}}}
  [1m[36mWebhookEvent Load (3.2ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HQCPrHiibShxDkjqnShyo5g"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (2.1ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HQCPrHiibShxDkjqnShyo5g"], ["data", "{\"id\":\"evt_1HQCPrHiibShxDkjqnShyo5g\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599831350,\"data\":{\"object\":{\"id\":\"pi_1HQCPqHiibShxDkjAdfdNYh3\",\"object\":\"payment_intent\",\"amount\":22400,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HQCPqHiibShxDkjAdfdNYh3\"},\"client_secret\":\"pi_1HQCPqHiibShxDkjAdfdNYh3_secret_wk7ortq6J91rkojRVLJ9e2Sqh\",\"confirmation_method\":\"automatic\",\"created\":1599831350,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":\"req_n72HBJ9skWjOgp\",\"idempotency_key\":null},\"type\":\"payment_intent.created\",\"webhook_event\":{\"id\":\"evt_1HQCPrHiibShxDkjqnShyo5g\",\"data\":{\"object\":{\"id\":\"pi_1HQCPqHiibShxDkjAdfdNYh3\",\"object\":\"payment_intent\",\"amount\":22400,\"amount_capturable\":0,\"amount_received\":0,\"application\":null,\"application_fee_amount\":null,\"canceled_at\":null,\"cancellation_reason\":null,\"capture_method\":\"automatic\",\"charges\":{\"object\":\"list\",\"data\":[],\"has_more\":false,\"total_count\":0,\"url\":\"/v1/charges?payment_intent=pi_1HQCPqHiibShxDkjAdfdNYh3\"},\"client_secret\":\"pi_1HQCPqHiibShxDkjAdfdNYh3_secret_wk7ortq6J91rkojRVLJ9e2Sqh\",\"confirmation_method\":\"automatic\",\"created\":1599831350,\"currency\":\"usd\",\"customer\":\"cus_HPwCcFFXCI7BQE\",\"description\":null,\"invoice\":null,\"last_payment_error\":null,\"livemode\":false,\"metadata\":{},\"next_action\":null,\"on_behalf_of\":null,\"payment_method\":null,\"payment_method_options\":{\"card\":{\"installments\":null,\"network\":null,\"request_three_d_secure\":\"automatic\"}},\"payment_method_types\":[\"card\"],\"receipt_email\":null,\"review\":null,\"setup_future_usage\":null,\"shipping\":null,\"source\":null,\"statement_descriptor\":null,\"statement_descriptor_suffix\":null,\"status\":\"requires_payment_method\",\"transfer_data\":null,\"transfer_group\":null}}}}"], ["created_at", "2020-09-11 13:35:51.569035"], ["updated_at", "2020-09-11 13:35:51.569035"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (9.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: e5d9a97f-5227-4989-b004-8879da259608) to Async(default) with arguments: 417
Completed 200 OK in 173ms (Views: 3.5ms | ActiveRecord: 27.3ms | Allocations: 26106)


[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608] Performing ProcessEventsJob (Job ID: e5d9a97f-5227-4989-b004-8879da259608) from Async(default) enqueued at 2020-09-11T13:35:51Z with arguments: 417
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   [1m[36mWebhookEvent Load (0.4ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 417], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   [1m[36mWebhookEvent Update (2.2ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-11 13:35:51.705933"], ["id", 417]]
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-11 13:35:51.733902"], ["id", 417]]
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   [1m[35m (10.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [e5d9a97f-5227-4989-b004-8879da259608] Performed ProcessEventsJob (Job ID: e5d9a97f-5227-4989-b004-8879da259608) from Async(default) in 75.07ms
Started POST "/webhook_events/stripe" for 127.0.0.1 at 2020-09-11 09:35:53 -0400
Processing by WebhookEventsController#create as XML
  Parameters: {"id"=>"evt_1HQCPtHiibShxDkjCQSWtSZo", "object"=>"event", "api_version"=>"2020-03-02", "created"=>1599831353, "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>40000, "amount_paid"=>0, "amount_remaining"=>40000, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600436063, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HUMaTDMu2gDNBg", "customer_address"=>nil, "customer_email"=>"bb@bonblur.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_d43f787df24d30", "object"=>"line_item", "amount"=>40000, "currency"=>"usd", "description"=>"400 × Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1603028063, "start"=>1600436063}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>400, "subscription"=>"sub_HUMckDwPKludCS", "subscription_item"=>"si_HUMcZCrtyeSK7p", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HUMaTDMu2gDNBg&subscription=sub_HUMckDwPKludCS"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600439663, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600436063, "period_start"=>1597757663, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HUMckDwPKludCS", "subtotal"=>40000, "tax"=>nil, "tax_percent"=>nil, "total"=>40000, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}, "livemode"=>false, "pending_webhooks"=>2, "request"=>{"id"=>nil, "idempotency_key"=>nil}, "type"=>"invoice.upcoming", "source"=>"stripe", "webhook_event"=>{"id"=>"evt_1HQCPtHiibShxDkjCQSWtSZo", "data"=>{"object"=>{"object"=>"invoice", "account_country"=>"US", "account_name"=>"St. Paul's Episcopal Church", "amount_due"=>40000, "amount_paid"=>0, "amount_remaining"=>40000, "application_fee_amount"=>nil, "attempt_count"=>0, "attempted"=>false, "billing_reason"=>"upcoming", "charge"=>nil, "collection_method"=>"charge_automatically", "created"=>1600436063, "currency"=>"usd", "custom_fields"=>nil, "customer"=>"cus_HUMaTDMu2gDNBg", "customer_address"=>nil, "customer_email"=>"bb@bonblur.com", "customer_name"=>nil, "customer_phone"=>nil, "customer_shipping"=>nil, "customer_tax_exempt"=>"none", "customer_tax_ids"=>[], "default_payment_method"=>nil, "default_source"=>nil, "default_tax_rates"=>[], "description"=>nil, "discount"=>nil, "discounts"=>[], "due_date"=>nil, "ending_balance"=>0, "footer"=>nil, "lines"=>{"object"=>"list", "data"=>[{"id"=>"il_tmp_d43f787df24d30", "object"=>"line_item", "amount"=>40000, "currency"=>"usd", "description"=>"400 × Stewardship (at $1.00 / month)", "discount_amounts"=>[], "discountable"=>true, "discounts"=>[], "livemode"=>false, "metadata"=>{}, "period"=>{"end"=>1603028063, "start"=>1600436063}, "plan"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"plan", "active"=>true, "aggregate_usage"=>nil, "amount"=>100, "amount_decimal"=>"100", "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "interval"=>"month", "interval_count"=>1, "livemode"=>false, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "tiers"=>nil, "tiers_mode"=>nil, "transform_usage"=>nil, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "price"=>{"id"=>"plan_HCxus7BSYo1eSh", "object"=>"price", "active"=>true, "billing_scheme"=>"per_unit", "created"=>1588474487, "currency"=>"usd", "livemode"=>false, "lookup_key"=>nil, "metadata"=>{}, "nickname"=>"Monthly", "product"=>"prod_ETteQ8s9Ho9sNW", "recurring"=>{"aggregate_usage"=>nil, "interval"=>"month", "interval_count"=>1, "trial_period_days"=>nil, "usage_type"=>"licensed"}, "tiers_mode"=>nil, "transform_quantity"=>nil, "type"=>"recurring", "unit_amount"=>100, "unit_amount_decimal"=>"100"}, "proration"=>false, "quantity"=>400, "subscription"=>"sub_HUMckDwPKludCS", "subscription_item"=>"si_HUMcZCrtyeSK7p", "tax_amounts"=>[], "tax_rates"=>[], "type"=>"subscription"}], "has_more"=>false, "total_count"=>1, "url"=>"/v1/invoices/upcoming/lines?customer=cus_HUMaTDMu2gDNBg&subscription=sub_HUMckDwPKludCS"}, "livemode"=>false, "metadata"=>{}, "next_payment_attempt"=>1600439663, "number"=>nil, "paid"=>false, "payment_intent"=>nil, "period_end"=>1600436063, "period_start"=>1597757663, "post_payment_credit_notes_amount"=>0, "pre_payment_credit_notes_amount"=>0, "receipt_number"=>nil, "starting_balance"=>0, "statement_descriptor"=>nil, "status"=>"draft", "status_transitions"=>{"finalized_at"=>nil, "marked_uncollectible_at"=>nil, "paid_at"=>nil, "voided_at"=>nil}, "subscription"=>"sub_HUMckDwPKludCS", "subtotal"=>40000, "tax"=>nil, "tax_percent"=>nil, "total"=>40000, "total_discount_amounts"=>[], "total_tax_amounts"=>[], "transfer_data"=>nil, "webhooks_delivered_at"=>nil}}}}
  [1m[36mWebhookEvent Load (0.9ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."source" = $1 AND "webhook_events"."external_id" = $2 LIMIT $3[0m  [["source", "stripe"], ["external_id", "evt_1HQCPtHiibShxDkjCQSWtSZo"], ["LIMIT", 1]]
  ↳ app/controllers/webhook_events_controller.rb:11:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[36mWebhookEvent Create (1.0ms)[0m  [1m[32mINSERT INTO "webhook_events" ("source", "external_id", "data", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["source", "stripe"], ["external_id", "evt_1HQCPtHiibShxDkjCQSWtSZo"], ["data", "{\"id\":\"evt_1HQCPtHiibShxDkjCQSWtSZo\",\"object\":\"event\",\"api_version\":\"2020-03-02\",\"created\":1599831353,\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":40000,\"amount_paid\":0,\"amount_remaining\":40000,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600436063,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HUMaTDMu2gDNBg\",\"customer_address\":null,\"customer_email\":\"bb@bonblur.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_d43f787df24d30\",\"object\":\"line_item\",\"amount\":40000,\"currency\":\"usd\",\"description\":\"400 × Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1603028063,\"start\":1600436063},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":400,\"subscription\":\"sub_HUMckDwPKludCS\",\"subscription_item\":\"si_HUMcZCrtyeSK7p\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HUMaTDMu2gDNBg\\u0026subscription=sub_HUMckDwPKludCS\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600439663,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600436063,\"period_start\":1597757663,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HUMckDwPKludCS\",\"subtotal\":40000,\"tax\":null,\"tax_percent\":null,\"total\":40000,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}},\"livemode\":false,\"pending_webhooks\":2,\"request\":{\"id\":null,\"idempotency_key\":null},\"type\":\"invoice.upcoming\",\"webhook_event\":{\"id\":\"evt_1HQCPtHiibShxDkjCQSWtSZo\",\"data\":{\"object\":{\"object\":\"invoice\",\"account_country\":\"US\",\"account_name\":\"St. Paul's Episcopal Church\",\"amount_due\":40000,\"amount_paid\":0,\"amount_remaining\":40000,\"application_fee_amount\":null,\"attempt_count\":0,\"attempted\":false,\"billing_reason\":\"upcoming\",\"charge\":null,\"collection_method\":\"charge_automatically\",\"created\":1600436063,\"currency\":\"usd\",\"custom_fields\":null,\"customer\":\"cus_HUMaTDMu2gDNBg\",\"customer_address\":null,\"customer_email\":\"bb@bonblur.com\",\"customer_name\":null,\"customer_phone\":null,\"customer_shipping\":null,\"customer_tax_exempt\":\"none\",\"customer_tax_ids\":[],\"default_payment_method\":null,\"default_source\":null,\"default_tax_rates\":[],\"description\":null,\"discount\":null,\"discounts\":[],\"due_date\":null,\"ending_balance\":0,\"footer\":null,\"lines\":{\"object\":\"list\",\"data\":[{\"id\":\"il_tmp_d43f787df24d30\",\"object\":\"line_item\",\"amount\":40000,\"currency\":\"usd\",\"description\":\"400 × Stewardship (at $1.00 / month)\",\"discount_amounts\":[],\"discountable\":true,\"discounts\":[],\"livemode\":false,\"metadata\":{},\"period\":{\"end\":1603028063,\"start\":1600436063},\"plan\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"plan\",\"active\":true,\"aggregate_usage\":null,\"amount\":100,\"amount_decimal\":\"100\",\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"interval\":\"month\",\"interval_count\":1,\"livemode\":false,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"tiers\":null,\"tiers_mode\":null,\"transform_usage\":null,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"price\":{\"id\":\"plan_HCxus7BSYo1eSh\",\"object\":\"price\",\"active\":true,\"billing_scheme\":\"per_unit\",\"created\":1588474487,\"currency\":\"usd\",\"livemode\":false,\"lookup_key\":null,\"metadata\":{},\"nickname\":\"Monthly\",\"product\":\"prod_ETteQ8s9Ho9sNW\",\"recurring\":{\"aggregate_usage\":null,\"interval\":\"month\",\"interval_count\":1,\"trial_period_days\":null,\"usage_type\":\"licensed\"},\"tiers_mode\":null,\"transform_quantity\":null,\"type\":\"recurring\",\"unit_amount\":100,\"unit_amount_decimal\":\"100\"},\"proration\":false,\"quantity\":400,\"subscription\":\"sub_HUMckDwPKludCS\",\"subscription_item\":\"si_HUMcZCrtyeSK7p\",\"tax_amounts\":[],\"tax_rates\":[],\"type\":\"subscription\"}],\"has_more\":false,\"total_count\":1,\"url\":\"/v1/invoices/upcoming/lines?customer=cus_HUMaTDMu2gDNBg\\u0026subscription=sub_HUMckDwPKludCS\"},\"livemode\":false,\"metadata\":{},\"next_payment_attempt\":1600439663,\"number\":null,\"paid\":false,\"payment_intent\":null,\"period_end\":1600436063,\"period_start\":1597757663,\"post_payment_credit_notes_amount\":0,\"pre_payment_credit_notes_amount\":0,\"receipt_number\":null,\"starting_balance\":0,\"statement_descriptor\":null,\"status\":\"draft\",\"status_transitions\":{\"finalized_at\":null,\"marked_uncollectible_at\":null,\"paid_at\":null,\"voided_at\":null},\"subscription\":\"sub_HUMckDwPKludCS\",\"subtotal\":40000,\"tax\":null,\"tax_percent\":null,\"total\":40000,\"total_discount_amounts\":[],\"total_tax_amounts\":[],\"transfer_data\":null,\"webhooks_delivered_at\":null}}}}"], ["created_at", "2020-09-11 13:35:53.337198"], ["updated_at", "2020-09-11 13:35:53.337198"]]
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
  [1m[35m (30.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/webhook_events_controller.rb:16:in `create'
[ActiveJob] Enqueued ProcessEventsJob (Job ID: 3d2b6441-3b90-4588-8eae-43ac62ea3823) to Async(default) with arguments: 418
Completed 200 OK in 133ms (Views: 2.1ms | ActiveRecord: 32.7ms | Allocations: 41284)


[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823] Performing ProcessEventsJob (Job ID: 3d2b6441-3b90-4588-8eae-43ac62ea3823) from Async(default) enqueued at 2020-09-11T13:35:53Z with arguments: 418
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   [1m[36mWebhookEvent Load (0.5ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" WHERE "webhook_events"."id" = $1 LIMIT $2[0m  [["id", 418], ["LIMIT", 1]]
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   ↳ app/jobs/process_events_job.rb:5:in `perform'
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   [1m[36mWebhookEvent Update (1.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 1], ["updated_at", "2020-09-11 13:35:53.468517"], ["id", 418]]
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   [1m[35m (9.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   ↳ app/jobs/process_events_job.rb:7:in `perform'
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   [1m[36mWebhookEvent Update (0.6ms)[0m  [1m[33mUPDATE "webhook_events" SET "state" = $1, "updated_at" = $2 WHERE "webhook_events"."id" = $3[0m  [["state", 2], ["updated_at", "2020-09-11 13:35:53.502754"], ["id", 418]]
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   [1m[35m (11.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823]   ↳ app/jobs/process_events_job.rb:13:in `perform'
[ActiveJob] [ProcessEventsJob] [3d2b6441-3b90-4588-8eae-43ac62ea3823] Performed ProcessEventsJob (Job ID: 3d2b6441-3b90-4588-8eae-43ac62ea3823) from Async(default) in 86.81ms
Started GET "/checkout/cancel" for 127.0.0.1 at 2020-09-11 09:36:13 -0400

AbstractController::ActionNotFound - The action 'cancel' could not be found for CheckoutController:

Started POST "/__better_errors/484402e02ede2697/variables" for 127.0.0.1 at 2020-09-11 09:36:13 -0400
Started GET "/donations/new" for 127.0.0.1 at 2020-09-11 09:36:43 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 3.0ms | Allocations: 727)
  Rendered donations/new.html.erb within layouts/application (Duration: 12.5ms | Allocations: 3224)
  Rendered layouts/_header.html.erb (Duration: 5.0ms | Allocations: 1263)
  [1m[36mProfile Load (0.7ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 7.9ms | Allocations: 2600)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | Allocations: 352)
Completed 200 OK in 50ms (Views: 43.5ms | ActiveRecord: 3.4ms | Allocations: 14946)


Started GET "/pledges/new" for 127.0.0.1 at 2020-09-11 09:36:49 -0400
Processing by PledgesController#new as HTML
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/pledges_controller.rb:48:in `change_path'
  [1m[36mPledge Load (1.3ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/controllers/pledges_controller.rb:48:in `change_path'
Redirected to http://localhost:5000/pledges/68
Filter chain halted as :change_path rendered or redirected
Completed 302 Found in 116ms (ActiveRecord: 16.6ms | Allocations: 15167)


Started GET "/pledges/68" for 127.0.0.1 at 2020-09-11 09:36:49 -0400
Processing by PledgesController#show as HTML
  Parameters: {"id"=>"68"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mPledge Load (0.3ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/controllers/pledges_controller.rb:44:in `set_pledge'
  [1m[36mPledge Load (0.2ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  ↳ app/controllers/pledges_controller.rb:44:in `set_pledge'
  Rendering pledges/show.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/pledges/show.html.erb:18
  Rendered pledges/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 2512)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1264)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.9ms | Allocations: 2599)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 360)
Completed 200 OK in 31ms (Views: 20.3ms | ActiveRecord: 1.6ms | Allocations: 20512)


  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 16], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mPledge Load (1.1ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  [1m[36mPledge Load (1.0ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" ORDER BY "pledges"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPledge Load (1.0ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mPledge Destroy (2.2ms)[0m  [1m[31mDELETE FROM "pledges" WHERE "pledges"."id" = $1[0m  [["id", 68]]
  [1m[35m (31.2ms)[0m  [1m[35mCOMMIT[0m
Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 09:59:48 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"fATf1t8AwdLDBN8lUaNauisVvMOO5zzKLG2wO525kfdhSB7Ta66GL5ScjuyVpupMLRmtFwD9RGVKMQEhATrf+w==", "id"=>"68"}
  [1m[36mPledge Load (0.8ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
Completed 500  in 12ms (ActiveRecord: 1.1ms | Allocations: 4338)



ActiveRecord::RecordNotFound - Couldn't find Pledge with 'id'=68:
  app/controllers/payment_controller.rb:5:in `create'

Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 09:59:59 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"fATf1t8AwdLDBN8lUaNauisVvMOO5zzKLG2wO525kfdhSB7Ta66GL5ScjuyVpupMLRmtFwD9RGVKMQEhATrf+w==", "id"=>"68"}
  [1m[36mPledge Load (1.0ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
Completed 500  in 9ms (ActiveRecord: 1.0ms | Allocations: 3884)



ActiveRecord::RecordNotFound - Couldn't find Pledge with 'id'=68:
  app/controllers/payment_controller.rb:5:in `create'

Started GET "/vestry_minutes" for 127.0.0.1 at 2020-09-11 10:44:17 -0400
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by VestryMinutesController#index as HTML
  Rendering vestry_minutes/index.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/vestry_minutes/index.html.erb:5
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:5
  [1m[36mVestryMinute Load (2.7ms)[0m  [1m[34mSELECT "vestry_minutes".* FROM "vestry_minutes" ORDER BY created_at DESC[0m
  ↳ app/views/vestry_minutes/index.html.erb:10
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/index.html.erb:14
  Rendered vestry_minutes/index.html.erb within layouts/application (Duration: 186.1ms | Allocations: 96301)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1533)
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 27.7ms | Allocations: 14507)
  Rendered layouts/_footer.html.erb (Duration: 1.3ms | Allocations: 531)
Completed 200 OK in 275ms (Views: 243.0ms | ActiveRecord: 21.0ms | Allocations: 136283)


Started GET "/vestry_minutes/28" for 127.0.0.1 at 2020-09-11 10:44:27 -0400
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by VestryMinutesController#show as HTML
  Parameters: {"id"=>"28"}
  [1m[36mVestryMinute Load (1.4ms)[0m  [1m[34mSELECT "vestry_minutes".* FROM "vestry_minutes" WHERE "vestry_minutes"."id" = $1 ORDER BY created_at DESC LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  ↳ app/controllers/vestry_minutes_controller.rb:70:in `set_vestry_minute'
  Rendering vestry_minutes/show.html.erb within layouts/application
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/vestry_minutes/show.html.erb:16
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/vestry_minutes/show.html.erb:16
  Rendered vestry_minutes/show.html.erb within layouts/application (Duration: 116.7ms | Allocations: 38942)
  Rendered layouts/_header.html.erb (Duration: 2.5ms | Allocations: 1533)
  [1m[36mProfile Load (0.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 31.8ms | Allocations: 14506)
  Rendered layouts/_footer.html.erb (Duration: 1.4ms | Allocations: 531)
Completed 200 OK in 242ms (Views: 181.7ms | ActiveRecord: 27.5ms | Allocations: 85537)


Started GET "/donations/new" for 127.0.0.1 at 2020-09-11 10:44:54 -0400
Processing by DonationsController#new as HTML
  Rendering donations/new.html.erb within layouts/application
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/donations/new.html.erb:4
  Rendered donations/_form.html.erb (Duration: 68.8ms | Allocations: 10629)
  Rendered donations/new.html.erb within layouts/application (Duration: 79.9ms | Allocations: 13500)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1263)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 5.1ms | Allocations: 2601)
  Rendered layouts/_footer.html.erb (Duration: 0.9ms | Allocations: 348)
Completed 200 OK in 129ms (Views: 97.9ms | ActiveRecord: 7.3ms | Allocations: 31906)


Started POST "/donations" for 127.0.0.1 at 2020-09-11 10:44:58 -0400
Processing by DonationsController#create as JS
  Parameters: {"authenticity_token"=>"u5UzJvyuHe7iMmnWqLxReUot51JtHPa2Cp9RATXAU8mrs/gN0sgG1iA6CsVerJAIKEg1FN+IJAR1aS0+Kxv/Yw==", "donation"=>{"dollars"=>""}, "commit"=>"Set up donation"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/donations_controller.rb:27:in `create'
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/donations_controller.rb:27:in `create'
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/donations_controller.rb:27:in `create'
  Rendering donations/new.html.erb within layouts/application
  Rendered donations/_form.html.erb (Duration: 6.0ms | Allocations: 650)
  Rendered donations/new.html.erb within layouts/application (Duration: 9.5ms | Allocations: 1184)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1262)
  [1m[36mProfile Load (0.6ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 7.7ms | Allocations: 2573)
  Rendered layouts/_footer.html.erb (Duration: 1.1ms | Allocations: 387)
Completed 200 OK in 110ms (Views: 42.5ms | ActiveRecord: 8.1ms | Allocations: 24641)


Started GET "/pledges/new" for 127.0.0.1 at 2020-09-11 10:45:13 -0400
Processing by PledgesController#new as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/pledges_controller.rb:48:in `change_path'
  [1m[36mPledge Load (2.7ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/controllers/pledges_controller.rb:48:in `change_path'
  Rendering pledges/new.html.erb within layouts/application
  Rendered pledges/_form.html.erb (Duration: 11.2ms | Allocations: 1909)
  Rendered pledges/new.html.erb within layouts/application (Duration: 13.5ms | Allocations: 2566)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1263)
  [1m[36mProfile Load (0.5ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.0ms | Allocations: 2600)
  Rendered layouts/_footer.html.erb (Duration: 1.3ms | Allocations: 351)
Completed 200 OK in 180ms (Views: 47.4ms | ActiveRecord: 20.7ms | Allocations: 27299)


Started POST "/pledges" for 127.0.0.1 at 2020-09-11 10:45:23 -0400
Processing by PledgesController#create as HTML
  Parameters: {"authenticity_token"=>"AMZM5Mb6Gc8OHXLS6SqXW1pzJHvdRCfZCRgv8PNizuCqIR7L2xWewkBM7BxFXhBPbNY3UynUhLCSlkaa7TilWQ==", "pledge"=>{"amount"=>"99", "plan"=>"weekly"}, "commit"=>"Continue"}
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/pledges_controller.rb:16:in `create'
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/pledges_controller.rb:16:in `create'
  [1m[36mPledge Create (40.4ms)[0m  [1m[32mINSERT INTO "pledges" ("user_id", "created_at", "updated_at", "amount", "plan", "plan_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 16], ["created_at", "2020-09-11 14:45:23.398654"], ["updated_at", "2020-09-11 14:45:23.398654"], ["amount", 99], ["plan", "weekly"], ["plan_id", "plan_HCxvLz92uVgU3a"]]
  ↳ app/controllers/pledges_controller.rb:16:in `create'
  [1m[35m (19.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/pledges_controller.rb:16:in `create'
Redirected to http://localhost:5000/pledges/88
Completed 302 Found in 144ms (ActiveRecord: 66.1ms | Allocations: 14050)


Started GET "/pledges/88" for 127.0.0.1 at 2020-09-11 10:45:23 -0400
Processing by PledgesController#show as HTML
  Parameters: {"id"=>"88"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mPledge Load (0.7ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/controllers/pledges_controller.rb:44:in `set_pledge'
  [1m[36mPledge Load (0.7ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/pledges_controller.rb:44:in `set_pledge'
  Rendering pledges/show.html.erb within layouts/application
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/pledges/show.html.erb:18
  Rendered pledges/show.html.erb within layouts/application (Duration: 11.3ms | Allocations: 2339)
  Rendered layouts/_header.html.erb (Duration: 4.7ms | Allocations: 1264)
  [1m[36mProfile Load (1.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 29.1ms | Allocations: 2599)
  Rendered layouts/_footer.html.erb (Duration: 2.3ms | Allocations: 360)
Completed 200 OK in 111ms (Views: 76.1ms | ActiveRecord: 4.5ms | Allocations: 19734)


Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:45:31 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mPledge Load (1.1ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:10:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 582ms (ActiveRecord: 72.9ms | Allocations: 18228)



ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'

Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:45:40 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mPledge Load (0.9ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:10:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 483ms (ActiveRecord: 3.9ms | Allocations: 17085)



ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'

Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:45:41 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mPledge Load (0.8ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:10:in `create'
Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:45:41 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mPledge Load (2.4ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[36mUser Load (24.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[35m (5.9ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
  ↳ app/controllers/payment_controller.rb:10:in `create'
  [1m[36mUser Exists? (6.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 407ms (ActiveRecord: 14.8ms | Allocations: 26800)



ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'

Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:45:42 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mPledge Load (0.5ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:10:in `create'
  [1m[35m (12.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[35m (6.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[36mUser Exists? (3.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[36mUser Exists? (6.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[35m (12.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 414ms (ActiveRecord: 23.7ms | Allocations: 27953)


  [1m[35m (4.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 658ms (ActiveRecord: 57.4ms | Allocations: 69384)



ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'


ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'

Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:46:00 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mPledge Load (0.8ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:10:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 574ms (ActiveRecord: 4.6ms | Allocations: 17098)



ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'

Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:46:02 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mPledge Load (1.1ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:10:in `create'
Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:46:03 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mPledge Load (1.4ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:10:in `create'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 475ms (ActiveRecord: 5.1ms | Allocations: 23280)



ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'

Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:46:03 -0400
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mPledge Load (0.8ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:10:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 334ms (ActiveRecord: 5.6ms | Allocations: 49619)



ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'

Started POST "/payment/create" for 127.0.0.1 at 2020-09-11 10:46:03 -0400
  [1m[35m (4.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Processing by PaymentController#create as JS
  Parameters: {"authenticity_token"=>"x2BWFqMd7u/8iD4YAJGYQOZH573K9ON967FntA4F2T6o+7sWzBDk3C8F6FcSR1fd5t2+VT3R9g/kUiamiv8ioA==", "id"=>"88"}
  [1m[36mUser Exists? (9.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[36mPledge Load (15.8ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:5:in `create'
  [1m[35m (6.5ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 343ms (ActiveRecord: 21.3ms | Allocations: 47513)


  [1m[36mUser Load (12.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:10:in `create'

ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'

  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  ↳ app/controllers/payment_controller.rb:15:in `create'
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/payment_controller.rb:15:in `create'
Completed 500  in 356ms (ActiveRecord: 31.1ms | Allocations: 36649)



ActiveRecord::RecordInvalid - Validation failed: Email User with this email already exists. Please log in instead of registering again.:
  app/controllers/payment_controller.rb:15:in `create'

  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 16], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (1.0ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mWebhookEvent Load (1.6ms)[0m  [1m[34mSELECT "webhook_events".* FROM "webhook_events" ORDER BY "webhook_events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mStripeReport Load (0.7ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" ORDER BY "stripe_reports"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (1.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 16], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mActiveStorage::Blob Load (1.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER($1) AND "users"."id" != $2 LIMIT $3[0m  [["email", "tom.connolly@comcast.net"], ["id", 16], ["LIMIT", 1]]
  [1m[36mPledge Load (1.0ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" ORDER BY "pledges"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mStripeReport Load (0.9ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" ORDER BY "stripe_reports"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (1.4ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (0.8ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (1.0ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 270], ["LIMIT", 1]]
  [1m[36mStripeReport Load (1.2ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" ORDER BY "stripe_reports"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."id" = $1 LIMIT $2[0m  [["id", 271], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 323], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 323], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 323], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 323], ["LIMIT", 1]]
  [1m[36mActiveStorage::Attachment Load (1.0ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 323], ["record_type", "User"], ["name", "avatar"], ["LIMIT", 1]]
  [1m[36mDonation Load (1.3ms)[0m  [1m[34mSELECT "donations".* FROM "donations" WHERE "donations"."user_id" = $1[0m  [["user_id", 323]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "donations" WHERE "donations"."user_id" = $1[0m  [["user_id", 323]]
  [1m[36mPledge Load (1.0ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."user_id" = $1 LIMIT $2[0m  [["user_id", 323], ["LIMIT", 1]]
  [1m[36mStripeReport Load (0.9ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" ORDER BY "stripe_reports"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mStripeReport Load (1.2ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" WHERE "stripe_reports"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mPledge Load (0.9ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  [1m[36mStripeReport Load (0.9ms)[0m  [1m[34mSELECT "stripe_reports".* FROM "stripe_reports" WHERE "stripe_reports"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mStripeReport Destroy (0.9ms)[0m  [1m[31mDELETE FROM "stripe_reports" WHERE "stripe_reports"."id" = $1[0m  [["id", 5]]
  [1m[35m (48.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "stripe_reports"[0m
  [1m[36mPledge Load (0.9ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" ORDER BY "pledges"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPledge Load (0.9ms)[0m  [1m[34mSELECT "pledges".* FROM "pledges" WHERE "pledges"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mDonation Load (0.9ms)[0m  [1m[34mSELECT "donations".* FROM "donations" ORDER BY "donations"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
Started GET "/" for ::1 at 2021-02-15 19:36:24 -0500
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.8ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (1.0ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (1.5ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:115
  Rendered home/index.html.erb within layouts/application (Duration: 14.0ms | Allocations: 10346)
[Webpacker] Compiling...
[Webpacker] Compilation failed:
/home/tom/.rvm/gems/ruby-2.7.2/gems/webpacker-5.2.1/lib/webpacker/runner.rb:13:in ``': No such file or directory - yarn (Errno::ENOENT)
	from /home/tom/.rvm/gems/ruby-2.7.2/gems/webpacker-5.2.1/lib/webpacker/runner.rb:13:in `initialize'
	from /home/tom/.rvm/gems/ruby-2.7.2/gems/webpacker-5.2.1/lib/webpacker/runner.rb:6:in `new'
	from /home/tom/.rvm/gems/ruby-2.7.2/gems/webpacker-5.2.1/lib/webpacker/runner.rb:6:in `run'
	from ./bin/webpack:17:in `block in <main>'
	from ./bin/webpack:16:in `chdir'
	from ./bin/webpack:16:in `<main>'

[Webpacker] Everything's up-to-date. Nothing to do
  Rendered layout layouts/application.html.erb (Duration: 349.8ms | Allocations: 19765)
Completed 500 Internal Server Error in 391ms (ActiveRecord: 18.8ms | Allocations: 36360)



Webpacker::Manifest::MissingEntryError - Webpacker can't find application.css in /home/tom/paul/public/packs/manifest.json. Possible causes:
1. You want to set webpacker.yml value of compile to true for your environment
   unless you are using the `webpack -w` or the webpack-dev-server.
2. webpack has not yet re-run to reflect updates.
3. You have misconfigured Webpacker's config/webpacker.yml file.
4. Your webpack configuration is not creating a manifest.
Your manifest contains:
{
  "application.js": "/packs/js/application-8a1a8aab883f13f3c8eb.js",
  "entrypoints": {
    "application": {
      "assets": {
        "js": [
          "/packs/js/runtime-application-0affcfa6148bf9fe46fd.js",
          "/packs/js/vendors-node_modules_rails_actiontext_app_javascript_actiontext_index_js-node_modules_rails_u-9e1a53-6ab2c038c54b2faad8a1.js",
          "/packs/js/application-8a1a8aab883f13f3c8eb.js"
        ]
      }
    }
  },
  "js/application-8a1a8aab883f13f3c8eb.js.map": "/packs/js/application-8a1a8aab883f13f3c8eb.js.map",
  "js/runtime-application-0affcfa6148bf9fe46fd.js.map": "/packs/js/runtime-application-0affcfa6148bf9fe46fd.js.map",
  "js/vendors-node_modules_rails_actiontext_app_javascript_actiontext_index_js-node_modules_rails_u-9e1a53-6ab2c038c54b2faad8a1.js": "/packs/js/vendors-node_modules_rails_actiontext_app_javascript_actiontext_index_js-node_modules_rails_u-9e1a53-6ab2c038c54b2faad8a1.js",
  "js/vendors-node_modules_rails_actiontext_app_javascript_actiontext_index_js-node_modules_rails_u-9e1a53-6ab2c038c54b2faad8a1.js.map": "/packs/js/vendors-node_modules_rails_actiontext_app_javascript_actiontext_index_js-node_modules_rails_u-9e1a53-6ab2c038c54b2faad8a1.js.map",
  "runtime-application.js": "/packs/js/runtime-application-0affcfa6148bf9fe46fd.js"
}:
  app/views/layouts/application.html.erb:13

Started POST "/__better_errors/45c6a72cecc2a1bc/variables" for ::1 at 2021-02-15 19:36:25 -0500
  [1m[36mMember Load (3.4ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE (EXTRACT(month FROM birthday) = '02' AND EXTRACT(day FROM birthday) = '15') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Member Load (0.0ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE (EXTRACT(month FROM birthday) = '02' AND EXTRACT(day FROM birthday) = '15') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <top (required)> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <top (required)> at /home/tom/paul/config/environment.rb:7)
Started GET "/" for 127.0.0.1 at 2021-02-16 10:19:02 -0500
  [1m[35m (5.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.9ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (1.0ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (1.5ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:115
  Rendered home/index.html.erb within layouts/application (Duration: 13.8ms | Allocations: 10338)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1449)
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 464], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (4.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 464], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 37.6ms | Allocations: 23239)
  Rendered layouts/_footer.html.erb (Duration: 0.9ms | Allocations: 498)
  Rendered layout layouts/application.html.erb (Duration: 55.9ms | Allocations: 37171)
Completed 200 OK in 98ms (Views: 40.0ms | ActiveRecord: 35.1ms | Allocations: 53675)


Started GET "/" for 127.0.0.1 at 2021-02-16 10:22:16 -0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (0.6ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (0.4ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:112
  Rendered home/index.html.erb within layouts/application (Duration: 12.6ms | Allocations: 16466)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1633)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 464], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 464], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 26.3ms | Allocations: 28413)
  Rendered layouts/_footer.html.erb (Duration: 0.9ms | Allocations: 498)
  Rendered layout layouts/application.html.erb (Duration: 44.3ms | Allocations: 50163)
Completed 200 OK in 77ms (Views: 38.4ms | ActiveRecord: 15.8ms | Allocations: 89460)


Started GET "/" for 127.0.0.1 at 2021-02-16 10:23:33 -0500
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (0.2ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (0.3ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:112
  Rendered home/index.html.erb within layouts/application (Duration: 4.4ms | Allocations: 4408)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1432)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 464], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 464], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.4ms | Allocations: 2657)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 476)
  Rendered layout layouts/application.html.erb (Duration: 11.3ms | Allocations: 10537)
Completed 200 OK in 21ms (Views: 11.5ms | ActiveRecord: 2.4ms | Allocations: 17379)


Started DELETE "/logout" for 127.0.0.1 at 2021-02-16 10:23:56 -0500
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"wDhSJ00u5_-M_Ld1F003q031WUP7PsnHKLYqLCv60CjfHPte9w0lMHJinC6TUgCNl0Vywrf5-KDHUA505dQHLw"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 464], ["LIMIT", 1]]
Redirected to http://localhost:5000/
Completed 302 Found in 13ms (ActiveRecord: 0.2ms | Allocations: 5898)


Started GET "/" for 127.0.0.1 at 2021-02-16 10:23:56 -0500
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (0.3ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (0.2ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:112
  Rendered home/index.html.erb within layouts/application (Duration: 4.4ms | Allocations: 4406)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1432)
  Rendered layouts/_navbar.html.erb (Duration: 2.4ms | Allocations: 1250)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 476)
  Rendered layout layouts/application.html.erb (Duration: 10.3ms | Allocations: 9185)
Completed 200 OK in 20ms (Views: 11.1ms | ActiveRecord: 2.2ms | Allocations: 15994)


Started GET "/" for 127.0.0.1 at 2021-02-16 10:48:34 -0500
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (0.4ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (0.3ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:112
  Rendered home/index.html.erb within layouts/application (Duration: 4.4ms | Allocations: 4426)
  Rendered layouts/_header.html.erb (Duration: 7.5ms | Allocations: 1432)
  Rendered layouts/_navbar.html.erb (Duration: 1.2ms | Allocations: 1282)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 488)
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | Allocations: 9196)
Completed 200 OK in 32ms (Views: 16.3ms | ActiveRecord: 4.9ms | Allocations: 18398)


Started GET "/events" for 127.0.0.1 at 2021-02-16 10:48:44 -0500
Processing by EventsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering events/index.html.erb within layouts/application
  [1m[36mEvent Load (1.7ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."date" DESC[0m
  ↳ app/views/events/index.html.erb:3
  Rendered events/index.html.erb within layouts/application (Duration: 11.1ms | Allocations: 10376)
  Rendered layout layouts/application.html.erb (Duration: 11.2ms | Allocations: 10410)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 5.5ms | Allocations: 13171)



NoMethodError - undefined method `*' for nil:NilClass
   2  <div id="hello"></div>
   3    <% @events.each do |event| %>
   4      <h2><%= event.title %></h2>
❯  5      <p><%= event.date.strftime('%A, %B %e, %Y') %>, <%= event.time %>, <%= number_to_currency event.price*0.01 %> per ticket.</p> 
   7      <br>
   8      <% if current_user && current_user.has_role?(:admin) %>
  12      <% end %>
  13    <% end %>
  15  <br>:
  app/views/events/index.html.erb:5
  app/views/events/index.html.erb:3

Started POST "/__better_errors/2c698f4811785c72/variables" for 127.0.0.1 at 2021-02-16 10:48:44 -0500
Started GET "/events" for 127.0.0.1 at 2021-02-16 10:51:35 -0500
Processing by EventsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering events/index.html.erb within layouts/application
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."date" DESC[0m
  ↳ app/views/events/index.html.erb:2
  Rendered events/index.html.erb within layouts/application (Duration: 9.5ms | Allocations: 10053)
  Rendered layout layouts/application.html.erb (Duration: 9.6ms | Allocations: 10086)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 6.1ms | Allocations: 15262)



NoMethodError - undefined method `*' for nil:NilClass
   2    <% @events.each do |event| %>
   3      <h2><%= event.title %></h2>
❯  4      <p><%= event.date.strftime('%A, %B %e, %Y') %>, <%= event.time %>, <%= number_to_currency event.price*0.01 %> per ticket.</p> 
   6      <br>
   7      <% if current_user && current_user.has_role?(:admin) %>
  11      <% end %>
  12    <% end %>
  14  <br>:
  app/views/events/index.html.erb:4
  app/views/events/index.html.erb:2

Started POST "/__better_errors/5ecd89f8962df242/variables" for 127.0.0.1 at 2021-02-16 10:51:35 -0500
Started GET "/events" for 127.0.0.1 at 2021-02-16 10:51:42 -0500
Processing by EventsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering events/index.html.erb within layouts/application
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."date" DESC[0m
  ↳ app/views/events/index.html.erb:2
  Rendered events/index.html.erb within layouts/application (Duration: 7.0ms | Allocations: 5396)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 5430)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.5ms | Allocations: 5966)



NoMethodError - undefined method `*' for nil:NilClass
   2    <% @events.each do |event| %>
   3      <h2><%= event.title %></h2>
❯  4      <p><%= event.date.strftime('%A, %B %e, %Y') %>, <%= event.time %>, <%= number_to_currency event.price*0.01 %> per ticket.</p> 
   6      <br>
   7      <% if current_user && current_user.has_role?(:admin) %>
  11      <% end %>
  12    <% end %>
  14  <br>:
  app/views/events/index.html.erb:4
  app/views/events/index.html.erb:2

Started POST "/__better_errors/713d3663dbd7baa5/variables" for 127.0.0.1 at 2021-02-16 10:51:42 -0500
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
Started GET "/events" for 127.0.0.1 at 2021-02-16 10:54:03 -0500
Processing by EventsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering events/index.html.erb within layouts/application
  [1m[36mEvent Load (1.0ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."date" DESC[0m
  ↳ app/views/events/index.html.erb:2
  Rendered events/index.html.erb within layouts/application (Duration: 14.7ms | Allocations: 5665)
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 5699)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.0ms | Allocations: 7133)



NoMethodError - undefined method `*' for nil:NilClass
   2    <% @events.each do |event| %>
   3      <h2><%= event.title %></h2>
❯  4      <p><%= event.date.strftime('%A, %B %e, %Y') %>, <%= event.time %>, <%= number_to_currency event.price*0.01 %> per ticket.</p> 
   6      <br>
   7      <% if current_user && current_user.has_role?(:admin) %>
  11      <% end %>
  12    <% end %>
  14  <br>:
  app/views/events/index.html.erb:4
  app/views/events/index.html.erb:2

Started POST "/__better_errors/e03d7e07bc6b642a/variables" for 127.0.0.1 at 2021-02-16 10:54:03 -0500
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEvent Destroy (0.9ms)[0m  [1m[31mDELETE FROM "events" WHERE "events"."id" = $1[0m  [["id", 7]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events"[0m
Started GET "/events" for 127.0.0.1 at 2021-02-16 10:55:26 -0500
Processing by EventsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering events/index.html.erb within layouts/application
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."date" DESC[0m
  ↳ app/views/events/index.html.erb:2
  Rendered events/index.html.erb within layouts/application (Duration: 33.4ms | Allocations: 8355)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1432)
  Rendered layouts/_navbar.html.erb (Duration: 1.1ms | Allocations: 1236)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 485)
  Rendered layout layouts/application.html.erb (Duration: 38.7ms | Allocations: 13078)
Completed 200 OK in 40ms (Views: 38.7ms | ActiveRecord: 0.2ms | Allocations: 13630)


Started GET "/sign_in" for 127.0.0.1 at 2021-02-16 10:55:38 -0500
Processing by Devise::SessionsController#new as HTML
  Rendering layout layouts/application.html.erb
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.6ms | Allocations: 573)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 48.5ms | Allocations: 12773)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1194)
  Rendered layouts/_navbar.html.erb (Duration: 0.4ms | Allocations: 470)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | Allocations: 315)
  Rendered layout layouts/application.html.erb (Duration: 51.2ms | Allocations: 15661)
Completed 200 OK in 55ms (Views: 53.0ms | ActiveRecord: 0.0ms | Allocations: 17888)


Started POST "/sign_in" for 127.0.0.1 at 2021-02-16 10:55:46 -0500
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"lNeyhgzaLSGJlw5TBnrxR4ByUfcg2pxFuvxUaln9ob1_rbtDF76QHZ3MdUeZAZ5jv4wWkBonhpfXyGoVzrwx5w", "user"=>{"login"=>"thomas connolly", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (lower(username) = 'thomas connolly' OR lower(email) = 'thomas connolly') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/models/user.rb:118:in `find_for_database_authentication'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "sign_in_count" = $1, "current_sign_in_at" = $2, "last_sign_in_at" = $3, "last_sign_in_ip" = $4, "updated_at" = $5 WHERE "users"."id" = $6[0m  [["sign_in_count", 581], ["current_sign_in_at", "2021-02-16 15:55:46.441850"], ["last_sign_in_at", "2020-10-11 22:47:02.566774"], ["last_sign_in_ip", "127.0.0.1/32"], ["updated_at", "2021-02-16 15:55:46.442082"], ["id", 16]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:5000/events
Completed 302 Found in 59ms (ActiveRecord: 3.2ms | Allocations: 7606)


Started GET "/events" for 127.0.0.1 at 2021-02-16 10:55:46 -0500
Processing by EventsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering events/index.html.erb within layouts/application
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."date" DESC[0m
  ↳ app/views/events/index.html.erb:2
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:15
  Rendered events/index.html.erb within layouts/application (Duration: 29.4ms | Allocations: 20308)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1192)
  [1m[36mProfile Load (1.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.1ms | Allocations: 1170)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | Allocations: 330)
  Rendered layout layouts/application.html.erb (Duration: 35.4ms | Allocations: 23958)
Completed 200 OK in 36ms (Views: 29.4ms | ActiveRecord: 6.2ms | Allocations: 24519)


Started GET "/events/new" for 127.0.0.1 at 2021-02-16 11:15:14 -0500
Processing by EventsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/events_controller.rb:58:in `admin_only'
  Rendering layout layouts/application.html.erb
  Rendering events/new.html.erb within layouts/application
  Rendered events/_form.html.erb (Duration: 27.3ms | Allocations: 9812)
  Rendered events/new.html.erb within layouts/application (Duration: 27.8ms | Allocations: 10107)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1431)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 2.6ms | Allocations: 1933)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 484)
  Rendered layout layouts/application.html.erb (Duration: 33.9ms | Allocations: 15526)
Completed 200 OK in 66ms (Views: 33.8ms | ActiveRecord: 8.8ms | Allocations: 34466)


Started POST "/events" for 127.0.0.1 at 2021-02-16 11:18:45 -0500
Processing by EventsController#create as HTML
  Parameters: {"authenticity_token"=>"9K4C2rBmh8RiTmm1seNLbuIMRSawE17FdpC7w7Lwh1i8X96-RCYyR00d-1X_bRQ3bWiTn8k7crwTlXgSbeFw0Q", "event"=>{"title"=>"Paul Todd & Paul Todd In Person", "price"=>"2500", "date"=>"2021-03-15", "time"=>"7 p.m.", "photo"=>"cl_image_tag(\"15Mar2021Todds_act7cs.jpg\")"}, "button"=>""}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/events_controller.rb:58:in `admin_only'
[31mUnpermitted parameter: :photo[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/events_controller.rb:21:in `block in create'
  [1m[36mEvent Create (1.9ms)[0m  [1m[32mINSERT INTO "events" ("title", "price", "date", "created_at", "updated_at", "time") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Paul Todd & Paul Todd In Person"], ["price", 2500], ["date", "2021-03-15"], ["created_at", "2021-02-16 16:18:45.419492"], ["updated_at", "2021-02-16 16:18:45.419492"], ["time", "7 p.m."]]
  ↳ app/controllers/events_controller.rb:21:in `block in create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/events_controller.rb:21:in `block in create'
Redirected to http://localhost:5000/events/8
Completed 302 Found in 19ms (ActiveRecord: 6.8ms | Allocations: 6763)


Started GET "/events/8" for 127.0.0.1 at 2021-02-16 11:18:45 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:54:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 2.5ms | Allocations: 1289)
  Rendered layouts/_header.html.erb (Duration: 1.0ms | Allocations: 1192)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 1.9ms | Allocations: 1188)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | Allocations: 332)
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | Allocations: 4955)
Completed 200 OK in 11ms (Views: 6.5ms | ActiveRecord: 1.2ms | Allocations: 7229)


Started GET "/events/" for 127.0.0.1 at 2021-02-16 11:19:02 -0500
Processing by EventsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering events/index.html.erb within layouts/application
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."date" DESC[0m
  ↳ app/views/events/index.html.erb:2
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:15
  Rendered events/index.html.erb within layouts/application (Duration: 11.8ms | Allocations: 8048)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1191)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 2.0ms | Allocations: 1149)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 321)
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | Allocations: 11614)
Completed 200 OK in 18ms (Views: 15.9ms | ActiveRecord: 1.4ms | Allocations: 12164)


Started GET "/events/new" for 127.0.0.1 at 2021-02-16 11:19:06 -0500
Processing by EventsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/events_controller.rb:58:in `admin_only'
  Rendering layout layouts/application.html.erb
  Rendering events/new.html.erb within layouts/application
  Rendered events/_form.html.erb (Duration: 19.2ms | Allocations: 8567)
  Rendered events/new.html.erb within layouts/application (Duration: 20.2ms | Allocations: 8857)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1191)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 2.8ms | Allocations: 1168)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | Allocations: 322)
  Rendered layout layouts/application.html.erb (Duration: 27.0ms | Allocations: 12445)
Completed 200 OK in 34ms (Views: 27.0ms | ActiveRecord: 1.0ms | Allocations: 15012)


Started POST "/events" for 127.0.0.1 at 2021-02-16 11:20:03 -0500
Processing by EventsController#create as HTML
  Parameters: {"authenticity_token"=>"LfSaCEAhSBF_JEmkEpjpswt5H1ipyWbGd_vpIlzXtsllBUZstGH9klB320RcFrbqhB3J4dDhSr8S_irzg8ZBQA", "event"=>{"title"=>"Stream it Live! Todds in Concert", "price"=>"2000", "date"=>"2021-03-15", "time"=>"7 p.m.", "photo"=>"cl_image_tag(\"15Mar2021Todds_act7cs.jpg\")"}, "button"=>""}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/controllers/events_controller.rb:58:in `admin_only'
[31mUnpermitted parameter: :photo[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/events_controller.rb:21:in `block in create'
  [1m[36mEvent Create (0.5ms)[0m  [1m[32mINSERT INTO "events" ("title", "price", "date", "created_at", "updated_at", "time") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["title", "Stream it Live! Todds in Concert"], ["price", 2000], ["date", "2021-03-15"], ["created_at", "2021-02-16 16:20:03.217157"], ["updated_at", "2021-02-16 16:20:03.217157"], ["time", "7 p.m."]]
  ↳ app/controllers/events_controller.rb:21:in `block in create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/events_controller.rb:21:in `block in create'
Redirected to http://localhost:5000/events/9
Completed 302 Found in 11ms (ActiveRecord: 2.2ms | Allocations: 4500)


Started GET "/events/9" for 127.0.0.1 at 2021-02-16 11:20:03 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:54:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 3.9ms | Allocations: 2107)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1192)
  [1m[36mProfile Load (0.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 1.9ms | Allocations: 1164)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 332)
  Rendered layout layouts/application.html.erb (Duration: 8.7ms | Allocations: 5749)
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 1.4ms | Allocations: 8036)


Started GET "/events/9" for 127.0.0.1 at 2021-02-16 11:23:28 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:54:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 2.3ms | Allocations: 1300)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1432)
  [1m[36mProfile Load (0.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 2.2ms | Allocations: 1907)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 488)
  Rendered layout layouts/application.html.erb (Duration: 8.2ms | Allocations: 6691)
Completed 200 OK in 14ms (Views: 8.6ms | ActiveRecord: 1.0ms | Allocations: 9634)


Started GET "/events/9" for 127.0.0.1 at 2021-02-16 11:27:53 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:54:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 3.8ms | Allocations: 1315)
  Rendered layouts/_header.html.erb (Duration: 3.1ms | Allocations: 1432)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 4.0ms | Allocations: 1931)
  Rendered layouts/_footer.html.erb (Duration: 0.9ms | Allocations: 486)
  Rendered layout layouts/application.html.erb (Duration: 15.5ms | Allocations: 6730)
Completed 200 OK in 42ms (Views: 16.4ms | ActiveRecord: 4.9ms | Allocations: 11999)


Started GET "/events/9" for 127.0.0.1 at 2021-02-16 11:27:54 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:54:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 4.0ms | Allocations: 1100)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1192)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 2.5ms | Allocations: 1164)
  Rendered layouts/_footer.html.erb (Duration: 1.0ms | Allocations: 330)
  Rendered layout layouts/application.html.erb (Duration: 11.4ms | Allocations: 4696)
Completed 200 OK in 17ms (Views: 11.1ms | ActiveRecord: 1.2ms | Allocations: 6807)


Started GET "/events/9" for 127.0.0.1 at 2021-02-16 11:31:50 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:54:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 3.0ms | Allocations: 1490)
  Rendered layouts/_header.html.erb (Duration: 7.1ms | Allocations: 1432)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.6ms | Allocations: 1934)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 490)
  Rendered layout layouts/application.html.erb (Duration: 16.7ms | Allocations: 6911)
Completed 200 OK in 30ms (Views: 16.9ms | ActiveRecord: 4.1ms | Allocations: 12179)


DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mEvent Load (0.9ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEvent Update (0.4ms)[0m  [1m[33mUPDATE "events" SET "updated_at" = $1, "photo" = $2 WHERE "events"."id" = $3[0m  [["updated_at", "2021-02-16 17:03:23.179328"], ["photo", "cl_image_tag(\"15Mar2021Todds_act7cs.jpg\")"], ["id", 9]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mEvent Load (0.9ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mEvent Update (0.9ms)[0m  [1m[33mUPDATE "events" SET "updated_at" = $1, "photo" = $2 WHERE "events"."id" = $3[0m  [["updated_at", "2021-02-16 17:04:36.257973"], ["photo", "cl_image_tag(\"15Mar2021Todds_act7cs.jpg\")"], ["id", 8]]
  [1m[36mTRANSACTION (19.0ms)[0m  [1m[35mCOMMIT[0m
Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:05:00 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:54:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 3.2ms | Allocations: 1493)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1432)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 2.9ms | Allocations: 1931)
  Rendered layouts/_footer.html.erb (Duration: 0.7ms | Allocations: 490)
  Rendered layout layouts/application.html.erb (Duration: 9.8ms | Allocations: 6913)
Completed 200 OK in 23ms (Views: 9.8ms | ActiveRecord: 5.0ms | Allocations: 12205)


Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:06:50 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:54:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  Rendered events/show.html.erb within layouts/application (Duration: 0.8ms | Allocations: 2471)
  Rendered layout layouts/application.html.erb (Duration: 0.9ms | Allocations: 2505)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.5ms | Allocations: 5386)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <div class="row">
  <div class="col-md-6 offset-md-3">
   <%= "#{@event.photo}", width: "100%") %>
      <p>Ticket price: <%= number_to_currency @event.price*0.01 %> </p>
      <p>Event date: <%= @event.date.strftime('%A, %B %e, %Y') %>, time: <%= @event.time %></p>
      <p><strong><%= link_to "Get tickets!", new_event_ticket_path(@event) %></strong></p>
    <% if user_signed_in? && current_user.has_role?(:admin) %>
      <%= link_to 'Edit', edit_event_path %>
    <% end %>
  </div>
</div>:

Started POST "/__better_errors/9ebc19c87d84676d/variables" for 127.0.0.1 at 2021-02-16 12:06:50 -0500
Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:24:27 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  Rendered events/show.html.erb within layouts/application (Duration: 0.9ms | Allocations: 2441)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | Allocations: 2475)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 3.5ms | Allocations: 21242)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <div class="row">
  <div class="col-md-6 offset-md-3">
   <%= "#{@event.photo}", width: "100%") %>
      <p>Ticket price: <%= number_to_currency @event.price*0.01 %> </p>
      <p>Event date: <%= @event.date.strftime('%A, %B %e, %Y') %>, time: <%= @event.time %></p>
      <p><strong><%= link_to "Get tickets!", new_event_ticket_path(@event) %></strong></p>
    <% if user_signed_in? && current_user.has_role?(:admin) %>
      <%= link_to 'Edit', edit_event_path %>
    <% end %>
  </div>
</div>:

Started POST "/__better_errors/fd5f097df6907920/variables" for 127.0.0.1 at 2021-02-16 12:24:27 -0500
Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:27:18 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.9ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  Rendered events/show.html.erb within layouts/application (Duration: 2.5ms | Allocations: 2491)
  Rendered layout layouts/application.html.erb (Duration: 2.7ms | Allocations: 2525)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 1.8ms | Allocations: 5498)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <div class="row">
  <div class="col-md-6 offset-md-3">
   <%= #{@event.photo}, width: "100%") %>
      <p>Ticket price: <%= number_to_currency @event.price*0.01 %> </p>
      <p>Event date: <%= @event.date.strftime('%A, %B %e, %Y') %>, time: <%= @event.time %></p>
      <p><strong><%= link_to "Get tickets!", new_event_ticket_path(@event) %></strong></p>
    <% if user_signed_in? && current_user.has_role?(:admin) %>
      <%= link_to 'Edit', edit_event_path %>
    <% end %>
  </div>
</div>:

Started POST "/__better_errors/1f2c787506fa50c1/variables" for 127.0.0.1 at 2021-02-16 12:27:18 -0500
Started POST "/__better_errors/1f2c787506fa50c1/eval" for 127.0.0.1 at 2021-02-16 12:27:49 -0500
Started POST "/__better_errors/1f2c787506fa50c1/eval" for 127.0.0.1 at 2021-02-16 12:28:29 -0500
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <top (required)> at /home/tom/paul/config/environment.rb:7)
Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:30:25 -0500
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  Rendered events/show.html.erb within layouts/application (Duration: 1.4ms | Allocations: 3221)
  Rendered layout layouts/application.html.erb (Duration: 1.5ms | Allocations: 3276)
Completed 500 Internal Server Error in 49ms (ActiveRecord: 6.6ms | Allocations: 37567)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <div class="row">
  <div class="col-md-6 offset-md-3">
   <%= #{@event.photo}, width: "100%") %>
      <p>Ticket price: <%= number_to_currency @event.price*0.01 %> </p>
      <p>Event date: <%= @event.date.strftime('%A, %B %e, %Y') %>, time: <%= @event.time %></p>
      <p><strong><%= link_to "Get tickets!", new_event_ticket_path(@event) %></strong></p>
    <% if user_signed_in? && current_user.has_role?(:admin) %>
      <%= link_to 'Edit', edit_event_path %>
    <% end %>
  </div>
</div>:

Started POST "/__better_errors/cc6419965010d353/variables" for 127.0.0.1 at 2021-02-16 12:30:25 -0500
Started POST "/__better_errors/cc6419965010d353/eval" for 127.0.0.1 at 2021-02-16 12:30:33 -0500
Started POST "/__better_errors/cc6419965010d353/eval" for 127.0.0.1 at 2021-02-16 12:30:39 -0500
  [1m[36mEvent Load (0.9ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:32:40 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.8ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  Rendered events/show.html.erb within layouts/application (Duration: 2.8ms | Allocations: 2495)
  Rendered layout layouts/application.html.erb (Duration: 3.1ms | Allocations: 2529)
Completed 500 Internal Server Error in 21ms (ActiveRecord: 1.7ms | Allocations: 5494)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <div class="row">
  <div class="col-md-6 offset-md-3">
   <%= cl_image_tag(15Mar2021Todds_act7cs.jpg), width: "100%" %>
      <p>Ticket price: <%= number_to_currency @event.price*0.01 %> </p>
      <p>Event date: <%= @event.date.strftime('%A, %B %e, %Y') %>, time: <%= @event.time %></p>
      <p><strong><%= link_to "Get tickets!", new_event_ticket_path(@event) %></strong></p>
    <% if user_signed_in? && current_user.has_role?(:admin) %>
      <%= link_to 'Edit', edit_event_path %>
    <% end %>
  </div>
</div>:

Started POST "/__better_errors/89e5354be9e1197e/variables" for 127.0.0.1 at 2021-02-16 12:32:40 -0500
Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:32:45 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  Rendered events/show.html.erb within layouts/application (Duration: 0.9ms | Allocations: 2483)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | Allocations: 2518)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms | Allocations: 4608)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <div class="row">
  <div class="col-md-6 offset-md-3">
   <%= cl_image_tag(15Mar2021Todds_act7cs.jpg), width: "100%" %>
      <p>Ticket price: <%= number_to_currency @event.price*0.01 %> </p>
      <p>Event date: <%= @event.date.strftime('%A, %B %e, %Y') %>, time: <%= @event.time %></p>
      <p><strong><%= link_to "Get tickets!", new_event_ticket_path(@event) %></strong></p>
    <% if user_signed_in? && current_user.has_role?(:admin) %>
      <%= link_to 'Edit', edit_event_path %>
    <% end %>
  </div>
</div>:

Started POST "/__better_errors/19ccf0974539fb36/variables" for 127.0.0.1 at 2021-02-16 12:32:45 -0500
Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:33:08 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  Rendered events/show.html.erb within layouts/application (Duration: 0.9ms | Allocations: 2495)
  Rendered layout layouts/application.html.erb (Duration: 1.0ms | Allocations: 2530)
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.4ms | Allocations: 5514)



ActionView::SyntaxErrorInTemplate - Encountered a syntax error while rendering template: check <div class="row">
  <div class="col-md-6 offset-md-3">
   <%= cl_image_tag("15Mar2021Todds_act7cs.jpg"), width: "100%" %>
      <p>Ticket price: <%= number_to_currency @event.price*0.01 %> </p>
      <p>Event date: <%= @event.date.strftime('%A, %B %e, %Y') %>, time: <%= @event.time %></p>
      <p><strong><%= link_to "Get tickets!", new_event_ticket_path(@event) %></strong></p>
    <% if user_signed_in? && current_user.has_role?(:admin) %>
      <%= link_to 'Edit', edit_event_path %>
    <% end %>
  </div>
</div>:

Started POST "/__better_errors/26e496ec9381ec98/variables" for 127.0.0.1 at 2021-02-16 12:33:08 -0500
Started POST "/__better_errors/26e496ec9381ec98/eval" for 127.0.0.1 at 2021-02-16 12:33:18 -0500
Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:35:13 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 27.6ms | Allocations: 22396)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1451)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 12.1ms | Allocations: 11009)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | Allocations: 513)
  Rendered layout layouts/application.html.erb (Duration: 44.8ms | Allocations: 37011)
Completed 200 OK in 50ms (Views: 40.1ms | ActiveRecord: 6.4ms | Allocations: 40018)


Started GET "/events/8" for 127.0.0.1 at 2021-02-16 12:36:15 -0500
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by EventsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 19.9ms | Allocations: 27175)
  Rendered layouts/_header.html.erb (Duration: 1.3ms | Allocations: 1635)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 11.9ms | Allocations: 18529)
  Rendered layouts/_footer.html.erb (Duration: 3.6ms | Allocations: 513)
  Rendered layout layouts/application.html.erb (Duration: 40.7ms | Allocations: 51938)
Completed 200 OK in 75ms (Views: 37.1ms | ActiveRecord: 12.0ms | Allocations: 91466)


Started GET "/events/8" for 127.0.0.1 at 2021-02-16 12:36:18 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 2.1ms | Allocations: 1279)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1192)
  [1m[36mProfile Load (0.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 1.5ms | Allocations: 1166)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 332)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | Allocations: 4880)
Completed 200 OK in 12ms (Views: 5.8ms | ActiveRecord: 1.3ms | Allocations: 7011)


Started GET "/events/8" for 127.0.0.1 at 2021-02-16 12:36:27 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 2.4ms | Allocations: 1275)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1191)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 1.9ms | Allocations: 1149)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 332)
  Rendered layout layouts/application.html.erb (Duration: 6.9ms | Allocations: 4853)
Completed 200 OK in 11ms (Views: 6.5ms | ActiveRecord: 1.0ms | Allocations: 6969)


Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:36:35 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.1ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 2.3ms | Allocations: 1274)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1191)
  [1m[36mProfile Load (0.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 1.6ms | Allocations: 1149)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | Allocations: 330)
  Rendered layout layouts/application.html.erb (Duration: 6.3ms | Allocations: 4849)
Completed 200 OK in 9ms (Views: 6.0ms | ActiveRecord: 0.9ms | Allocations: 6961)


Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:36:40 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.8ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 5.3ms | Allocations: 1274)
  Rendered layouts/_header.html.erb (Duration: 2.3ms | Allocations: 1191)
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 10.9ms | Allocations: 1149)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 334)
  Rendered layout layouts/application.html.erb (Duration: 21.3ms | Allocations: 4853)
Completed 200 OK in 34ms (Views: 20.7ms | ActiveRecord: 3.0ms | Allocations: 6963)


Started GET "/events/8" for 127.0.0.1 at 2021-02-16 12:37:41 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:7
  Rendered events/show.html.erb within layouts/application (Duration: 2.2ms | Allocations: 1279)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1192)
  [1m[36mProfile Load (0.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 1.6ms | Allocations: 1166)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | Allocations: 332)
  Rendered layout layouts/application.html.erb (Duration: 6.2ms | Allocations: 4880)
Completed 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 1.0ms | Allocations: 6997)


Started GET "/events/9/tickets/new" for 127.0.0.1 at 2021-02-16 12:37:57 -0500
Processing by TicketsController#new as HTML
  Parameters: {"event_id"=>"9"}
  [1m[36mEvent Load (0.5ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:40:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering tickets/new.html.erb within layouts/application
  Rendered tickets/new.html.erb within layouts/application (Duration: 10.9ms | Allocations: 8512)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1192)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 3.4ms | Allocations: 1926)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | Allocations: 327)
  Rendered layout layouts/application.html.erb (Duration: 16.7ms | Allocations: 12868)
Completed 200 OK in 32ms (Views: 17.0ms | ActiveRecord: 3.5ms | Allocations: 23089)


Started POST "/events/9/tickets" for 127.0.0.1 at 2021-02-16 12:38:14 -0500
Processing by TicketsController#create as HTML
  Parameters: {"authenticity_token"=>"z5sthmj5HSdo7HzGJ9pXq4YqsUY1l7p9FSV9Q2GUJPmsc3E1r7icBLtt_NVu_q-C0wwRYpj3bwXYUUCnPS7s8g", "ticket"=>{"price"=>"2000", "event_id"=>"9", "first_name"=>"", "last_name"=>"", "quantity"=>"1", "honey"=>""}, "commit"=>"Create order", "event_id"=>"9"}
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:40:in `set_event'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/tickets_controller.rb:24:in `create'
  [1m[36mTicket Create (20.2ms)[0m  [1m[32mINSERT INTO "tickets" ("price", "created_at", "updated_at", "event_id", "quantity", "amount", "first_name", "last_name", "honey") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["price", "2000.0"], ["created_at", "2021-02-16 17:38:14.586323"], ["updated_at", "2021-02-16 17:38:14.586323"], ["event_id", 9], ["quantity", 1], ["amount", 2000], ["first_name", ""], ["last_name", ""], ["honey", ""]]
  ↳ app/controllers/tickets_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/tickets_controller.rb:24:in `create'
Redirected to http://localhost:5000/events/9/tickets/174
Completed 302 Found in 37ms (ActiveRecord: 23.6ms | Allocations: 11870)


Started GET "/events/9/tickets/174" for 127.0.0.1 at 2021-02-16 12:38:14 -0500
Processing by TicketsController#show as HTML
  Parameters: {"event_id"=>"9", "id"=>"174"}
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:40:in `set_event'
  [1m[36mTicket Load (0.2ms)[0m  [1m[34mSELECT "tickets".* FROM "tickets" WHERE "tickets"."event_id" = $1 AND "tickets"."id" = $2 LIMIT $3[0m  [["event_id", 9], ["id", 174], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:44:in `set_ticket'
  Rendering layout layouts/application.html.erb
  Rendering tickets/show.html.erb within layouts/application
  Rendered tickets/show.html.erb within layouts/application (Duration: 7.8ms | Allocations: 13884)
  Rendered layout layouts/application.html.erb (Duration: 8.0ms | Allocations: 13918)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.4ms | Allocations: 16293)



NoMethodError - undefined method `stripe' for #<Rails::Application::Configuration:0x000055f5ba04f118>
    6  module Rails
    7    class Railtie
   90      private
   91        def method_missing(name, *args, &blk)
   96          else
❯  97            super
   98          end
   99        end
  100      end
  101    end
  102  end:
  app/views/tickets/show.html.erb:22
  app/views/tickets/show.html.erb:11

Started POST "/__better_errors/a09d70f4011157f2/variables" for 127.0.0.1 at 2021-02-16 12:38:14 -0500
Started GET "/events/" for 127.0.0.1 at 2021-02-16 12:39:47 -0500
Processing by EventsController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering events/index.html.erb within layouts/application
  [1m[36mEvent Load (0.4ms)[0m  [1m[34mSELECT "events".* FROM "events" ORDER BY "events"."date" DESC[0m
  ↳ app/views/events/index.html.erb:2
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:7
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/index.html.erb:15
  Rendered events/index.html.erb within layouts/application (Duration: 14.5ms | Allocations: 9185)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 1192)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 1.9ms | Allocations: 1167)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 324)
  Rendered layout layouts/application.html.erb (Duration: 19.5ms | Allocations: 12821)
Completed 200 OK in 21ms (Views: 18.5ms | ActiveRecord: 1.3ms | Allocations: 13503)


Started GET "/events/8/tickets/new" for 127.0.0.1 at 2021-02-16 12:44:25 -0500
Processing by TicketsController#new as HTML
  Parameters: {"event_id"=>"8"}
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:40:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering tickets/new.html.erb within layouts/application
  Rendered tickets/new.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2440)
  Rendered layouts/_header.html.erb (Duration: 2.0ms | Allocations: 1433)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 45.3ms | Allocations: 20461)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 493)
  Rendered layout layouts/application.html.erb (Duration: 56.3ms | Allocations: 26399)
Completed 200 OK in 89ms (Views: 53.9ms | ActiveRecord: 9.2ms | Allocations: 42426)


Started GET "/events/8" for 127.0.0.1 at 2021-02-16 12:45:06 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:8
  Rendered events/show.html.erb within layouts/application (Duration: 10.7ms | Allocations: 8444)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 1192)
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 1.9ms | Allocations: 1166)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 325)
  Rendered layout layouts/application.html.erb (Duration: 15.1ms | Allocations: 12040)
Completed 200 OK in 20ms (Views: 12.8ms | ActiveRecord: 3.5ms | Allocations: 14827)


Started GET "/events/9" for 127.0.0.1 at 2021-02-16 12:45:21 -0500
Processing by EventsController#show as HTML
  Parameters: {"id"=>"9"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/events_controller.rb:56:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering events/show.html.erb within layouts/application
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))[0m  [["user_id", 16]]
  ↳ app/views/events/show.html.erb:8
  Rendered events/show.html.erb within layouts/application (Duration: 2.1ms | Allocations: 1277)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1191)
  [1m[36mProfile Load (0.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 1.5ms | Allocations: 1149)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | Allocations: 323)
  Rendered layout layouts/application.html.erb (Duration: 6.0ms | Allocations: 4845)
Completed 200 OK in 9ms (Views: 5.7ms | ActiveRecord: 1.0ms | Allocations: 6847)


Started GET "/events/9/tickets/new" for 127.0.0.1 at 2021-02-16 12:46:19 -0500
Processing by TicketsController#new as HTML
  Parameters: {"event_id"=>"9"}
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:40:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering tickets/new.html.erb within layouts/application
  Rendered tickets/new.html.erb within layouts/application (Duration: 13.9ms | Allocations: 8210)
  Rendered layouts/_header.html.erb (Duration: 1.9ms | Allocations: 1433)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 36.3ms | Allocations: 19317)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 490)
  Rendered layout layouts/application.html.erb (Duration: 56.0ms | Allocations: 31019)
Completed 200 OK in 96ms (Views: 56.3ms | ActiveRecord: 4.2ms | Allocations: 48482)


Started GET "/events/9/tickets/new" for 127.0.0.1 at 2021-02-16 12:52:02 -0500
Processing by TicketsController#new as HTML
  Parameters: {"event_id"=>"9"}
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:40:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering tickets/new.html.erb within layouts/application
  Rendered tickets/new.html.erb within layouts/application (Duration: 3.0ms | Allocations: 2326)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1432)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.4ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 5.2ms | Allocations: 2736)
  Rendered layouts/_footer.html.erb (Duration: 0.8ms | Allocations: 479)
  Rendered layout layouts/application.html.erb (Duration: 12.4ms | Allocations: 8537)
Completed 200 OK in 27ms (Views: 12.7ms | ActiveRecord: 4.6ms | Allocations: 12956)


Started GET "/events/8/tickets/new" for 127.0.0.1 at 2021-02-16 12:52:19 -0500
Processing by TicketsController#new as HTML
  Parameters: {"event_id"=>"8"}
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:40:in `set_event'
  Rendering layout layouts/application.html.erb
  Rendering tickets/new.html.erb within layouts/application
  Rendered tickets/new.html.erb within layouts/application (Duration: 2.3ms | Allocations: 2036)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 1192)
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.2ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 2.4ms | Allocations: 1926)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 325)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 6386)
Completed 200 OK in 10ms (Views: 7.1ms | ActiveRecord: 0.5ms | Allocations: 7549)


Started POST "/events/8/tickets" for 127.0.0.1 at 2021-02-16 12:53:23 -0500
Processing by TicketsController#create as HTML
  Parameters: {"authenticity_token"=>"aTuFIoz04qso4FeFVZ31G1_Lpk7H9ZZwcAcz-68ST4ZlKRL0Bmvz-7T-GBI1HqYQ0FPoKGJSa2XKx42mKkWZbg", "ticket"=>{"price"=>"2500", "event_id"=>"8", "first_name"=>"to,", "last_name"=>"vom", "quantity"=>"3", "honey"=>""}, "commit"=>"Create order", "event_id"=>"8"}
  [1m[36mEvent Load (0.3ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:40:in `set_event'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/tickets_controller.rb:24:in `create'
  [1m[36mTicket Create (0.4ms)[0m  [1m[32mINSERT INTO "tickets" ("price", "created_at", "updated_at", "event_id", "quantity", "amount", "first_name", "last_name", "honey") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["price", "2500.0"], ["created_at", "2021-02-16 17:53:23.943346"], ["updated_at", "2021-02-16 17:53:23.943346"], ["event_id", 8], ["quantity", 3], ["amount", 7500], ["first_name", "to,"], ["last_name", "vom"], ["honey", ""]]
  ↳ app/controllers/tickets_controller.rb:24:in `create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/tickets_controller.rb:24:in `create'
Redirected to http://localhost:5000/events/8/tickets/175
Completed 302 Found in 17ms (ActiveRecord: 4.9ms | Allocations: 5245)


Started GET "/events/8/tickets/175" for 127.0.0.1 at 2021-02-16 12:53:23 -0500
Processing by TicketsController#show as HTML
  Parameters: {"event_id"=>"8", "id"=>"175"}
  [1m[36mEvent Load (0.2ms)[0m  [1m[34mSELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:40:in `set_event'
  [1m[36mTicket Load (0.3ms)[0m  [1m[34mSELECT "tickets".* FROM "tickets" WHERE "tickets"."event_id" = $1 AND "tickets"."id" = $2 LIMIT $3[0m  [["event_id", 8], ["id", 175], ["LIMIT", 1]]
  ↳ app/controllers/tickets_controller.rb:44:in `set_ticket'
  Rendering layout layouts/application.html.erb
  Rendering tickets/show.html.erb within layouts/application
  Rendered tickets/show.html.erb within layouts/application (Duration: 6.0ms | Allocations: 13545)
  Rendered layout layouts/application.html.erb (Duration: 6.1ms | Allocations: 13578)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.5ms | Allocations: 16191)



NoMethodError - undefined method `stripe' for #<Rails::Application::Configuration:0x000055f5ba04f118>
    6  module Rails
    7    class Railtie
   90      private
   91        def method_missing(name, *args, &blk)
   96          else
❯  97            super
   98          end
   99        end
  100      end
  101    end
  102  end:
  app/views/tickets/show.html.erb:22
  app/views/tickets/show.html.erb:11

Started POST "/__better_errors/1ac11165ac724aeb/variables" for 127.0.0.1 at 2021-02-16 12:53:24 -0500
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
DEPRECATION WARNING: Initialization autoloaded the constant ActionText::ContentHelper.

Being able to do this is deprecated. Autoloading during initialization is going
to be an error condition in future versions of Rails.

Reloading does not reboot the application, and therefore code executed during
initialization does not run again. So, if you reload ActionText::ContentHelper, for example,
the expected changes won't be reflected in that stale Module object.

This autoloaded constant has been unloaded.

In order to autoload safely at boot time, please wrap your code in a reloader
callback this way:

    Rails.application.reloader.to_prepare do
      # Autoload classes and modules needed at boot time here.
    end

That block runs when the application boots, and every time there is a reload.
For historical reasons, it may run twice, so it has to be idempotent.

Check the "Autoloading and Reloading Constants" guide to learn more about how
Rails autoloads and reloads.
 (called from <main> at /home/tom/paul/config/environment.rb:7)
Started GET "/" for 127.0.0.1 at 2021-02-16 13:31:32 -0500
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (0.4ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (0.4ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:112
  Rendered home/index.html.erb within layouts/application (Duration: 9.7ms | Allocations: 7977)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1432)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 4.6ms | Allocations: 2736)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 483)
  Rendered layout layouts/application.html.erb (Duration: 18.2ms | Allocations: 14240)
Completed 200 OK in 52ms (Views: 16.3ms | ActiveRecord: 13.1ms | Allocations: 30172)


Started GET "/" for 127.0.0.1 at 2021-02-16 13:33:32 -0500
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (0.4ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (0.4ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:112
  Rendered home/index.html.erb within layouts/application (Duration: 11.1ms | Allocations: 11137)
  Rendered layout layouts/application.html.erb (Duration: 11.1ms | Allocations: 11170)
Completed 500 Internal Server Error in 45ms (ActiveRecord: 12.6ms | Allocations: 27058)



ActionView::MissingTemplate - Missing partial home/_myModal, application/_myModal with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}. Searched in:
  * "/home/tom/paul/app/views"
  * "/home/tom/.rvm/gems/ruby-2.7.2/gems/letter_opener_web-1.4.0/app/views"
  * "/home/tom/.rvm/gems/ruby-2.7.2/gems/devise-4.7.3/app/views"
  * "/home/tom/.rvm/gems/ruby-2.7.2/gems/actiontext-6.1.2.1/app/views"
  * "/home/tom/.rvm/gems/ruby-2.7.2/gems/actionmailbox-6.1.2.1/app/views":
  app/views/home/index.html.erb:121

Started POST "/__better_errors/364990961ae05f70/variables" for 127.0.0.1 at 2021-02-16 13:33:32 -0500
  [1m[36mMember Load (21.6ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE (EXTRACT(month FROM birthday) = '02' AND EXTRACT(day FROM birthday) = '16') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Member Load (0.0ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE (EXTRACT(month FROM birthday) = '02' AND EXTRACT(day FROM birthday) = '16') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/" for 127.0.0.1 at 2021-02-16 13:35:13 -0500
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.4ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (0.3ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (0.3ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:112
  Rendered home/index.html.erb within layouts/application (Duration: 7.1ms | Allocations: 7620)
  Rendered layout layouts/application.html.erb (Duration: 7.2ms | Allocations: 7653)
Completed 500 Internal Server Error in 23ms (ActiveRecord: 3.4ms | Allocations: 14446)



ActionView::MissingTemplate - Missing partial home/_myModal, application/_myModal with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}. Searched in:
  * "/home/tom/paul/app/views"
  * "/home/tom/.rvm/gems/ruby-2.7.2/gems/letter_opener_web-1.4.0/app/views"
  * "/home/tom/.rvm/gems/ruby-2.7.2/gems/devise-4.7.3/app/views"
  * "/home/tom/.rvm/gems/ruby-2.7.2/gems/actiontext-6.1.2.1/app/views"
  * "/home/tom/.rvm/gems/ruby-2.7.2/gems/actionmailbox-6.1.2.1/app/views":
  app/views/home/index.html.erb:121

Started POST "/__better_errors/0ea97366d0ba3253/variables" for 127.0.0.1 at 2021-02-16 13:35:13 -0500
  [1m[36mMember Load (0.3ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE (EXTRACT(month FROM birthday) = '02' AND EXTRACT(day FROM birthday) = '16') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mCACHE Member Load (0.0ms)[0m  [1m[34mSELECT "members".* FROM "members" WHERE (EXTRACT(month FROM birthday) = '02' AND EXTRACT(day FROM birthday) = '16') /* loading for inspect */ LIMIT $1[0m  [["LIMIT", 11]]
Started GET "/" for 127.0.0.1 at 2021-02-16 13:36:58 -0500
Processing by HomeController#index as HTML
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_eve"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:7:in `index'
  [1m[36mLink Load (0.3ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "christmas_day"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:8:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "worship"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:9:in `index'
  [1m[36mLink Load (0.2ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:10:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "wine_time"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:11:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:12:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "tgiving_coffee"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:13:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "day_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:14:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "evening_bible"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:15:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:16:in `index'
  [1m[36mLink Load (0.1ms)[0m  [1m[34mSELECT "links".* FROM "links" WHERE "links"."event" = $1 LIMIT $2[0m  [["event", "thanksgiving_bulletin"], ["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:17:in `index'
  [1m[36mPathway Load (0.2ms)[0m  [1m[34mSELECT "pathways".* FROM "pathways" ORDER BY created_at DESC LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/home_controller.rb:18:in `index'
  Rendering layout layouts/application.html.erb
  Rendering home/index.html.erb within layouts/application
  [1m[36mEnsFeed Load (0.3ms)[0m  [1m[34mSELECT "ens_feeds".* FROM "ens_feeds" ORDER BY published_at DESC LIMIT $1[0m  [["LIMIT", 6]]
  ↳ app/views/home/index.html.erb:112
  Rendered home/index.html.erb within layouts/application (Duration: 4.3ms | Allocations: 4424)
  Rendered layouts/_header.html.erb (Duration: 1.1ms | Allocations: 1432)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:3
  [1m[36mProfile Load (0.3ms)[0m  [1m[34mSELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = $1 LIMIT $2[0m  [["user_id", 16], ["LIMIT", 1]]
  ↳ app/views/layouts/_navbar.html.erb:9
  Rendered layouts/_navbar.html.erb (Duration: 4.0ms | Allocations: 2715)
  Rendered layouts/_footer.html.erb (Duration: 0.6ms | Allocations: 474)
  Rendered layout layouts/application.html.erb (Duration: 12.1ms | Allocations: 10613)
Completed 200 OK in 22ms (Views: 12.2ms | ActiveRecord: 2.7ms | Allocations: 17433)


